(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function gh(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var x_={exports:{}},Vu={};var lw;function aA(){if(lw)return Vu;lw=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:i,type:s,key:u,ref:r!==void 0?r:null,props:l}}return Vu.Fragment=t,Vu.jsx=e,Vu.jsxs=e,Vu}var cw;function lA(){return cw||(cw=1,x_.exports=aA()),x_.exports}var Tt=lA(),S_={exports:{}},ee={};var uw;function cA(){if(uw)return ee;uw=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),w=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function I(O,G,ot){this.props=O,this.context=G,this.refs=E,this.updater=ot||x}I.prototype.isReactComponent={},I.prototype.setState=function(O,G){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,G,"setState")},I.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function B(){}B.prototype=I.prototype;function D(O,G,ot){this.props=O,this.context=G,this.refs=E,this.updater=ot||x}var F=D.prototype=new B;F.constructor=D,A(F,I.prototype),F.isPureReactComponent=!0;var R=Array.isArray;function H(){}var Z={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function V(O,G,ot){var dt=ot.ref;return{$$typeof:i,type:O,key:G,ref:dt!==void 0?dt:null,props:ot}}function W(O,G){return V(O.type,G,O.props)}function X(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function tt(O){var G={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ot){return G[ot]})}var P=/\/+/g;function J(O,G){return typeof O=="object"&&O!==null&&O.key!=null?tt(""+O.key):G.toString(36)}function $(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(H,H):(O.status="pending",O.then(function(G){O.status==="pending"&&(O.status="fulfilled",O.value=G)},function(G){O.status==="pending"&&(O.status="rejected",O.reason=G)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function U(O,G,ot,dt,gt){var mt=typeof O;(mt==="undefined"||mt==="boolean")&&(O=null);var Mt=!1;if(O===null)Mt=!0;else switch(mt){case"bigint":case"string":case"number":Mt=!0;break;case"object":switch(O.$$typeof){case i:case t:Mt=!0;break;case v:return Mt=O._init,U(Mt(O._payload),G,ot,dt,gt)}}if(Mt)return gt=gt(O),Mt=dt===""?"."+J(O,0):dt,R(gt)?(ot="",Mt!=null&&(ot=Mt.replace(P,"$&/")+"/"),U(gt,G,ot,"",function(Se){return Se})):gt!=null&&(X(gt)&&(gt=W(gt,ot+(gt.key==null||O&&O.key===gt.key?"":(""+gt.key).replace(P,"$&/")+"/")+Mt)),G.push(gt)),1;Mt=0;var Et=dt===""?".":dt+":";if(R(O))for(var ne=0;ne<O.length;ne++)dt=O[ne],mt=Et+J(dt,ne),Mt+=U(dt,G,ot,mt,gt);else if(ne=T(O),typeof ne=="function")for(O=ne.call(O),ne=0;!(dt=O.next()).done;)dt=dt.value,mt=Et+J(dt,ne++),Mt+=U(dt,G,ot,mt,gt);else if(mt==="object"){if(typeof O.then=="function")return U($(O),G,ot,dt,gt);throw G=String(O),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Mt}function Y(O,G,ot){if(O==null)return O;var dt=[],gt=0;return U(O,dt,"","",function(mt){return G.call(ot,mt,gt++)}),dt}function et(O){if(O._status===-1){var G=O._result;G=G(),G.then(function(ot){(O._status===0||O._status===-1)&&(O._status=1,O._result=ot)},function(ot){(O._status===0||O._status===-1)&&(O._status=2,O._result=ot)}),O._status===-1&&(O._status=0,O._result=G)}if(O._status===1)return O._result.default;throw O._result}var k=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},j={map:Y,forEach:function(O,G,ot){Y(O,function(){G.apply(this,arguments)},ot)},count:function(O){var G=0;return Y(O,function(){G++}),G},toArray:function(O){return Y(O,function(G){return G})||[]},only:function(O){if(!X(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return ee.Activity=y,ee.Children=j,ee.Component=I,ee.Fragment=e,ee.Profiler=r,ee.PureComponent=D,ee.StrictMode=s,ee.Suspense=p,ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,ee.__COMPILER_RUNTIME={__proto__:null,c:function(O){return Z.H.useMemoCache(O)}},ee.cache=function(O){return function(){return O.apply(null,arguments)}},ee.cacheSignal=function(){return null},ee.cloneElement=function(O,G,ot){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var dt=A({},O.props),gt=O.key;if(G!=null)for(mt in G.key!==void 0&&(gt=""+G.key),G)!q.call(G,mt)||mt==="key"||mt==="__self"||mt==="__source"||mt==="ref"&&G.ref===void 0||(dt[mt]=G[mt]);var mt=arguments.length-2;if(mt===1)dt.children=ot;else if(1<mt){for(var Mt=Array(mt),Et=0;Et<mt;Et++)Mt[Et]=arguments[Et+2];dt.children=Mt}return V(O.type,gt,dt)},ee.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},ee.createElement=function(O,G,ot){var dt,gt={},mt=null;if(G!=null)for(dt in G.key!==void 0&&(mt=""+G.key),G)q.call(G,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(gt[dt]=G[dt]);var Mt=arguments.length-2;if(Mt===1)gt.children=ot;else if(1<Mt){for(var Et=Array(Mt),ne=0;ne<Mt;ne++)Et[ne]=arguments[ne+2];gt.children=Et}if(O&&O.defaultProps)for(dt in Mt=O.defaultProps,Mt)gt[dt]===void 0&&(gt[dt]=Mt[dt]);return V(O,mt,gt)},ee.createRef=function(){return{current:null}},ee.forwardRef=function(O){return{$$typeof:f,render:O}},ee.isValidElement=X,ee.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:et}},ee.memo=function(O,G){return{$$typeof:m,type:O,compare:G===void 0?null:G}},ee.startTransition=function(O){var G=Z.T,ot={};Z.T=ot;try{var dt=O(),gt=Z.S;gt!==null&&gt(ot,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(H,k)}catch(mt){k(mt)}finally{G!==null&&ot.types!==null&&(G.types=ot.types),Z.T=G}},ee.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},ee.use=function(O){return Z.H.use(O)},ee.useActionState=function(O,G,ot){return Z.H.useActionState(O,G,ot)},ee.useCallback=function(O,G){return Z.H.useCallback(O,G)},ee.useContext=function(O){return Z.H.useContext(O)},ee.useDebugValue=function(){},ee.useDeferredValue=function(O,G){return Z.H.useDeferredValue(O,G)},ee.useEffect=function(O,G){return Z.H.useEffect(O,G)},ee.useEffectEvent=function(O){return Z.H.useEffectEvent(O)},ee.useId=function(){return Z.H.useId()},ee.useImperativeHandle=function(O,G,ot){return Z.H.useImperativeHandle(O,G,ot)},ee.useInsertionEffect=function(O,G){return Z.H.useInsertionEffect(O,G)},ee.useLayoutEffect=function(O,G){return Z.H.useLayoutEffect(O,G)},ee.useMemo=function(O,G){return Z.H.useMemo(O,G)},ee.useOptimistic=function(O,G){return Z.H.useOptimistic(O,G)},ee.useReducer=function(O,G,ot){return Z.H.useReducer(O,G,ot)},ee.useRef=function(O){return Z.H.useRef(O)},ee.useState=function(O){return Z.H.useState(O)},ee.useSyncExternalStore=function(O,G,ot){return Z.H.useSyncExternalStore(O,G,ot)},ee.useTransition=function(){return Z.H.useTransition()},ee.version="19.2.4",ee}var hw;function e0(){return hw||(hw=1,S_.exports=cA()),S_.exports}var It=e0(),T_={exports:{}},qu={},A_={exports:{}},E_={};var fw;function uA(){return fw||(fw=1,(function(i){function t(U,Y){var et=U.length;U.push(Y);t:for(;0<et;){var k=et-1>>>1,j=U[k];if(0<r(j,Y))U[k]=Y,U[et]=j,et=k;else break t}}function e(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var Y=U[0],et=U.pop();if(et!==Y){U[0]=et;t:for(var k=0,j=U.length,O=j>>>1;k<O;){var G=2*(k+1)-1,ot=U[G],dt=G+1,gt=U[dt];if(0>r(ot,et))dt<j&&0>r(gt,ot)?(U[k]=gt,U[dt]=et,k=dt):(U[k]=ot,U[G]=et,k=G);else if(dt<j&&0>r(gt,et))U[k]=gt,U[dt]=et,k=dt;else break t}}return Y}function r(U,Y){var et=U.sortIndex-Y.sortIndex;return et!==0?et:U.id-Y.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var p=[],m=[],v=1,y=null,w=3,T=!1,x=!1,A=!1,E=!1,I=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function F(U){for(var Y=e(m);Y!==null;){if(Y.callback===null)s(m);else if(Y.startTime<=U)s(m),Y.sortIndex=Y.expirationTime,t(p,Y);else break;Y=e(m)}}function R(U){if(A=!1,F(U),!x)if(e(p)!==null)x=!0,H||(H=!0,tt());else{var Y=e(m);Y!==null&&$(R,Y.startTime-U)}}var H=!1,Z=-1,q=5,V=-1;function W(){return E?!0:!(i.unstable_now()-V<q)}function X(){if(E=!1,H){var U=i.unstable_now();V=U;var Y=!0;try{t:{x=!1,A&&(A=!1,B(Z),Z=-1),T=!0;var et=w;try{e:{for(F(U),y=e(p);y!==null&&!(y.expirationTime>U&&W());){var k=y.callback;if(typeof k=="function"){y.callback=null,w=y.priorityLevel;var j=k(y.expirationTime<=U);if(U=i.unstable_now(),typeof j=="function"){y.callback=j,F(U),Y=!0;break e}y===e(p)&&s(p),F(U)}else s(p);y=e(p)}if(y!==null)Y=!0;else{var O=e(m);O!==null&&$(R,O.startTime-U),Y=!1}}break t}finally{y=null,w=et,T=!1}Y=void 0}}finally{Y?tt():H=!1}}}var tt;if(typeof D=="function")tt=function(){D(X)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,J=P.port2;P.port1.onmessage=X,tt=function(){J.postMessage(null)}}else tt=function(){I(X,0)};function $(U,Y){Z=I(function(){U(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(U){switch(w){case 1:case 2:case 3:var Y=3;break;default:Y=w}var et=w;w=Y;try{return U()}finally{w=et}},i.unstable_requestPaint=function(){E=!0},i.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var et=w;w=U;try{return Y()}finally{w=et}},i.unstable_scheduleCallback=function(U,Y,et){var k=i.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?k+et:k):et=k,U){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=et+j,U={id:v++,callback:Y,priorityLevel:U,startTime:et,expirationTime:j,sortIndex:-1},et>k?(U.sortIndex=et,t(m,U),e(p)===null&&U===e(m)&&(A?(B(Z),Z=-1):A=!0,$(R,et-k))):(U.sortIndex=j,t(p,U),x||T||(x=!0,H||(H=!0,tt()))),U},i.unstable_shouldYield=W,i.unstable_wrapCallback=function(U){var Y=w;return function(){var et=w;w=Y;try{return U.apply(this,arguments)}finally{w=et}}}})(E_)),E_}var dw;function hA(){return dw||(dw=1,A_.exports=uA()),A_.exports}var C_={exports:{}},$n={};var pw;function fA(){if(pw)return $n;pw=1;var i=e0();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(p,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:p,containerInfo:m,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$n.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(p,m,null,v)},$n.flushSync=function(p){var m=u.T,v=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=m,s.p=v,s.d.f()}},$n.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},$n.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},$n.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,y=f(v,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:T}):v==="script"&&s.d.X(p,{crossOrigin:y,integrity:w,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},$n.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=f(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},$n.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=f(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},$n.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=f(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},$n.requestFormReset=function(p){s.d.r(p)},$n.unstable_batchedUpdates=function(p,m){return p(m)},$n.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},$n.useFormStatus=function(){return u.H.useHostTransitionStatus()},$n.version="19.2.4",$n}var mw;function dA(){if(mw)return C_.exports;mw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),C_.exports=fA(),C_.exports}var _w;function pA(){if(_w)return qu;_w=1;var i=hA(),t=e0(),e=dA();function s(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var o=n,c=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(c=o.return),n=o.return;while(n)}return o.tag===3?c:null}function u(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function f(n){if(n.tag===31){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(s(188))}function m(n){var o=n.alternate;if(!o){if(o=l(n),o===null)throw Error(s(188));return o!==n?null:n}for(var c=n,d=o;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return p(g),n;if(b===d)return p(g),o;b=b.sibling}throw Error(s(188))}if(c.return!==d.return)c=g,d=b;else{for(var M=!1,z=g.child;z;){if(z===c){M=!0,c=g,d=b;break}if(z===d){M=!0,d=g,c=b;break}z=z.sibling}if(!M){for(z=b.child;z;){if(z===c){M=!0,c=b,d=g;break}if(z===d){M=!0,d=b,c=g;break}z=z.sibling}if(!M)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?n:o}function v(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=v(n),o!==null)return o;n=n.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function tt(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var P=Symbol.for("react.client.reference");function J(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===P?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case I:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case H:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case D:return n.displayName||"Context";case B:return(n._context.displayName||"Context")+".Consumer";case F:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Z:return o=n.displayName||null,o!==null?o:J(n.type)||"Memo";case q:o=n._payload,n=n._init;try{return J(n(o))}catch{}}return null}var $=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},k=[],j=-1;function O(n){return{current:n}}function G(n){0>j||(n.current=k[j],k[j]=null,j--)}function ot(n,o){j++,k[j]=n.current,n.current=o}var dt=O(null),gt=O(null),mt=O(null),Mt=O(null);function Et(n,o){switch(ot(mt,o),ot(gt,n),ot(dt,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?Db(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=Db(o),n=Ob(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}G(dt),ot(dt,n)}function ne(){G(dt),G(gt),G(mt)}function Se(n){n.memoizedState!==null&&ot(Mt,n);var o=dt.current,c=Ob(o,n.type);o!==c&&(ot(gt,n),ot(dt,c))}function We(n){gt.current===n&&(G(dt),G(gt)),Mt.current===n&&(G(Mt),Pu._currentValue=et)}var Xe,Nn;function hi(n){if(Xe===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Xe=o&&o[1]||"",Nn=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+n+Nn}var Ot=!1;function Zt(n,o){if(!n||Ot)return"";Ot=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(ft){var ht=ft}Reflect.construct(n,[],wt)}else{try{wt.call()}catch(ft){ht=ft}n.call(wt.prototype)}}else{try{throw Error()}catch(ft){ht=ft}(wt=n())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(ft){if(ft&&ht&&typeof ft.stack=="string")return[ft.stack,ht.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),M=b[0],z=b[1];if(M&&z){var K=M.split(`
`),ct=z.split(`
`);for(g=d=0;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ct.length&&!ct[g].includes("DetermineComponentFrameRoot");)g++;if(d===K.length||g===ct.length)for(d=K.length-1,g=ct.length-1;1<=d&&0<=g&&K[d]!==ct[g];)g--;for(;1<=d&&0<=g;d--,g--)if(K[d]!==ct[g]){if(d!==1||g!==1)do if(d--,g--,0>g||K[d]!==ct[g]){var _t=`
`+K[d].replace(" at new "," at ");return n.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",n.displayName)),_t}while(1<=d&&0<=g);break}}}finally{Ot=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?hi(c):""}function Ne(n,o){switch(n.tag){case 26:case 27:case 5:return hi(n.type);case 16:return hi("Lazy");case 13:return n.child!==o&&o!==null?hi("Suspense Fallback"):hi("Suspense");case 19:return hi("SuspenseList");case 0:case 15:return Zt(n.type,!1);case 11:return Zt(n.type.render,!1);case 1:return Zt(n.type,!0);case 31:return hi("Activity");default:return""}}function be(n){try{var o="",c=null;do o+=Ne(n,c),c=n,n=n.return;while(n);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var oe=Object.prototype.hasOwnProperty,Te=i.unstable_scheduleCallback,nn=i.unstable_cancelCallback,Qn=i.unstable_shouldYield,Ji=i.unstable_requestPaint,sn=i.unstable_now,ma=i.unstable_getCurrentPriorityLevel,As=i.unstable_ImmediatePriority,$i=i.unstable_UserBlockingPriority,Er=i.unstable_NormalPriority,wl=i.unstable_LowPriority,_a=i.unstable_IdlePriority,xl=i.log,Uc=i.unstable_setDisableYieldValue,Ys=null,yn=null;function Ri(n){if(typeof xl=="function"&&Uc(n),yn&&typeof yn.setStrictMode=="function")try{yn.setStrictMode(Ys,n)}catch{}}var jn=Math.clz32?Math.clz32:Vc,Cr=Math.log,Hc=Math.LN2;function Vc(n){return n>>>=0,n===0?32:31-(Cr(n)/Hc|0)|0}var Lr=256,Mr=262144,kr=4194304;function Es(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function po(n,o,c){var d=n.pendingLanes;if(d===0)return 0;var g=0,b=n.suspendedLanes,M=n.pingedLanes;n=n.warmLanes;var z=d&134217727;return z!==0?(d=z&~b,d!==0?g=Es(d):(M&=z,M!==0?g=Es(M):c||(c=z&~n,c!==0&&(g=Es(c))))):(z=d&~b,z!==0?g=Es(z):M!==0?g=Es(M):c||(c=d&~n,c!==0&&(g=Es(c)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:g}function St(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function Ct(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gt(){var n=kr;return kr<<=1,(kr&62914560)===0&&(kr=4194304),n}function Lt(n){for(var o=[],c=0;31>c;c++)o.push(n);return o}function Rt(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Nt(n,o,c,d,g,b){var M=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var z=n.entanglements,K=n.expirationTimes,ct=n.hiddenUpdates;for(c=M&~c;0<c;){var _t=31-jn(c),wt=1<<_t;z[_t]=0,K[_t]=-1;var ht=ct[_t];if(ht!==null)for(ct[_t]=null,_t=0;_t<ht.length;_t++){var ft=ht[_t];ft!==null&&(ft.lane&=-536870913)}c&=~wt}d!==0&&qt(n,d,0),b!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=b&~(M&~o))}function qt(n,o,c){n.pendingLanes|=o,n.suspendedLanes&=~o;var d=31-jn(o);n.entangledLanes|=o,n.entanglements[d]=n.entanglements[d]|1073741824|c&261930}function Wt(n,o){var c=n.entangledLanes|=o;for(n=n.entanglements;c;){var d=31-jn(c),g=1<<d;g&o|n[d]&o&&(n[d]|=o),c&=~g}}function Qt(n,o){var c=o&-o;return c=(c&42)!==0?1:we(c),(c&(n.suspendedLanes|o))!==0?0:c}function we(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Dt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function fi(){var n=Y.p;return n!==0?n:(n=window.event,n===void 0?32:ew(n.type))}function ts(n,o){var c=Y.p;try{return Y.p=n,o()}finally{Y.p=c}}var vn=Math.random().toString(36).slice(2),De="__reactFiber$"+vn,bn="__reactProps$"+vn,Dr="__reactContainer$"+vn,Xs="__reactEvents$"+vn,zh="__reactListeners$"+vn,Dp="__reactHandles$"+vn,Ph="__reactResources$"+vn,ga="__reactMarker$"+vn;function qc(n){delete n[De],delete n[bn],delete n[Xs],delete n[zh],delete n[Dp]}function Or(n){var o=n[De];if(o)return o;for(var c=n.parentNode;c;){if(o=c[Dr]||c[De]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(n=Ub(n);n!==null;){if(c=n[De])return c;n=Ub(n)}return o}n=c,c=n.parentNode}return null}function mo(n){if(n=n[De]||n[Dr]){var o=n.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return n}return null}function Fs(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(s(33))}function _o(n){var o=n[Ph];return o||(o=n[Ph]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function wn(n){n[ga]=!0}var Bh=new Set,Uh={};function Rr(n,o){Qs(n,o),Qs(n+"Capture",o)}function Qs(n,o){for(Uh[n]=o,n=0;n<o.length;n++)Bh.add(o[n])}var ya=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jc={},Gc={};function va(n){return oe.call(Gc,n)?!0:oe.call(jc,n)?!1:ya.test(n)?Gc[n]=!0:(jc[n]=!0,!1)}function le(n,o,c){if(va(o))if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+c)}}function ze(n,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+c)}}function di(n,o,c,d){if(d===null)n.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(o,c,""+d)}}function Ln(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ir(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Zc(n,o,c){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,o);if(!n.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,b=d.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(M){c=""+M,b.call(this,M)}}),Object.defineProperty(n,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(M){c=""+M},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function te(n){if(!n._valueTracker){var o=Ir(n)?"checked":"value";n._valueTracker=Zc(n,o,""+n[o])}}function $e(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return n&&(d=Ir(n)?n.checked?"true":"false":n.value),n=d,n!==c?(o.setValue(n),!0):!1}function go(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Sl=/[\n"\\]/g;function Fe(n){return n.replace(Sl,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Wc(n,o,c,d,g,b,M,z){n.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.type=M:n.removeAttribute("type"),o!=null?M==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+Ln(o)):n.value!==""+Ln(o)&&(n.value=""+Ln(o)):M!=="submit"&&M!=="reset"||n.removeAttribute("value"),o!=null?Cs(n,M,Ln(o)):c!=null?Cs(n,M,Ln(c)):d!=null&&n.removeAttribute("value"),g==null&&b!=null&&(n.defaultChecked=!!b),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?n.name=""+Ln(z):n.removeAttribute("name")}function ba(n,o,c,d,g,b,M,z){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){te(n);return}c=c!=null?""+Ln(c):"",o=o!=null?""+Ln(o):c,z||o===n.value||(n.value=o),n.defaultValue=o}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=z?n.checked:!!d,n.defaultChecked=!!d,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(n.name=M),te(n)}function Cs(n,o,c){o==="number"&&go(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function Ve(n,o,c,d){if(n=n.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<n.length;c++)g=o.hasOwnProperty("$"+n[c].value),n[c].selected!==g&&(n[c].selected=g),g&&d&&(n[c].defaultSelected=!0)}else{for(c=""+Ln(c),o=null,g=0;g<n.length;g++){if(n[g].value===c){n[g].selected=!0,d&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function Ks(n,o,c){if(o!=null&&(o=""+Ln(o),o!==n.value&&(n.value=o),c==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=c!=null?""+Ln(c):""}function yo(n,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(s(92));if($(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=Ln(o),n.defaultValue=c,d=n.textContent,d===c&&d!==""&&d!==null&&(n.value=d),te(n)}function es(n,o){if(o){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=o;return}}n.textContent=o}var Yc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vo(n,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":d?n.setProperty(o,c):typeof c!="number"||c===0||Yc.has(o)?o==="float"?n.cssFloat=c:n[o]=(""+c).trim():n[o]=c+"px"}function Tl(n,o,c){if(o!=null&&typeof o!="object")throw Error(s(62));if(n=n.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var g in o)d=o[g],o.hasOwnProperty(g)&&c[g]!==d&&vo(n,g,d)}else for(var b in o)o.hasOwnProperty(b)&&vo(n,b,o[b])}function wa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Al=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bo(n){return Xc.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function pi(){}var El=null;function xa(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var wo=null,Ft=null;function Ii(n){var o=mo(n);if(o&&(n=o.stateNode)){var c=n[bn]||null;t:switch(n=o.stateNode,o.type){case"input":if(Wc(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Fe(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==n&&d.form===n.form){var g=d[bn]||null;if(!g)throw Error(s(90));Wc(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===n.form&&$e(d)}break t;case"textarea":Ks(n,c.value,c.defaultValue);break t;case"select":o=c.value,o!=null&&Ve(n,!!c.multiple,o,!1)}}}var Oe=!1;function Fc(n,o,c){if(Oe)return n(o,c);Oe=!0;try{var d=n(o);return d}finally{if(Oe=!1,(wo!==null||Ft!==null)&&(zf(),wo&&(o=wo,n=Ft,Ft=wo=null,Ii(o),n)))for(o=0;o<n.length;o++)Ii(n[o])}}function Nr(n,o){var c=n.stateNode;if(c===null)return null;var d=c[bn]||null;if(d===null)return null;c=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break t;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(s(231,o,typeof c));return c}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sa=!1;if(Ni)try{var zi={};Object.defineProperty(zi,"passive",{get:function(){Sa=!0}}),window.addEventListener("test",zi,zi),window.removeEventListener("test",zi,zi)}catch{Sa=!1}var ns=null,zr=null,on=null;function Js(){if(on)return on;var n,o=zr,c=o.length,d,g="value"in ns?ns.value:ns.textContent,b=g.length;for(n=0;n<c&&o[n]===g[n];n++);var M=c-n;for(d=1;d<=M&&o[c-d]===g[b-d];d++);return on=g.slice(n,1<d?1-d:void 0)}function Ta(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Aa(){return!0}function Hh(){return!1}function Gn(n){function o(c,d,g,b,M){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var z in n)n.hasOwnProperty(z)&&(c=n[z],this[z]=c?c(b):b[z]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Aa:Hh,this.isPropagationStopped=Hh,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),o}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cl=Gn(Ls),xo=y({},Ls,{view:0,detail:0}),fe=Gn(xo),Qc,ii,Ms,Ea=y({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ms&&(Ms&&n.type==="mousemove"?(Qc=n.screenX-Ms.screenX,ii=n.screenY-Ms.screenY):ii=Qc=0,Ms=n),Qc)},movementY:function(n){return"movementY"in n?n.movementY:ii}}),Vh=Gn(Ea),Kc=y({},Ea,{dataTransfer:0}),Op=Gn(Kc),qh=y({},xo,{relatedTarget:0}),Jc=Gn(qh),Rp=y({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),$c=Gn(Rp),Ip=y({},Ls,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),is=Gn(Ip),Np=y({},Ls,{data:0}),tu=Gn(Np),$s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eu(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Gh[n])?!!o[n]:!1}function nu(){return eu}var Zh=y({},xo,{key:function(n){if(n.key){var o=$s[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Ta(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?jh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(n){return n.type==="keypress"?Ta(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ta(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Wh=Gn(Zh),zp=y({},Ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yh=Gn(zp),iu=y({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),Pp=Gn(iu),Xh=y({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fh=Gn(Xh),Ll=y({},Ea,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=Gn(Ll),Bp=y({},Ls,{newState:0,oldState:0}),Ca=Gn(Bp),mi=[9,13,27,32],Ml=Ni&&"CompositionEvent"in window,So=null;Ni&&"documentMode"in document&&(So=document.documentMode);var Up=Ni&&"TextEvent"in window&&!So,kl=Ni&&(!Ml||So&&8<So&&11>=So),Dl=" ",Qh=!1;function Kh(n,o){switch(n){case"keyup":return mi.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function su(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var To=!1;function Pi(n,o){switch(n){case"compositionend":return su(o);case"keypress":return o.which!==32?null:(Qh=!0,Dl);case"textInput":return n=o.data,n===Dl&&Qh?null:n;default:return null}}function Ao(n,o){if(To)return n==="compositionend"||!Ml&&Kh(n,o)?(n=Js(),on=zr=ns=null,To=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return kl&&o.locale!=="ko"?null:o.data;default:return null}}var Hp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ss(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Hp[n.type]:o==="textarea"}function Jh(n,o,c,d){wo?Ft?Ft.push(d):Ft=[d]:wo=d,o=jf(o,"onChange"),0<o.length&&(c=new Cl("onChange","change",null,c,d),n.push({event:c,listeners:o}))}var rs=null,La=null;function Ma(n){Ab(n,0)}function ka(n){var o=Fs(n);if($e(o))return n}function Da(n,o){if(n==="change")return o}var $h=!1;if(Ni){var os;if(Ni){var Eo="oninput"in document;if(!Eo){var tf=document.createElement("div");tf.setAttribute("oninput","return;"),Eo=typeof tf.oninput=="function"}os=Eo}else os=!1;$h=os&&(!document.documentMode||9<document.documentMode)}function Ol(){rs&&(rs.detachEvent("onpropertychange",ef),La=rs=null)}function ef(n){if(n.propertyName==="value"&&ka(La)){var o=[];Jh(o,La,n,xa(n)),Fc(Ma,o)}}function ks(n,o,c){n==="focusin"?(Ol(),rs=o,La=c,rs.attachEvent("onpropertychange",ef)):n==="focusout"&&Ol()}function Vp(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ka(La)}function Co(n,o){if(n==="click")return ka(o)}function qp(n,o){if(n==="input"||n==="change")return ka(o)}function Ds(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var zn=typeof Object.is=="function"?Object.is:Ds;function Lo(n,o){if(zn(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var c=Object.keys(n),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!oe.call(o,g)||!zn(n[g],o[g]))return!1}return!0}function Rl(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Oa(n,o){var c=Rl(n);n=0;for(var d;c;){if(c.nodeType===3){if(d=n+c.textContent.length,n<=o&&d>=o)return{node:c,offset:o-n};n=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=Rl(c)}}function Il(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Il(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Ra(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=go(n.document);o instanceof n.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)n=o.contentWindow;else break;o=go(n.document)}return o}function tr(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var Nl=Ni&&"documentMode"in document&&11>=document.documentMode,er=null,zl=null,Ia=null,Mo=!1;function nf(n,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Mo||er==null||er!==go(d)||(d=er,"selectionStart"in d&&tr(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ia&&Lo(Ia,d)||(Ia=d,d=jf(zl,"onSelect"),0<d.length&&(o=new Cl("onSelect","select",null,o,c),n.push({event:o,listeners:d}),o.target=er)))}function nr(n,o){var c={};return c[n.toLowerCase()]=o.toLowerCase(),c["Webkit"+n]="webkit"+o,c["Moz"+n]="moz"+o,c}var ko={animationend:nr("Animation","AnimationEnd"),animationiteration:nr("Animation","AnimationIteration"),animationstart:nr("Animation","AnimationStart"),transitionrun:nr("Transition","TransitionRun"),transitionstart:nr("Transition","TransitionStart"),transitioncancel:nr("Transition","TransitionCancel"),transitionend:nr("Transition","TransitionEnd")},Pl={},sf={};Ni&&(sf=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Pn(n){if(Pl[n])return Pl[n];if(!ko[n])return n;var o=ko[n],c;for(c in o)if(o.hasOwnProperty(c)&&c in sf)return Pl[n]=o[c];return n}var Na=Pn("animationend"),rf=Pn("animationiteration"),za=Pn("animationstart"),jp=Pn("transitionrun"),of=Pn("transitionstart"),Gp=Pn("transitioncancel"),Do=Pn("transitionend"),af=new Map,ir="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ir.push("scrollEnd");function _i(n,o){af.set(n,o),Rr(o,[n])}var Pa=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},gi=[],Kn=0,Bl=0;function Ba(){for(var n=Kn,o=Bl=Kn=0;o<n;){var c=gi[o];gi[o++]=null;var d=gi[o];gi[o++]=null;var g=gi[o];gi[o++]=null;var b=gi[o];if(gi[o++]=null,d!==null&&g!==null){var M=d.pending;M===null?g.next=g:(g.next=M.next,M.next=g),d.pending=g}b!==0&&Oo(c,g,b)}}function sr(n,o,c,d){gi[Kn++]=n,gi[Kn++]=o,gi[Kn++]=c,gi[Kn++]=d,Bl|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function ru(n,o,c,d){return sr(n,o,c,d),Ua(n)}function as(n,o){return sr(n,null,null,o),Ua(n)}function Oo(n,o,c){n.lanes|=c;var d=n.alternate;d!==null&&(d.lanes|=c);for(var g=!1,b=n.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(n=b.stateNode,n===null||n._visibility&1||(g=!0)),n=b,b=b.return;return n.tag===3?(b=n.stateNode,g&&o!==null&&(g=31-jn(c),n=b.hiddenUpdates,d=n[g],d===null?n[g]=[o]:d.push(o),o.lane=c|536870912),b):null}function Ua(n){if(50<ku)throw ku=0,Wm=null,Error(s(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var Br={};function Zp(n,o,c,d){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(n,o,c,d){return new Zp(n,o,c,d)}function Ul(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ls(n,o){var c=n.alternate;return c===null?(c=Jn(n.tag,o,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=o,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,o=n.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function ou(n,o){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,o=c.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function Ha(n,o,c,d,g,b){var M=0;if(d=n,typeof n=="function")Ul(n)&&(M=1);else if(typeof n=="string")M=F2(n,c,dt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case V:return n=Jn(31,c,o,g),n.elementType=V,n.lanes=b,n;case A:return Ur(c.children,g,b,o);case E:M=8,g|=24;break;case I:return n=Jn(12,c,o,g|2),n.elementType=I,n.lanes=b,n;case R:return n=Jn(13,c,o,g),n.elementType=R,n.lanes=b,n;case H:return n=Jn(19,c,o,g),n.elementType=H,n.lanes=b,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:M=10;break t;case B:M=9;break t;case F:M=11;break t;case Z:M=14;break t;case q:M=16,d=null;break t}M=29,c=Error(s(130,n===null?"null":typeof n,"")),d=null}return o=Jn(M,c,o,g),o.elementType=n,o.type=d,o.lanes=b,o}function Ur(n,o,c,d){return n=Jn(7,n,d,o),n.lanes=c,n}function Hl(n,o,c){return n=Jn(6,n,null,o),n.lanes=c,n}function au(n){var o=Jn(18,null,null,0);return o.stateNode=n,o}function lu(n,o,c){return o=Jn(4,n.children!==null?n.children:[],n.key,o),o.lanes=c,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var a=new WeakMap;function h(n,o){if(typeof n=="object"&&n!==null){var c=a.get(n);return c!==void 0?c:(o={value:n,source:o,stack:be(o)},a.set(n,o),o)}return{value:n,source:o,stack:be(o)}}var _=[],S=0,C=null,N=0,Q=[],rt=0,ut=null,bt=1,kt="";function jt(n,o){_[S++]=N,_[S++]=C,C=n,N=o}function se(n,o,c){Q[rt++]=bt,Q[rt++]=kt,Q[rt++]=ut,ut=n;var d=bt;n=kt;var g=32-jn(d)-1;d&=~(1<<g),c+=1;var b=32-jn(o)+g;if(30<b){var M=g-g%5;b=(d&(1<<M)-1).toString(32),d>>=M,g-=M,bt=1<<32-jn(o)+g|c<<g|d,kt=b+n}else bt=1<<b|c<<g|d,kt=n}function Mn(n){n.return!==null&&(jt(n,1),se(n,1,0))}function an(n){for(;n===C;)C=_[--S],_[S]=null,N=_[--S],_[S]=null;for(;n===ut;)ut=Q[--rt],Q[rt]=null,kt=Q[--rt],Q[rt]=null,bt=Q[--rt],Q[rt]=null}function si(n,o){Q[rt++]=bt,Q[rt++]=kt,Q[rt++]=ut,bt=o.id,kt=o.overflow,ut=n}var Ae=null,Ee=null,ce=!1,rr=null,yi=!1,Vl=Error(s(519));function or(n){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Va(h(o,n)),Vl}function cu(n){var o=n.stateNode,c=n.type,d=n.memoizedProps;switch(o[De]=n,o[bn]=d,c){case"dialog":he("cancel",o),he("close",o);break;case"iframe":case"object":case"embed":he("load",o);break;case"video":case"audio":for(c=0;c<Ou.length;c++)he(Ou[c],o);break;case"source":he("error",o);break;case"img":case"image":case"link":he("error",o),he("load",o);break;case"details":he("toggle",o);break;case"input":he("invalid",o),ba(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":he("invalid",o);break;case"textarea":he("invalid",o),yo(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||Mb(o.textContent,c)?(d.popover!=null&&(he("beforetoggle",o),he("toggle",o)),d.onScroll!=null&&he("scroll",o),d.onScrollEnd!=null&&he("scrollend",o),d.onClick!=null&&(o.onclick=pi),o=!0):o=!1,o||or(n,!0)}function rn(n){for(Ae=n.return;Ae;)switch(Ae.tag){case 5:case 31:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:Ae=Ae.return}}function Os(n){if(n!==Ae)return!1;if(!ce)return rn(n),ce=!0,!1;var o=n.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||a_(n.type,n.memoizedProps)),c=!c),c&&Ee&&or(n),rn(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ee=Bb(n)}else if(o===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ee=Bb(n)}else o===27?(o=Ee,Wo(n.type)?(n=f_,f_=null,Ee=n):Ee=o):Ee=Ae?us(n.stateNode.nextSibling):null;return!0}function Hr(){Ee=Ae=null,ce=!1}function uu(){var n=rr;return n!==null&&(xi===null?xi=n:xi.push.apply(xi,n),rr=null),n}function Va(n){rr===null?rr=[n]:rr.push(n)}var qa=O(null),ar=null,Rs=null;function Ro(n,o,c){ot(qa,o._currentValue),o._currentValue=c}function Vr(n){n._currentValue=qa.current,G(qa)}function Wp(n,o,c){for(;n!==null;){var d=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),n===c)break;n=n.return}}function Yp(n,o,c,d){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var b=g.dependencies;if(b!==null){var M=g.child;b=b.firstContext;t:for(;b!==null;){var z=b;b=g;for(var K=0;K<o.length;K++)if(z.context===o[K]){b.lanes|=c,z=b.alternate,z!==null&&(z.lanes|=c),Wp(b.return,c,n),d||(M=null);break t}b=z.next}}else if(g.tag===18){if(M=g.return,M===null)throw Error(s(341));M.lanes|=c,b=M.alternate,b!==null&&(b.lanes|=c),Wp(M,c,n),M=null}else M=g.child;if(M!==null)M.return=g;else for(M=g;M!==null;){if(M===n){M=null;break}if(g=M.sibling,g!==null){g.return=M.return,M=g;break}M=M.return}g=M}}function ql(n,o,c,d){n=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var M=g.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var z=g.type;zn(g.pendingProps.value,M.value)||(n!==null?n.push(z):n=[z])}}else if(g===Mt.current){if(M=g.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Pu):n=[Pu])}g=g.return}n!==null&&Yp(o,n,c,d),o.flags|=262144}function lf(n){for(n=n.firstContext;n!==null;){if(!zn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ja(n){ar=n,Rs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Zn(n){return py(ar,n)}function cf(n,o){return ar===null&&ja(n),py(n,o)}function py(n,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Rs===null){if(n===null)throw Error(s(308));Rs=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else Rs=Rs.next=o;return c}var ZT=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(c,d){n.push(d)}};this.abort=function(){o.aborted=!0,n.forEach(function(c){return c()})}},WT=i.unstable_scheduleCallback,YT=i.unstable_NormalPriority,xn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xp(){return{controller:new ZT,data:new Map,refCount:0}}function hu(n){n.refCount--,n.refCount===0&&WT(YT,function(){n.controller.abort()})}var fu=null,Fp=0,jl=0,Gl=null;function XT(n,o){if(fu===null){var c=fu=[];Fp=0,jl=Jm(),Gl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Fp++,o.then(my,my),o}function my(){if(--Fp===0&&fu!==null){Gl!==null&&(Gl.status="fulfilled");var n=fu;fu=null,jl=0,Gl=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function FT(n,o){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return n.then(function(){d.status="fulfilled",d.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var _y=U.S;U.S=function(n,o){$v=sn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&XT(n,o),_y!==null&&_y(n,o)};var Ga=O(null);function Qp(){var n=Ga.current;return n!==null?n:qe.pooledCache}function uf(n,o){o===null?ot(Ga,Ga.current):ot(Ga,o.pool)}function gy(){var n=Qp();return n===null?null:{parent:xn._currentValue,pool:n}}var Zl=Error(s(460)),Kp=Error(s(474)),hf=Error(s(542)),ff={then:function(){}};function yy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function vy(n,o,c){switch(c=n[c],c===void 0?n.push(o):c!==o&&(o.then(pi,pi),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,wy(n),n;default:if(typeof o.status=="string")o.then(pi,pi);else{if(n=qe,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=o,n.status="pending",n.then(function(d){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=d}},function(d){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,wy(n),n}throw Wa=o,Zl}}function Za(n){try{var o=n._init;return o(n._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Wa=c,Zl):c}}var Wa=null;function by(){if(Wa===null)throw Error(s(459));var n=Wa;return Wa=null,n}function wy(n){if(n===Zl||n===hf)throw Error(s(483))}var Wl=null,du=0;function df(n){var o=du;return du+=1,Wl===null&&(Wl=[]),vy(Wl,n,o)}function pu(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function pf(n,o){throw o.$$typeof===w?Error(s(525)):(n=Object.prototype.toString.call(o),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function xy(n){function o(st,it){if(n){var at=st.deletions;at===null?(st.deletions=[it],st.flags|=16):at.push(it)}}function c(st,it){if(!n)return null;for(;it!==null;)o(st,it),it=it.sibling;return null}function d(st){for(var it=new Map;st!==null;)st.key!==null?it.set(st.key,st):it.set(st.index,st),st=st.sibling;return it}function g(st,it){return st=ls(st,it),st.index=0,st.sibling=null,st}function b(st,it,at){return st.index=at,n?(at=st.alternate,at!==null?(at=at.index,at<it?(st.flags|=67108866,it):at):(st.flags|=67108866,it)):(st.flags|=1048576,it)}function M(st){return n&&st.alternate===null&&(st.flags|=67108866),st}function z(st,it,at,vt){return it===null||it.tag!==6?(it=Hl(at,st.mode,vt),it.return=st,it):(it=g(it,at),it.return=st,it)}function K(st,it,at,vt){var Yt=at.type;return Yt===A?_t(st,it,at.props.children,vt,at.key):it!==null&&(it.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===q&&Za(Yt)===it.type)?(it=g(it,at.props),pu(it,at),it.return=st,it):(it=Ha(at.type,at.key,at.props,null,st.mode,vt),pu(it,at),it.return=st,it)}function ct(st,it,at,vt){return it===null||it.tag!==4||it.stateNode.containerInfo!==at.containerInfo||it.stateNode.implementation!==at.implementation?(it=lu(at,st.mode,vt),it.return=st,it):(it=g(it,at.children||[]),it.return=st,it)}function _t(st,it,at,vt,Yt){return it===null||it.tag!==7?(it=Ur(at,st.mode,vt,Yt),it.return=st,it):(it=g(it,at),it.return=st,it)}function wt(st,it,at){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return it=Hl(""+it,st.mode,at),it.return=st,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case T:return at=Ha(it.type,it.key,it.props,null,st.mode,at),pu(at,it),at.return=st,at;case x:return it=lu(it,st.mode,at),it.return=st,it;case q:return it=Za(it),wt(st,it,at)}if($(it)||tt(it))return it=Ur(it,st.mode,at,null),it.return=st,it;if(typeof it.then=="function")return wt(st,df(it),at);if(it.$$typeof===D)return wt(st,cf(st,it),at);pf(st,it)}return null}function ht(st,it,at,vt){var Yt=it!==null?it.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return Yt!==null?null:z(st,it,""+at,vt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case T:return at.key===Yt?K(st,it,at,vt):null;case x:return at.key===Yt?ct(st,it,at,vt):null;case q:return at=Za(at),ht(st,it,at,vt)}if($(at)||tt(at))return Yt!==null?null:_t(st,it,at,vt,null);if(typeof at.then=="function")return ht(st,it,df(at),vt);if(at.$$typeof===D)return ht(st,it,cf(st,at),vt);pf(st,at)}return null}function ft(st,it,at,vt,Yt){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return st=st.get(at)||null,z(it,st,""+vt,Yt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case T:return st=st.get(vt.key===null?at:vt.key)||null,K(it,st,vt,Yt);case x:return st=st.get(vt.key===null?at:vt.key)||null,ct(it,st,vt,Yt);case q:return vt=Za(vt),ft(st,it,at,vt,Yt)}if($(vt)||tt(vt))return st=st.get(at)||null,_t(it,st,vt,Yt,null);if(typeof vt.then=="function")return ft(st,it,at,df(vt),Yt);if(vt.$$typeof===D)return ft(st,it,at,cf(it,vt),Yt);pf(it,vt)}return null}function Pt(st,it,at,vt){for(var Yt=null,Ce=null,Vt=it,re=it=0,pe=null;Vt!==null&&re<at.length;re++){Vt.index>re?(pe=Vt,Vt=null):pe=Vt.sibling;var Le=ht(st,Vt,at[re],vt);if(Le===null){Vt===null&&(Vt=pe);break}n&&Vt&&Le.alternate===null&&o(st,Vt),it=b(Le,it,re),Ce===null?Yt=Le:Ce.sibling=Le,Ce=Le,Vt=pe}if(re===at.length)return c(st,Vt),ce&&jt(st,re),Yt;if(Vt===null){for(;re<at.length;re++)Vt=wt(st,at[re],vt),Vt!==null&&(it=b(Vt,it,re),Ce===null?Yt=Vt:Ce.sibling=Vt,Ce=Vt);return ce&&jt(st,re),Yt}for(Vt=d(Vt);re<at.length;re++)pe=ft(Vt,st,re,at[re],vt),pe!==null&&(n&&pe.alternate!==null&&Vt.delete(pe.key===null?re:pe.key),it=b(pe,it,re),Ce===null?Yt=pe:Ce.sibling=pe,Ce=pe);return n&&Vt.forEach(function(Ko){return o(st,Ko)}),ce&&jt(st,re),Yt}function Xt(st,it,at,vt){if(at==null)throw Error(s(151));for(var Yt=null,Ce=null,Vt=it,re=it=0,pe=null,Le=at.next();Vt!==null&&!Le.done;re++,Le=at.next()){Vt.index>re?(pe=Vt,Vt=null):pe=Vt.sibling;var Ko=ht(st,Vt,Le.value,vt);if(Ko===null){Vt===null&&(Vt=pe);break}n&&Vt&&Ko.alternate===null&&o(st,Vt),it=b(Ko,it,re),Ce===null?Yt=Ko:Ce.sibling=Ko,Ce=Ko,Vt=pe}if(Le.done)return c(st,Vt),ce&&jt(st,re),Yt;if(Vt===null){for(;!Le.done;re++,Le=at.next())Le=wt(st,Le.value,vt),Le!==null&&(it=b(Le,it,re),Ce===null?Yt=Le:Ce.sibling=Le,Ce=Le);return ce&&jt(st,re),Yt}for(Vt=d(Vt);!Le.done;re++,Le=at.next())Le=ft(Vt,st,re,Le.value,vt),Le!==null&&(n&&Le.alternate!==null&&Vt.delete(Le.key===null?re:Le.key),it=b(Le,it,re),Ce===null?Yt=Le:Ce.sibling=Le,Ce=Le);return n&&Vt.forEach(function(oA){return o(st,oA)}),ce&&jt(st,re),Yt}function Ue(st,it,at,vt){if(typeof at=="object"&&at!==null&&at.type===A&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case T:t:{for(var Yt=at.key;it!==null;){if(it.key===Yt){if(Yt=at.type,Yt===A){if(it.tag===7){c(st,it.sibling),vt=g(it,at.props.children),vt.return=st,st=vt;break t}}else if(it.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===q&&Za(Yt)===it.type){c(st,it.sibling),vt=g(it,at.props),pu(vt,at),vt.return=st,st=vt;break t}c(st,it);break}else o(st,it);it=it.sibling}at.type===A?(vt=Ur(at.props.children,st.mode,vt,at.key),vt.return=st,st=vt):(vt=Ha(at.type,at.key,at.props,null,st.mode,vt),pu(vt,at),vt.return=st,st=vt)}return M(st);case x:t:{for(Yt=at.key;it!==null;){if(it.key===Yt)if(it.tag===4&&it.stateNode.containerInfo===at.containerInfo&&it.stateNode.implementation===at.implementation){c(st,it.sibling),vt=g(it,at.children||[]),vt.return=st,st=vt;break t}else{c(st,it);break}else o(st,it);it=it.sibling}vt=lu(at,st.mode,vt),vt.return=st,st=vt}return M(st);case q:return at=Za(at),Ue(st,it,at,vt)}if($(at))return Pt(st,it,at,vt);if(tt(at)){if(Yt=tt(at),typeof Yt!="function")throw Error(s(150));return at=Yt.call(at),Xt(st,it,at,vt)}if(typeof at.then=="function")return Ue(st,it,df(at),vt);if(at.$$typeof===D)return Ue(st,it,cf(st,at),vt);pf(st,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,it!==null&&it.tag===6?(c(st,it.sibling),vt=g(it,at),vt.return=st,st=vt):(c(st,it),vt=Hl(at,st.mode,vt),vt.return=st,st=vt),M(st)):c(st,it)}return function(st,it,at,vt){try{du=0;var Yt=Ue(st,it,at,vt);return Wl=null,Yt}catch(Vt){if(Vt===Zl||Vt===hf)throw Vt;var Ce=Jn(29,Vt,null,st.mode);return Ce.lanes=vt,Ce.return=st,Ce}}}var Ya=xy(!0),Sy=xy(!1),Io=!1;function Jp(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $p(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function No(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function zo(n,o,c){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(ke&2)!==0){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,o=Ua(n),Oo(n,null,c),o}return sr(n,d,o,c),Ua(n)}function mu(n,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=n.pendingLanes,c|=d,o.lanes=c,Wt(n,c)}}function tm(n,o){var c=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var M={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=M:b=b.next=M,c=c.next}while(c!==null);b===null?g=b=o:b=b.next=o}else g=b=o;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=o:n.next=o,c.lastBaseUpdate=o}var em=!1;function _u(){if(em){var n=Gl;if(n!==null)throw n}}function gu(n,o,c,d){em=!1;var g=n.updateQueue;Io=!1;var b=g.firstBaseUpdate,M=g.lastBaseUpdate,z=g.shared.pending;if(z!==null){g.shared.pending=null;var K=z,ct=K.next;K.next=null,M===null?b=ct:M.next=ct,M=K;var _t=n.alternate;_t!==null&&(_t=_t.updateQueue,z=_t.lastBaseUpdate,z!==M&&(z===null?_t.firstBaseUpdate=ct:z.next=ct,_t.lastBaseUpdate=K))}if(b!==null){var wt=g.baseState;M=0,_t=ct=K=null,z=b;do{var ht=z.lane&-536870913,ft=ht!==z.lane;if(ft?(de&ht)===ht:(d&ht)===ht){ht!==0&&ht===jl&&(em=!0),_t!==null&&(_t=_t.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});t:{var Pt=n,Xt=z;ht=o;var Ue=c;switch(Xt.tag){case 1:if(Pt=Xt.payload,typeof Pt=="function"){wt=Pt.call(Ue,wt,ht);break t}wt=Pt;break t;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=Xt.payload,ht=typeof Pt=="function"?Pt.call(Ue,wt,ht):Pt,ht==null)break t;wt=y({},wt,ht);break t;case 2:Io=!0}}ht=z.callback,ht!==null&&(n.flags|=64,ft&&(n.flags|=8192),ft=g.callbacks,ft===null?g.callbacks=[ht]:ft.push(ht))}else ft={lane:ht,tag:z.tag,payload:z.payload,callback:z.callback,next:null},_t===null?(ct=_t=ft,K=wt):_t=_t.next=ft,M|=ht;if(z=z.next,z===null){if(z=g.shared.pending,z===null)break;ft=z,z=ft.next,ft.next=null,g.lastBaseUpdate=ft,g.shared.pending=null}}while(!0);_t===null&&(K=wt),g.baseState=K,g.firstBaseUpdate=ct,g.lastBaseUpdate=_t,b===null&&(g.shared.lanes=0),Vo|=M,n.lanes=M,n.memoizedState=wt}}function Ty(n,o){if(typeof n!="function")throw Error(s(191,n));n.call(o)}function Ay(n,o){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)Ty(c[n],o)}var Yl=O(null),mf=O(0);function Ey(n,o){n=Qr,ot(mf,n),ot(Yl,o),Qr=n|o.baseLanes}function nm(){ot(mf,Qr),ot(Yl,Yl.current)}function im(){Qr=mf.current,G(Yl),G(mf)}var Bi=O(null),cs=null;function Po(n){var o=n.alternate;ot(pn,pn.current&1),ot(Bi,n),cs===null&&(o===null||Yl.current!==null||o.memoizedState!==null)&&(cs=n)}function sm(n){ot(pn,pn.current),ot(Bi,n),cs===null&&(cs=n)}function Cy(n){n.tag===22?(ot(pn,pn.current),ot(Bi,n),cs===null&&(cs=n)):Bo()}function Bo(){ot(pn,pn.current),ot(Bi,Bi.current)}function Ui(n){G(Bi),cs===n&&(cs=null),G(pn)}var pn=O(0);function _f(n){for(var o=n;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||u_(c)||h_(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var qr=0,ie=null,Pe=null,Sn=null,gf=!1,Xl=!1,Xa=!1,yf=0,yu=0,Fl=null,QT=0;function ln(){throw Error(s(321))}function rm(n,o){if(o===null)return!1;for(var c=0;c<o.length&&c<n.length;c++)if(!zn(n[c],o[c]))return!1;return!0}function om(n,o,c,d,g,b){return qr=b,ie=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,U.H=n===null||n.memoizedState===null?uv:wm,Xa=!1,b=c(d,g),Xa=!1,Xl&&(b=My(o,c,d,g)),Ly(n),b}function Ly(n){U.H=wu;var o=Pe!==null&&Pe.next!==null;if(qr=0,Sn=Pe=ie=null,gf=!1,yu=0,Fl=null,o)throw Error(s(300));n===null||Tn||(n=n.dependencies,n!==null&&lf(n)&&(Tn=!0))}function My(n,o,c,d){ie=n;var g=0;do{if(Xl&&(Fl=null),yu=0,Xl=!1,25<=g)throw Error(s(301));if(g+=1,Sn=Pe=null,n.updateQueue!=null){var b=n.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}U.H=hv,b=o(c,d)}while(Xl);return b}function KT(){var n=U.H,o=n.useState()[0];return o=typeof o.then=="function"?vu(o):o,n=n.useState()[0],(Pe!==null?Pe.memoizedState:null)!==n&&(ie.flags|=1024),o}function am(){var n=yf!==0;return yf=0,n}function lm(n,o,c){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~c}function cm(n){if(gf){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}gf=!1}qr=0,Sn=Pe=ie=null,Xl=!1,yu=yf=0,Fl=null}function ri(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?ie.memoizedState=Sn=n:Sn=Sn.next=n,Sn}function mn(){if(Pe===null){var n=ie.alternate;n=n!==null?n.memoizedState:null}else n=Pe.next;var o=Sn===null?ie.memoizedState:Sn.next;if(o!==null)Sn=o,Pe=n;else{if(n===null)throw ie.alternate===null?Error(s(467)):Error(s(310));Pe=n,n={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Sn===null?ie.memoizedState=Sn=n:Sn=Sn.next=n}return Sn}function vf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vu(n){var o=yu;return yu+=1,Fl===null&&(Fl=[]),n=vy(Fl,n,o),o=ie,(Sn===null?o.memoizedState:Sn.next)===null&&(o=o.alternate,U.H=o===null||o.memoizedState===null?uv:wm),n}function bf(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return vu(n);if(n.$$typeof===D)return Zn(n)}throw Error(s(438,String(n)))}function um(n){var o=null,c=ie.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=ie.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=vf(),ie.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(n),d=0;d<n;d++)c[d]=W;return o.index++,c}function jr(n,o){return typeof o=="function"?o(n):o}function wf(n){var o=mn();return hm(o,Pe,n)}function hm(n,o,c){var d=n.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var g=n.baseQueue,b=d.pending;if(b!==null){if(g!==null){var M=g.next;g.next=b.next,b.next=M}o.baseQueue=g=b,d.pending=null}if(b=n.baseState,g===null)n.memoizedState=b;else{o=g.next;var z=M=null,K=null,ct=o,_t=!1;do{var wt=ct.lane&-536870913;if(wt!==ct.lane?(de&wt)===wt:(qr&wt)===wt){var ht=ct.revertLane;if(ht===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),wt===jl&&(_t=!0);else if((qr&ht)===ht){ct=ct.next,ht===jl&&(_t=!0);continue}else wt={lane:0,revertLane:ct.revertLane,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},K===null?(z=K=wt,M=b):K=K.next=wt,ie.lanes|=ht,Vo|=ht;wt=ct.action,Xa&&c(b,wt),b=ct.hasEagerState?ct.eagerState:c(b,wt)}else ht={lane:wt,revertLane:ct.revertLane,gesture:ct.gesture,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},K===null?(z=K=ht,M=b):K=K.next=ht,ie.lanes|=wt,Vo|=wt;ct=ct.next}while(ct!==null&&ct!==o);if(K===null?M=b:K.next=z,!zn(b,n.memoizedState)&&(Tn=!0,_t&&(c=Gl,c!==null)))throw c;n.memoizedState=b,n.baseState=M,n.baseQueue=K,d.lastRenderedState=b}return g===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function fm(n){var o=mn(),c=o.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=n;var d=c.dispatch,g=c.pending,b=o.memoizedState;if(g!==null){c.pending=null;var M=g=g.next;do b=n(b,M.action),M=M.next;while(M!==g);zn(b,o.memoizedState)||(Tn=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function ky(n,o,c){var d=ie,g=mn(),b=ce;if(b){if(c===void 0)throw Error(s(407));c=c()}else c=o();var M=!zn((Pe||g).memoizedState,c);if(M&&(g.memoizedState=c,Tn=!0),g=g.queue,mm(Ry.bind(null,d,g,n),[n]),g.getSnapshot!==o||M||Sn!==null&&Sn.memoizedState.tag&1){if(d.flags|=2048,Ql(9,{destroy:void 0},Oy.bind(null,d,g,c,o),null),qe===null)throw Error(s(349));b||(qr&127)!==0||Dy(d,o,c)}return c}function Dy(n,o,c){n.flags|=16384,n={getSnapshot:o,value:c},o=ie.updateQueue,o===null?(o=vf(),ie.updateQueue=o,o.stores=[n]):(c=o.stores,c===null?o.stores=[n]:c.push(n))}function Oy(n,o,c,d){o.value=c,o.getSnapshot=d,Iy(o)&&Ny(n)}function Ry(n,o,c){return c(function(){Iy(o)&&Ny(n)})}function Iy(n){var o=n.getSnapshot;n=n.value;try{var c=o();return!zn(n,c)}catch{return!0}}function Ny(n){var o=as(n,2);o!==null&&Si(o,n,2)}function dm(n){var o=ri();if(typeof n=="function"){var c=n;if(n=c(),Xa){Ri(!0);try{c()}finally{Ri(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:n},o}function zy(n,o,c,d){return n.baseState=c,hm(n,Pe,typeof d=="function"?d:jr)}function JT(n,o,c,d,g){if(Tf(n))throw Error(s(485));if(n=o.action,n!==null){var b={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){b.listeners.push(M)}};U.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,Py(o,b)):(b.next=c.next,o.pending=c.next=b)}}function Py(n,o){var c=o.action,d=o.payload,g=n.state;if(o.isTransition){var b=U.T,M={};U.T=M;try{var z=c(g,d),K=U.S;K!==null&&K(M,z),By(n,o,z)}catch(ct){pm(n,o,ct)}finally{b!==null&&M.types!==null&&(b.types=M.types),U.T=b}}else try{b=c(g,d),By(n,o,b)}catch(ct){pm(n,o,ct)}}function By(n,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Uy(n,o,d)},function(d){return pm(n,o,d)}):Uy(n,o,c)}function Uy(n,o,c){o.status="fulfilled",o.value=c,Hy(o),n.state=c,o=n.pending,o!==null&&(c=o.next,c===o?n.pending=null:(c=c.next,o.next=c,Py(n,c)))}function pm(n,o,c){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,Hy(o),o=o.next;while(o!==d)}n.action=null}function Hy(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function Vy(n,o){return o}function qy(n,o){if(ce){var c=qe.formState;if(c!==null){t:{var d=ie;if(ce){if(Ee){e:{for(var g=Ee,b=yi;g.nodeType!==8;){if(!b){g=null;break e}if(g=us(g.nextSibling),g===null){g=null;break e}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){Ee=us(g.nextSibling),d=g.data==="F!";break t}}or(d)}d=!1}d&&(o=c[0])}}return c=ri(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vy,lastRenderedState:o},c.queue=d,c=av.bind(null,ie,d),d.dispatch=c,d=dm(!1),b=bm.bind(null,ie,!1,d.queue),d=ri(),g={state:o,dispatch:null,action:n,pending:null},d.queue=g,c=JT.bind(null,ie,g,b,c),g.dispatch=c,d.memoizedState=n,[o,c,!1]}function jy(n){var o=mn();return Gy(o,Pe,n)}function Gy(n,o,c){if(o=hm(n,o,Vy)[0],n=wf(jr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=vu(o)}catch(M){throw M===Zl?hf:M}else d=o;o=mn();var g=o.queue,b=g.dispatch;return c!==o.memoizedState&&(ie.flags|=2048,Ql(9,{destroy:void 0},$T.bind(null,g,c),null)),[d,b,n]}function $T(n,o){n.action=o}function Zy(n){var o=mn(),c=Pe;if(c!==null)return Gy(o,c,n);mn(),o=o.memoizedState,c=mn();var d=c.queue.dispatch;return c.memoizedState=n,[o,d,!1]}function Ql(n,o,c,d){return n={tag:n,create:c,deps:d,inst:o,next:null},o=ie.updateQueue,o===null&&(o=vf(),ie.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=n.next=n:(d=c.next,c.next=n,n.next=d,o.lastEffect=n),n}function Wy(){return mn().memoizedState}function xf(n,o,c,d){var g=ri();ie.flags|=n,g.memoizedState=Ql(1|o,{destroy:void 0},c,d===void 0?null:d)}function Sf(n,o,c,d){var g=mn();d=d===void 0?null:d;var b=g.memoizedState.inst;Pe!==null&&d!==null&&rm(d,Pe.memoizedState.deps)?g.memoizedState=Ql(o,b,c,d):(ie.flags|=n,g.memoizedState=Ql(1|o,b,c,d))}function Yy(n,o){xf(8390656,8,n,o)}function mm(n,o){Sf(2048,8,n,o)}function t2(n){ie.flags|=4;var o=ie.updateQueue;if(o===null)o=vf(),ie.updateQueue=o,o.events=[n];else{var c=o.events;c===null?o.events=[n]:c.push(n)}}function Xy(n){var o=mn().memoizedState;return t2({ref:o,nextImpl:n}),function(){if((ke&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function Fy(n,o){return Sf(4,2,n,o)}function Qy(n,o){return Sf(4,4,n,o)}function Ky(n,o){if(typeof o=="function"){n=n();var c=o(n);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Jy(n,o,c){c=c!=null?c.concat([n]):null,Sf(4,4,Ky.bind(null,o,n),c)}function _m(){}function $y(n,o){var c=mn();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&rm(o,d[1])?d[0]:(c.memoizedState=[n,o],n)}function tv(n,o){var c=mn();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&rm(o,d[1]))return d[0];if(d=n(),Xa){Ri(!0);try{n()}finally{Ri(!1)}}return c.memoizedState=[d,o],d}function gm(n,o,c){return c===void 0||(qr&1073741824)!==0&&(de&261930)===0?n.memoizedState=o:(n.memoizedState=c,n=eb(),ie.lanes|=n,Vo|=n,c)}function ev(n,o,c,d){return zn(c,o)?c:Yl.current!==null?(n=gm(n,c,d),zn(n,o)||(Tn=!0),n):(qr&42)===0||(qr&1073741824)!==0&&(de&261930)===0?(Tn=!0,n.memoizedState=c):(n=eb(),ie.lanes|=n,Vo|=n,o)}function nv(n,o,c,d,g){var b=Y.p;Y.p=b!==0&&8>b?b:8;var M=U.T,z={};U.T=z,bm(n,!1,o,c);try{var K=g(),ct=U.S;if(ct!==null&&ct(z,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var _t=FT(K,d);bu(n,o,_t,qi(n))}else bu(n,o,d,qi(n))}catch(wt){bu(n,o,{then:function(){},status:"rejected",reason:wt},qi())}finally{Y.p=b,M!==null&&z.types!==null&&(M.types=z.types),U.T=M}}function e2(){}function ym(n,o,c,d){if(n.tag!==5)throw Error(s(476));var g=iv(n).queue;nv(n,g,o,et,c===null?e2:function(){return sv(n),c(d)})}function iv(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:et},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:c},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function sv(n){var o=iv(n);o.next===null&&(o=n.alternate.memoizedState),bu(n,o.next.queue,{},qi())}function vm(){return Zn(Pu)}function rv(){return mn().memoizedState}function ov(){return mn().memoizedState}function n2(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var c=qi();n=No(c);var d=zo(o,n,c);d!==null&&(Si(d,o,c),mu(d,o,c)),o={cache:Xp()},n.payload=o;return}o=o.return}}function i2(n,o,c){var d=qi();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Tf(n)?lv(o,c):(c=ru(n,o,c,d),c!==null&&(Si(c,n,d),cv(c,o,d)))}function av(n,o,c){var d=qi();bu(n,o,c,d)}function bu(n,o,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Tf(n))lv(o,g);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var M=o.lastRenderedState,z=b(M,c);if(g.hasEagerState=!0,g.eagerState=z,zn(z,M))return sr(n,o,g,0),qe===null&&Ba(),!1}catch{}if(c=ru(n,o,g,d),c!==null)return Si(c,n,d),cv(c,o,d),!0}return!1}function bm(n,o,c,d){if(d={lane:2,revertLane:Jm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Tf(n)){if(o)throw Error(s(479))}else o=ru(n,c,d,2),o!==null&&Si(o,n,2)}function Tf(n){var o=n.alternate;return n===ie||o!==null&&o===ie}function lv(n,o){Xl=gf=!0;var c=n.pending;c===null?o.next=o:(o.next=c.next,c.next=o),n.pending=o}function cv(n,o,c){if((c&4194048)!==0){var d=o.lanes;d&=n.pendingLanes,c|=d,o.lanes=c,Wt(n,c)}}var wu={readContext:Zn,use:bf,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};wu.useEffectEvent=ln;var uv={readContext:Zn,use:bf,useCallback:function(n,o){return ri().memoizedState=[n,o===void 0?null:o],n},useContext:Zn,useEffect:Yy,useImperativeHandle:function(n,o,c){c=c!=null?c.concat([n]):null,xf(4194308,4,Ky.bind(null,o,n),c)},useLayoutEffect:function(n,o){return xf(4194308,4,n,o)},useInsertionEffect:function(n,o){xf(4,2,n,o)},useMemo:function(n,o){var c=ri();o=o===void 0?null:o;var d=n();if(Xa){Ri(!0);try{n()}finally{Ri(!1)}}return c.memoizedState=[d,o],d},useReducer:function(n,o,c){var d=ri();if(c!==void 0){var g=c(o);if(Xa){Ri(!0);try{c(o)}finally{Ri(!1)}}}else g=o;return d.memoizedState=d.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},d.queue=n,n=n.dispatch=i2.bind(null,ie,n),[d.memoizedState,n]},useRef:function(n){var o=ri();return n={current:n},o.memoizedState=n},useState:function(n){n=dm(n);var o=n.queue,c=av.bind(null,ie,o);return o.dispatch=c,[n.memoizedState,c]},useDebugValue:_m,useDeferredValue:function(n,o){var c=ri();return gm(c,n,o)},useTransition:function(){var n=dm(!1);return n=nv.bind(null,ie,n.queue,!0,!1),ri().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,c){var d=ie,g=ri();if(ce){if(c===void 0)throw Error(s(407));c=c()}else{if(c=o(),qe===null)throw Error(s(349));(de&127)!==0||Dy(d,o,c)}g.memoizedState=c;var b={value:c,getSnapshot:o};return g.queue=b,Yy(Ry.bind(null,d,b,n),[n]),d.flags|=2048,Ql(9,{destroy:void 0},Oy.bind(null,d,b,c,o),null),c},useId:function(){var n=ri(),o=qe.identifierPrefix;if(ce){var c=kt,d=bt;c=(d&~(1<<32-jn(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=yf++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=QT++,o="_"+o+"r_"+c.toString(32)+"_";return n.memoizedState=o},useHostTransitionStatus:vm,useFormState:qy,useActionState:qy,useOptimistic:function(n){var o=ri();o.memoizedState=o.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=bm.bind(null,ie,!0,c),c.dispatch=o,[n,o]},useMemoCache:um,useCacheRefresh:function(){return ri().memoizedState=n2.bind(null,ie)},useEffectEvent:function(n){var o=ri(),c={impl:n};return o.memoizedState=c,function(){if((ke&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},wm={readContext:Zn,use:bf,useCallback:$y,useContext:Zn,useEffect:mm,useImperativeHandle:Jy,useInsertionEffect:Fy,useLayoutEffect:Qy,useMemo:tv,useReducer:wf,useRef:Wy,useState:function(){return wf(jr)},useDebugValue:_m,useDeferredValue:function(n,o){var c=mn();return ev(c,Pe.memoizedState,n,o)},useTransition:function(){var n=wf(jr)[0],o=mn().memoizedState;return[typeof n=="boolean"?n:vu(n),o]},useSyncExternalStore:ky,useId:rv,useHostTransitionStatus:vm,useFormState:jy,useActionState:jy,useOptimistic:function(n,o){var c=mn();return zy(c,Pe,n,o)},useMemoCache:um,useCacheRefresh:ov};wm.useEffectEvent=Xy;var hv={readContext:Zn,use:bf,useCallback:$y,useContext:Zn,useEffect:mm,useImperativeHandle:Jy,useInsertionEffect:Fy,useLayoutEffect:Qy,useMemo:tv,useReducer:fm,useRef:Wy,useState:function(){return fm(jr)},useDebugValue:_m,useDeferredValue:function(n,o){var c=mn();return Pe===null?gm(c,n,o):ev(c,Pe.memoizedState,n,o)},useTransition:function(){var n=fm(jr)[0],o=mn().memoizedState;return[typeof n=="boolean"?n:vu(n),o]},useSyncExternalStore:ky,useId:rv,useHostTransitionStatus:vm,useFormState:Zy,useActionState:Zy,useOptimistic:function(n,o){var c=mn();return Pe!==null?zy(c,Pe,n,o):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:um,useCacheRefresh:ov};hv.useEffectEvent=Xy;function xm(n,o,c,d){o=n.memoizedState,c=c(d,o),c=c==null?o:y({},o,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Sm={enqueueSetState:function(n,o,c){n=n._reactInternals;var d=qi(),g=No(d);g.payload=o,c!=null&&(g.callback=c),o=zo(n,g,d),o!==null&&(Si(o,n,d),mu(o,n,d))},enqueueReplaceState:function(n,o,c){n=n._reactInternals;var d=qi(),g=No(d);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=zo(n,g,d),o!==null&&(Si(o,n,d),mu(o,n,d))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var c=qi(),d=No(c);d.tag=2,o!=null&&(d.callback=o),o=zo(n,d,c),o!==null&&(Si(o,n,c),mu(o,n,c))}};function fv(n,o,c,d,g,b,M){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,b,M):o.prototype&&o.prototype.isPureReactComponent?!Lo(c,d)||!Lo(g,b):!0}function dv(n,o,c,d){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==n&&Sm.enqueueReplaceState(o,o.state,null)}function Fa(n,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(n=n.defaultProps){c===o&&(c=y({},c));for(var g in n)c[g]===void 0&&(c[g]=n[g])}return c}function pv(n){Pa(n)}function mv(n){console.error(n)}function _v(n){Pa(n)}function Af(n,o){try{var c=n.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function gv(n,o,c){try{var d=n.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Tm(n,o,c){return c=No(c),c.tag=3,c.payload={element:null},c.callback=function(){Af(n,o)},c}function yv(n){return n=No(n),n.tag=3,n}function vv(n,o,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=d.value;n.payload=function(){return g(b)},n.callback=function(){gv(o,c,d)}}var M=c.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(n.callback=function(){gv(o,c,d),typeof g!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var z=d.stack;this.componentDidCatch(d.value,{componentStack:z!==null?z:""})})}function s2(n,o,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&ql(o,c,g,!0),c=Bi.current,c!==null){switch(c.tag){case 31:case 13:return cs===null?Pf():c.alternate===null&&cn===0&&(cn=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===ff?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Fm(n,d,g)),!1;case 22:return c.flags|=65536,d===ff?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Fm(n,d,g)),!1}throw Error(s(435,c.tag))}return Fm(n,d,g),Pf(),!1}if(ce)return o=Bi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,d!==Vl&&(n=Error(s(422),{cause:d}),Va(h(n,c)))):(d!==Vl&&(o=Error(s(423),{cause:d}),Va(h(o,c))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,d=h(d,c),g=Tm(n.stateNode,d,g),tm(n,g),cn!==4&&(cn=2)),!1;var b=Error(s(520),{cause:d});if(b=h(b,c),Mu===null?Mu=[b]:Mu.push(b),cn!==4&&(cn=2),o===null)return!0;d=h(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,n=g&-g,c.lanes|=n,n=Tm(c.stateNode,d,n),tm(c,n),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qo===null||!qo.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=yv(g),vv(g,n,c,d),tm(c,g),!1}c=c.return}while(c!==null);return!1}var Am=Error(s(461)),Tn=!1;function Wn(n,o,c,d){o.child=n===null?Sy(o,null,c,d):Ya(o,n.child,c,d)}function bv(n,o,c,d,g){c=c.render;var b=o.ref;if("ref"in d){var M={};for(var z in d)z!=="ref"&&(M[z]=d[z])}else M=d;return ja(o),d=om(n,o,c,M,b,g),z=am(),n!==null&&!Tn?(lm(n,o,g),Gr(n,o,g)):(ce&&z&&Mn(o),o.flags|=1,Wn(n,o,d,g),o.child)}function wv(n,o,c,d,g){if(n===null){var b=c.type;return typeof b=="function"&&!Ul(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,xv(n,o,b,d,g)):(n=Ha(c.type,null,d,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(b=n.child,!Rm(n,g)){var M=b.memoizedProps;if(c=c.compare,c=c!==null?c:Lo,c(M,d)&&n.ref===o.ref)return Gr(n,o,g)}return o.flags|=1,n=ls(b,d),n.ref=o.ref,n.return=o,o.child=n}function xv(n,o,c,d,g){if(n!==null){var b=n.memoizedProps;if(Lo(b,d)&&n.ref===o.ref)if(Tn=!1,o.pendingProps=d=b,Rm(n,g))(n.flags&131072)!==0&&(Tn=!0);else return o.lanes=n.lanes,Gr(n,o,g)}return Em(n,o,c,d,g)}function Sv(n,o,c,d){var g=d.children,b=n!==null?n.memoizedState:null;if(n===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,n!==null){for(d=o.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~b}else d=0,o.child=null;return Tv(n,o,b,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&uf(o,b!==null?b.cachePool:null),b!==null?Ey(o,b):nm(),Cy(o);else return d=o.lanes=536870912,Tv(n,o,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(uf(o,b.cachePool),Ey(o,b),Bo(),o.memoizedState=null):(n!==null&&uf(o,null),nm(),Bo());return Wn(n,o,g,c),o.child}function xu(n,o){return n!==null&&n.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Tv(n,o,c,d,g){var b=Qp();return b=b===null?null:{parent:xn._currentValue,pool:b},o.memoizedState={baseLanes:c,cachePool:b},n!==null&&uf(o,null),nm(),Cy(o),n!==null&&ql(n,o,d,!0),o.childLanes=g,null}function Ef(n,o){return o=Lf({mode:o.mode,children:o.children},n.mode),o.ref=n.ref,n.child=o,o.return=n,o}function Av(n,o,c){return Ya(o,n.child,null,c),n=Ef(o,o.pendingProps),n.flags|=2,Ui(o),o.memoizedState=null,n}function r2(n,o,c){var d=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,n===null){if(ce){if(d.mode==="hidden")return n=Ef(o,d),o.lanes=536870912,xu(null,n);if(sm(o),(n=Ee)?(n=Pb(n,yi),n=n!==null&&n.data==="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:ut!==null?{id:bt,overflow:kt}:null,retryLane:536870912,hydrationErrors:null},c=au(n),c.return=o,o.child=c,Ae=o,Ee=null)):n=null,n===null)throw or(o);return o.lanes=536870912,null}return Ef(o,d)}var b=n.memoizedState;if(b!==null){var M=b.dehydrated;if(sm(o),g)if(o.flags&256)o.flags&=-257,o=Av(n,o,c);else if(o.memoizedState!==null)o.child=n.child,o.flags|=128,o=null;else throw Error(s(558));else if(Tn||ql(n,o,c,!1),g=(c&n.childLanes)!==0,Tn||g){if(d=qe,d!==null&&(M=Qt(d,c),M!==0&&M!==b.retryLane))throw b.retryLane=M,as(n,M),Si(d,n,M),Am;Pf(),o=Av(n,o,c)}else n=b.treeContext,Ee=us(M.nextSibling),Ae=o,ce=!0,rr=null,yi=!1,n!==null&&si(o,n),o=Ef(o,d),o.flags|=4096;return o}return n=ls(n.child,{mode:d.mode,children:d.children}),n.ref=o.ref,o.child=n,n.return=o,n}function Cf(n,o){var c=o.ref;if(c===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(n===null||n.ref!==c)&&(o.flags|=4194816)}}function Em(n,o,c,d,g){return ja(o),c=om(n,o,c,d,void 0,g),d=am(),n!==null&&!Tn?(lm(n,o,g),Gr(n,o,g)):(ce&&d&&Mn(o),o.flags|=1,Wn(n,o,c,g),o.child)}function Ev(n,o,c,d,g,b){return ja(o),o.updateQueue=null,c=My(o,d,c,g),Ly(n),d=am(),n!==null&&!Tn?(lm(n,o,b),Gr(n,o,b)):(ce&&d&&Mn(o),o.flags|=1,Wn(n,o,c,b),o.child)}function Cv(n,o,c,d,g){if(ja(o),o.stateNode===null){var b=Br,M=c.contextType;typeof M=="object"&&M!==null&&(b=Zn(M)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Sm,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},Jp(o),M=c.contextType,b.context=typeof M=="object"&&M!==null?Zn(M):Br,b.state=o.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(xm(o,c,M,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(M=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),M!==b.state&&Sm.enqueueReplaceState(b,b.state,null),gu(o,d,b,g),_u(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(n===null){b=o.stateNode;var z=o.memoizedProps,K=Fa(c,z);b.props=K;var ct=b.context,_t=c.contextType;M=Br,typeof _t=="object"&&_t!==null&&(M=Zn(_t));var wt=c.getDerivedStateFromProps;_t=typeof wt=="function"||typeof b.getSnapshotBeforeUpdate=="function",z=o.pendingProps!==z,_t||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(z||ct!==M)&&dv(o,b,d,M),Io=!1;var ht=o.memoizedState;b.state=ht,gu(o,d,b,g),_u(),ct=o.memoizedState,z||ht!==ct||Io?(typeof wt=="function"&&(xm(o,c,wt,d),ct=o.memoizedState),(K=Io||fv(o,c,K,d,ht,ct,M))?(_t||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=ct),b.props=d,b.state=ct,b.context=M,d=K):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,$p(n,o),M=o.memoizedProps,_t=Fa(c,M),b.props=_t,wt=o.pendingProps,ht=b.context,ct=c.contextType,K=Br,typeof ct=="object"&&ct!==null&&(K=Zn(ct)),z=c.getDerivedStateFromProps,(ct=typeof z=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M!==wt||ht!==K)&&dv(o,b,d,K),Io=!1,ht=o.memoizedState,b.state=ht,gu(o,d,b,g),_u();var ft=o.memoizedState;M!==wt||ht!==ft||Io||n!==null&&n.dependencies!==null&&lf(n.dependencies)?(typeof z=="function"&&(xm(o,c,z,d),ft=o.memoizedState),(_t=Io||fv(o,c,_t,d,ht,ft,K)||n!==null&&n.dependencies!==null&&lf(n.dependencies))?(ct||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ft,K),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ft,K)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||M===n.memoizedProps&&ht===n.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&ht===n.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ft),b.props=d,b.state=ft,b.context=K,d=_t):(typeof b.componentDidUpdate!="function"||M===n.memoizedProps&&ht===n.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&ht===n.memoizedState||(o.flags|=1024),d=!1)}return b=d,Cf(n,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,n!==null&&d?(o.child=Ya(o,n.child,null,g),o.child=Ya(o,null,c,g)):Wn(n,o,c,g),o.memoizedState=b.state,n=o.child):n=Gr(n,o,g),n}function Lv(n,o,c,d){return Hr(),o.flags|=256,Wn(n,o,c,d),o.child}var Cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lm(n){return{baseLanes:n,cachePool:gy()}}function Mm(n,o,c){return n=n!==null?n.childLanes&~c:0,o&&(n|=Vi),n}function Mv(n,o,c){var d=o.pendingProps,g=!1,b=(o.flags&128)!==0,M;if((M=b)||(M=n!==null&&n.memoizedState===null?!1:(pn.current&2)!==0),M&&(g=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,n===null){if(ce){if(g?Po(o):Bo(),(n=Ee)?(n=Pb(n,yi),n=n!==null&&n.data!=="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:ut!==null?{id:bt,overflow:kt}:null,retryLane:536870912,hydrationErrors:null},c=au(n),c.return=o,o.child=c,Ae=o,Ee=null)):n=null,n===null)throw or(o);return h_(n)?o.lanes=32:o.lanes=536870912,null}var z=d.children;return d=d.fallback,g?(Bo(),g=o.mode,z=Lf({mode:"hidden",children:z},g),d=Ur(d,g,c,null),z.return=o,d.return=o,z.sibling=d,o.child=z,d=o.child,d.memoizedState=Lm(c),d.childLanes=Mm(n,M,c),o.memoizedState=Cm,xu(null,d)):(Po(o),km(o,z))}var K=n.memoizedState;if(K!==null&&(z=K.dehydrated,z!==null)){if(b)o.flags&256?(Po(o),o.flags&=-257,o=Dm(n,o,c)):o.memoizedState!==null?(Bo(),o.child=n.child,o.flags|=128,o=null):(Bo(),z=d.fallback,g=o.mode,d=Lf({mode:"visible",children:d.children},g),z=Ur(z,g,c,null),z.flags|=2,d.return=o,z.return=o,d.sibling=z,o.child=d,Ya(o,n.child,null,c),d=o.child,d.memoizedState=Lm(c),d.childLanes=Mm(n,M,c),o.memoizedState=Cm,o=xu(null,d));else if(Po(o),h_(z)){if(M=z.nextSibling&&z.nextSibling.dataset,M)var ct=M.dgst;M=ct,d=Error(s(419)),d.stack="",d.digest=M,Va({value:d,source:null,stack:null}),o=Dm(n,o,c)}else if(Tn||ql(n,o,c,!1),M=(c&n.childLanes)!==0,Tn||M){if(M=qe,M!==null&&(d=Qt(M,c),d!==0&&d!==K.retryLane))throw K.retryLane=d,as(n,d),Si(M,n,d),Am;u_(z)||Pf(),o=Dm(n,o,c)}else u_(z)?(o.flags|=192,o.child=n.child,o=null):(n=K.treeContext,Ee=us(z.nextSibling),Ae=o,ce=!0,rr=null,yi=!1,n!==null&&si(o,n),o=km(o,d.children),o.flags|=4096);return o}return g?(Bo(),z=d.fallback,g=o.mode,K=n.child,ct=K.sibling,d=ls(K,{mode:"hidden",children:d.children}),d.subtreeFlags=K.subtreeFlags&65011712,ct!==null?z=ls(ct,z):(z=Ur(z,g,c,null),z.flags|=2),z.return=o,d.return=o,d.sibling=z,o.child=d,xu(null,d),d=o.child,z=n.child.memoizedState,z===null?z=Lm(c):(g=z.cachePool,g!==null?(K=xn._currentValue,g=g.parent!==K?{parent:K,pool:K}:g):g=gy(),z={baseLanes:z.baseLanes|c,cachePool:g}),d.memoizedState=z,d.childLanes=Mm(n,M,c),o.memoizedState=Cm,xu(n.child,d)):(Po(o),c=n.child,n=c.sibling,c=ls(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,n!==null&&(M=o.deletions,M===null?(o.deletions=[n],o.flags|=16):M.push(n)),o.child=c,o.memoizedState=null,c)}function km(n,o){return o=Lf({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function Lf(n,o){return n=Jn(22,n,null,o),n.lanes=0,n}function Dm(n,o,c){return Ya(o,n.child,null,c),n=km(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function kv(n,o,c){n.lanes|=o;var d=n.alternate;d!==null&&(d.lanes|=o),Wp(n.return,o,c)}function Om(n,o,c,d,g,b){var M=n.memoizedState;M===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:b}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=d,M.tail=c,M.tailMode=g,M.treeForkCount=b)}function Dv(n,o,c){var d=o.pendingProps,g=d.revealOrder,b=d.tail;d=d.children;var M=pn.current,z=(M&2)!==0;if(z?(M=M&1|2,o.flags|=128):M&=1,ot(pn,M),Wn(n,o,d,c),d=ce?N:0,!z&&n!==null&&(n.flags&128)!==0)t:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&kv(n,c,o);else if(n.tag===19)kv(n,c,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break t;for(;n.sibling===null;){if(n.return===null||n.return===o)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(c=o.child,g=null;c!==null;)n=c.alternate,n!==null&&_f(n)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),Om(o,!1,g,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&_f(n)===null){o.child=g;break}n=g.sibling,g.sibling=c,c=g,g=n}Om(o,!0,c,null,b,d);break;case"together":Om(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Gr(n,o,c){if(n!==null&&(o.dependencies=n.dependencies),Vo|=o.lanes,(c&o.childLanes)===0)if(n!==null){if(ql(n,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(s(153));if(o.child!==null){for(n=o.child,c=ls(n,n.pendingProps),o.child=c,c.return=o;n.sibling!==null;)n=n.sibling,c=c.sibling=ls(n,n.pendingProps),c.return=o;c.sibling=null}return o.child}function Rm(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&lf(n)))}function o2(n,o,c){switch(o.tag){case 3:Et(o,o.stateNode.containerInfo),Ro(o,xn,n.memoizedState.cache),Hr();break;case 27:case 5:Se(o);break;case 4:Et(o,o.stateNode.containerInfo);break;case 10:Ro(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,sm(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Po(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Mv(n,o,c):(Po(o),n=Gr(n,o,c),n!==null?n.sibling:null);Po(o);break;case 19:var g=(n.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(ql(n,o,c,!1),d=(c&o.childLanes)!==0),g){if(d)return Dv(n,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ot(pn,pn.current),d)break;return null;case 22:return o.lanes=0,Sv(n,o,c,o.pendingProps);case 24:Ro(o,xn,n.memoizedState.cache)}return Gr(n,o,c)}function Ov(n,o,c){if(n!==null)if(n.memoizedProps!==o.pendingProps)Tn=!0;else{if(!Rm(n,c)&&(o.flags&128)===0)return Tn=!1,o2(n,o,c);Tn=(n.flags&131072)!==0}else Tn=!1,ce&&(o.flags&1048576)!==0&&se(o,N,o.index);switch(o.lanes=0,o.tag){case 16:t:{var d=o.pendingProps;if(n=Za(o.elementType),o.type=n,typeof n=="function")Ul(n)?(d=Fa(n,d),o.tag=1,o=Cv(null,o,n,d,c)):(o.tag=0,o=Em(null,o,n,d,c));else{if(n!=null){var g=n.$$typeof;if(g===F){o.tag=11,o=bv(null,o,n,d,c);break t}else if(g===Z){o.tag=14,o=wv(null,o,n,d,c);break t}}throw o=J(n)||n,Error(s(306,o,""))}}return o;case 0:return Em(n,o,o.type,o.pendingProps,c);case 1:return d=o.type,g=Fa(d,o.pendingProps),Cv(n,o,d,g,c);case 3:t:{if(Et(o,o.stateNode.containerInfo),n===null)throw Error(s(387));d=o.pendingProps;var b=o.memoizedState;g=b.element,$p(n,o),gu(o,d,null,c);var M=o.memoizedState;if(d=M.cache,Ro(o,xn,d),d!==b.cache&&Yp(o,[xn],c,!0),_u(),d=M.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Lv(n,o,d,c);break t}else if(d!==g){g=h(Error(s(424)),o),Va(g),o=Lv(n,o,d,c);break t}else for(n=o.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ee=us(n.firstChild),Ae=o,ce=!0,rr=null,yi=!0,c=Sy(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Hr(),d===g){o=Gr(n,o,c);break t}Wn(n,o,d,c)}o=o.child}return o;case 26:return Cf(n,o),n===null?(c=jb(o.type,null,o.pendingProps,null))?o.memoizedState=c:ce||(c=o.type,n=o.pendingProps,d=Gf(mt.current).createElement(c),d[De]=o,d[bn]=n,Yn(d,c,n),wn(d),o.stateNode=d):o.memoizedState=jb(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return Se(o),n===null&&ce&&(d=o.stateNode=Hb(o.type,o.pendingProps,mt.current),Ae=o,yi=!0,g=Ee,Wo(o.type)?(f_=g,Ee=us(d.firstChild)):Ee=g),Wn(n,o,o.pendingProps.children,c),Cf(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&ce&&((g=d=Ee)&&(d=z2(d,o.type,o.pendingProps,yi),d!==null?(o.stateNode=d,Ae=o,Ee=us(d.firstChild),yi=!1,g=!0):g=!1),g||or(o)),Se(o),g=o.type,b=o.pendingProps,M=n!==null?n.memoizedProps:null,d=b.children,a_(g,b)?d=null:M!==null&&a_(g,M)&&(o.flags|=32),o.memoizedState!==null&&(g=om(n,o,KT,null,null,c),Pu._currentValue=g),Cf(n,o),Wn(n,o,d,c),o.child;case 6:return n===null&&ce&&((n=c=Ee)&&(c=P2(c,o.pendingProps,yi),c!==null?(o.stateNode=c,Ae=o,Ee=null,n=!0):n=!1),n||or(o)),null;case 13:return Mv(n,o,c);case 4:return Et(o,o.stateNode.containerInfo),d=o.pendingProps,n===null?o.child=Ya(o,null,d,c):Wn(n,o,d,c),o.child;case 11:return bv(n,o,o.type,o.pendingProps,c);case 7:return Wn(n,o,o.pendingProps,c),o.child;case 8:return Wn(n,o,o.pendingProps.children,c),o.child;case 12:return Wn(n,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,Ro(o,o.type,d.value),Wn(n,o,d.children,c),o.child;case 9:return g=o.type._context,d=o.pendingProps.children,ja(o),g=Zn(g),d=d(g),o.flags|=1,Wn(n,o,d,c),o.child;case 14:return wv(n,o,o.type,o.pendingProps,c);case 15:return xv(n,o,o.type,o.pendingProps,c);case 19:return Dv(n,o,c);case 31:return r2(n,o,c);case 22:return Sv(n,o,c,o.pendingProps);case 24:return ja(o),d=Zn(xn),n===null?(g=Qp(),g===null&&(g=qe,b=Xp(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),o.memoizedState={parent:d,cache:g},Jp(o),Ro(o,xn,g)):((n.lanes&c)!==0&&($p(n,o),gu(o,null,null,c),_u()),g=n.memoizedState,b=o.memoizedState,g.parent!==d?(g={parent:d,cache:d},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Ro(o,xn,d)):(d=b.cache,Ro(o,xn,d),d!==g.cache&&Yp(o,[xn],c,!0))),Wn(n,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Zr(n){n.flags|=4}function Im(n,o,c,d,g){if((o=(n.mode&32)!==0)&&(o=!1),o){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(rb())n.flags|=8192;else throw Wa=ff,Kp}else n.flags&=-16777217}function Rv(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Xb(o))if(rb())n.flags|=8192;else throw Wa=ff,Kp}function Mf(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?Gt():536870912,n.lanes|=o,tc|=o)}function Su(n,o){if(!ce)switch(n.tailMode){case"hidden":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Qe(n){var o=n.alternate!==null&&n.alternate.child===n.child,c=0,d=0;if(o)for(var g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=d,n.childLanes=c,o}function a2(n,o,c){var d=o.pendingProps;switch(an(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(o),null;case 1:return Qe(o),null;case 3:return c=o.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Vr(xn),ne(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Os(o)?Zr(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,uu())),Qe(o),null;case 26:var g=o.type,b=o.memoizedState;return n===null?(Zr(o),b!==null?(Qe(o),Rv(o,b)):(Qe(o),Im(o,g,null,d,c))):b?b!==n.memoizedState?(Zr(o),Qe(o),Rv(o,b)):(Qe(o),o.flags&=-16777217):(n=n.memoizedProps,n!==d&&Zr(o),Qe(o),Im(o,g,n,d,c)),null;case 27:if(We(o),c=mt.current,g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==d&&Zr(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return Qe(o),null}n=dt.current,Os(o)?cu(o):(n=Hb(g,d,c),o.stateNode=n,Zr(o))}return Qe(o),null;case 5:if(We(o),g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==d&&Zr(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return Qe(o),null}if(b=dt.current,Os(o))cu(o);else{var M=Gf(mt.current);switch(b){case 1:b=M.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=M.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=M.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?M.createElement("select",{is:d.is}):M.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?M.createElement(g,{is:d.is}):M.createElement(g)}}b[De]=o,b[bn]=d;t:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)b.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break t;for(;M.sibling===null;){if(M.return===null||M.return===o)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=b;t:switch(Yn(b,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&Zr(o)}}return Qe(o),Im(o,o.type,n===null?null:n.memoizedProps,o.pendingProps,c),null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==d&&Zr(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(s(166));if(n=mt.current,Os(o)){if(n=o.stateNode,c=o.memoizedProps,d=null,g=Ae,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}n[De]=o,n=!!(n.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Mb(n.nodeValue,c)),n||or(o,!0)}else n=Gf(n).createTextNode(d),n[De]=o,o.stateNode=n}return Qe(o),null;case 31:if(c=o.memoizedState,n===null||n.memoizedState!==null){if(d=Os(o),c!==null){if(n===null){if(!d)throw Error(s(318));if(n=o.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[De]=o}else Hr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Qe(o),n=!1}else c=uu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=c),n=!0;if(!n)return o.flags&256?(Ui(o),o):(Ui(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Qe(o),null;case 13:if(d=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Os(o),d!==null&&d.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[De]=o}else Hr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Qe(o),g=!1}else g=uu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Ui(o),o):(Ui(o),null)}return Ui(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,n=n!==null&&n.memoizedState!==null,c&&(d=o.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==g&&(d.flags|=2048)),c!==n&&c&&(o.child.flags|=8192),Mf(o,o.updateQueue),Qe(o),null);case 4:return ne(),n===null&&n_(o.stateNode.containerInfo),Qe(o),null;case 10:return Vr(o.type),Qe(o),null;case 19:if(G(pn),d=o.memoizedState,d===null)return Qe(o),null;if(g=(o.flags&128)!==0,b=d.rendering,b===null)if(g)Su(d,!1);else{if(cn!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(b=_f(n),b!==null){for(o.flags|=128,Su(d,!1),n=b.updateQueue,o.updateQueue=n,Mf(o,n),o.subtreeFlags=0,n=c,c=o.child;c!==null;)ou(c,n),c=c.sibling;return ot(pn,pn.current&1|2),ce&&jt(o,d.treeForkCount),o.child}n=n.sibling}d.tail!==null&&sn()>If&&(o.flags|=128,g=!0,Su(d,!1),o.lanes=4194304)}else{if(!g)if(n=_f(b),n!==null){if(o.flags|=128,g=!0,n=n.updateQueue,o.updateQueue=n,Mf(o,n),Su(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!ce)return Qe(o),null}else 2*sn()-d.renderingStartTime>If&&c!==536870912&&(o.flags|=128,g=!0,Su(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(n=d.last,n!==null?n.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=sn(),n.sibling=null,c=pn.current,ot(pn,g?c&1|2:c&1),ce&&jt(o,d.treeForkCount),n):(Qe(o),null);case 22:case 23:return Ui(o),im(),d=o.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(Qe(o),o.subtreeFlags&6&&(o.flags|=8192)):Qe(o),c=o.updateQueue,c!==null&&Mf(o,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),n!==null&&G(Ga),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Vr(xn),Qe(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function l2(n,o){switch(an(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Vr(xn),ne(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return We(o),null;case 31:if(o.memoizedState!==null){if(Ui(o),o.alternate===null)throw Error(s(340));Hr()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 13:if(Ui(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Hr()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return G(pn),null;case 4:return ne(),null;case 10:return Vr(o.type),null;case 22:case 23:return Ui(o),im(),n!==null&&G(Ga),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return Vr(xn),null;case 25:return null;default:return null}}function Iv(n,o){switch(an(o),o.tag){case 3:Vr(xn),ne();break;case 26:case 27:case 5:We(o);break;case 4:ne();break;case 31:o.memoizedState!==null&&Ui(o);break;case 13:Ui(o);break;case 19:G(pn);break;case 10:Vr(o.type);break;case 22:case 23:Ui(o),im(),n!==null&&G(Ga);break;case 24:Vr(xn)}}function Tu(n,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&n)===n){d=void 0;var b=c.create,M=c.inst;d=b(),M.destroy=d}c=c.next}while(c!==g)}}catch(z){Ie(o,o.return,z)}}function Uo(n,o,c){try{var d=o.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var b=g.next;d=b;do{if((d.tag&n)===n){var M=d.inst,z=M.destroy;if(z!==void 0){M.destroy=void 0,g=o;var K=c,ct=z;try{ct()}catch(_t){Ie(g,K,_t)}}}d=d.next}while(d!==b)}}catch(_t){Ie(o,o.return,_t)}}function Nv(n){var o=n.updateQueue;if(o!==null){var c=n.stateNode;try{Ay(o,c)}catch(d){Ie(n,n.return,d)}}}function zv(n,o,c){c.props=Fa(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(d){Ie(n,o,d)}}function Au(n,o){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof c=="function"?n.refCleanup=c(d):c.current=d}}catch(g){Ie(n,o,g)}}function lr(n,o){var c=n.ref,d=n.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){Ie(n,o,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Ie(n,o,g)}else c.current=null}function Pv(n){var o=n.type,c=n.memoizedProps,d=n.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){Ie(n,n.return,g)}}function Nm(n,o,c){try{var d=n.stateNode;k2(d,n.type,c,o),d[bn]=o}catch(g){Ie(n,n.return,g)}}function Bv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Wo(n.type)||n.tag===4}function zm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Bv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Wo(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Pm(n,o,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(n),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=pi));else if(d!==4&&(d===27&&Wo(n.type)&&(c=n.stateNode,o=null),n=n.child,n!==null))for(Pm(n,o,c),n=n.sibling;n!==null;)Pm(n,o,c),n=n.sibling}function kf(n,o,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,o?c.insertBefore(n,o):c.appendChild(n);else if(d!==4&&(d===27&&Wo(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(kf(n,o,c),n=n.sibling;n!==null;)kf(n,o,c),n=n.sibling}function Uv(n){var o=n.stateNode,c=n.memoizedProps;try{for(var d=n.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Yn(o,d,c),o[De]=n,o[bn]=c}catch(b){Ie(n,n.return,b)}}var Wr=!1,An=!1,Bm=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,Bn=null;function c2(n,o){if(n=n.containerInfo,r_=Kf,n=Ra(n),tr(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else t:{c=(c=n.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break t}var M=0,z=-1,K=-1,ct=0,_t=0,wt=n,ht=null;e:for(;;){for(var ft;wt!==c||g!==0&&wt.nodeType!==3||(z=M+g),wt!==b||d!==0&&wt.nodeType!==3||(K=M+d),wt.nodeType===3&&(M+=wt.nodeValue.length),(ft=wt.firstChild)!==null;)ht=wt,wt=ft;for(;;){if(wt===n)break e;if(ht===c&&++ct===g&&(z=M),ht===b&&++_t===d&&(K=M),(ft=wt.nextSibling)!==null)break;wt=ht,ht=wt.parentNode}wt=ft}c=z===-1||K===-1?null:{start:z,end:K}}else c=null}c=c||{start:0,end:0}}else c=null;for(o_={focusedElem:n,selectionRange:c},Kf=!1,Bn=o;Bn!==null;)if(o=Bn,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Bn=n;else for(;Bn!==null;){switch(o=Bn,b=o.alternate,n=o.flags,o.tag){case 0:if((n&4)!==0&&(n=o.updateQueue,n=n!==null?n.events:null,n!==null))for(c=0;c<n.length;c++)g=n[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&b!==null){n=void 0,c=o,g=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var Pt=Fa(c.type,g);n=d.getSnapshotBeforeUpdate(Pt,b),d.__reactInternalSnapshotBeforeUpdate=n}catch(Xt){Ie(c,c.return,Xt)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,c=n.nodeType,c===9)c_(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":c_(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=o.sibling,n!==null){n.return=o.return,Bn=n;break}Bn=o.return}}function Vv(n,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Xr(n,c),d&4&&Tu(5,c);break;case 1:if(Xr(n,c),d&4)if(n=c.stateNode,o===null)try{n.componentDidMount()}catch(M){Ie(c,c.return,M)}else{var g=Fa(c.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(g,o,n.__reactInternalSnapshotBeforeUpdate)}catch(M){Ie(c,c.return,M)}}d&64&&Nv(c),d&512&&Au(c,c.return);break;case 3:if(Xr(n,c),d&64&&(n=c.updateQueue,n!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Ay(n,o)}catch(M){Ie(c,c.return,M)}}break;case 27:o===null&&d&4&&Uv(c);case 26:case 5:Xr(n,c),o===null&&d&4&&Pv(c),d&512&&Au(c,c.return);break;case 12:Xr(n,c);break;case 31:Xr(n,c),d&4&&Gv(n,c);break;case 13:Xr(n,c),d&4&&Zv(n,c),d&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=y2.bind(null,c),B2(n,c))));break;case 22:if(d=c.memoizedState!==null||Wr,!d){o=o!==null&&o.memoizedState!==null||An,g=Wr;var b=An;Wr=d,(An=o)&&!b?Fr(n,c,(c.subtreeFlags&8772)!==0):Xr(n,c),Wr=g,An=b}break;case 30:break;default:Xr(n,c)}}function qv(n){var o=n.alternate;o!==null&&(n.alternate=null,qv(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&qc(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var tn=null,vi=!1;function Yr(n,o,c){for(c=c.child;c!==null;)jv(n,o,c),c=c.sibling}function jv(n,o,c){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Ys,c)}catch{}switch(c.tag){case 26:An||lr(c,o),Yr(n,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:An||lr(c,o);var d=tn,g=vi;Wo(c.type)&&(tn=c.stateNode,vi=!1),Yr(n,o,c),Iu(c.stateNode),tn=d,vi=g;break;case 5:An||lr(c,o);case 6:if(d=tn,g=vi,tn=null,Yr(n,o,c),tn=d,vi=g,tn!==null)if(vi)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(c.stateNode)}catch(b){Ie(c,o,b)}else try{tn.removeChild(c.stateNode)}catch(b){Ie(c,o,b)}break;case 18:tn!==null&&(vi?(n=tn,Nb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),lc(n)):Nb(tn,c.stateNode));break;case 4:d=tn,g=vi,tn=c.stateNode.containerInfo,vi=!0,Yr(n,o,c),tn=d,vi=g;break;case 0:case 11:case 14:case 15:Uo(2,c,o),An||Uo(4,c,o),Yr(n,o,c);break;case 1:An||(lr(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&zv(c,o,d)),Yr(n,o,c);break;case 21:Yr(n,o,c);break;case 22:An=(d=An)||c.memoizedState!==null,Yr(n,o,c),An=d;break;default:Yr(n,o,c)}}function Gv(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{lc(n)}catch(c){Ie(o,o.return,c)}}}function Zv(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{lc(n)}catch(c){Ie(o,o.return,c)}}function u2(n){switch(n.tag){case 31:case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new Hv),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new Hv),o;default:throw Error(s(435,n.tag))}}function Df(n,o){var c=u2(n);o.forEach(function(d){if(!c.has(d)){c.add(d);var g=v2.bind(null,n,d);d.then(g,g)}})}function bi(n,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],b=n,M=o,z=M;t:for(;z!==null;){switch(z.tag){case 27:if(Wo(z.type)){tn=z.stateNode,vi=!1;break t}break;case 5:tn=z.stateNode,vi=!1;break t;case 3:case 4:tn=z.stateNode.containerInfo,vi=!0;break t}z=z.return}if(tn===null)throw Error(s(160));jv(b,M,g),tn=null,vi=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Wv(o,n),o=o.sibling}var Is=null;function Wv(n,o){var c=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:bi(o,n),wi(n),d&4&&(Uo(3,n,n.return),Tu(3,n),Uo(5,n,n.return));break;case 1:bi(o,n),wi(n),d&512&&(An||c===null||lr(c,c.return)),d&64&&Wr&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=Is;if(bi(o,n),wi(n),d&512&&(An||c===null||lr(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=n.memoizedState,c===null)if(d===null)if(n.stateNode===null){t:{d=n.type,c=n.memoizedProps,g=g.ownerDocument||g;e:switch(d){case"title":b=g.getElementsByTagName("title")[0],(!b||b[ga]||b[De]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(d),g.head.insertBefore(b,g.querySelector("head > title"))),Yn(b,d,c),b[De]=n,wn(b),d=b;break t;case"link":var M=Wb("link","href",g).get(d+(c.href||""));if(M){for(var z=0;z<M.length;z++)if(b=M[z],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){M.splice(z,1);break e}}b=g.createElement(d),Yn(b,d,c),g.head.appendChild(b);break;case"meta":if(M=Wb("meta","content",g).get(d+(c.content||""))){for(z=0;z<M.length;z++)if(b=M[z],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){M.splice(z,1);break e}}b=g.createElement(d),Yn(b,d,c),g.head.appendChild(b);break;default:throw Error(s(468,d))}b[De]=n,wn(b),d=b}n.stateNode=d}else Yb(g,n.type,n.stateNode);else n.stateNode=Zb(g,d,n.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?Yb(g,n.type,n.stateNode):Zb(g,d,n.memoizedProps)):d===null&&n.stateNode!==null&&Nm(n,n.memoizedProps,c.memoizedProps)}break;case 27:bi(o,n),wi(n),d&512&&(An||c===null||lr(c,c.return)),c!==null&&d&4&&Nm(n,n.memoizedProps,c.memoizedProps);break;case 5:if(bi(o,n),wi(n),d&512&&(An||c===null||lr(c,c.return)),n.flags&32){g=n.stateNode;try{es(g,"")}catch(Pt){Ie(n,n.return,Pt)}}d&4&&n.stateNode!=null&&(g=n.memoizedProps,Nm(n,g,c!==null?c.memoizedProps:g)),d&1024&&(Bm=!0);break;case 6:if(bi(o,n),wi(n),d&4){if(n.stateNode===null)throw Error(s(162));d=n.memoizedProps,c=n.stateNode;try{c.nodeValue=d}catch(Pt){Ie(n,n.return,Pt)}}break;case 3:if(Yf=null,g=Is,Is=Zf(o.containerInfo),bi(o,n),Is=g,wi(n),d&4&&c!==null&&c.memoizedState.isDehydrated)try{lc(o.containerInfo)}catch(Pt){Ie(n,n.return,Pt)}Bm&&(Bm=!1,Yv(n));break;case 4:d=Is,Is=Zf(n.stateNode.containerInfo),bi(o,n),wi(n),Is=d;break;case 12:bi(o,n),wi(n);break;case 31:bi(o,n),wi(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Df(n,d)));break;case 13:bi(o,n),wi(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Rf=sn()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Df(n,d)));break;case 22:g=n.memoizedState!==null;var K=c!==null&&c.memoizedState!==null,ct=Wr,_t=An;if(Wr=ct||g,An=_t||K,bi(o,n),An=_t,Wr=ct,wi(n),d&8192)t:for(o=n.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||K||Wr||An||Qa(n)),c=null,o=n;;){if(o.tag===5||o.tag===26){if(c===null){K=c=o;try{if(b=K.stateNode,g)M=b.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{z=K.stateNode;var wt=K.memoizedProps.style,ht=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;z.style.display=ht==null||typeof ht=="boolean"?"":(""+ht).trim()}}catch(Pt){Ie(K,K.return,Pt)}}}else if(o.tag===6){if(c===null){K=o;try{K.stateNode.nodeValue=g?"":K.memoizedProps}catch(Pt){Ie(K,K.return,Pt)}}}else if(o.tag===18){if(c===null){K=o;try{var ft=K.stateNode;g?zb(ft,!0):zb(K.stateNode,!1)}catch(Pt){Ie(K,K.return,Pt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break t;for(;o.sibling===null;){if(o.return===null||o.return===n)break t;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=n.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Df(n,c))));break;case 19:bi(o,n),wi(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Df(n,d)));break;case 30:break;case 21:break;default:bi(o,n),wi(n)}}function wi(n){var o=n.flags;if(o&2){try{for(var c,d=n.return;d!==null;){if(Bv(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var g=c.stateNode,b=zm(n);kf(n,b,g);break;case 5:var M=c.stateNode;c.flags&32&&(es(M,""),c.flags&=-33);var z=zm(n);kf(n,z,M);break;case 3:case 4:var K=c.stateNode.containerInfo,ct=zm(n);Pm(n,ct,K);break;default:throw Error(s(161))}}catch(_t){Ie(n,n.return,_t)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function Yv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;Yv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function Xr(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Vv(n,o.alternate,o),o=o.sibling}function Qa(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:Uo(4,o,o.return),Qa(o);break;case 1:lr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&zv(o,o.return,c),Qa(o);break;case 27:Iu(o.stateNode);case 26:case 5:lr(o,o.return),Qa(o);break;case 22:o.memoizedState===null&&Qa(o);break;case 30:Qa(o);break;default:Qa(o)}n=n.sibling}}function Fr(n,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,g=n,b=o,M=b.flags;switch(b.tag){case 0:case 11:case 15:Fr(g,b,c),Tu(4,b);break;case 1:if(Fr(g,b,c),d=b,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ct){Ie(d,d.return,ct)}if(d=b,g=d.updateQueue,g!==null){var z=d.stateNode;try{var K=g.shared.hiddenCallbacks;if(K!==null)for(g.shared.hiddenCallbacks=null,g=0;g<K.length;g++)Ty(K[g],z)}catch(ct){Ie(d,d.return,ct)}}c&&M&64&&Nv(b),Au(b,b.return);break;case 27:Uv(b);case 26:case 5:Fr(g,b,c),c&&d===null&&M&4&&Pv(b),Au(b,b.return);break;case 12:Fr(g,b,c);break;case 31:Fr(g,b,c),c&&M&4&&Gv(g,b);break;case 13:Fr(g,b,c),c&&M&4&&Zv(g,b);break;case 22:b.memoizedState===null&&Fr(g,b,c),Au(b,b.return);break;case 30:break;default:Fr(g,b,c)}o=o.sibling}}function Um(n,o){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&hu(c))}function Hm(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&hu(n))}function Ns(n,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Xv(n,o,c,d),o=o.sibling}function Xv(n,o,c,d){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Ns(n,o,c,d),g&2048&&Tu(9,o);break;case 1:Ns(n,o,c,d);break;case 3:Ns(n,o,c,d),g&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&hu(n)));break;case 12:if(g&2048){Ns(n,o,c,d),n=o.stateNode;try{var b=o.memoizedProps,M=b.id,z=b.onPostCommit;typeof z=="function"&&z(M,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(K){Ie(o,o.return,K)}}else Ns(n,o,c,d);break;case 31:Ns(n,o,c,d);break;case 13:Ns(n,o,c,d);break;case 23:break;case 22:b=o.stateNode,M=o.alternate,o.memoizedState!==null?b._visibility&2?Ns(n,o,c,d):Eu(n,o):b._visibility&2?Ns(n,o,c,d):(b._visibility|=2,Kl(n,o,c,d,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Um(M,o);break;case 24:Ns(n,o,c,d),g&2048&&Hm(o.alternate,o);break;default:Ns(n,o,c,d)}}function Kl(n,o,c,d,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=n,M=o,z=c,K=d,ct=M.flags;switch(M.tag){case 0:case 11:case 15:Kl(b,M,z,K,g),Tu(8,M);break;case 23:break;case 22:var _t=M.stateNode;M.memoizedState!==null?_t._visibility&2?Kl(b,M,z,K,g):Eu(b,M):(_t._visibility|=2,Kl(b,M,z,K,g)),g&&ct&2048&&Um(M.alternate,M);break;case 24:Kl(b,M,z,K,g),g&&ct&2048&&Hm(M.alternate,M);break;default:Kl(b,M,z,K,g)}o=o.sibling}}function Eu(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=n,d=o,g=d.flags;switch(d.tag){case 22:Eu(c,d),g&2048&&Um(d.alternate,d);break;case 24:Eu(c,d),g&2048&&Hm(d.alternate,d);break;default:Eu(c,d)}o=o.sibling}}var Cu=8192;function Jl(n,o,c){if(n.subtreeFlags&Cu)for(n=n.child;n!==null;)Fv(n,o,c),n=n.sibling}function Fv(n,o,c){switch(n.tag){case 26:Jl(n,o,c),n.flags&Cu&&n.memoizedState!==null&&Q2(c,Is,n.memoizedState,n.memoizedProps);break;case 5:Jl(n,o,c);break;case 3:case 4:var d=Is;Is=Zf(n.stateNode.containerInfo),Jl(n,o,c),Is=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=Cu,Cu=16777216,Jl(n,o,c),Cu=d):Jl(n,o,c));break;default:Jl(n,o,c)}}function Qv(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function Lu(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Bn=d,Jv(d,n)}Qv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Kv(n),n=n.sibling}function Kv(n){switch(n.tag){case 0:case 11:case 15:Lu(n),n.flags&2048&&Uo(9,n,n.return);break;case 3:Lu(n);break;case 12:Lu(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,Of(n)):Lu(n);break;default:Lu(n)}}function Of(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Bn=d,Jv(d,n)}Qv(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:Uo(8,o,o.return),Of(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Of(o));break;default:Of(o)}n=n.sibling}}function Jv(n,o){for(;Bn!==null;){var c=Bn;switch(c.tag){case 0:case 11:case 15:Uo(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:hu(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Bn=d;else t:for(c=n;Bn!==null;){d=Bn;var g=d.sibling,b=d.return;if(qv(d),d===c){Bn=null;break t}if(g!==null){g.return=b,Bn=g;break t}Bn=b}}}var h2={getCacheForType:function(n){var o=Zn(xn),c=o.data.get(n);return c===void 0&&(c=n(),o.data.set(n,c)),c},cacheSignal:function(){return Zn(xn).controller.signal}},f2=typeof WeakMap=="function"?WeakMap:Map,ke=0,qe=null,ue=null,de=0,Re=0,Hi=null,Ho=!1,$l=!1,Vm=!1,Qr=0,cn=0,Vo=0,Ka=0,qm=0,Vi=0,tc=0,Mu=null,xi=null,jm=!1,Rf=0,$v=0,If=1/0,Nf=null,qo=null,kn=0,jo=null,ec=null,Kr=0,Gm=0,Zm=null,tb=null,ku=0,Wm=null;function qi(){return(ke&2)!==0&&de!==0?de&-de:U.T!==null?Jm():fi()}function eb(){if(Vi===0)if((de&536870912)===0||ce){var n=Mr;Mr<<=1,(Mr&3932160)===0&&(Mr=262144),Vi=n}else Vi=536870912;return n=Bi.current,n!==null&&(n.flags|=32),Vi}function Si(n,o,c){(n===qe&&(Re===2||Re===9)||n.cancelPendingCommit!==null)&&(nc(n,0),Go(n,de,Vi,!1)),Rt(n,c),((ke&2)===0||n!==qe)&&(n===qe&&((ke&2)===0&&(Ka|=c),cn===4&&Go(n,de,Vi,!1)),cr(n))}function nb(n,o,c){if((ke&6)!==0)throw Error(s(327));var d=!c&&(o&127)===0&&(o&n.expiredLanes)===0||St(n,o),g=d?m2(n,o):Xm(n,o,!0),b=d;do{if(g===0){$l&&!d&&Go(n,o,0,!1);break}else{if(c=n.current.alternate,b&&!d2(c)){g=Xm(n,o,!1),b=!1;continue}if(g===2){if(b=o,n.errorRecoveryDisabledLanes&b)var M=0;else M=n.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;t:{var z=n;g=Mu;var K=z.current.memoizedState.isDehydrated;if(K&&(nc(z,M).flags|=256),M=Xm(z,M,!1),M!==2){if(Vm&&!K){z.errorRecoveryDisabledLanes|=b,Ka|=b,g=4;break t}b=xi,xi=g,b!==null&&(xi===null?xi=b:xi.push.apply(xi,b))}g=M}if(b=!1,g!==2)continue}}if(g===1){nc(n,0),Go(n,o,0,!0);break}t:{switch(d=n,b=g,b){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Go(d,o,Vi,!Ho);break t;case 2:xi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=Rf+300-sn(),10<g)){if(Go(d,o,Vi,!Ho),po(d,0,!0)!==0)break t;Kr=o,d.timeoutHandle=Rb(ib.bind(null,d,c,xi,Nf,jm,o,Vi,Ka,tc,Ho,b,"Throttled",-0,0),g);break t}ib(d,c,xi,Nf,jm,o,Vi,Ka,tc,Ho,b,null,-0,0)}}break}while(!0);cr(n)}function ib(n,o,c,d,g,b,M,z,K,ct,_t,wt,ht,ft){if(n.timeoutHandle=-1,wt=o.subtreeFlags,wt&8192||(wt&16785408)===16785408){wt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pi},Fv(o,b,wt);var Pt=(b&62914560)===b?Rf-sn():(b&4194048)===b?$v-sn():0;if(Pt=K2(wt,Pt),Pt!==null){Kr=b,n.cancelPendingCommit=Pt(hb.bind(null,n,o,b,c,d,g,M,z,K,_t,wt,null,ht,ft)),Go(n,b,M,!ct);return}}hb(n,o,b,c,d,g,M,z,K)}function d2(n){for(var o=n;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],b=g.getSnapshot;g=g.value;try{if(!zn(b(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Go(n,o,c,d){o&=~qm,o&=~Ka,n.suspendedLanes|=o,n.pingedLanes&=~o,d&&(n.warmLanes|=o),d=n.expirationTimes;for(var g=o;0<g;){var b=31-jn(g),M=1<<b;d[b]=-1,g&=~M}c!==0&&qt(n,c,o)}function zf(){return(ke&6)===0?(Du(0),!1):!0}function Ym(){if(ue!==null){if(Re===0)var n=ue.return;else n=ue,Rs=ar=null,cm(n),Wl=null,du=0,n=ue;for(;n!==null;)Iv(n.alternate,n),n=n.return;ue=null}}function nc(n,o){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,R2(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),Kr=0,Ym(),qe=n,ue=c=ls(n.current,null),de=o,Re=0,Hi=null,Ho=!1,$l=St(n,o),Vm=!1,tc=Vi=qm=Ka=Vo=cn=0,xi=Mu=null,jm=!1,(o&8)!==0&&(o|=o&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=o;0<d;){var g=31-jn(d),b=1<<g;o|=n[g],d&=~b}return Qr=o,Ba(),c}function sb(n,o){ie=null,U.H=wu,o===Zl||o===hf?(o=by(),Re=3):o===Kp?(o=by(),Re=4):Re=o===Am?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Hi=o,ue===null&&(cn=1,Af(n,h(o,n.current)))}function rb(){var n=Bi.current;return n===null?!0:(de&4194048)===de?cs===null:(de&62914560)===de||(de&536870912)!==0?n===cs:!1}function ob(){var n=U.H;return U.H=wu,n===null?wu:n}function ab(){var n=U.A;return U.A=h2,n}function Pf(){cn=4,Ho||(de&4194048)!==de&&Bi.current!==null||($l=!0),(Vo&134217727)===0&&(Ka&134217727)===0||qe===null||Go(qe,de,Vi,!1)}function Xm(n,o,c){var d=ke;ke|=2;var g=ob(),b=ab();(qe!==n||de!==o)&&(Nf=null,nc(n,o)),o=!1;var M=cn;t:do try{if(Re!==0&&ue!==null){var z=ue,K=Hi;switch(Re){case 8:Ym(),M=6;break t;case 3:case 2:case 9:case 6:Bi.current===null&&(o=!0);var ct=Re;if(Re=0,Hi=null,ic(n,z,K,ct),c&&$l){M=0;break t}break;default:ct=Re,Re=0,Hi=null,ic(n,z,K,ct)}}p2(),M=cn;break}catch(_t){sb(n,_t)}while(!0);return o&&n.shellSuspendCounter++,Rs=ar=null,ke=d,U.H=g,U.A=b,ue===null&&(qe=null,de=0,Ba()),M}function p2(){for(;ue!==null;)lb(ue)}function m2(n,o){var c=ke;ke|=2;var d=ob(),g=ab();qe!==n||de!==o?(Nf=null,If=sn()+500,nc(n,o)):$l=St(n,o);t:do try{if(Re!==0&&ue!==null){o=ue;var b=Hi;e:switch(Re){case 1:Re=0,Hi=null,ic(n,o,b,1);break;case 2:case 9:if(yy(b)){Re=0,Hi=null,cb(o);break}o=function(){Re!==2&&Re!==9||qe!==n||(Re=7),cr(n)},b.then(o,o);break t;case 3:Re=7;break t;case 4:Re=5;break t;case 7:yy(b)?(Re=0,Hi=null,cb(o)):(Re=0,Hi=null,ic(n,o,b,7));break;case 5:var M=null;switch(ue.tag){case 26:M=ue.memoizedState;case 5:case 27:var z=ue;if(M?Xb(M):z.stateNode.complete){Re=0,Hi=null;var K=z.sibling;if(K!==null)ue=K;else{var ct=z.return;ct!==null?(ue=ct,Bf(ct)):ue=null}break e}}Re=0,Hi=null,ic(n,o,b,5);break;case 6:Re=0,Hi=null,ic(n,o,b,6);break;case 8:Ym(),cn=6;break t;default:throw Error(s(462))}}_2();break}catch(_t){sb(n,_t)}while(!0);return Rs=ar=null,U.H=d,U.A=g,ke=c,ue!==null?0:(qe=null,de=0,Ba(),cn)}function _2(){for(;ue!==null&&!Qn();)lb(ue)}function lb(n){var o=Ov(n.alternate,n,Qr);n.memoizedProps=n.pendingProps,o===null?Bf(n):ue=o}function cb(n){var o=n,c=o.alternate;switch(o.tag){case 15:case 0:o=Ev(c,o,o.pendingProps,o.type,void 0,de);break;case 11:o=Ev(c,o,o.pendingProps,o.type.render,o.ref,de);break;case 5:cm(o);default:Iv(c,o),o=ue=ou(o,Qr),o=Ov(c,o,Qr)}n.memoizedProps=n.pendingProps,o===null?Bf(n):ue=o}function ic(n,o,c,d){Rs=ar=null,cm(o),Wl=null,du=0;var g=o.return;try{if(s2(n,g,o,c,de)){cn=1,Af(n,h(c,n.current)),ue=null;return}}catch(b){if(g!==null)throw ue=g,b;cn=1,Af(n,h(c,n.current)),ue=null;return}o.flags&32768?(ce||d===1?n=!0:$l||(de&536870912)!==0?n=!1:(Ho=n=!0,(d===2||d===9||d===3||d===6)&&(d=Bi.current,d!==null&&d.tag===13&&(d.flags|=16384))),ub(o,n)):Bf(o)}function Bf(n){var o=n;do{if((o.flags&32768)!==0){ub(o,Ho);return}n=o.return;var c=a2(o.alternate,o,Qr);if(c!==null){ue=c;return}if(o=o.sibling,o!==null){ue=o;return}ue=o=n}while(o!==null);cn===0&&(cn=5)}function ub(n,o){do{var c=l2(n.alternate,n);if(c!==null){c.flags&=32767,ue=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(n=n.sibling,n!==null)){ue=n;return}ue=n=c}while(n!==null);cn=6,ue=null}function hb(n,o,c,d,g,b,M,z,K){n.cancelPendingCommit=null;do Uf();while(kn!==0);if((ke&6)!==0)throw Error(s(327));if(o!==null){if(o===n.current)throw Error(s(177));if(b=o.lanes|o.childLanes,b|=Bl,Nt(n,c,b,M,z,K),n===qe&&(ue=qe=null,de=0),ec=o,jo=n,Kr=c,Gm=b,Zm=g,tb=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,b2(Er,function(){return _b(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=U.T,U.T=null,g=Y.p,Y.p=2,M=ke,ke|=4;try{c2(n,o,c)}finally{ke=M,Y.p=g,U.T=d}}kn=1,fb(),db(),pb()}}function fb(){if(kn===1){kn=0;var n=jo,o=ec,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=U.T,U.T=null;var d=Y.p;Y.p=2;var g=ke;ke|=4;try{Wv(o,n);var b=o_,M=Ra(n.containerInfo),z=b.focusedElem,K=b.selectionRange;if(M!==z&&z&&z.ownerDocument&&Il(z.ownerDocument.documentElement,z)){if(K!==null&&tr(z)){var ct=K.start,_t=K.end;if(_t===void 0&&(_t=ct),"selectionStart"in z)z.selectionStart=ct,z.selectionEnd=Math.min(_t,z.value.length);else{var wt=z.ownerDocument||document,ht=wt&&wt.defaultView||window;if(ht.getSelection){var ft=ht.getSelection(),Pt=z.textContent.length,Xt=Math.min(K.start,Pt),Ue=K.end===void 0?Xt:Math.min(K.end,Pt);!ft.extend&&Xt>Ue&&(M=Ue,Ue=Xt,Xt=M);var st=Oa(z,Xt),it=Oa(z,Ue);if(st&&it&&(ft.rangeCount!==1||ft.anchorNode!==st.node||ft.anchorOffset!==st.offset||ft.focusNode!==it.node||ft.focusOffset!==it.offset)){var at=wt.createRange();at.setStart(st.node,st.offset),ft.removeAllRanges(),Xt>Ue?(ft.addRange(at),ft.extend(it.node,it.offset)):(at.setEnd(it.node,it.offset),ft.addRange(at))}}}}for(wt=[],ft=z;ft=ft.parentNode;)ft.nodeType===1&&wt.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<wt.length;z++){var vt=wt[z];vt.element.scrollLeft=vt.left,vt.element.scrollTop=vt.top}}Kf=!!r_,o_=r_=null}finally{ke=g,Y.p=d,U.T=c}}n.current=o,kn=2}}function db(){if(kn===2){kn=0;var n=jo,o=ec,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=U.T,U.T=null;var d=Y.p;Y.p=2;var g=ke;ke|=4;try{Vv(n,o.alternate,o)}finally{ke=g,Y.p=d,U.T=c}}kn=3}}function pb(){if(kn===4||kn===3){kn=0,Ji();var n=jo,o=ec,c=Kr,d=tb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?kn=5:(kn=0,ec=jo=null,mb(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(qo=null),Dt(c),o=o.stateNode,yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Ys,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=U.T,g=Y.p,Y.p=2,U.T=null;try{for(var b=n.onRecoverableError,M=0;M<d.length;M++){var z=d[M];b(z.value,{componentStack:z.stack})}}finally{U.T=o,Y.p=g}}(Kr&3)!==0&&Uf(),cr(n),g=n.pendingLanes,(c&261930)!==0&&(g&42)!==0?n===Wm?ku++:(ku=0,Wm=n):ku=0,Du(0)}}function mb(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,hu(o)))}function Uf(){return fb(),db(),pb(),_b()}function _b(){if(kn!==5)return!1;var n=jo,o=Gm;Gm=0;var c=Dt(Kr),d=U.T,g=Y.p;try{Y.p=32>c?32:c,U.T=null,c=Zm,Zm=null;var b=jo,M=Kr;if(kn=0,ec=jo=null,Kr=0,(ke&6)!==0)throw Error(s(331));var z=ke;if(ke|=4,Kv(b.current),Xv(b,b.current,M,c),ke=z,Du(0,!1),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Ys,b)}catch{}return!0}finally{Y.p=g,U.T=d,mb(n,o)}}function gb(n,o,c){o=h(c,o),o=Tm(n.stateNode,o,2),n=zo(n,o,2),n!==null&&(Rt(n,2),cr(n))}function Ie(n,o,c){if(n.tag===3)gb(n,n,c);else for(;o!==null;){if(o.tag===3){gb(o,n,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(qo===null||!qo.has(d))){n=h(c,n),c=yv(2),d=zo(o,c,2),d!==null&&(vv(c,d,o,n),Rt(d,2),cr(d));break}}o=o.return}}function Fm(n,o,c){var d=n.pingCache;if(d===null){d=n.pingCache=new f2;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(c)||(Vm=!0,g.add(c),n=g2.bind(null,n,o,c),o.then(n,n))}function g2(n,o,c){var d=n.pingCache;d!==null&&d.delete(o),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,qe===n&&(de&c)===c&&(cn===4||cn===3&&(de&62914560)===de&&300>sn()-Rf?(ke&2)===0&&nc(n,0):qm|=c,tc===de&&(tc=0)),cr(n)}function yb(n,o){o===0&&(o=Gt()),n=as(n,o),n!==null&&(Rt(n,o),cr(n))}function y2(n){var o=n.memoizedState,c=0;o!==null&&(c=o.retryLane),yb(n,c)}function v2(n,o){var c=0;switch(n.tag){case 31:case 13:var d=n.stateNode,g=n.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(o),yb(n,c)}function b2(n,o){return Te(n,o)}var Hf=null,sc=null,Qm=!1,Vf=!1,Km=!1,Zo=0;function cr(n){n!==sc&&n.next===null&&(sc===null?Hf=sc=n:sc=sc.next=n),Vf=!0,Qm||(Qm=!0,x2())}function Du(n,o){if(!Km&&Vf){Km=!0;do for(var c=!1,d=Hf;d!==null;){if(n!==0){var g=d.pendingLanes;if(g===0)var b=0;else{var M=d.suspendedLanes,z=d.pingedLanes;b=(1<<31-jn(42|n)+1)-1,b&=g&~(M&~z),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,xb(d,b))}else b=de,b=po(d,d===qe?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||St(d,b)||(c=!0,xb(d,b));d=d.next}while(c);Km=!1}}function w2(){vb()}function vb(){Vf=Qm=!1;var n=0;Zo!==0&&O2()&&(n=Zo);for(var o=sn(),c=null,d=Hf;d!==null;){var g=d.next,b=bb(d,o);b===0?(d.next=null,c===null?Hf=g:c.next=g,g===null&&(sc=c)):(c=d,(n!==0||(b&3)!==0)&&(Vf=!0)),d=g}kn!==0&&kn!==5||Du(n),Zo!==0&&(Zo=0)}function bb(n,o){for(var c=n.suspendedLanes,d=n.pingedLanes,g=n.expirationTimes,b=n.pendingLanes&-62914561;0<b;){var M=31-jn(b),z=1<<M,K=g[M];K===-1?((z&c)===0||(z&d)!==0)&&(g[M]=Ct(z,o)):K<=o&&(n.expiredLanes|=z),b&=~z}if(o=qe,c=de,c=po(n,n===o?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,c===0||n===o&&(Re===2||Re===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&nn(d),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||St(n,c)){if(o=c&-c,o===n.callbackPriority)return o;switch(d!==null&&nn(d),Dt(c)){case 2:case 8:c=$i;break;case 32:c=Er;break;case 268435456:c=_a;break;default:c=Er}return d=wb.bind(null,n),c=Te(c,d),n.callbackPriority=o,n.callbackNode=c,o}return d!==null&&d!==null&&nn(d),n.callbackPriority=2,n.callbackNode=null,2}function wb(n,o){if(kn!==0&&kn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(Uf()&&n.callbackNode!==c)return null;var d=de;return d=po(n,n===qe?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(nb(n,d,o),bb(n,sn()),n.callbackNode!=null&&n.callbackNode===c?wb.bind(null,n):null)}function xb(n,o){if(Uf())return null;nb(n,o,!0)}function x2(){I2(function(){(ke&6)!==0?Te(As,w2):vb()})}function Jm(){if(Zo===0){var n=jl;n===0&&(n=Lr,Lr<<=1,(Lr&261888)===0&&(Lr=256)),Zo=n}return Zo}function Sb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:bo(""+n)}function Tb(n,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,n.id&&c.setAttribute("form",n.id),o.parentNode.insertBefore(c,o),n=new FormData(n),c.parentNode.removeChild(c),n}function S2(n,o,c,d,g){if(o==="submit"&&c&&c.stateNode===g){var b=Sb((g[bn]||null).action),M=d.submitter;M&&(o=(o=M[bn]||null)?Sb(o.formAction):M.getAttribute("formAction"),o!==null&&(b=o,M=null));var z=new Cl("action","action",null,d,g);n.push({event:z,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Zo!==0){var K=M?Tb(g,M):new FormData(g);ym(c,{pending:!0,data:K,method:g.method,action:b},null,K)}}else typeof b=="function"&&(z.preventDefault(),K=M?Tb(g,M):new FormData(g),ym(c,{pending:!0,data:K,method:g.method,action:b},b,K))},currentTarget:g}]})}}for(var $m=0;$m<ir.length;$m++){var t_=ir[$m],T2=t_.toLowerCase(),A2=t_[0].toUpperCase()+t_.slice(1);_i(T2,"on"+A2)}_i(Na,"onAnimationEnd"),_i(rf,"onAnimationIteration"),_i(za,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(jp,"onTransitionRun"),_i(of,"onTransitionStart"),_i(Gp,"onTransitionCancel"),_i(Do,"onTransitionEnd"),Qs("onMouseEnter",["mouseout","mouseover"]),Qs("onMouseLeave",["mouseout","mouseover"]),Qs("onPointerEnter",["pointerout","pointerover"]),Qs("onPointerLeave",["pointerout","pointerover"]),Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function Ab(n,o){o=(o&4)!==0;for(var c=0;c<n.length;c++){var d=n[c],g=d.event;d=d.listeners;t:{var b=void 0;if(o)for(var M=d.length-1;0<=M;M--){var z=d[M],K=z.instance,ct=z.currentTarget;if(z=z.listener,K!==b&&g.isPropagationStopped())break t;b=z,g.currentTarget=ct;try{b(g)}catch(_t){Pa(_t)}g.currentTarget=null,b=K}else for(M=0;M<d.length;M++){if(z=d[M],K=z.instance,ct=z.currentTarget,z=z.listener,K!==b&&g.isPropagationStopped())break t;b=z,g.currentTarget=ct;try{b(g)}catch(_t){Pa(_t)}g.currentTarget=null,b=K}}}}function he(n,o){var c=o[Xs];c===void 0&&(c=o[Xs]=new Set);var d=n+"__bubble";c.has(d)||(Eb(o,n,2,!1),c.add(d))}function e_(n,o,c){var d=0;o&&(d|=4),Eb(c,n,d,o)}var qf="_reactListening"+Math.random().toString(36).slice(2);function n_(n){if(!n[qf]){n[qf]=!0,Bh.forEach(function(c){c!=="selectionchange"&&(E2.has(c)||e_(c,!1,n),e_(c,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[qf]||(o[qf]=!0,e_("selectionchange",!1,o))}}function Eb(n,o,c,d){switch(ew(o)){case 2:var g=tA;break;case 8:g=eA;break;default:g=g_}c=g.bind(null,o,c,n),g=void 0,!Sa||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?n.addEventListener(o,c,{capture:!0,passive:g}):n.addEventListener(o,c,!0):g!==void 0?n.addEventListener(o,c,{passive:g}):n.addEventListener(o,c,!1)}function i_(n,o,c,d,g){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)t:for(;;){if(d===null)return;var M=d.tag;if(M===3||M===4){var z=d.stateNode.containerInfo;if(z===g)break;if(M===4)for(M=d.return;M!==null;){var K=M.tag;if((K===3||K===4)&&M.stateNode.containerInfo===g)return;M=M.return}for(;z!==null;){if(M=Or(z),M===null)return;if(K=M.tag,K===5||K===6||K===26||K===27){d=b=M;continue t}z=z.parentNode}}d=d.return}Fc(function(){var ct=b,_t=xa(c),wt=[];t:{var ht=af.get(n);if(ht!==void 0){var ft=Cl,Pt=n;switch(n){case"keypress":if(Ta(c)===0)break t;case"keydown":case"keyup":ft=Wh;break;case"focusin":Pt="focus",ft=Jc;break;case"focusout":Pt="blur",ft=Jc;break;case"beforeblur":case"afterblur":ft=Jc;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Vh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Op;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Pp;break;case Na:case rf:case za:ft=$c;break;case Do:ft=Fh;break;case"scroll":case"scrollend":ft=fe;break;case"wheel":ft=Pr;break;case"copy":case"cut":case"paste":ft=is;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Yh;break;case"toggle":case"beforetoggle":ft=Ca}var Xt=(o&4)!==0,Ue=!Xt&&(n==="scroll"||n==="scrollend"),st=Xt?ht!==null?ht+"Capture":null:ht;Xt=[];for(var it=ct,at;it!==null;){var vt=it;if(at=vt.stateNode,vt=vt.tag,vt!==5&&vt!==26&&vt!==27||at===null||st===null||(vt=Nr(it,st),vt!=null&&Xt.push(Ru(it,vt,at))),Ue)break;it=it.return}0<Xt.length&&(ht=new ft(ht,Pt,null,c,_t),wt.push({event:ht,listeners:Xt}))}}if((o&7)===0){t:{if(ht=n==="mouseover"||n==="pointerover",ft=n==="mouseout"||n==="pointerout",ht&&c!==El&&(Pt=c.relatedTarget||c.fromElement)&&(Or(Pt)||Pt[Dr]))break t;if((ft||ht)&&(ht=_t.window===_t?_t:(ht=_t.ownerDocument)?ht.defaultView||ht.parentWindow:window,ft?(Pt=c.relatedTarget||c.toElement,ft=ct,Pt=Pt?Or(Pt):null,Pt!==null&&(Ue=l(Pt),Xt=Pt.tag,Pt!==Ue||Xt!==5&&Xt!==27&&Xt!==6)&&(Pt=null)):(ft=null,Pt=ct),ft!==Pt)){if(Xt=Vh,vt="onMouseLeave",st="onMouseEnter",it="mouse",(n==="pointerout"||n==="pointerover")&&(Xt=Yh,vt="onPointerLeave",st="onPointerEnter",it="pointer"),Ue=ft==null?ht:Fs(ft),at=Pt==null?ht:Fs(Pt),ht=new Xt(vt,it+"leave",ft,c,_t),ht.target=Ue,ht.relatedTarget=at,vt=null,Or(_t)===ct&&(Xt=new Xt(st,it+"enter",Pt,c,_t),Xt.target=at,Xt.relatedTarget=Ue,vt=Xt),Ue=vt,ft&&Pt)e:{for(Xt=C2,st=ft,it=Pt,at=0,vt=st;vt;vt=Xt(vt))at++;vt=0;for(var Yt=it;Yt;Yt=Xt(Yt))vt++;for(;0<at-vt;)st=Xt(st),at--;for(;0<vt-at;)it=Xt(it),vt--;for(;at--;){if(st===it||it!==null&&st===it.alternate){Xt=st;break e}st=Xt(st),it=Xt(it)}Xt=null}else Xt=null;ft!==null&&Cb(wt,ht,ft,Xt,!1),Pt!==null&&Ue!==null&&Cb(wt,Ue,Pt,Xt,!0)}}t:{if(ht=ct?Fs(ct):window,ft=ht.nodeName&&ht.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ht.type==="file")var Ce=Da;else if(ss(ht))if($h)Ce=qp;else{Ce=Vp;var Vt=ks}else ft=ht.nodeName,!ft||ft.toLowerCase()!=="input"||ht.type!=="checkbox"&&ht.type!=="radio"?ct&&wa(ct.elementType)&&(Ce=Da):Ce=Co;if(Ce&&(Ce=Ce(n,ct))){Jh(wt,Ce,c,_t);break t}Vt&&Vt(n,ht,ct),n==="focusout"&&ct&&ht.type==="number"&&ct.memoizedProps.value!=null&&Cs(ht,"number",ht.value)}switch(Vt=ct?Fs(ct):window,n){case"focusin":(ss(Vt)||Vt.contentEditable==="true")&&(er=Vt,zl=ct,Ia=null);break;case"focusout":Ia=zl=er=null;break;case"mousedown":Mo=!0;break;case"contextmenu":case"mouseup":case"dragend":Mo=!1,nf(wt,c,_t);break;case"selectionchange":if(Nl)break;case"keydown":case"keyup":nf(wt,c,_t)}var re;if(Ml)t:{switch(n){case"compositionstart":var pe="onCompositionStart";break t;case"compositionend":pe="onCompositionEnd";break t;case"compositionupdate":pe="onCompositionUpdate";break t}pe=void 0}else To?Kh(n,c)&&(pe="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(pe="onCompositionStart");pe&&(kl&&c.locale!=="ko"&&(To||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&To&&(re=Js()):(ns=_t,zr="value"in ns?ns.value:ns.textContent,To=!0)),Vt=jf(ct,pe),0<Vt.length&&(pe=new tu(pe,n,null,c,_t),wt.push({event:pe,listeners:Vt}),re?pe.data=re:(re=su(c),re!==null&&(pe.data=re)))),(re=Up?Pi(n,c):Ao(n,c))&&(pe=jf(ct,"onBeforeInput"),0<pe.length&&(Vt=new tu("onBeforeInput","beforeinput",null,c,_t),wt.push({event:Vt,listeners:pe}),Vt.data=re)),S2(wt,n,ct,c,_t)}Ab(wt,o)})}function Ru(n,o,c){return{instance:n,listener:o,currentTarget:c}}function jf(n,o){for(var c=o+"Capture",d=[];n!==null;){var g=n,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Nr(n,c),g!=null&&d.unshift(Ru(n,g,b)),g=Nr(n,o),g!=null&&d.push(Ru(n,g,b))),n.tag===3)return d;n=n.return}return[]}function C2(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Cb(n,o,c,d,g){for(var b=o._reactName,M=[];c!==null&&c!==d;){var z=c,K=z.alternate,ct=z.stateNode;if(z=z.tag,K!==null&&K===d)break;z!==5&&z!==26&&z!==27||ct===null||(K=ct,g?(ct=Nr(c,b),ct!=null&&M.unshift(Ru(c,ct,K))):g||(ct=Nr(c,b),ct!=null&&M.push(Ru(c,ct,K)))),c=c.return}M.length!==0&&n.push({event:o,listeners:M})}var L2=/\r\n?/g,M2=/\u0000|\uFFFD/g;function Lb(n){return(typeof n=="string"?n:""+n).replace(L2,`
`).replace(M2,"")}function Mb(n,o){return o=Lb(o),Lb(n)===o}function Be(n,o,c,d,g,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||es(n,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&es(n,""+d);break;case"className":ze(n,"class",d);break;case"tabIndex":ze(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ze(n,c,d);break;case"style":Tl(n,d,b);break;case"data":if(o!=="object"){ze(n,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){n.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=bo(""+d),n.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&Be(n,o,"name",g.name,g,null),Be(n,o,"formEncType",g.formEncType,g,null),Be(n,o,"formMethod",g.formMethod,g,null),Be(n,o,"formTarget",g.formTarget,g,null)):(Be(n,o,"encType",g.encType,g,null),Be(n,o,"method",g.method,g,null),Be(n,o,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=bo(""+d),n.setAttribute(c,d);break;case"onClick":d!=null&&(n.onclick=pi);break;case"onScroll":d!=null&&he("scroll",n);break;case"onScrollEnd":d!=null&&he("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}c=bo(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""+d):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":d===!0?n.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,d):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(c,d):n.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(c):n.setAttribute(c,d);break;case"popover":he("beforetoggle",n),he("toggle",n),le(n,"popover",d);break;case"xlinkActuate":di(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":di(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":di(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":di(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":di(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":di(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":di(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":di(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":di(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":le(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Al.get(c)||c,le(n,c,d))}}function s_(n,o,c,d,g,b){switch(c){case"style":Tl(n,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"children":typeof d=="string"?es(n,d):(typeof d=="number"||typeof d=="bigint")&&es(n,""+d);break;case"onScroll":d!=null&&he("scroll",n);break;case"onScrollEnd":d!=null&&he("scrollend",n);break;case"onClick":d!=null&&(n.onclick=pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uh.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),b=n[bn]||null,b=b!=null?b[c]:null,typeof b=="function"&&n.removeEventListener(o,b,g),typeof d=="function")){typeof b!="function"&&b!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(o,d,g);break t}c in n?n[c]=d:d===!0?n.setAttribute(c,""):le(n,c,d)}}}function Yn(n,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":he("error",n),he("load",n);var d=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var M=c[b];if(M!=null)switch(b){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Be(n,o,b,M,c,null)}}g&&Be(n,o,"srcSet",c.srcSet,c,null),d&&Be(n,o,"src",c.src,c,null);return;case"input":he("invalid",n);var z=b=M=g=null,K=null,ct=null;for(d in c)if(c.hasOwnProperty(d)){var _t=c[d];if(_t!=null)switch(d){case"name":g=_t;break;case"type":M=_t;break;case"checked":K=_t;break;case"defaultChecked":ct=_t;break;case"value":b=_t;break;case"defaultValue":z=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(s(137,o));break;default:Be(n,o,d,_t,c,null)}}ba(n,b,z,K,ct,M,g,!1);return;case"select":he("invalid",n),d=M=b=null;for(g in c)if(c.hasOwnProperty(g)&&(z=c[g],z!=null))switch(g){case"value":b=z;break;case"defaultValue":M=z;break;case"multiple":d=z;default:Be(n,o,g,z,c,null)}o=b,c=M,n.multiple=!!d,o!=null?Ve(n,!!d,o,!1):c!=null&&Ve(n,!!d,c,!0);return;case"textarea":he("invalid",n),b=g=d=null;for(M in c)if(c.hasOwnProperty(M)&&(z=c[M],z!=null))switch(M){case"value":d=z;break;case"defaultValue":g=z;break;case"children":b=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(91));break;default:Be(n,o,M,z,c,null)}yo(n,d,g,b);return;case"option":for(K in c)c.hasOwnProperty(K)&&(d=c[K],d!=null)&&(K==="selected"?n.selected=d&&typeof d!="function"&&typeof d!="symbol":Be(n,o,K,d,c,null));return;case"dialog":he("beforetoggle",n),he("toggle",n),he("cancel",n),he("close",n);break;case"iframe":case"object":he("load",n);break;case"video":case"audio":for(d=0;d<Ou.length;d++)he(Ou[d],n);break;case"image":he("error",n),he("load",n);break;case"details":he("toggle",n);break;case"embed":case"source":case"link":he("error",n),he("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ct in c)if(c.hasOwnProperty(ct)&&(d=c[ct],d!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Be(n,o,ct,d,c,null)}return;default:if(wa(o)){for(_t in c)c.hasOwnProperty(_t)&&(d=c[_t],d!==void 0&&s_(n,o,_t,d,c,void 0));return}}for(z in c)c.hasOwnProperty(z)&&(d=c[z],d!=null&&Be(n,o,z,d,c,null))}function k2(n,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,M=null,z=null,K=null,ct=null,_t=null;for(ft in c){var wt=c[ft];if(c.hasOwnProperty(ft)&&wt!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":K=wt;default:d.hasOwnProperty(ft)||Be(n,o,ft,null,d,wt)}}for(var ht in d){var ft=d[ht];if(wt=c[ht],d.hasOwnProperty(ht)&&(ft!=null||wt!=null))switch(ht){case"type":b=ft;break;case"name":g=ft;break;case"checked":ct=ft;break;case"defaultChecked":_t=ft;break;case"value":M=ft;break;case"defaultValue":z=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(s(137,o));break;default:ft!==wt&&Be(n,o,ht,ft,d,wt)}}Wc(n,M,z,K,ct,_t,b,g);return;case"select":ft=M=z=ht=null;for(b in c)if(K=c[b],c.hasOwnProperty(b)&&K!=null)switch(b){case"value":break;case"multiple":ft=K;default:d.hasOwnProperty(b)||Be(n,o,b,null,d,K)}for(g in d)if(b=d[g],K=c[g],d.hasOwnProperty(g)&&(b!=null||K!=null))switch(g){case"value":ht=b;break;case"defaultValue":z=b;break;case"multiple":M=b;default:b!==K&&Be(n,o,g,b,d,K)}o=z,c=M,d=ft,ht!=null?Ve(n,!!c,ht,!1):!!d!=!!c&&(o!=null?Ve(n,!!c,o,!0):Ve(n,!!c,c?[]:"",!1));return;case"textarea":ft=ht=null;for(z in c)if(g=c[z],c.hasOwnProperty(z)&&g!=null&&!d.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:Be(n,o,z,null,d,g)}for(M in d)if(g=d[M],b=c[M],d.hasOwnProperty(M)&&(g!=null||b!=null))switch(M){case"value":ht=g;break;case"defaultValue":ft=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==b&&Be(n,o,M,g,d,b)}Ks(n,ht,ft);return;case"option":for(var Pt in c)ht=c[Pt],c.hasOwnProperty(Pt)&&ht!=null&&!d.hasOwnProperty(Pt)&&(Pt==="selected"?n.selected=!1:Be(n,o,Pt,null,d,ht));for(K in d)ht=d[K],ft=c[K],d.hasOwnProperty(K)&&ht!==ft&&(ht!=null||ft!=null)&&(K==="selected"?n.selected=ht&&typeof ht!="function"&&typeof ht!="symbol":Be(n,o,K,ht,d,ft));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in c)ht=c[Xt],c.hasOwnProperty(Xt)&&ht!=null&&!d.hasOwnProperty(Xt)&&Be(n,o,Xt,null,d,ht);for(ct in d)if(ht=d[ct],ft=c[ct],d.hasOwnProperty(ct)&&ht!==ft&&(ht!=null||ft!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(s(137,o));break;default:Be(n,o,ct,ht,d,ft)}return;default:if(wa(o)){for(var Ue in c)ht=c[Ue],c.hasOwnProperty(Ue)&&ht!==void 0&&!d.hasOwnProperty(Ue)&&s_(n,o,Ue,void 0,d,ht);for(_t in d)ht=d[_t],ft=c[_t],!d.hasOwnProperty(_t)||ht===ft||ht===void 0&&ft===void 0||s_(n,o,_t,ht,d,ft);return}}for(var st in c)ht=c[st],c.hasOwnProperty(st)&&ht!=null&&!d.hasOwnProperty(st)&&Be(n,o,st,null,d,ht);for(wt in d)ht=d[wt],ft=c[wt],!d.hasOwnProperty(wt)||ht===ft||ht==null&&ft==null||Be(n,o,wt,ht,d,ft)}function kb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D2(){if(typeof performance.getEntriesByType=="function"){for(var n=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],b=g.transferSize,M=g.initiatorType,z=g.duration;if(b&&z&&kb(M)){for(M=0,z=g.responseEnd,d+=1;d<c.length;d++){var K=c[d],ct=K.startTime;if(ct>z)break;var _t=K.transferSize,wt=K.initiatorType;_t&&kb(wt)&&(K=K.responseEnd,M+=_t*(K<z?1:(z-ct)/(K-ct)))}if(--d,o+=8*(b+M)/(g.duration/1e3),n++,10<n)break}}if(0<n)return o/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var r_=null,o_=null;function Gf(n){return n.nodeType===9?n:n.ownerDocument}function Db(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ob(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function a_(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var l_=null;function O2(){var n=window.event;return n&&n.type==="popstate"?n===l_?!1:(l_=n,!0):(l_=null,!1)}var Rb=typeof setTimeout=="function"?setTimeout:void 0,R2=typeof clearTimeout=="function"?clearTimeout:void 0,Ib=typeof Promise=="function"?Promise:void 0,I2=typeof queueMicrotask=="function"?queueMicrotask:typeof Ib<"u"?function(n){return Ib.resolve(null).then(n).catch(N2)}:Rb;function N2(n){setTimeout(function(){throw n})}function Wo(n){return n==="head"}function Nb(n,o){var c=o,d=0;do{var g=c.nextSibling;if(n.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){n.removeChild(g),lc(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Iu(n.ownerDocument.documentElement);else if(c==="head"){c=n.ownerDocument.head,Iu(c);for(var b=c.firstChild;b;){var M=b.nextSibling,z=b.nodeName;b[ga]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=M}}else c==="body"&&Iu(n.ownerDocument.body);c=g}while(c);lc(o)}function zb(n,o){var c=n;n=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(n===0)break;n--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||n++;c=d}while(c)}function c_(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":c_(c),qc(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function z2(n,o,c,d){for(;n.nodeType===1;){var g=c;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[ga])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(b=n.getAttribute("rel"),b==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(b!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(b=n.getAttribute("src"),(b!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===b)return n}else return n;if(n=us(n.nextSibling),n===null)break}return null}function P2(n,o,c){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=us(n.nextSibling),n===null))return null;return n}function Pb(n,o){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=us(n.nextSibling),n===null))return null;return n}function u_(n){return n.data==="$?"||n.data==="$~"}function h_(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function B2(n,o){var c=n.ownerDocument;if(n.data==="$~")n._reactRetry=o;else if(n.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function us(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return n}var f_=null;function Bb(n){n=n.nextSibling;for(var o=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"||c==="/&"){if(o===0)return us(n.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}n=n.nextSibling}return null}function Ub(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return n;o--}else c!=="/$"&&c!=="/&"||o++}n=n.previousSibling}return null}function Hb(n,o,c){switch(o=Gf(c),n){case"html":if(n=o.documentElement,!n)throw Error(s(452));return n;case"head":if(n=o.head,!n)throw Error(s(453));return n;case"body":if(n=o.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Iu(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);qc(n)}var hs=new Map,Vb=new Set;function Zf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Jr=Y.d;Y.d={f:U2,r:H2,D:V2,C:q2,L:j2,m:G2,X:W2,S:Z2,M:Y2};function U2(){var n=Jr.f(),o=zf();return n||o}function H2(n){var o=mo(n);o!==null&&o.tag===5&&o.type==="form"?sv(o):Jr.r(n)}var rc=typeof document>"u"?null:document;function qb(n,o,c){var d=rc;if(d&&typeof o=="string"&&o){var g=Fe(o);g='link[rel="'+n+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Vb.has(g)||(Vb.add(g),n={rel:n,crossOrigin:c,href:o},d.querySelector(g)===null&&(o=d.createElement("link"),Yn(o,"link",n),wn(o),d.head.appendChild(o)))}}function V2(n){Jr.D(n),qb("dns-prefetch",n,null)}function q2(n,o){Jr.C(n,o),qb("preconnect",n,o)}function j2(n,o,c){Jr.L(n,o,c);var d=rc;if(d&&n&&o){var g='link[rel="preload"][as="'+Fe(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Fe(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Fe(c.imageSizes)+'"]')):g+='[href="'+Fe(n)+'"]';var b=g;switch(o){case"style":b=oc(n);break;case"script":b=ac(n)}hs.has(b)||(n=y({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:n,as:o},c),hs.set(b,n),d.querySelector(g)!==null||o==="style"&&d.querySelector(Nu(b))||o==="script"&&d.querySelector(zu(b))||(o=d.createElement("link"),Yn(o,"link",n),wn(o),d.head.appendChild(o)))}}function G2(n,o){Jr.m(n,o);var c=rc;if(c&&n){var d=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Fe(d)+'"][href="'+Fe(n)+'"]',b=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ac(n)}if(!hs.has(b)&&(n=y({rel:"modulepreload",href:n},o),hs.set(b,n),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(zu(b)))return}d=c.createElement("link"),Yn(d,"link",n),wn(d),c.head.appendChild(d)}}}function Z2(n,o,c){Jr.S(n,o,c);var d=rc;if(d&&n){var g=_o(d).hoistableStyles,b=oc(n);o=o||"default";var M=g.get(b);if(!M){var z={loading:0,preload:null};if(M=d.querySelector(Nu(b)))z.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":o},c),(c=hs.get(b))&&d_(n,c);var K=M=d.createElement("link");wn(K),Yn(K,"link",n),K._p=new Promise(function(ct,_t){K.onload=ct,K.onerror=_t}),K.addEventListener("load",function(){z.loading|=1}),K.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Wf(M,o,d)}M={type:"stylesheet",instance:M,count:1,state:z},g.set(b,M)}}}function W2(n,o){Jr.X(n,o);var c=rc;if(c&&n){var d=_o(c).hoistableScripts,g=ac(n),b=d.get(g);b||(b=c.querySelector(zu(g)),b||(n=y({src:n,async:!0},o),(o=hs.get(g))&&p_(n,o),b=c.createElement("script"),wn(b),Yn(b,"link",n),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function Y2(n,o){Jr.M(n,o);var c=rc;if(c&&n){var d=_o(c).hoistableScripts,g=ac(n),b=d.get(g);b||(b=c.querySelector(zu(g)),b||(n=y({src:n,async:!0,type:"module"},o),(o=hs.get(g))&&p_(n,o),b=c.createElement("script"),wn(b),Yn(b,"link",n),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function jb(n,o,c,d){var g=(g=mt.current)?Zf(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=oc(c.href),c=_o(g).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=oc(c.href);var b=_o(g).hoistableStyles,M=b.get(n);if(M||(g=g.ownerDocument||g,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(n,M),(b=g.querySelector(Nu(n)))&&!b._p&&(M.instance=b,M.state.loading=5),hs.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},hs.set(n,c),b||X2(g,n,c,M.state))),o&&d===null)throw Error(s(528,""));return M}if(o&&d!==null)throw Error(s(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ac(c),c=_o(g).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function oc(n){return'href="'+Fe(n)+'"'}function Nu(n){return'link[rel="stylesheet"]['+n+"]"}function Gb(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function X2(n,o,c,d){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=n.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Yn(o,"link",c),wn(o),n.head.appendChild(o))}function ac(n){return'[src="'+Fe(n)+'"]'}function zu(n){return"script[async]"+n}function Zb(n,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=n.querySelector('style[data-href~="'+Fe(c.href)+'"]');if(d)return o.instance=d,wn(d),d;var g=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),wn(d),Yn(d,"style",g),Wf(d,c.precedence,n),o.instance=d;case"stylesheet":g=oc(c.href);var b=n.querySelector(Nu(g));if(b)return o.state.loading|=4,o.instance=b,wn(b),b;d=Gb(c),(g=hs.get(g))&&d_(d,g),b=(n.ownerDocument||n).createElement("link"),wn(b);var M=b;return M._p=new Promise(function(z,K){M.onload=z,M.onerror=K}),Yn(b,"link",d),o.state.loading|=4,Wf(b,c.precedence,n),o.instance=b;case"script":return b=ac(c.src),(g=n.querySelector(zu(b)))?(o.instance=g,wn(g),g):(d=c,(g=hs.get(b))&&(d=y({},c),p_(d,g)),n=n.ownerDocument||n,g=n.createElement("script"),wn(g),Yn(g,"link",d),n.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Wf(d,c.precedence,n));return o.instance}function Wf(n,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,b=g,M=0;M<d.length;M++){var z=d[M];if(z.dataset.precedence===o)b=z;else if(b!==g)break}b?b.parentNode.insertBefore(n,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(n,o.firstChild))}function d_(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function p_(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var Yf=null;function Wb(n,o,c){if(Yf===null){var d=new Map,g=Yf=new Map;g.set(c,d)}else g=Yf,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(n))return d;for(d.set(n,null),c=c.getElementsByTagName(n),g=0;g<c.length;g++){var b=c[g];if(!(b[ga]||b[De]||n==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var M=b.getAttribute(o)||"";M=n+M;var z=d.get(M);z?z.push(b):d.set(M,[b])}}return d}function Yb(n,o,c){n=n.ownerDocument||n,n.head.insertBefore(c,o==="title"?n.querySelector("head > title"):null)}function F2(n,o,c){if(c===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(n=o.disabled,typeof o.precedence=="string"&&n==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Xb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Q2(n,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=oc(d.href),b=o.querySelector(Nu(g));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(n.count++,n=Xf.bind(n),o.then(n,n)),c.state.loading|=4,c.instance=b,wn(b);return}b=o.ownerDocument||o,d=Gb(d),(g=hs.get(g))&&d_(d,g),b=b.createElement("link"),wn(b);var M=b;M._p=new Promise(function(z,K){M.onload=z,M.onerror=K}),Yn(b,"link",d),c.instance=b}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(n.count++,c=Xf.bind(n),o.addEventListener("load",c),o.addEventListener("error",c))}}var m_=0;function K2(n,o){return n.stylesheets&&n.count===0&&Qf(n,n.stylesheets),0<n.count||0<n.imgCount?function(c){var d=setTimeout(function(){if(n.stylesheets&&Qf(n,n.stylesheets),n.unsuspend){var b=n.unsuspend;n.unsuspend=null,b()}},6e4+o);0<n.imgBytes&&m_===0&&(m_=62500*D2());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Qf(n,n.stylesheets),n.unsuspend)){var b=n.unsuspend;n.unsuspend=null,b()}},(n.imgBytes>m_?50:800)+o);return n.unsuspend=c,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Xf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ff=null;function Qf(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ff=new Map,o.forEach(J2,n),Ff=null,Xf.call(n))}function J2(n,o){if(!(o.state.loading&4)){var c=Ff.get(n);if(c)var d=c.get(null);else{c=new Map,Ff.set(n,c);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var M=g[b];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(c.set(M.dataset.precedence,M),d=M)}d&&c.set(null,d)}g=o.instance,M=g.getAttribute("data-precedence"),b=c.get(M)||d,b===d&&c.set(null,g),c.set(M,g),this.count++,d=Xf.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),b?b.parentNode.insertBefore(g,b.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),o.state.loading|=4}}var Pu={$$typeof:D,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function $2(n,o,c,d,g,b,M,z,K){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lt(0),this.hiddenUpdates=Lt(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Fb(n,o,c,d,g,b,M,z,K,ct,_t,wt){return n=new $2(n,o,c,M,K,ct,_t,wt,z),o=1,b===!0&&(o|=24),b=Jn(3,null,null,o),n.current=b,b.stateNode=n,o=Xp(),o.refCount++,n.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},Jp(b),n}function Qb(n){return n?(n=Br,n):Br}function Kb(n,o,c,d,g,b){g=Qb(g),d.context===null?d.context=g:d.pendingContext=g,d=No(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=zo(n,d,o),c!==null&&(Si(c,n,o),mu(c,n,o))}function Jb(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<o?c:o}}function __(n,o){Jb(n,o),(n=n.alternate)&&Jb(n,o)}function $b(n){if(n.tag===13||n.tag===31){var o=as(n,67108864);o!==null&&Si(o,n,67108864),__(n,67108864)}}function tw(n){if(n.tag===13||n.tag===31){var o=qi();o=we(o);var c=as(n,o);c!==null&&Si(c,n,o),__(n,o)}}var Kf=!0;function tA(n,o,c,d){var g=U.T;U.T=null;var b=Y.p;try{Y.p=2,g_(n,o,c,d)}finally{Y.p=b,U.T=g}}function eA(n,o,c,d){var g=U.T;U.T=null;var b=Y.p;try{Y.p=8,g_(n,o,c,d)}finally{Y.p=b,U.T=g}}function g_(n,o,c,d){if(Kf){var g=y_(d);if(g===null)i_(n,o,d,Jf,c),nw(n,d);else if(iA(g,n,o,c,d))d.stopPropagation();else if(nw(n,d),o&4&&-1<nA.indexOf(n)){for(;g!==null;){var b=mo(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var M=Es(b.pendingLanes);if(M!==0){var z=b;for(z.pendingLanes|=2,z.entangledLanes|=2;M;){var K=1<<31-jn(M);z.entanglements[1]|=K,M&=~K}cr(b),(ke&6)===0&&(If=sn()+500,Du(0))}}break;case 31:case 13:z=as(b,2),z!==null&&Si(z,b,2),zf(),__(b,2)}if(b=y_(d),b===null&&i_(n,o,d,Jf,c),b===g)break;g=b}g!==null&&d.stopPropagation()}else i_(n,o,d,null,c)}}function y_(n){return n=xa(n),v_(n)}var Jf=null;function v_(n){if(Jf=null,n=Or(n),n!==null){var o=l(n);if(o===null)n=null;else{var c=o.tag;if(c===13){if(n=u(o),n!==null)return n;n=null}else if(c===31){if(n=f(o),n!==null)return n;n=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return Jf=n,null}function ew(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ma()){case As:return 2;case $i:return 8;case Er:case wl:return 32;case _a:return 268435456;default:return 32}default:return 32}}var b_=!1,Yo=null,Xo=null,Fo=null,Bu=new Map,Uu=new Map,Qo=[],nA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nw(n,o){switch(n){case"focusin":case"focusout":Yo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Fo=null;break;case"pointerover":case"pointerout":Bu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(o.pointerId)}}function Hu(n,o,c,d,g,b){return n===null||n.nativeEvent!==b?(n={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[g]},o!==null&&(o=mo(o),o!==null&&$b(o)),n):(n.eventSystemFlags|=d,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function iA(n,o,c,d,g){switch(o){case"focusin":return Yo=Hu(Yo,n,o,c,d,g),!0;case"dragenter":return Xo=Hu(Xo,n,o,c,d,g),!0;case"mouseover":return Fo=Hu(Fo,n,o,c,d,g),!0;case"pointerover":var b=g.pointerId;return Bu.set(b,Hu(Bu.get(b)||null,n,o,c,d,g)),!0;case"gotpointercapture":return b=g.pointerId,Uu.set(b,Hu(Uu.get(b)||null,n,o,c,d,g)),!0}return!1}function iw(n){var o=Or(n.target);if(o!==null){var c=l(o);if(c!==null){if(o=c.tag,o===13){if(o=u(c),o!==null){n.blockedOn=o,ts(n.priority,function(){tw(c)});return}}else if(o===31){if(o=f(c),o!==null){n.blockedOn=o,ts(n.priority,function(){tw(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $f(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var c=y_(n.nativeEvent);if(c===null){c=n.nativeEvent;var d=new c.constructor(c.type,c);El=d,c.target.dispatchEvent(d),El=null}else return o=mo(c),o!==null&&$b(o),n.blockedOn=c,!1;o.shift()}return!0}function sw(n,o,c){$f(n)&&c.delete(o)}function sA(){b_=!1,Yo!==null&&$f(Yo)&&(Yo=null),Xo!==null&&$f(Xo)&&(Xo=null),Fo!==null&&$f(Fo)&&(Fo=null),Bu.forEach(sw),Uu.forEach(sw)}function td(n,o){n.blockedOn===o&&(n.blockedOn=null,b_||(b_=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,sA)))}var ed=null;function rw(n){ed!==n&&(ed=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ed===n&&(ed=null);for(var o=0;o<n.length;o+=3){var c=n[o],d=n[o+1],g=n[o+2];if(typeof d!="function"){if(v_(d||c)===null)continue;break}var b=mo(c);b!==null&&(n.splice(o,3),o-=3,ym(b,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function lc(n){function o(K){return td(K,n)}Yo!==null&&td(Yo,n),Xo!==null&&td(Xo,n),Fo!==null&&td(Fo,n),Bu.forEach(o),Uu.forEach(o);for(var c=0;c<Qo.length;c++){var d=Qo[c];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Qo.length&&(c=Qo[0],c.blockedOn===null);)iw(c),c.blockedOn===null&&Qo.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],b=c[d+1],M=g[bn]||null;if(typeof b=="function")M||rw(c);else if(M){var z=null;if(b&&b.hasAttribute("formAction")){if(g=b,M=b[bn]||null)z=M.formAction;else if(v_(g)!==null)continue}else z=M.action;typeof z=="function"?c[d+1]=z:(c.splice(d,3),d-=3),rw(c)}}}function ow(){function n(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(M){return g=M})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function w_(n){this._internalRoot=n}nd.prototype.render=w_.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(s(409));var c=o.current,d=qi();Kb(c,d,n,o,null,null)},nd.prototype.unmount=w_.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Kb(n.current,2,null,n,null,null),zf(),o[Dr]=null}};function nd(n){this._internalRoot=n}nd.prototype.unstable_scheduleHydration=function(n){if(n){var o=fi();n={blockedOn:null,target:n,priority:o};for(var c=0;c<Qo.length&&o!==0&&o<Qo[c].priority;c++);Qo.splice(c,0,n),c===0&&iw(n)}};var aw=t.version;if(aw!=="19.2.4")throw Error(s(527,aw,"19.2.4"));Y.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=m(o),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var rA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{Ys=id.inject(rA),yn=id}catch{}}return qu.createRoot=function(n,o){if(!r(n))throw Error(s(299));var c=!1,d="",g=pv,b=mv,M=_v;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=Fb(n,1,!1,null,null,c,d,null,g,b,M,ow),n[Dr]=o.current,n_(n),new w_(o)},qu.hydrateRoot=function(n,o,c){if(!r(n))throw Error(s(299));var d=!1,g="",b=pv,M=mv,z=_v,K=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(M=c.onCaughtError),c.onRecoverableError!==void 0&&(z=c.onRecoverableError),c.formState!==void 0&&(K=c.formState)),o=Fb(n,1,!0,o,c??null,d,g,K,b,M,z,ow),o.context=Qb(null),c=o.current,d=qi(),d=we(d),g=No(d),g.callback=null,zo(c,g,d),c=d,o.current.lanes=c,Rt(o,c),cr(o),n[Dr]=o.current,n_(n),new nd(o)},qu.version="19.2.4",qu}var gw;function mA(){if(gw)return T_.exports;gw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),T_.exports=pA(),T_.exports}var _A=mA();function gA(i){let t="pending",e,s;const r=i.then(l=>{t="success",e=l},l=>{t="error",s=l});return{promise:i,read(){switch(t){case"pending":throw r;case"error":throw s;case"success":return e}}}}const b1=It.createContext(null);function yA(){const i=It.useContext(b1);if(!i)throw new Error("Repo was not found on RepoContext.");return i}const vA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function n0(i){return typeof i=="string"&&vA.test(i)}function bA(i){if(!n0(i))throw TypeError("Invalid UUID");let t;const e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function w1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var zs={},je={},ti={},L_={},ju={},yw;function wA(){return yw||(yw=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.crypto=void 0,ju.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),ju}var vw;function x1(){return vw||(vw=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.wrapXOFConstructorWithOpts=i.wrapConstructorWithOpts=i.wrapConstructor=i.Hash=i.nextTick=i.swap32IfBE=i.byteSwapIfBE=i.swap8IfBE=i.isLE=void 0,i.isBytes=e,i.anumber=s,i.abytes=r,i.ahash=l,i.aexists=u,i.aoutput=f,i.u8=p,i.u32=m,i.clean=v,i.createView=y,i.rotr=w,i.rotl=T,i.byteSwap=x,i.byteSwap32=A,i.bytesToHex=B,i.hexToBytes=R,i.asyncLoop=Z,i.utf8ToBytes=q,i.bytesToUtf8=V,i.toBytes=W,i.kdfInputToBytes=X,i.concatBytes=tt,i.checkOpts=P,i.createHasher=$,i.createOptHasher=U,i.createXOFer=Y,i.randomBytes=et;const t=wA();function e(k){return k instanceof Uint8Array||ArrayBuffer.isView(k)&&k.constructor.name==="Uint8Array"}function s(k){if(!Number.isSafeInteger(k)||k<0)throw new Error("positive integer expected, got "+k)}function r(k,...j){if(!e(k))throw new Error("Uint8Array expected");if(j.length>0&&!j.includes(k.length))throw new Error("Uint8Array expected of length "+j+", got length="+k.length)}function l(k){if(typeof k!="function"||typeof k.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");s(k.outputLen),s(k.blockLen)}function u(k,j=!0){if(k.destroyed)throw new Error("Hash instance has been destroyed");if(j&&k.finished)throw new Error("Hash#digest() has already been called")}function f(k,j){r(k);const O=j.outputLen;if(k.length<O)throw new Error("digestInto() expects output buffer of length at least "+O)}function p(k){return new Uint8Array(k.buffer,k.byteOffset,k.byteLength)}function m(k){return new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4))}function v(...k){for(let j=0;j<k.length;j++)k[j].fill(0)}function y(k){return new DataView(k.buffer,k.byteOffset,k.byteLength)}function w(k,j){return k<<32-j|k>>>j}function T(k,j){return k<<j|k>>>32-j>>>0}i.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function x(k){return k<<24&4278190080|k<<8&16711680|k>>>8&65280|k>>>24&255}i.swap8IfBE=i.isLE?k=>k:k=>x(k),i.byteSwapIfBE=i.swap8IfBE;function A(k){for(let j=0;j<k.length;j++)k[j]=x(k[j]);return k}i.swap32IfBE=i.isLE?k=>k:A;const E=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",I=Array.from({length:256},(k,j)=>j.toString(16).padStart(2,"0"));function B(k){if(r(k),E)return k.toHex();let j="";for(let O=0;O<k.length;O++)j+=I[k[O]];return j}const D={_0:48,_9:57,A:65,F:70,a:97,f:102};function F(k){if(k>=D._0&&k<=D._9)return k-D._0;if(k>=D.A&&k<=D.F)return k-(D.A-10);if(k>=D.a&&k<=D.f)return k-(D.a-10)}function R(k){if(typeof k!="string")throw new Error("hex string expected, got "+typeof k);if(E)return Uint8Array.fromHex(k);const j=k.length,O=j/2;if(j%2)throw new Error("hex string expected, got unpadded hex of length "+j);const G=new Uint8Array(O);for(let ot=0,dt=0;ot<O;ot++,dt+=2){const gt=F(k.charCodeAt(dt)),mt=F(k.charCodeAt(dt+1));if(gt===void 0||mt===void 0){const Mt=k[dt]+k[dt+1];throw new Error('hex string expected, got non-hex character "'+Mt+'" at index '+dt)}G[ot]=gt*16+mt}return G}const H=async()=>{};i.nextTick=H;async function Z(k,j,O){let G=Date.now();for(let ot=0;ot<k;ot++){O(ot);const dt=Date.now()-G;dt>=0&&dt<j||(await(0,i.nextTick)(),G+=dt)}}function q(k){if(typeof k!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(k))}function V(k){return new TextDecoder().decode(k)}function W(k){return typeof k=="string"&&(k=q(k)),r(k),k}function X(k){return typeof k=="string"&&(k=q(k)),r(k),k}function tt(...k){let j=0;for(let G=0;G<k.length;G++){const ot=k[G];r(ot),j+=ot.length}const O=new Uint8Array(j);for(let G=0,ot=0;G<k.length;G++){const dt=k[G];O.set(dt,ot),ot+=dt.length}return O}function P(k,j){if(j!==void 0&&{}.toString.call(j)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(k,j)}class J{}i.Hash=J;function $(k){const j=G=>k().update(W(G)).digest(),O=k();return j.outputLen=O.outputLen,j.blockLen=O.blockLen,j.create=()=>k(),j}function U(k){const j=(G,ot)=>k(ot).update(W(G)).digest(),O=k({});return j.outputLen=O.outputLen,j.blockLen=O.blockLen,j.create=G=>k(G),j}function Y(k){const j=(G,ot)=>k(ot).update(W(G)).digest(),O=k({});return j.outputLen=O.outputLen,j.blockLen=O.blockLen,j.create=G=>k(G),j}i.wrapConstructor=$,i.wrapConstructorWithOpts=U,i.wrapXOFConstructorWithOpts=Y;function et(k=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(k));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(k));throw new Error("crypto.getRandomValues must be defined")}})(L_)),L_}var bw;function xA(){if(bw)return ti;bw=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.SHA512_IV=ti.SHA384_IV=ti.SHA224_IV=ti.SHA256_IV=ti.HashMD=void 0,ti.setBigUint64=t,ti.Chi=e,ti.Maj=s;const i=x1();function t(l,u,f,p){if(typeof l.setBigUint64=="function")return l.setBigUint64(u,f,p);const m=BigInt(32),v=BigInt(4294967295),y=Number(f>>m&v),w=Number(f&v),T=p?4:0,x=p?0:4;l.setUint32(u+T,y,p),l.setUint32(u+x,w,p)}function e(l,u,f){return l&u^~l&f}function s(l,u,f){return l&u^l&f^u&f}class r extends i.Hash{constructor(u,f,p,m){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=u,this.outputLen=f,this.padOffset=p,this.isLE=m,this.buffer=new Uint8Array(u),this.view=(0,i.createView)(this.buffer)}update(u){(0,i.aexists)(this),u=(0,i.toBytes)(u),(0,i.abytes)(u);const{view:f,buffer:p,blockLen:m}=this,v=u.length;for(let y=0;y<v;){const w=Math.min(m-this.pos,v-y);if(w===m){const T=(0,i.createView)(u);for(;m<=v-y;y+=m)this.process(T,y);continue}p.set(u.subarray(y,y+w),this.pos),this.pos+=w,y+=w,this.pos===m&&(this.process(f,0),this.pos=0)}return this.length+=u.length,this.roundClean(),this}digestInto(u){(0,i.aexists)(this),(0,i.aoutput)(u,this),this.finished=!0;const{buffer:f,view:p,blockLen:m,isLE:v}=this;let{pos:y}=this;f[y++]=128,(0,i.clean)(this.buffer.subarray(y)),this.padOffset>m-y&&(this.process(p,0),y=0);for(let E=y;E<m;E++)f[E]=0;t(p,m-8,BigInt(this.length*8),v),this.process(p,0);const w=(0,i.createView)(u),T=this.outputLen;if(T%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const x=T/4,A=this.get();if(x>A.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<x;E++)w.setUint32(4*E,A[E],v)}digest(){const{buffer:u,outputLen:f}=this;this.digestInto(u);const p=u.slice(0,f);return this.destroy(),p}_cloneInto(u){u||(u=new this.constructor),u.set(...this.get());const{blockLen:f,buffer:p,length:m,finished:v,destroyed:y,pos:w}=this;return u.destroyed=y,u.finished=v,u.length=m,u.pos=w,m%f&&u.buffer.set(p),u}clone(){return this._cloneInto()}}return ti.HashMD=r,ti.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ti.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),ti.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ti.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ti}var Kt={},ww;function SA(){if(ww)return Kt;ww=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.toBig=Kt.shrSL=Kt.shrSH=Kt.rotrSL=Kt.rotrSH=Kt.rotrBL=Kt.rotrBH=Kt.rotr32L=Kt.rotr32H=Kt.rotlSL=Kt.rotlSH=Kt.rotlBL=Kt.rotlBH=Kt.add5L=Kt.add5H=Kt.add4L=Kt.add4H=Kt.add3L=Kt.add3H=void 0,Kt.add=I,Kt.fromBig=e,Kt.split=s;const i=BigInt(2**32-1),t=BigInt(32);function e(V,W=!1){return W?{h:Number(V&i),l:Number(V>>t&i)}:{h:Number(V>>t&i)|0,l:Number(V&i)|0}}function s(V,W=!1){const X=V.length;let tt=new Uint32Array(X),P=new Uint32Array(X);for(let J=0;J<X;J++){const{h:$,l:U}=e(V[J],W);[tt[J],P[J]]=[$,U]}return[tt,P]}const r=(V,W)=>BigInt(V>>>0)<<t|BigInt(W>>>0);Kt.toBig=r;const l=(V,W,X)=>V>>>X;Kt.shrSH=l;const u=(V,W,X)=>V<<32-X|W>>>X;Kt.shrSL=u;const f=(V,W,X)=>V>>>X|W<<32-X;Kt.rotrSH=f;const p=(V,W,X)=>V<<32-X|W>>>X;Kt.rotrSL=p;const m=(V,W,X)=>V<<64-X|W>>>X-32;Kt.rotrBH=m;const v=(V,W,X)=>V>>>X-32|W<<64-X;Kt.rotrBL=v;const y=(V,W)=>W;Kt.rotr32H=y;const w=(V,W)=>V;Kt.rotr32L=w;const T=(V,W,X)=>V<<X|W>>>32-X;Kt.rotlSH=T;const x=(V,W,X)=>W<<X|V>>>32-X;Kt.rotlSL=x;const A=(V,W,X)=>W<<X-32|V>>>64-X;Kt.rotlBH=A;const E=(V,W,X)=>V<<X-32|W>>>64-X;Kt.rotlBL=E;function I(V,W,X,tt){const P=(W>>>0)+(tt>>>0);return{h:V+X+(P/2**32|0)|0,l:P|0}}const B=(V,W,X)=>(V>>>0)+(W>>>0)+(X>>>0);Kt.add3L=B;const D=(V,W,X,tt)=>W+X+tt+(V/2**32|0)|0;Kt.add3H=D;const F=(V,W,X,tt)=>(V>>>0)+(W>>>0)+(X>>>0)+(tt>>>0);Kt.add4L=F;const R=(V,W,X,tt,P)=>W+X+tt+P+(V/2**32|0)|0;Kt.add4H=R;const H=(V,W,X,tt,P)=>(V>>>0)+(W>>>0)+(X>>>0)+(tt>>>0)+(P>>>0);Kt.add5L=H;const Z=(V,W,X,tt,P,J)=>W+X+tt+P+J+(V/2**32|0)|0;Kt.add5H=Z;const q={fromBig:e,split:s,toBig:r,shrSH:l,shrSL:u,rotrSH:f,rotrSL:p,rotrBH:m,rotrBL:v,rotr32H:y,rotr32L:w,rotlSH:T,rotlSL:x,rotlBH:A,rotlBL:E,add:I,add3L:B,add3H:D,add4L:F,add4H:R,add5H:Z,add5L:H};return Kt.default=q,Kt}var xw;function TA(){if(xw)return je;xw=1,Object.defineProperty(je,"__esModule",{value:!0}),je.sha512_224=je.sha512_256=je.sha384=je.sha512=je.sha224=je.sha256=je.SHA512_256=je.SHA512_224=je.SHA384=je.SHA512=je.SHA224=je.SHA256=void 0;const i=xA(),t=SA(),e=x1(),s=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array(64);class l extends i.HashMD{constructor(D=32){super(64,D,8,!1),this.A=i.SHA256_IV[0]|0,this.B=i.SHA256_IV[1]|0,this.C=i.SHA256_IV[2]|0,this.D=i.SHA256_IV[3]|0,this.E=i.SHA256_IV[4]|0,this.F=i.SHA256_IV[5]|0,this.G=i.SHA256_IV[6]|0,this.H=i.SHA256_IV[7]|0}get(){const{A:D,B:F,C:R,D:H,E:Z,F:q,G:V,H:W}=this;return[D,F,R,H,Z,q,V,W]}set(D,F,R,H,Z,q,V,W){this.A=D|0,this.B=F|0,this.C=R|0,this.D=H|0,this.E=Z|0,this.F=q|0,this.G=V|0,this.H=W|0}process(D,F){for(let P=0;P<16;P++,F+=4)r[P]=D.getUint32(F,!1);for(let P=16;P<64;P++){const J=r[P-15],$=r[P-2],U=(0,e.rotr)(J,7)^(0,e.rotr)(J,18)^J>>>3,Y=(0,e.rotr)($,17)^(0,e.rotr)($,19)^$>>>10;r[P]=Y+r[P-7]+U+r[P-16]|0}let{A:R,B:H,C:Z,D:q,E:V,F:W,G:X,H:tt}=this;for(let P=0;P<64;P++){const J=(0,e.rotr)(V,6)^(0,e.rotr)(V,11)^(0,e.rotr)(V,25),$=tt+J+(0,i.Chi)(V,W,X)+s[P]+r[P]|0,Y=((0,e.rotr)(R,2)^(0,e.rotr)(R,13)^(0,e.rotr)(R,22))+(0,i.Maj)(R,H,Z)|0;tt=X,X=W,W=V,V=q+$|0,q=Z,Z=H,H=R,R=$+Y|0}R=R+this.A|0,H=H+this.B|0,Z=Z+this.C|0,q=q+this.D|0,V=V+this.E|0,W=W+this.F|0,X=X+this.G|0,tt=tt+this.H|0,this.set(R,H,Z,q,V,W,X,tt)}roundClean(){(0,e.clean)(r)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,e.clean)(this.buffer)}}je.SHA256=l;class u extends l{constructor(){super(28),this.A=i.SHA224_IV[0]|0,this.B=i.SHA224_IV[1]|0,this.C=i.SHA224_IV[2]|0,this.D=i.SHA224_IV[3]|0,this.E=i.SHA224_IV[4]|0,this.F=i.SHA224_IV[5]|0,this.G=i.SHA224_IV[6]|0,this.H=i.SHA224_IV[7]|0}}je.SHA224=u;const f=t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(B=>BigInt(B))),p=f[0],m=f[1],v=new Uint32Array(80),y=new Uint32Array(80);class w extends i.HashMD{constructor(D=64){super(128,D,16,!1),this.Ah=i.SHA512_IV[0]|0,this.Al=i.SHA512_IV[1]|0,this.Bh=i.SHA512_IV[2]|0,this.Bl=i.SHA512_IV[3]|0,this.Ch=i.SHA512_IV[4]|0,this.Cl=i.SHA512_IV[5]|0,this.Dh=i.SHA512_IV[6]|0,this.Dl=i.SHA512_IV[7]|0,this.Eh=i.SHA512_IV[8]|0,this.El=i.SHA512_IV[9]|0,this.Fh=i.SHA512_IV[10]|0,this.Fl=i.SHA512_IV[11]|0,this.Gh=i.SHA512_IV[12]|0,this.Gl=i.SHA512_IV[13]|0,this.Hh=i.SHA512_IV[14]|0,this.Hl=i.SHA512_IV[15]|0}get(){const{Ah:D,Al:F,Bh:R,Bl:H,Ch:Z,Cl:q,Dh:V,Dl:W,Eh:X,El:tt,Fh:P,Fl:J,Gh:$,Gl:U,Hh:Y,Hl:et}=this;return[D,F,R,H,Z,q,V,W,X,tt,P,J,$,U,Y,et]}set(D,F,R,H,Z,q,V,W,X,tt,P,J,$,U,Y,et){this.Ah=D|0,this.Al=F|0,this.Bh=R|0,this.Bl=H|0,this.Ch=Z|0,this.Cl=q|0,this.Dh=V|0,this.Dl=W|0,this.Eh=X|0,this.El=tt|0,this.Fh=P|0,this.Fl=J|0,this.Gh=$|0,this.Gl=U|0,this.Hh=Y|0,this.Hl=et|0}process(D,F){for(let O=0;O<16;O++,F+=4)v[O]=D.getUint32(F),y[O]=D.getUint32(F+=4);for(let O=16;O<80;O++){const G=v[O-15]|0,ot=y[O-15]|0,dt=t.rotrSH(G,ot,1)^t.rotrSH(G,ot,8)^t.shrSH(G,ot,7),gt=t.rotrSL(G,ot,1)^t.rotrSL(G,ot,8)^t.shrSL(G,ot,7),mt=v[O-2]|0,Mt=y[O-2]|0,Et=t.rotrSH(mt,Mt,19)^t.rotrBH(mt,Mt,61)^t.shrSH(mt,Mt,6),ne=t.rotrSL(mt,Mt,19)^t.rotrBL(mt,Mt,61)^t.shrSL(mt,Mt,6),Se=t.add4L(gt,ne,y[O-7],y[O-16]),We=t.add4H(Se,dt,Et,v[O-7],v[O-16]);v[O]=We|0,y[O]=Se|0}let{Ah:R,Al:H,Bh:Z,Bl:q,Ch:V,Cl:W,Dh:X,Dl:tt,Eh:P,El:J,Fh:$,Fl:U,Gh:Y,Gl:et,Hh:k,Hl:j}=this;for(let O=0;O<80;O++){const G=t.rotrSH(P,J,14)^t.rotrSH(P,J,18)^t.rotrBH(P,J,41),ot=t.rotrSL(P,J,14)^t.rotrSL(P,J,18)^t.rotrBL(P,J,41),dt=P&$^~P&Y,gt=J&U^~J&et,mt=t.add5L(j,ot,gt,m[O],y[O]),Mt=t.add5H(mt,k,G,dt,p[O],v[O]),Et=mt|0,ne=t.rotrSH(R,H,28)^t.rotrBH(R,H,34)^t.rotrBH(R,H,39),Se=t.rotrSL(R,H,28)^t.rotrBL(R,H,34)^t.rotrBL(R,H,39),We=R&Z^R&V^Z&V,Xe=H&q^H&W^q&W;k=Y|0,j=et|0,Y=$|0,et=U|0,$=P|0,U=J|0,{h:P,l:J}=t.add(X|0,tt|0,Mt|0,Et|0),X=V|0,tt=W|0,V=Z|0,W=q|0,Z=R|0,q=H|0;const Nn=t.add3L(Et,Se,Xe);R=t.add3H(Nn,Mt,ne,We),H=Nn|0}({h:R,l:H}=t.add(this.Ah|0,this.Al|0,R|0,H|0)),{h:Z,l:q}=t.add(this.Bh|0,this.Bl|0,Z|0,q|0),{h:V,l:W}=t.add(this.Ch|0,this.Cl|0,V|0,W|0),{h:X,l:tt}=t.add(this.Dh|0,this.Dl|0,X|0,tt|0),{h:P,l:J}=t.add(this.Eh|0,this.El|0,P|0,J|0),{h:$,l:U}=t.add(this.Fh|0,this.Fl|0,$|0,U|0),{h:Y,l:et}=t.add(this.Gh|0,this.Gl|0,Y|0,et|0),{h:k,l:j}=t.add(this.Hh|0,this.Hl|0,k|0,j|0),this.set(R,H,Z,q,V,W,X,tt,P,J,$,U,Y,et,k,j)}roundClean(){(0,e.clean)(v,y)}destroy(){(0,e.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}je.SHA512=w;class T extends w{constructor(){super(48),this.Ah=i.SHA384_IV[0]|0,this.Al=i.SHA384_IV[1]|0,this.Bh=i.SHA384_IV[2]|0,this.Bl=i.SHA384_IV[3]|0,this.Ch=i.SHA384_IV[4]|0,this.Cl=i.SHA384_IV[5]|0,this.Dh=i.SHA384_IV[6]|0,this.Dl=i.SHA384_IV[7]|0,this.Eh=i.SHA384_IV[8]|0,this.El=i.SHA384_IV[9]|0,this.Fh=i.SHA384_IV[10]|0,this.Fl=i.SHA384_IV[11]|0,this.Gh=i.SHA384_IV[12]|0,this.Gl=i.SHA384_IV[13]|0,this.Hh=i.SHA384_IV[14]|0,this.Hl=i.SHA384_IV[15]|0}}je.SHA384=T;const x=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),A=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class E extends w{constructor(){super(28),this.Ah=x[0]|0,this.Al=x[1]|0,this.Bh=x[2]|0,this.Bl=x[3]|0,this.Ch=x[4]|0,this.Cl=x[5]|0,this.Dh=x[6]|0,this.Dl=x[7]|0,this.Eh=x[8]|0,this.El=x[9]|0,this.Fh=x[10]|0,this.Fl=x[11]|0,this.Gh=x[12]|0,this.Gl=x[13]|0,this.Hh=x[14]|0,this.Hl=x[15]|0}}je.SHA512_224=E;class I extends w{constructor(){super(32),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}return je.SHA512_256=I,je.sha256=(0,e.createHasher)(()=>new l),je.sha224=(0,e.createHasher)(()=>new u),je.sha512=(0,e.createHasher)(()=>new w),je.sha384=(0,e.createHasher)(()=>new T),je.sha512_256=(0,e.createHasher)(()=>new I),je.sha512_224=(0,e.createHasher)(()=>new E),je}var Sw;function AA(){if(Sw)return zs;Sw=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.sha224=zs.SHA224=zs.sha256=zs.SHA256=void 0;const i=TA();return zs.SHA256=i.SHA256,zs.sha256=i.sha256,zs.SHA224=i.SHA224,zs.sha224=i.sha224,zs}var M_,Tw;function EA(){if(Tw)return M_;Tw=1;function i(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),s=0;s<e.length;s++)e[s]=255;for(var r=0;r<t.length;r++){var l=t.charAt(r),u=l.charCodeAt(0);if(e[u]!==255)throw new TypeError(l+" is ambiguous");e[u]=r}var f=t.length,p=t.charAt(0),m=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function y(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var A=0,E=0,I=0,B=x.length;I!==B&&x[I]===0;)I++,A++;for(var D=(B-I)*v+1>>>0,F=new Uint8Array(D);I!==B;){for(var R=x[I],H=0,Z=D-1;(R!==0||H<E)&&Z!==-1;Z--,H++)R+=256*F[Z]>>>0,F[Z]=R%f>>>0,R=R/f>>>0;if(R!==0)throw new Error("Non-zero carry");E=H,I++}for(var q=D-E;q!==D&&F[q]===0;)q++;for(var V=p.repeat(A);q<D;++q)V+=t.charAt(F[q]);return V}function w(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var A=0,E=0,I=0;x[A]===p;)E++,A++;for(var B=(x.length-A)*m+1>>>0,D=new Uint8Array(B);x[A];){var F=x.charCodeAt(A);if(F>255)return;var R=e[F];if(R===255)return;for(var H=0,Z=B-1;(R!==0||H<I)&&Z!==-1;Z--,H++)R+=f*D[Z]>>>0,D[Z]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");I=H,A++}for(var q=B-I;q!==B&&D[q]===0;)q++;for(var V=new Uint8Array(E+(B-q)),W=E;q!==B;)V[W++]=D[q++];return V}function T(x){var A=w(x);if(A)return A;throw new Error("Non-base"+f+" character")}return{encode:y,decodeUnsafe:w,decode:T}}return M_=i,M_}var k_,Aw;function CA(){return Aw||(Aw=1,k_=EA()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),k_}var D_,Ew;function LA(){if(Ew)return D_;Ew=1;var i=CA();return D_=function(t){function e(u){var f=Uint8Array.from(u),p=t(f),m=f.length+4,v=new Uint8Array(m);return v.set(f,0),v.set(p.subarray(0,4),f.length),i.encode(v,m)}function s(u){var f=u.slice(0,-4),p=u.slice(-4),m=t(f);if(!(p[0]^m[0]|p[1]^m[1]|p[2]^m[2]|p[3]^m[3]))return f}function r(u){var f=i.decodeUnsafe(u);if(f)return s(f)}function l(u){var f=i.decode(u),p=s(f);if(!p)throw new Error("Invalid checksum");return p}return{encode:e,decode:l,decodeUnsafe:r}},D_}var O_,Cw;function MA(){if(Cw)return O_;Cw=1;var{sha256:i}=AA(),t=LA();function e(s){return i(i(s))}return O_=t(e),O_}var kA=MA();const yh=w1(kA),DA=i=>Array.from(i,t=>t.toString(16).padStart(2,"0")).join(""),Cd="automerge:",OA=i=>{const[t,e,...s]=i.split("#");if(s.length>0)throw new Error("Invalid URL: contains multiple heads sections");const r=new RegExp(`^${Cd}(\\w+)$`),[,l]=t.match(r)||[],u=l,f=A1(u);if(!f)throw new Error("Invalid document URL: "+i);if(e===void 0)return{binaryDocumentId:f,documentId:u};const p=e===""?[]:e.split("|"),m=p.map(v=>{try{return DA(yh.decode(v))}catch{throw new Error(`Invalid head in URL: ${v}`)}});return{binaryDocumentId:f,hexHeads:m,documentId:u,heads:p}},S1=i=>{if(i instanceof Uint8Array||typeof i=="string")return Cd+(i instanceof Uint8Array?Lw(i):i);const{documentId:t,heads:e=void 0}=i;if(t===void 0)throw new Error("Invalid documentId: "+t);const s=t instanceof Uint8Array?Lw(t):t;let r=`${Cd}${s}`;return e!==void 0&&(e.forEach(l=>{try{yh.decode(l)}catch{throw new Error(`Invalid head: ${l}`)}}),r+="#"+e.join("|")),r},RA=i=>IA(i)?i:T1(i)?S1({documentId:i}):NA(i)?zA(i):void 0,IA=i=>{if(typeof i!="string"||!i||!i.startsWith(Cd))return!1;try{const{documentId:t,heads:e}=OA(i);return!(!T1(t)||e&&!e.every(s=>{try{return yh.decode(s),!0}catch{return!1}}))}catch{return!1}},T1=i=>typeof i!="string"?!1:A1(i)!==void 0,NA=i=>typeof i=="string"&&n0(i),A1=i=>yh.decodeUnsafe(i),Lw=i=>yh.encode(i),zA=i=>{if(!n0(i))return;const t=bA(i);return S1({documentId:t})},Mw=new Map;function PA(i,{suspense:t}={suspense:!1}){const e=yA(),s=It.useRef(),[r,l]=It.useState();let u=i&&r&&r.url===RA(i)?r:void 0;if(i&&!u){const p=e.findWithProgress(i);p.state==="ready"&&(u=p.handle)}let f=i?Mw.get(i):void 0;if(!f&&i){s.current?.abort(),s.current=new AbortController;const p=e.find(i,{signal:s.current.signal});f=gA(p),Mw.set(i,f)}return It.useEffect(()=>{u||t||!f||f.promise.then(p=>{l(p)}).catch(()=>{l(void 0)})},[u,t,f]),u||!t||!f?u:f.read()}function BA(i,t={suspense:!1}){const e=PA(i,t),[s,r]=It.useState(()=>e?.doc()),[l,u]=It.useState();It.useEffect(()=>{r(e?.doc())},[e]),It.useEffect(()=>{if(!e)return;const p=()=>r(e.doc()),m=()=>{u(new Error(`Document ${i} was deleted`))};return e.on("change",p),e.on("delete",m),()=>{e.removeListener("change",p),e.removeListener("delete",m)}},[e,i]);const f=It.useCallback((p,m)=>{e.change(p,m)},[e]);if(l)throw l;return s?[s,f]:[void 0,()=>{}]}var R_={exports:{}},kw;function UA(){return kw||(kw=1,(function(i){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(p,m,v){this.fn=p,this.context=m,this.once=v||!1}function l(p,m,v,y,w){if(typeof v!="function")throw new TypeError("The listener must be a function");var T=new r(v,y||p,w),x=e?e+m:m;return p._events[x]?p._events[x].fn?p._events[x]=[p._events[x],T]:p._events[x].push(T):(p._events[x]=T,p._eventsCount++),p}function u(p,m){--p._eventsCount===0?p._events=new s:delete p._events[m]}function f(){this._events=new s,this._eventsCount=0}f.prototype.eventNames=function(){var m=[],v,y;if(this._eventsCount===0)return m;for(y in v=this._events)t.call(v,y)&&m.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(v)):m},f.prototype.listeners=function(m){var v=e?e+m:m,y=this._events[v];if(!y)return[];if(y.fn)return[y.fn];for(var w=0,T=y.length,x=new Array(T);w<T;w++)x[w]=y[w].fn;return x},f.prototype.listenerCount=function(m){var v=e?e+m:m,y=this._events[v];return y?y.fn?1:y.length:0},f.prototype.emit=function(m,v,y,w,T,x){var A=e?e+m:m;if(!this._events[A])return!1;var E=this._events[A],I=arguments.length,B,D;if(E.fn){switch(E.once&&this.removeListener(m,E.fn,void 0,!0),I){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,v),!0;case 3:return E.fn.call(E.context,v,y),!0;case 4:return E.fn.call(E.context,v,y,w),!0;case 5:return E.fn.call(E.context,v,y,w,T),!0;case 6:return E.fn.call(E.context,v,y,w,T,x),!0}for(D=1,B=new Array(I-1);D<I;D++)B[D-1]=arguments[D];E.fn.apply(E.context,B)}else{var F=E.length,R;for(D=0;D<F;D++)switch(E[D].once&&this.removeListener(m,E[D].fn,void 0,!0),I){case 1:E[D].fn.call(E[D].context);break;case 2:E[D].fn.call(E[D].context,v);break;case 3:E[D].fn.call(E[D].context,v,y);break;case 4:E[D].fn.call(E[D].context,v,y,w);break;default:if(!B)for(R=1,B=new Array(I-1);R<I;R++)B[R-1]=arguments[R];E[D].fn.apply(E[D].context,B)}}return!0},f.prototype.on=function(m,v,y){return l(this,m,v,y,!1)},f.prototype.once=function(m,v,y){return l(this,m,v,y,!0)},f.prototype.removeListener=function(m,v,y,w){var T=e?e+m:m;if(!this._events[T])return this;if(!v)return u(this,T),this;var x=this._events[T];if(x.fn)x.fn===v&&(!w||x.once)&&(!y||x.context===y)&&u(this,T);else{for(var A=0,E=[],I=x.length;A<I;A++)(x[A].fn!==v||w&&!x[A].once||y&&x[A].context!==y)&&E.push(x[A]);E.length?this._events[T]=E.length===1?E[0]:E:u(this,T)}return this},f.prototype.removeAllListeners=function(m){var v;return m?(v=e?e+m:m,this._events[v]&&u(this,v)):(this._events=new s,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,i.exports=f})(R_)),R_.exports}var HA=UA();const VA=w1(HA);new VA;var Xu={exports:{}};var qA=Xu.exports,Dw;function jA(){return Dw||(Dw=1,(function(i,t){(function(e,s){s(t)})(qA,(function(e){var s="1.9.4";function r(a){var h,_,S,C;for(_=1,S=arguments.length;_<S;_++){C=arguments[_];for(h in C)a[h]=C[h]}return a}var l=Object.create||(function(){function a(){}return function(h){return a.prototype=h,new a}})();function u(a,h){var _=Array.prototype.slice;if(a.bind)return a.bind.apply(a,_.call(arguments,1));var S=_.call(arguments,2);return function(){return a.apply(h,S.length?S.concat(_.call(arguments)):arguments)}}var f=0;function p(a){return"_leaflet_id"in a||(a._leaflet_id=++f),a._leaflet_id}function m(a,h,_){var S,C,N,Q;return Q=function(){S=!1,C&&(N.apply(_,C),C=!1)},N=function(){S?C=arguments:(a.apply(_,arguments),setTimeout(Q,h),S=!0)},N}function v(a,h,_){var S=h[1],C=h[0],N=S-C;return a===S&&_?a:((a-C)%N+N)%N+C}function y(){return!1}function w(a,h){if(h===!1)return a;var _=Math.pow(10,h===void 0?6:h);return Math.round(a*_)/_}function T(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function x(a){return T(a).split(/\s+/)}function A(a,h){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?l(a.options):{});for(var _ in h)a.options[_]=h[_];return a.options}function E(a,h,_){var S=[];for(var C in a)S.push(encodeURIComponent(_?C.toUpperCase():C)+"="+encodeURIComponent(a[C]));return(!h||h.indexOf("?")===-1?"?":"&")+S.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function B(a,h){return a.replace(I,function(_,S){var C=h[S];if(C===void 0)throw new Error("No value provided for variable "+_);return typeof C=="function"&&(C=C(h)),C})}var D=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function F(a,h){for(var _=0;_<a.length;_++)if(a[_]===h)return _;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var Z=0;function q(a){var h=+new Date,_=Math.max(0,16-(h-Z));return Z=h+_,window.setTimeout(a,_)}var V=window.requestAnimationFrame||H("RequestAnimationFrame")||q,W=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function X(a,h,_){if(_&&V===q)a.call(h);else return V.call(window,u(a,h))}function tt(a){a&&W.call(window,a)}var P={__proto__:null,extend:r,create:l,bind:u,get lastId(){return f},stamp:p,throttle:m,wrapNum:v,falseFn:y,formatNum:w,trim:T,splitWords:x,setOptions:A,getParamString:E,template:B,isArray:D,indexOf:F,emptyImageUrl:R,requestFn:V,cancelFn:W,requestAnimFrame:X,cancelAnimFrame:tt};function J(){}J.extend=function(a){var h=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=h.__super__=this.prototype,S=l(_);S.constructor=h,h.prototype=S;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(h[C]=this[C]);return a.statics&&r(h,a.statics),a.includes&&($(a.includes),r.apply(null,[S].concat(a.includes))),r(S,a),delete S.statics,delete S.includes,S.options&&(S.options=_.options?l(_.options):{},r(S.options,a.options)),S._initHooks=[],S.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var N=0,Q=S._initHooks.length;N<Q;N++)S._initHooks[N].call(this)}},h},J.include=function(a){var h=this.prototype.options;return r(this.prototype,a),a.options&&(this.prototype.options=h,this.mergeOptions(a.options)),this},J.mergeOptions=function(a){return r(this.prototype.options,a),this},J.addInitHook=function(a){var h=Array.prototype.slice.call(arguments,1),_=typeof a=="function"?a:function(){this[a].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function $(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=D(a)?a:[a];for(var h=0;h<a.length;h++)a[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var U={on:function(a,h,_){if(typeof a=="object")for(var S in a)this._on(S,a[S],h);else{a=x(a);for(var C=0,N=a.length;C<N;C++)this._on(a[C],h,_)}return this},off:function(a,h,_){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var S in a)this._off(S,a[S],h);else{a=x(a);for(var C=arguments.length===1,N=0,Q=a.length;N<Q;N++)C?this._off(a[N]):this._off(a[N],h,_)}return this},_on:function(a,h,_,S){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(a,h,_)===!1){_===this&&(_=void 0);var C={fn:h,ctx:_};S&&(C.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(C)}},_off:function(a,h,_){var S,C,N;if(this._events&&(S=this._events[a],!!S)){if(arguments.length===1){if(this._firingCount)for(C=0,N=S.length;C<N;C++)S[C].fn=y;delete this._events[a];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var Q=this._listens(a,h,_);if(Q!==!1){var rt=S[Q];this._firingCount&&(rt.fn=y,this._events[a]=S=S.slice()),S.splice(Q,1)}}},fire:function(a,h,_){if(!this.listens(a,_))return this;var S=r({},h,{type:a,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var C=this._events[a];if(C){this._firingCount=this._firingCount+1||1;for(var N=0,Q=C.length;N<Q;N++){var rt=C[N],ut=rt.fn;rt.once&&this.off(a,ut,rt.ctx),ut.call(rt.ctx||this,S)}this._firingCount--}}return _&&this._propagateEvent(S),this},listens:function(a,h,_,S){typeof a!="string"&&console.warn('"string" type argument expected');var C=h;typeof h!="function"&&(S=!!h,C=void 0,_=void 0);var N=this._events&&this._events[a];if(N&&N.length&&this._listens(a,C,_)!==!1)return!0;if(S){for(var Q in this._eventParents)if(this._eventParents[Q].listens(a,h,_,S))return!0}return!1},_listens:function(a,h,_){if(!this._events)return!1;var S=this._events[a]||[];if(!h)return!!S.length;_===this&&(_=void 0);for(var C=0,N=S.length;C<N;C++)if(S[C].fn===h&&S[C].ctx===_)return C;return!1},once:function(a,h,_){if(typeof a=="object")for(var S in a)this._on(S,a[S],h,!0);else{a=x(a);for(var C=0,N=a.length;C<N;C++)this._on(a[C],h,_,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[p(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[p(a)],this},_propagateEvent:function(a){for(var h in this._eventParents)this._eventParents[h].fire(a.type,r({layer:a.target,propagatedFrom:a.target},a),!0)}};U.addEventListener=U.on,U.removeEventListener=U.clearAllEventListeners=U.off,U.addOneTimeEventListener=U.once,U.fireEvent=U.fire,U.hasEventListeners=U.listens;var Y=J.extend(U);function et(a,h,_){this.x=_?Math.round(a):a,this.y=_?Math.round(h):h}var k=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};et.prototype={clone:function(){return new et(this.x,this.y)},add:function(a){return this.clone()._add(j(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(j(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new et(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new et(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=k(this.x),this.y=k(this.y),this},distanceTo:function(a){a=j(a);var h=a.x-this.x,_=a.y-this.y;return Math.sqrt(h*h+_*_)},equals:function(a){return a=j(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=j(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function j(a,h,_){return a instanceof et?a:D(a)?new et(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new et(a.x,a.y):new et(a,h,_)}function O(a,h){if(a)for(var _=h?[a,h]:a,S=0,C=_.length;S<C;S++)this.extend(_[S])}O.prototype={extend:function(a){var h,_;if(!a)return this;if(a instanceof et||typeof a[0]=="number"||"x"in a)h=_=j(a);else if(a=G(a),h=a.min,_=a.max,!h||!_)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=_.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(a){return j((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return j(this.min.x,this.max.y)},getTopRight:function(){return j(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var h,_;return typeof a[0]=="number"||a instanceof et?a=j(a):a=G(a),a instanceof O?(h=a.min,_=a.max):h=_=a,h.x>=this.min.x&&_.x<=this.max.x&&h.y>=this.min.y&&_.y<=this.max.y},intersects:function(a){a=G(a);var h=this.min,_=this.max,S=a.min,C=a.max,N=C.x>=h.x&&S.x<=_.x,Q=C.y>=h.y&&S.y<=_.y;return N&&Q},overlaps:function(a){a=G(a);var h=this.min,_=this.max,S=a.min,C=a.max,N=C.x>h.x&&S.x<_.x,Q=C.y>h.y&&S.y<_.y;return N&&Q},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var h=this.min,_=this.max,S=Math.abs(h.x-_.x)*a,C=Math.abs(h.y-_.y)*a;return G(j(h.x-S,h.y-C),j(_.x+S,_.y+C))},equals:function(a){return a?(a=G(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function G(a,h){return!a||a instanceof O?a:new O(a,h)}function ot(a,h){if(a)for(var _=h?[a,h]:a,S=0,C=_.length;S<C;S++)this.extend(_[S])}ot.prototype={extend:function(a){var h=this._southWest,_=this._northEast,S,C;if(a instanceof gt)S=a,C=a;else if(a instanceof ot){if(S=a._southWest,C=a._northEast,!S||!C)return this}else return a?this.extend(mt(a)||dt(a)):this;return!h&&!_?(this._southWest=new gt(S.lat,S.lng),this._northEast=new gt(C.lat,C.lng)):(h.lat=Math.min(S.lat,h.lat),h.lng=Math.min(S.lng,h.lng),_.lat=Math.max(C.lat,_.lat),_.lng=Math.max(C.lng,_.lng)),this},pad:function(a){var h=this._southWest,_=this._northEast,S=Math.abs(h.lat-_.lat)*a,C=Math.abs(h.lng-_.lng)*a;return new ot(new gt(h.lat-S,h.lng-C),new gt(_.lat+S,_.lng+C))},getCenter:function(){return new gt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new gt(this.getNorth(),this.getWest())},getSouthEast:function(){return new gt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof gt||"lat"in a?a=mt(a):a=dt(a);var h=this._southWest,_=this._northEast,S,C;return a instanceof ot?(S=a.getSouthWest(),C=a.getNorthEast()):S=C=a,S.lat>=h.lat&&C.lat<=_.lat&&S.lng>=h.lng&&C.lng<=_.lng},intersects:function(a){a=dt(a);var h=this._southWest,_=this._northEast,S=a.getSouthWest(),C=a.getNorthEast(),N=C.lat>=h.lat&&S.lat<=_.lat,Q=C.lng>=h.lng&&S.lng<=_.lng;return N&&Q},overlaps:function(a){a=dt(a);var h=this._southWest,_=this._northEast,S=a.getSouthWest(),C=a.getNorthEast(),N=C.lat>h.lat&&S.lat<_.lat,Q=C.lng>h.lng&&S.lng<_.lng;return N&&Q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,h){return a?(a=dt(a),this._southWest.equals(a.getSouthWest(),h)&&this._northEast.equals(a.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function dt(a,h){return a instanceof ot?a:new ot(a,h)}function gt(a,h,_){if(isNaN(a)||isNaN(h))throw new Error("Invalid LatLng object: ("+a+", "+h+")");this.lat=+a,this.lng=+h,_!==void 0&&(this.alt=+_)}gt.prototype={equals:function(a,h){if(!a)return!1;a=mt(a);var _=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return _<=(h===void 0?1e-9:h)},toString:function(a){return"LatLng("+w(this.lat,a)+", "+w(this.lng,a)+")"},distanceTo:function(a){return Et.distance(this,mt(a))},wrap:function(){return Et.wrapLatLng(this)},toBounds:function(a){var h=180*a/40075017,_=h/Math.cos(Math.PI/180*this.lat);return dt([this.lat-h,this.lng-_],[this.lat+h,this.lng+_])},clone:function(){return new gt(this.lat,this.lng,this.alt)}};function mt(a,h,_){return a instanceof gt?a:D(a)&&typeof a[0]!="object"?a.length===3?new gt(a[0],a[1],a[2]):a.length===2?new gt(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new gt(a.lat,"lng"in a?a.lng:a.lon,a.alt):h===void 0?null:new gt(a,h,_)}var Mt={latLngToPoint:function(a,h){var _=this.projection.project(a),S=this.scale(h);return this.transformation._transform(_,S)},pointToLatLng:function(a,h){var _=this.scale(h),S=this.transformation.untransform(a,_);return this.projection.unproject(S)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var h=this.projection.bounds,_=this.scale(a),S=this.transformation.transform(h.min,_),C=this.transformation.transform(h.max,_);return new O(S,C)},infinite:!1,wrapLatLng:function(a){var h=this.wrapLng?v(a.lng,this.wrapLng,!0):a.lng,_=this.wrapLat?v(a.lat,this.wrapLat,!0):a.lat,S=a.alt;return new gt(_,h,S)},wrapLatLngBounds:function(a){var h=a.getCenter(),_=this.wrapLatLng(h),S=h.lat-_.lat,C=h.lng-_.lng;if(S===0&&C===0)return a;var N=a.getSouthWest(),Q=a.getNorthEast(),rt=new gt(N.lat-S,N.lng-C),ut=new gt(Q.lat-S,Q.lng-C);return new ot(rt,ut)}},Et=r({},Mt,{wrapLng:[-180,180],R:6371e3,distance:function(a,h){var _=Math.PI/180,S=a.lat*_,C=h.lat*_,N=Math.sin((h.lat-a.lat)*_/2),Q=Math.sin((h.lng-a.lng)*_/2),rt=N*N+Math.cos(S)*Math.cos(C)*Q*Q,ut=2*Math.atan2(Math.sqrt(rt),Math.sqrt(1-rt));return this.R*ut}}),ne=6378137,Se={R:ne,MAX_LATITUDE:85.0511287798,project:function(a){var h=Math.PI/180,_=this.MAX_LATITUDE,S=Math.max(Math.min(_,a.lat),-_),C=Math.sin(S*h);return new et(this.R*a.lng*h,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(a){var h=180/Math.PI;return new gt((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*h,a.x*h/this.R)},bounds:(function(){var a=ne*Math.PI;return new O([-a,-a],[a,a])})()};function We(a,h,_,S){if(D(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=h,this._c=_,this._d=S}We.prototype={transform:function(a,h){return this._transform(a.clone(),h)},_transform:function(a,h){return h=h||1,a.x=h*(this._a*a.x+this._b),a.y=h*(this._c*a.y+this._d),a},untransform:function(a,h){return h=h||1,new et((a.x/h-this._b)/this._a,(a.y/h-this._d)/this._c)}};function Xe(a,h,_,S){return new We(a,h,_,S)}var Nn=r({},Et,{code:"EPSG:3857",projection:Se,transformation:(function(){var a=.5/(Math.PI*Se.R);return Xe(a,.5,-a,.5)})()}),hi=r({},Nn,{code:"EPSG:900913"});function Ot(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Zt(a,h){var _="",S,C,N,Q,rt,ut;for(S=0,N=a.length;S<N;S++){for(rt=a[S],C=0,Q=rt.length;C<Q;C++)ut=rt[C],_+=(C?"L":"M")+ut.x+" "+ut.y;_+=h?Dt.svg?"z":"x":""}return _||"M0 0"}var Ne=document.documentElement.style,be="ActiveXObject"in window,oe=be&&!document.addEventListener,Te="msLaunchUri"in navigator&&!("documentMode"in document),nn=we("webkit"),Qn=we("android"),Ji=we("android 2")||we("android 3"),sn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ma=Qn&&we("Google")&&sn<537&&!("AudioNode"in window),As=!!window.opera,$i=!Te&&we("chrome"),Er=we("gecko")&&!nn&&!As&&!be,wl=!$i&&we("safari"),_a=we("phantom"),xl="OTransition"in Ne,Uc=navigator.platform.indexOf("Win")===0,Ys=be&&"transition"in Ne,yn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ji,Ri="MozPerspective"in Ne,jn=!window.L_DISABLE_3D&&(Ys||yn||Ri)&&!xl&&!_a,Cr=typeof orientation<"u"||we("mobile"),Hc=Cr&&nn,Vc=Cr&&yn,Lr=!window.PointerEvent&&window.MSPointerEvent,Mr=!!(window.PointerEvent||Lr),kr="ontouchstart"in window||!!window.TouchEvent,Es=!window.L_NO_TOUCH&&(kr||Mr),po=Cr&&As,St=Cr&&Er,Ct=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Gt=(function(){var a=!1;try{var h=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",y,h),window.removeEventListener("testPassiveEventSupport",y,h)}catch{}return a})(),Lt=(function(){return!!document.createElement("canvas").getContext})(),Rt=!!(document.createElementNS&&Ot("svg").createSVGRect),Nt=!!Rt&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),qt=!Rt&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var h=a.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}})(),Wt=navigator.platform.indexOf("Mac")===0,Qt=navigator.platform.indexOf("Linux")===0;function we(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Dt={ie:be,ielt9:oe,edge:Te,webkit:nn,android:Qn,android23:Ji,androidStock:ma,opera:As,chrome:$i,gecko:Er,safari:wl,phantom:_a,opera12:xl,win:Uc,ie3d:Ys,webkit3d:yn,gecko3d:Ri,any3d:jn,mobile:Cr,mobileWebkit:Hc,mobileWebkit3d:Vc,msPointer:Lr,pointer:Mr,touch:Es,touchNative:kr,mobileOpera:po,mobileGecko:St,retina:Ct,passiveEvents:Gt,canvas:Lt,svg:Rt,vml:qt,inlineSvg:Nt,mac:Wt,linux:Qt},fi=Dt.msPointer?"MSPointerDown":"pointerdown",ts=Dt.msPointer?"MSPointerMove":"pointermove",vn=Dt.msPointer?"MSPointerUp":"pointerup",De=Dt.msPointer?"MSPointerCancel":"pointercancel",bn={touchstart:fi,touchmove:ts,touchend:vn,touchcancel:De},Dr={touchstart:_o,touchmove:Fs,touchend:Fs,touchcancel:Fs},Xs={},zh=!1;function Dp(a,h,_){return h==="touchstart"&&mo(),Dr[h]?(_=Dr[h].bind(this,_),a.addEventListener(bn[h],_,!1),_):(console.warn("wrong event specified:",h),y)}function Ph(a,h,_){if(!bn[h]){console.warn("wrong event specified:",h);return}a.removeEventListener(bn[h],_,!1)}function ga(a){Xs[a.pointerId]=a}function qc(a){Xs[a.pointerId]&&(Xs[a.pointerId]=a)}function Or(a){delete Xs[a.pointerId]}function mo(){zh||(document.addEventListener(fi,ga,!0),document.addEventListener(ts,qc,!0),document.addEventListener(vn,Or,!0),document.addEventListener(De,Or,!0),zh=!0)}function Fs(a,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var _ in Xs)h.touches.push(Xs[_]);h.changedTouches=[h],a(h)}}function _o(a,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&on(h),Fs(a,h)}function wn(a){var h={},_,S;for(S in a)_=a[S],h[S]=_&&_.bind?_.bind(a):_;return a=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Bh=200;function Uh(a,h){a.addEventListener("dblclick",h);var _=0,S;function C(N){if(N.detail!==1){S=N.detail;return}if(!(N.pointerType==="mouse"||N.sourceCapabilities&&!N.sourceCapabilities.firesTouchEvents)){var Q=Ta(N);if(!(Q.some(function(ut){return ut instanceof HTMLLabelElement&&ut.attributes.for})&&!Q.some(function(ut){return ut instanceof HTMLInputElement||ut instanceof HTMLSelectElement}))){var rt=Date.now();rt-_<=Bh?(S++,S===2&&h(wn(N))):S=1,_=rt}}}return a.addEventListener("click",C),{dblclick:h,simDblclick:C}}function Rr(a,h){a.removeEventListener("dblclick",h.dblclick),a.removeEventListener("click",h.simDblclick)}var Qs=ba(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ya=ba(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),jc=ya==="webkitTransition"||ya==="OTransition"?ya+"End":"transitionend";function Gc(a){return typeof a=="string"?document.getElementById(a):a}function va(a,h){var _=a.style[h]||a.currentStyle&&a.currentStyle[h];if((!_||_==="auto")&&document.defaultView){var S=document.defaultView.getComputedStyle(a,null);_=S?S[h]:null}return _==="auto"?null:_}function le(a,h,_){var S=document.createElement(a);return S.className=h||"",_&&_.appendChild(S),S}function ze(a){var h=a.parentNode;h&&h.removeChild(a)}function di(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Ln(a){var h=a.parentNode;h&&h.lastChild!==a&&h.appendChild(a)}function Ir(a){var h=a.parentNode;h&&h.firstChild!==a&&h.insertBefore(a,h.firstChild)}function Zc(a,h){if(a.classList!==void 0)return a.classList.contains(h);var _=Sl(a);return _.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(_)}function te(a,h){if(a.classList!==void 0)for(var _=x(h),S=0,C=_.length;S<C;S++)a.classList.add(_[S]);else if(!Zc(a,h)){var N=Sl(a);go(a,(N?N+" ":"")+h)}}function $e(a,h){a.classList!==void 0?a.classList.remove(h):go(a,T((" "+Sl(a)+" ").replace(" "+h+" "," ")))}function go(a,h){a.className.baseVal===void 0?a.className=h:a.className.baseVal=h}function Sl(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Fe(a,h){"opacity"in a.style?a.style.opacity=h:"filter"in a.style&&Wc(a,h)}function Wc(a,h){var _=!1,S="DXImageTransform.Microsoft.Alpha";try{_=a.filters.item(S)}catch{if(h===1)return}h=Math.round(h*100),_?(_.Enabled=h!==100,_.Opacity=h):a.style.filter+=" progid:"+S+"(opacity="+h+")"}function ba(a){for(var h=document.documentElement.style,_=0;_<a.length;_++)if(a[_]in h)return a[_];return!1}function Cs(a,h,_){var S=h||new et(0,0);a.style[Qs]=(Dt.ie3d?"translate("+S.x+"px,"+S.y+"px)":"translate3d("+S.x+"px,"+S.y+"px,0)")+(_?" scale("+_+")":"")}function Ve(a,h){a._leaflet_pos=h,Dt.any3d?Cs(a,h):(a.style.left=h.x+"px",a.style.top=h.y+"px")}function Ks(a){return a._leaflet_pos||new et(0,0)}var yo,es,Yc;if("onselectstart"in document)yo=function(){Ft(window,"selectstart",on)},es=function(){Oe(window,"selectstart",on)};else{var vo=ba(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);yo=function(){if(vo){var a=document.documentElement.style;Yc=a[vo],a[vo]="none"}},es=function(){vo&&(document.documentElement.style[vo]=Yc,Yc=void 0)}}function Tl(){Ft(window,"dragstart",on)}function wa(){Oe(window,"dragstart",on)}var Al,Xc;function bo(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(pi(),Al=a,Xc=a.style.outlineStyle,a.style.outlineStyle="none",Ft(window,"keydown",pi))}function pi(){Al&&(Al.style.outlineStyle=Xc,Al=void 0,Xc=void 0,Oe(window,"keydown",pi))}function El(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function xa(a){var h=a.getBoundingClientRect();return{x:h.width/a.offsetWidth||1,y:h.height/a.offsetHeight||1,boundingClientRect:h}}var wo={__proto__:null,TRANSFORM:Qs,TRANSITION:ya,TRANSITION_END:jc,get:Gc,getStyle:va,create:le,remove:ze,empty:di,toFront:Ln,toBack:Ir,hasClass:Zc,addClass:te,removeClass:$e,setClass:go,getClass:Sl,setOpacity:Fe,testProp:ba,setTransform:Cs,setPosition:Ve,getPosition:Ks,get disableTextSelection(){return yo},get enableTextSelection(){return es},disableImageDrag:Tl,enableImageDrag:wa,preventOutline:bo,restoreOutline:pi,getSizedParentNode:El,getScale:xa};function Ft(a,h,_,S){if(h&&typeof h=="object")for(var C in h)Ni(a,C,h[C],_);else{h=x(h);for(var N=0,Q=h.length;N<Q;N++)Ni(a,h[N],_,S)}return this}var Ii="_leaflet_events";function Oe(a,h,_,S){if(arguments.length===1)Fc(a),delete a[Ii];else if(h&&typeof h=="object")for(var C in h)Sa(a,C,h[C],_);else if(h=x(h),arguments.length===2)Fc(a,function(rt){return F(h,rt)!==-1});else for(var N=0,Q=h.length;N<Q;N++)Sa(a,h[N],_,S);return this}function Fc(a,h){for(var _ in a[Ii]){var S=_.split(/\d/)[0];(!h||h(S))&&Sa(a,S,null,null,_)}}var Nr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ni(a,h,_,S){var C=h+p(_)+(S?"_"+p(S):"");if(a[Ii]&&a[Ii][C])return this;var N=function(rt){return _.call(S||a,rt||window.event)},Q=N;!Dt.touchNative&&Dt.pointer&&h.indexOf("touch")===0?N=Dp(a,h,N):Dt.touch&&h==="dblclick"?N=Uh(a,N):"addEventListener"in a?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?a.addEventListener(Nr[h]||h,N,Dt.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(N=function(rt){rt=rt||window.event,Ls(a,rt)&&Q(rt)},a.addEventListener(Nr[h],N,!1)):a.addEventListener(h,Q,!1):a.attachEvent("on"+h,N),a[Ii]=a[Ii]||{},a[Ii][C]=N}function Sa(a,h,_,S,C){C=C||h+p(_)+(S?"_"+p(S):"");var N=a[Ii]&&a[Ii][C];if(!N)return this;!Dt.touchNative&&Dt.pointer&&h.indexOf("touch")===0?Ph(a,h,N):Dt.touch&&h==="dblclick"?Rr(a,N):"removeEventListener"in a?a.removeEventListener(Nr[h]||h,N,!1):a.detachEvent("on"+h,N),a[Ii][C]=null}function zi(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function ns(a){return Ni(a,"wheel",zi),this}function zr(a){return Ft(a,"mousedown touchstart dblclick contextmenu",zi),a._leaflet_disable_click=!0,this}function on(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Js(a){return on(a),zi(a),this}function Ta(a){if(a.composedPath)return a.composedPath();for(var h=[],_=a.target;_;)h.push(_),_=_.parentNode;return h}function Aa(a,h){if(!h)return new et(a.clientX,a.clientY);var _=xa(h),S=_.boundingClientRect;return new et((a.clientX-S.left)/_.x-h.clientLeft,(a.clientY-S.top)/_.y-h.clientTop)}var Hh=Dt.linux&&Dt.chrome?window.devicePixelRatio:Dt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Gn(a){return Dt.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Hh:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ls(a,h){var _=h.relatedTarget;if(!_)return!0;try{for(;_&&_!==a;)_=_.parentNode}catch{return!1}return _!==a}var Cl={__proto__:null,on:Ft,off:Oe,stopPropagation:zi,disableScrollPropagation:ns,disableClickPropagation:zr,preventDefault:on,stop:Js,getPropagationPath:Ta,getMousePosition:Aa,getWheelDelta:Gn,isExternalTarget:Ls,addListener:Ft,removeListener:Oe},xo=Y.extend({run:function(a,h,_,S){this.stop(),this._el=a,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(S||.5,.2),this._startPos=Ks(a),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(a){var h=+new Date-this._startTime,_=this._duration*1e3;h<_?this._runFrame(this._easeOut(h/_),a):(this._runFrame(1),this._complete())},_runFrame:function(a,h){var _=this._startPos.add(this._offset.multiplyBy(a));h&&_._round(),Ve(this._el,_),this.fire("step")},_complete:function(){tt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),fe=Y.extend({options:{crs:Nn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,h){h=A(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(mt(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ya&&Dt.any3d&&!Dt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ft(this._proxy,jc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,h,_){if(h=h===void 0?this._zoom:this._limitZoom(h),a=this._limitCenter(mt(a),h,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=r({animate:_.animate},_.zoom),_.pan=r({animate:_.animate,duration:_.duration},_.pan));var S=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,h,_.zoom):this._tryAnimatedPan(a,_.pan);if(S)return clearTimeout(this._sizeTimer),this}return this._resetView(a,h,_.pan&&_.pan.noMoveStart),this},setZoom:function(a,h){return this._loaded?this.setView(this.getCenter(),a,{zoom:h}):(this._zoom=a,this)},zoomIn:function(a,h){return a=a||(Dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,h)},zoomOut:function(a,h){return a=a||(Dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,h)},setZoomAround:function(a,h,_){var S=this.getZoomScale(h),C=this.getSize().divideBy(2),N=a instanceof et?a:this.latLngToContainerPoint(a),Q=N.subtract(C).multiplyBy(1-1/S),rt=this.containerPointToLatLng(C.add(Q));return this.setView(rt,h,{zoom:_})},_getBoundsCenterZoom:function(a,h){h=h||{},a=a.getBounds?a.getBounds():dt(a);var _=j(h.paddingTopLeft||h.padding||[0,0]),S=j(h.paddingBottomRight||h.padding||[0,0]),C=this.getBoundsZoom(a,!1,_.add(S));if(C=typeof h.maxZoom=="number"?Math.min(h.maxZoom,C):C,C===1/0)return{center:a.getCenter(),zoom:C};var N=S.subtract(_).divideBy(2),Q=this.project(a.getSouthWest(),C),rt=this.project(a.getNorthEast(),C),ut=this.unproject(Q.add(rt).divideBy(2).add(N),C);return{center:ut,zoom:C}},fitBounds:function(a,h){if(a=dt(a),!a.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(a,h);return this.setView(_.center,_.zoom,h)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,h){return this.setView(a,this._zoom,{pan:h})},panBy:function(a,h){if(a=j(a).round(),h=h||{},!a.x&&!a.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new xo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){te(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,_,h.duration||.25,h.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,h,_){if(_=_||{},_.animate===!1||!Dt.any3d)return this.setView(a,h,_);this._stop();var S=this.project(this.getCenter()),C=this.project(a),N=this.getSize(),Q=this._zoom;a=mt(a),h=h===void 0?Q:h;var rt=Math.max(N.x,N.y),ut=rt*this.getZoomScale(Q,h),bt=C.distanceTo(S)||1,kt=1.42,jt=kt*kt;function se(rn){var Os=rn?-1:1,Hr=rn?ut:rt,uu=ut*ut-rt*rt+Os*jt*jt*bt*bt,Va=2*Hr*jt*bt,qa=uu/Va,ar=Math.sqrt(qa*qa+1)-qa,Rs=ar<1e-9?-18:Math.log(ar);return Rs}function Mn(rn){return(Math.exp(rn)-Math.exp(-rn))/2}function an(rn){return(Math.exp(rn)+Math.exp(-rn))/2}function si(rn){return Mn(rn)/an(rn)}var Ae=se(0);function Ee(rn){return rt*(an(Ae)/an(Ae+kt*rn))}function ce(rn){return rt*(an(Ae)*si(Ae+kt*rn)-Mn(Ae))/jt}function rr(rn){return 1-Math.pow(1-rn,1.5)}var yi=Date.now(),Vl=(se(1)-Ae)/kt,or=_.duration?1e3*_.duration:1e3*Vl*.8;function cu(){var rn=(Date.now()-yi)/or,Os=rr(rn)*Vl;rn<=1?(this._flyToFrame=X(cu,this),this._move(this.unproject(S.add(C.subtract(S).multiplyBy(ce(Os)/bt)),Q),this.getScaleZoom(rt/Ee(Os),Q),{flyTo:!0})):this._move(a,h)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),cu.call(this),this},flyToBounds:function(a,h){var _=this._getBoundsCenterZoom(a,h);return this.flyTo(_.center,_.zoom,h)},setMaxBounds:function(a){return a=dt(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var h=this.options.minZoom;return this.options.minZoom=a,this._loaded&&h!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var h=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&h!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,h){this._enforcingBounds=!0;var _=this.getCenter(),S=this._limitCenter(_,this._zoom,dt(a));return _.equals(S)||this.panTo(S,h),this._enforcingBounds=!1,this},panInside:function(a,h){h=h||{};var _=j(h.paddingTopLeft||h.padding||[0,0]),S=j(h.paddingBottomRight||h.padding||[0,0]),C=this.project(this.getCenter()),N=this.project(a),Q=this.getPixelBounds(),rt=G([Q.min.add(_),Q.max.subtract(S)]),ut=rt.getSize();if(!rt.contains(N)){this._enforcingBounds=!0;var bt=N.subtract(rt.getCenter()),kt=rt.extend(N).getSize().subtract(ut);C.x+=bt.x<0?-kt.x:kt.x,C.y+=bt.y<0?-kt.y:kt.y,this.panTo(this.unproject(C),h),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=r({animate:!1,pan:!0},a===!0?{animate:!0}:a);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),S=h.divideBy(2).round(),C=_.divideBy(2).round(),N=S.subtract(C);return!N.x&&!N.y?this:(a.animate&&a.pan?this.panBy(N):(a.pan&&this._rawPanBy(N),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=r({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=u(this._handleGeolocationResponse,this),_=u(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,_,a):navigator.geolocation.getCurrentPosition(h,_,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var h=a.code,_=a.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var h=a.coords.latitude,_=a.coords.longitude,S=new gt(h,_),C=S.toBounds(a.coords.accuracy*2),N=this._locateOptions;if(N.setView){var Q=this.getBoundsZoom(C);this.setView(S,N.maxZoom?Math.min(Q,N.maxZoom):Q)}var rt={latlng:S,bounds:C,timestamp:a.timestamp};for(var ut in a.coords)typeof a.coords[ut]=="number"&&(rt[ut]=a.coords[ut]);this.fire("locationfound",rt)}},addHandler:function(a,h){if(!h)return this;var _=this[a]=new h(this);return this._handlers.push(_),this.options[a]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ze(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(tt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)ze(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,h){var _="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),S=le("div",_,h||this._mapPane);return a&&(this._panes[a]=S),S},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),h=this.unproject(a.getBottomLeft()),_=this.unproject(a.getTopRight());return new ot(h,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,h,_){a=dt(a),_=j(_||[0,0]);var S=this.getZoom()||0,C=this.getMinZoom(),N=this.getMaxZoom(),Q=a.getNorthWest(),rt=a.getSouthEast(),ut=this.getSize().subtract(_),bt=G(this.project(rt,S),this.project(Q,S)).getSize(),kt=Dt.any3d?this.options.zoomSnap:1,jt=ut.x/bt.x,se=ut.y/bt.y,Mn=h?Math.max(jt,se):Math.min(jt,se);return S=this.getScaleZoom(Mn,S),kt&&(S=Math.round(S/(kt/100))*(kt/100),S=h?Math.ceil(S/kt)*kt:Math.floor(S/kt)*kt),Math.max(C,Math.min(N,S))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new et(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,h){var _=this._getTopLeftPoint(a,h);return new O(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,h){var _=this.options.crs;return h=h===void 0?this._zoom:h,_.scale(a)/_.scale(h)},getScaleZoom:function(a,h){var _=this.options.crs;h=h===void 0?this._zoom:h;var S=_.zoom(a*_.scale(h));return isNaN(S)?1/0:S},project:function(a,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(mt(a),h)},unproject:function(a,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(j(a),h)},layerPointToLatLng:function(a){var h=j(a).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(a){var h=this.project(mt(a))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(mt(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(dt(a))},distance:function(a,h){return this.options.crs.distance(mt(a),mt(h))},containerPointToLayerPoint:function(a){return j(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return j(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var h=this.containerPointToLayerPoint(j(a));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(mt(a)))},mouseEventToContainerPoint:function(a){return Aa(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var h=this._container=Gc(a);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ft(h,"scroll",this._onScroll,this),this._containerId=p(h)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Dt.any3d,te(a,"leaflet-container"+(Dt.touch?" leaflet-touch":"")+(Dt.retina?" leaflet-retina":"")+(Dt.ielt9?" leaflet-oldie":"")+(Dt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=va(a,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ve(this._mapPane,new et(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(te(a.markerPane,"leaflet-zoom-hide"),te(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,h,_){Ve(this._mapPane,new et(0,0));var S=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var C=this._zoom!==h;this._moveStart(C,_)._move(a,h)._moveEnd(C),this.fire("viewreset"),S&&this.fire("load")},_moveStart:function(a,h){return a&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(a,h,_,S){h===void 0&&(h=this._zoom);var C=this._zoom!==h;return this._zoom=h,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),S?_&&_.pinch&&this.fire("zoom",_):((C||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return tt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Ve(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[p(this._container)]=this;var h=a?Oe:Ft;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Dt.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){tt(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,h){for(var _=[],S,C=h==="mouseout"||h==="mouseover",N=a.target||a.srcElement,Q=!1;N;){if(S=this._targets[p(N)],S&&(h==="click"||h==="preclick")&&this._draggableMoved(S)){Q=!0;break}if(S&&S.listens(h,!0)&&(C&&!Ls(N,a)||(_.push(S),C))||N===this._container)break;N=N.parentNode}return!_.length&&!Q&&!C&&this.listens(h,!0)&&(_=[this]),_},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var h=a.target||a.srcElement;if(!(!this._loaded||h._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(h))){var _=a.type;_==="mousedown"&&bo(h),this._fireDOMEvent(a,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,h,_){if(a.type==="click"){var S=r({},a);S.type="preclick",this._fireDOMEvent(S,S.type,_)}var C=this._findEventTargets(a,h);if(_){for(var N=[],Q=0;Q<_.length;Q++)_[Q].listens(h,!0)&&N.push(_[Q]);C=N.concat(C)}if(C.length){h==="contextmenu"&&on(a);var rt=C[0],ut={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var bt=rt.getLatLng&&(!rt._radius||rt._radius<=10);ut.containerPoint=bt?this.latLngToContainerPoint(rt.getLatLng()):this.mouseEventToContainerPoint(a),ut.layerPoint=this.containerPointToLayerPoint(ut.containerPoint),ut.latlng=bt?rt.getLatLng():this.layerPointToLatLng(ut.layerPoint)}for(Q=0;Q<C.length;Q++)if(C[Q].fire(h,ut,!0),ut.originalEvent._stopped||C[Q].options.bubblingMouseEvents===!1&&F(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,h=this._handlers.length;a<h;a++)this._handlers[a].disable()},whenReady:function(a,h){return this._loaded?a.call(h||this,{target:this}):this.on("load",a,h),this},_getMapPanePos:function(){return Ks(this._mapPane)||new et(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,h){var _=a&&h!==void 0?this._getNewPixelOrigin(a,h):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,h){var _=this.getSize()._divideBy(2);return this.project(a,h)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,h,_){var S=this._getNewPixelOrigin(_,h);return this.project(a,h)._subtract(S)},_latLngBoundsToNewLayerBounds:function(a,h,_){var S=this._getNewPixelOrigin(_,h);return G([this.project(a.getSouthWest(),h)._subtract(S),this.project(a.getNorthWest(),h)._subtract(S),this.project(a.getSouthEast(),h)._subtract(S),this.project(a.getNorthEast(),h)._subtract(S)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,h,_){if(!_)return a;var S=this.project(a,h),C=this.getSize().divideBy(2),N=new O(S.subtract(C),S.add(C)),Q=this._getBoundsOffset(N,_,h);return Math.abs(Q.x)<=1&&Math.abs(Q.y)<=1?a:this.unproject(S.add(Q),h)},_limitOffset:function(a,h){if(!h)return a;var _=this.getPixelBounds(),S=new O(_.min.add(a),_.max.add(a));return a.add(this._getBoundsOffset(S,h))},_getBoundsOffset:function(a,h,_){var S=G(this.project(h.getNorthEast(),_),this.project(h.getSouthWest(),_)),C=S.min.subtract(a.min),N=S.max.subtract(a.max),Q=this._rebound(C.x,-N.x),rt=this._rebound(C.y,-N.y);return new et(Q,rt)},_rebound:function(a,h){return a+h>0?Math.round(a-h)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(h))},_limitZoom:function(a){var h=this.getMinZoom(),_=this.getMaxZoom(),S=Dt.any3d?this.options.zoomSnap:1;return S&&(a=Math.round(a/S)*S),Math.max(h,Math.min(_,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,h){var _=this._getCenterOffset(a)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,h),!0)},_createAnimProxy:function(){var a=this._proxy=le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(h){var _=Qs,S=this._proxy.style[_];Cs(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),S===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ze(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),h=this.getZoom();Cs(this._proxy,this.project(a,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,h,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var S=this.getZoomScale(h),C=this._getCenterOffset(a)._divideBy(1-1/S);return _.animate!==!0&&!this.getSize().contains(C)?!1:(X(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(a,h,!0)},this),!0)},_animateZoom:function(a,h,_,S){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=h,te(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:h,noUpdate:S}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qc(a,h){return new fe(a,h)}var ii=J.extend({options:{position:"topright"},initialize:function(a){A(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var h=this._map;return h&&h.removeControl(this),this.options.position=a,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var h=this._container=this.onAdd(a),_=this.getPosition(),S=a._controlCorners[_];return te(h,"leaflet-control"),_.indexOf("bottom")!==-1?S.insertBefore(h,S.firstChild):S.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ze(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Ms=function(a){return new ii(a)};fe.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},h="leaflet-",_=this._controlContainer=le("div",h+"control-container",this._container);function S(C,N){var Q=h+C+" "+h+N;a[C+N]=le("div",Q,_)}S("top","left"),S("top","right"),S("bottom","left"),S("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)ze(this._controlCorners[a]);ze(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ea=ii.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,h,_,S){return _<S?-1:S<_?1:0}},initialize:function(a,h,_){A(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var S in a)this._addLayer(a[S],S);for(S in h)this._addLayer(h[S],S,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ii.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,h){return this._addLayer(a,h),this._map?this._update():this},addOverlay:function(a,h){return this._addLayer(a,h,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var h=this._getLayer(p(a));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){te(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(te(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):$e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",h=this._container=le("div",a),_=this.options.collapsed;h.setAttribute("aria-haspopup",!0),zr(h),ns(h);var S=this._section=le("section",a+"-list");_&&(this._map.on("click",this.collapse,this),Ft(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=le("a",a+"-toggle",h);C.href="#",C.title="Layers",C.setAttribute("role","button"),Ft(C,{keydown:function(N){N.keyCode===13&&this._expandSafely()},click:function(N){on(N),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=le("div",a+"-base",S),this._separator=le("div",a+"-separator",S),this._overlaysList=le("div",a+"-overlays",S),h.appendChild(S)},_getLayer:function(a){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&p(this._layers[h].layer)===a)return this._layers[h]},_addLayer:function(a,h,_){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:h,overlay:_}),this.options.sortLayers&&this._layers.sort(u(function(S,C){return this.options.sortFunction(S.layer,C.layer,S.name,C.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;di(this._baseLayersList),di(this._overlaysList),this._layerControlInputs=[];var a,h,_,S,C=0;for(_=0;_<this._layers.length;_++)S=this._layers[_],this._addItem(S),h=h||S.overlay,a=a||!S.overlay,C+=S.overlay?0:1;return this.options.hideSingleBase&&(a=a&&C>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=h&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var h=this._getLayer(p(a.target)),_=h.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;_&&this._map.fire(_,h)},_createRadioElement:function(a,h){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(h?' checked="checked"':"")+"/>",S=document.createElement("div");return S.innerHTML=_,S.firstChild},_addItem:function(a){var h=document.createElement("label"),_=this._map.hasLayer(a.layer),S;a.overlay?(S=document.createElement("input"),S.type="checkbox",S.className="leaflet-control-layers-selector",S.defaultChecked=_):S=this._createRadioElement("leaflet-base-layers_"+p(this),_),this._layerControlInputs.push(S),S.layerId=p(a.layer),Ft(S,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+a.name;var N=document.createElement("span");h.appendChild(N),N.appendChild(S),N.appendChild(C);var Q=a.overlay?this._overlaysList:this._baseLayersList;return Q.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,h,_,S=[],C=[];this._handlingClick=!0;for(var N=a.length-1;N>=0;N--)h=a[N],_=this._getLayer(h.layerId).layer,h.checked?S.push(_):h.checked||C.push(_);for(N=0;N<C.length;N++)this._map.hasLayer(C[N])&&this._map.removeLayer(C[N]);for(N=0;N<S.length;N++)this._map.hasLayer(S[N])||this._map.addLayer(S[N]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,h,_,S=this._map.getZoom(),C=a.length-1;C>=0;C--)h=a[C],_=this._getLayer(h.layerId).layer,h.disabled=_.options.minZoom!==void 0&&S<_.options.minZoom||_.options.maxZoom!==void 0&&S>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Ft(a,"click",on),this.expand();var h=this;setTimeout(function(){Oe(a,"click",on),h._preventClick=!1})}}),Vh=function(a,h,_){return new Ea(a,h,_)},Kc=ii.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var h="leaflet-control-zoom",_=le("div",h+" leaflet-bar"),S=this.options;return this._zoomInButton=this._createButton(S.zoomInText,S.zoomInTitle,h+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(S.zoomOutText,S.zoomOutTitle,h+"-out",_,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,h,_,S,C){var N=le("a",_,S);return N.innerHTML=a,N.href="#",N.title=h,N.setAttribute("role","button"),N.setAttribute("aria-label",h),zr(N),Ft(N,"click",Js),Ft(N,"click",C,this),Ft(N,"click",this._refocusOnMap,this),N},_updateDisabled:function(){var a=this._map,h="leaflet-disabled";$e(this._zoomInButton,h),$e(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(te(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(te(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});fe.mergeOptions({zoomControl:!0}),fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Kc,this.addControl(this.zoomControl))});var Op=function(a){return new Kc(a)},qh=ii.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var h="leaflet-control-scale",_=le("div",h),S=this.options;return this._addScales(S,h+"-line",_),a.on(S.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),_},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,h,_){a.metric&&(this._mScale=le("div",h,_)),a.imperial&&(this._iScale=le("div",h,_))},_update:function(){var a=this._map,h=a.getSize().y/2,_=a.distance(a.containerPointToLatLng([0,h]),a.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(_)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var h=this._getRoundNum(a),_=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,_,h/a)},_updateImperial:function(a){var h=a*3.2808399,_,S,C;h>5280?(_=h/5280,S=this._getRoundNum(_),this._updateScale(this._iScale,S+" mi",S/_)):(C=this._getRoundNum(h),this._updateScale(this._iScale,C+" ft",C/h))},_updateScale:function(a,h,_){a.style.width=Math.round(this.options.maxWidth*_)+"px",a.innerHTML=h},_getRoundNum:function(a){var h=Math.pow(10,(Math.floor(a)+"").length-1),_=a/h;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,h*_}}),Jc=function(a){return new qh(a)},Rp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',$c=ii.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Dt.inlineSvg?Rp+" ":"")+"Leaflet</a>"},initialize:function(a){A(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=le("div","leaflet-control-attribution"),zr(this._container);for(var h in a._layers)a._layers[h].getAttribution&&this.addAttribution(a._layers[h].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var h in this._attributions)this._attributions[h]&&a.push(h);var _=[];this.options.prefix&&_.push(this.options.prefix),a.length&&_.push(a.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});fe.mergeOptions({attributionControl:!0}),fe.addInitHook(function(){this.options.attributionControl&&new $c().addTo(this)});var Ip=function(a){return new $c(a)};ii.Layers=Ea,ii.Zoom=Kc,ii.Scale=qh,ii.Attribution=$c,Ms.layers=Vh,Ms.zoom=Op,Ms.scale=Jc,Ms.attribution=Ip;var is=J.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});is.addTo=function(a,h){return a.addHandler(h,this),this};var Np={Events:U},tu=Dt.touch?"touchstart mousedown":"mousedown",$s=Y.extend({options:{clickTolerance:3},initialize:function(a,h,_,S){A(this,S),this._element=a,this._dragStartTarget=h||a,this._preventOutline=_},enable:function(){this._enabled||(Ft(this._dragStartTarget,tu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&($s._dragging===this&&this.finishDrag(!0),Oe(this._dragStartTarget,tu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Zc(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){$s._dragging===this&&this.finishDrag();return}if(!($s._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&($s._dragging=this,this._preventOutline&&bo(this._element),Tl(),yo(),!this._moving)){this.fire("down");var h=a.touches?a.touches[0]:a,_=El(this._element);this._startPoint=new et(h.clientX,h.clientY),this._startPos=Ks(this._element),this._parentScale=xa(_);var S=a.type==="mousedown";Ft(document,S?"mousemove":"touchmove",this._onMove,this),Ft(document,S?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var h=a.touches&&a.touches.length===1?a.touches[0]:a,_=new et(h.clientX,h.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,on(a),this._moved||(this.fire("dragstart"),this._moved=!0,te(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),te(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Ve(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){$e(document.body,"leaflet-dragging"),this._lastTarget&&($e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Oe(document,"mousemove touchmove",this._onMove,this),Oe(document,"mouseup touchend touchcancel",this._onUp,this),wa(),es();var h=this._moved&&this._moving;this._moving=!1,$s._dragging=!1,h&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function jh(a,h,_){var S,C=[1,4,2,8],N,Q,rt,ut,bt,kt,jt,se;for(N=0,kt=a.length;N<kt;N++)a[N]._code=Pr(a[N],h);for(rt=0;rt<4;rt++){for(jt=C[rt],S=[],N=0,kt=a.length,Q=kt-1;N<kt;Q=N++)ut=a[N],bt=a[Q],ut._code&jt?bt._code&jt||(se=Ll(bt,ut,jt,h,_),se._code=Pr(se,h),S.push(se)):(bt._code&jt&&(se=Ll(bt,ut,jt,h,_),se._code=Pr(se,h),S.push(se)),S.push(ut));a=S}return a}function Gh(a,h){var _,S,C,N,Q,rt,ut,bt,kt;if(!a||a.length===0)throw new Error("latlngs not passed");mi(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var jt=mt([0,0]),se=dt(a),Mn=se.getNorthWest().distanceTo(se.getSouthWest())*se.getNorthEast().distanceTo(se.getNorthWest());Mn<1700&&(jt=eu(a));var an=a.length,si=[];for(_=0;_<an;_++){var Ae=mt(a[_]);si.push(h.project(mt([Ae.lat-jt.lat,Ae.lng-jt.lng])))}for(rt=ut=bt=0,_=0,S=an-1;_<an;S=_++)C=si[_],N=si[S],Q=C.y*N.x-N.y*C.x,ut+=(C.x+N.x)*Q,bt+=(C.y+N.y)*Q,rt+=Q*3;rt===0?kt=si[0]:kt=[ut/rt,bt/rt];var Ee=h.unproject(j(kt));return mt([Ee.lat+jt.lat,Ee.lng+jt.lng])}function eu(a){for(var h=0,_=0,S=0,C=0;C<a.length;C++){var N=mt(a[C]);h+=N.lat,_+=N.lng,S++}return mt([h/S,_/S])}var nu={__proto__:null,clipPolygon:jh,polygonCenter:Gh,centroid:eu};function Zh(a,h){if(!h||!a.length)return a.slice();var _=h*h;return a=Pp(a,_),a=Yh(a,_),a}function Wh(a,h,_){return Math.sqrt(Ca(a,h,_,!0))}function zp(a,h,_){return Ca(a,h,_)}function Yh(a,h){var _=a.length,S=typeof Uint8Array<"u"?Uint8Array:Array,C=new S(_);C[0]=C[_-1]=1,iu(a,C,h,0,_-1);var N,Q=[];for(N=0;N<_;N++)C[N]&&Q.push(a[N]);return Q}function iu(a,h,_,S,C){var N=0,Q,rt,ut;for(rt=S+1;rt<=C-1;rt++)ut=Ca(a[rt],a[S],a[C],!0),ut>N&&(Q=rt,N=ut);N>_&&(h[Q]=1,iu(a,h,_,S,Q),iu(a,h,_,Q,C))}function Pp(a,h){for(var _=[a[0]],S=1,C=0,N=a.length;S<N;S++)Bp(a[S],a[C])>h&&(_.push(a[S]),C=S);return C<N-1&&_.push(a[N-1]),_}var Xh;function Fh(a,h,_,S,C){var N=S?Xh:Pr(a,_),Q=Pr(h,_),rt,ut,bt;for(Xh=Q;;){if(!(N|Q))return[a,h];if(N&Q)return!1;rt=N||Q,ut=Ll(a,h,rt,_,C),bt=Pr(ut,_),rt===N?(a=ut,N=bt):(h=ut,Q=bt)}}function Ll(a,h,_,S,C){var N=h.x-a.x,Q=h.y-a.y,rt=S.min,ut=S.max,bt,kt;return _&8?(bt=a.x+N*(ut.y-a.y)/Q,kt=ut.y):_&4?(bt=a.x+N*(rt.y-a.y)/Q,kt=rt.y):_&2?(bt=ut.x,kt=a.y+Q*(ut.x-a.x)/N):_&1&&(bt=rt.x,kt=a.y+Q*(rt.x-a.x)/N),new et(bt,kt,C)}function Pr(a,h){var _=0;return a.x<h.min.x?_|=1:a.x>h.max.x&&(_|=2),a.y<h.min.y?_|=4:a.y>h.max.y&&(_|=8),_}function Bp(a,h){var _=h.x-a.x,S=h.y-a.y;return _*_+S*S}function Ca(a,h,_,S){var C=h.x,N=h.y,Q=_.x-C,rt=_.y-N,ut=Q*Q+rt*rt,bt;return ut>0&&(bt=((a.x-C)*Q+(a.y-N)*rt)/ut,bt>1?(C=_.x,N=_.y):bt>0&&(C+=Q*bt,N+=rt*bt)),Q=a.x-C,rt=a.y-N,S?Q*Q+rt*rt:new et(C,N)}function mi(a){return!D(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function Ml(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mi(a)}function So(a,h){var _,S,C,N,Q,rt,ut,bt;if(!a||a.length===0)throw new Error("latlngs not passed");mi(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var kt=mt([0,0]),jt=dt(a),se=jt.getNorthWest().distanceTo(jt.getSouthWest())*jt.getNorthEast().distanceTo(jt.getNorthWest());se<1700&&(kt=eu(a));var Mn=a.length,an=[];for(_=0;_<Mn;_++){var si=mt(a[_]);an.push(h.project(mt([si.lat-kt.lat,si.lng-kt.lng])))}for(_=0,S=0;_<Mn-1;_++)S+=an[_].distanceTo(an[_+1])/2;if(S===0)bt=an[0];else for(_=0,N=0;_<Mn-1;_++)if(Q=an[_],rt=an[_+1],C=Q.distanceTo(rt),N+=C,N>S){ut=(N-S)/C,bt=[rt.x-ut*(rt.x-Q.x),rt.y-ut*(rt.y-Q.y)];break}var Ae=h.unproject(j(bt));return mt([Ae.lat+kt.lat,Ae.lng+kt.lng])}var Up={__proto__:null,simplify:Zh,pointToSegmentDistance:Wh,closestPointOnSegment:zp,clipSegment:Fh,_getEdgeIntersection:Ll,_getBitCode:Pr,_sqClosestPointOnSegment:Ca,isFlat:mi,_flat:Ml,polylineCenter:So},kl={project:function(a){return new et(a.lng,a.lat)},unproject:function(a){return new gt(a.y,a.x)},bounds:new O([-180,-90],[180,90])},Dl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new O([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var h=Math.PI/180,_=this.R,S=a.lat*h,C=this.R_MINOR/_,N=Math.sqrt(1-C*C),Q=N*Math.sin(S),rt=Math.tan(Math.PI/4-S/2)/Math.pow((1-Q)/(1+Q),N/2);return S=-_*Math.log(Math.max(rt,1e-10)),new et(a.lng*h*_,S)},unproject:function(a){for(var h=180/Math.PI,_=this.R,S=this.R_MINOR/_,C=Math.sqrt(1-S*S),N=Math.exp(-a.y/_),Q=Math.PI/2-2*Math.atan(N),rt=0,ut=.1,bt;rt<15&&Math.abs(ut)>1e-7;rt++)bt=C*Math.sin(Q),bt=Math.pow((1-bt)/(1+bt),C/2),ut=Math.PI/2-2*Math.atan(N*bt)-Q,Q+=ut;return new gt(Q*h,a.x*h/_)}},Qh={__proto__:null,LonLat:kl,Mercator:Dl,SphericalMercator:Se},Kh=r({},Et,{code:"EPSG:3395",projection:Dl,transformation:(function(){var a=.5/(Math.PI*Dl.R);return Xe(a,.5,-a,.5)})()}),su=r({},Et,{code:"EPSG:4326",projection:kl,transformation:Xe(1/180,1,-1/180,.5)}),To=r({},Mt,{projection:kl,transformation:Xe(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,h){var _=h.lng-a.lng,S=h.lat-a.lat;return Math.sqrt(_*_+S*S)},infinite:!0});Mt.Earth=Et,Mt.EPSG3395=Kh,Mt.EPSG3857=Nn,Mt.EPSG900913=hi,Mt.EPSG4326=su,Mt.Simple=To;var Pi=Y.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[p(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[p(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var h=a.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var _=this.getEvents();h.on(_,this),this.once("remove",function(){h.off(_,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});fe.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var h=p(a);return this._layers[h]?this:(this._layers[h]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var h=p(a);return this._layers[h]?(this._loaded&&a.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return p(a)in this._layers},eachLayer:function(a,h){for(var _ in this._layers)a.call(h,this._layers[_]);return this},_addLayers:function(a){a=a?D(a)?a:[a]:[];for(var h=0,_=a.length;h<_;h++)this.addLayer(a[h])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[p(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var h=p(a);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,h=-1/0,_=this._getZoomSpan();for(var S in this._zoomBoundLayers){var C=this._zoomBoundLayers[S].options;a=C.minZoom===void 0?a:Math.min(a,C.minZoom),h=C.maxZoom===void 0?h:Math.max(h,C.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=a===1/0?void 0:a,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ao=Pi.extend({initialize:function(a,h){A(this,h),this._layers={};var _,S;if(a)for(_=0,S=a.length;_<S;_++)this.addLayer(a[_])},addLayer:function(a){var h=this.getLayerId(a);return this._layers[h]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var h=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(a){var h=typeof a=="number"?a:this.getLayerId(a);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var h=Array.prototype.slice.call(arguments,1),_,S;for(_ in this._layers)S=this._layers[_],S[a]&&S[a].apply(S,h);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,h){for(var _ in this._layers)a.call(h,this._layers[_]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return p(a)}}),Hp=function(a,h){return new Ao(a,h)},ss=Ao.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Ao.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Ao.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new ot;for(var h in this._layers){var _=this._layers[h];a.extend(_.getBounds?_.getBounds():_.getLatLng())}return a}}),Jh=function(a,h){return new ss(a,h)},rs=J.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){A(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,h){var _=this._getIconUrl(a);if(!_){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var S=this._createImg(_,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(S,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),S},_setIconStyles:function(a,h){var _=this.options,S=_[h+"Size"];typeof S=="number"&&(S=[S,S]);var C=j(S),N=j(h==="shadow"&&_.shadowAnchor||_.iconAnchor||C&&C.divideBy(2,!0));a.className="leaflet-marker-"+h+" "+(_.className||""),N&&(a.style.marginLeft=-N.x+"px",a.style.marginTop=-N.y+"px"),C&&(a.style.width=C.x+"px",a.style.height=C.y+"px")},_createImg:function(a,h){return h=h||document.createElement("img"),h.src=a,h},_getIconUrl:function(a){return Dt.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function La(a){return new rs(a)}var Ma=rs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Ma.imagePath!="string"&&(Ma.imagePath=this._detectIconPath()),(this.options.imagePath||Ma.imagePath)+rs.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var h=function(_,S,C){var N=S.exec(_);return N&&N[C]};return a=h(a,/^url\((['"])?(.+)\1\)$/,2),a&&h(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=le("div","leaflet-default-icon-path",document.body),h=va(a,"background-image")||va(a,"backgroundImage");if(document.body.removeChild(a),h=this._stripUrl(h),h)return h;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),ka=is.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new $s(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),te(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var h=this._marker,_=h._map,S=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,N=Ks(h._icon),Q=_.getPixelBounds(),rt=_.getPixelOrigin(),ut=G(Q.min._subtract(rt).add(C),Q.max._subtract(rt).subtract(C));if(!ut.contains(N)){var bt=j((Math.max(ut.max.x,N.x)-ut.max.x)/(Q.max.x-ut.max.x)-(Math.min(ut.min.x,N.x)-ut.min.x)/(Q.min.x-ut.min.x),(Math.max(ut.max.y,N.y)-ut.max.y)/(Q.max.y-ut.max.y)-(Math.min(ut.min.y,N.y)-ut.min.y)/(Q.min.y-ut.min.y)).multiplyBy(S);_.panBy(bt,{animate:!1}),this._draggable._newPos._add(bt),this._draggable._startPos._add(bt),Ve(h._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=X(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(tt(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,a)))},_onDrag:function(a){var h=this._marker,_=h._shadow,S=Ks(h._icon),C=h._map.layerPointToLatLng(S);_&&Ve(_,S),h._latlng=C,a.latlng=C,a.oldLatLng=this._oldLatLng,h.fire("move",a).fire("drag",a)},_onDragEnd:function(a){tt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Da=Pi.extend({options:{icon:new Ma,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,h){A(this,h),this._latlng=mt(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var h=this._latlng;return this._latlng=mt(a),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=a.icon.createIcon(this._icon),S=!1;_!==this._icon&&(this._icon&&this._removeIcon(),S=!0,a.title&&(_.title=a.title),_.tagName==="IMG"&&(_.alt=a.alt||"")),te(_,h),a.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ft(_,"focus",this._panOnFocus,this);var C=a.icon.createShadow(this._shadow),N=!1;C!==this._shadow&&(this._removeShadow(),N=!0),C&&(te(C,h),C.alt=""),this._shadow=C,a.opacity<1&&this._updateOpacity(),S&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&N&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Oe(this._icon,"focus",this._panOnFocus,this),ze(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ze(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Ve(this._icon,a),this._shadow&&Ve(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(te(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ka)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ka(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Fe(this._icon,a),this._shadow&&Fe(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var h=this.options.icon.options,_=h.iconSize?j(h.iconSize):j(0,0),S=h.iconAnchor?j(h.iconAnchor):j(0,0);a.panInside(this._latlng,{paddingTopLeft:S,paddingBottomRight:_.subtract(S)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $h(a,h){return new Da(a,h)}var os=Pi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return A(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Eo=os.extend({options:{fill:!0,radius:10},initialize:function(a,h){A(this,h),this._latlng=mt(a),this._radius=this.options.radius},setLatLng:function(a){var h=this._latlng;return this._latlng=mt(a),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var h=a&&a.radius||this._radius;return os.prototype.setStyle.call(this,a),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,h=this._radiusY||a,_=this._clickTolerance(),S=[a+_,h+_];this._pxBounds=new O(this._point.subtract(S),this._point.add(S))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function tf(a,h){return new Eo(a,h)}var Ol=Eo.extend({initialize:function(a,h,_){if(typeof h=="number"&&(h=r({},_,{radius:h})),A(this,h),this._latlng=mt(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new ot(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:os.prototype.setStyle,_project:function(){var a=this._latlng.lng,h=this._latlng.lat,_=this._map,S=_.options.crs;if(S.distance===Et.distance){var C=Math.PI/180,N=this._mRadius/Et.R/C,Q=_.project([h+N,a]),rt=_.project([h-N,a]),ut=Q.add(rt).divideBy(2),bt=_.unproject(ut).lat,kt=Math.acos((Math.cos(N*C)-Math.sin(h*C)*Math.sin(bt*C))/(Math.cos(h*C)*Math.cos(bt*C)))/C;(isNaN(kt)||kt===0)&&(kt=N/Math.cos(Math.PI/180*h)),this._point=ut.subtract(_.getPixelOrigin()),this._radius=isNaN(kt)?0:ut.x-_.project([bt,a-kt]).x,this._radiusY=ut.y-Q.y}else{var jt=S.unproject(S.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(jt).x}this._updateBounds()}});function ef(a,h,_){return new Ol(a,h,_)}var ks=os.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,h){A(this,h),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var h=1/0,_=null,S=Ca,C,N,Q=0,rt=this._parts.length;Q<rt;Q++)for(var ut=this._parts[Q],bt=1,kt=ut.length;bt<kt;bt++){C=ut[bt-1],N=ut[bt];var jt=S(a,C,N,!0);jt<h&&(h=jt,_=S(a,C,N))}return _&&(_.distance=Math.sqrt(h)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return So(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,h){return h=h||this._defaultShape(),a=mt(a),h.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new ot,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return mi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var h=[],_=mi(a),S=0,C=a.length;S<C;S++)_?(h[S]=mt(a[S]),this._bounds.extend(h[S])):h[S]=this._convertLatLngs(a[S]);return h},_project:function(){var a=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),h=new et(a,a);this._rawPxBounds&&(this._pxBounds=new O([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(a,h,_){var S=a[0]instanceof gt,C=a.length,N,Q;if(S){for(Q=[],N=0;N<C;N++)Q[N]=this._map.latLngToLayerPoint(a[N]),_.extend(Q[N]);h.push(Q)}else for(N=0;N<C;N++)this._projectLatlngs(a[N],h,_)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,_,S,C,N,Q,rt,ut;for(_=0,C=0,N=this._rings.length;_<N;_++)for(ut=this._rings[_],S=0,Q=ut.length;S<Q-1;S++)rt=Fh(ut[S],ut[S+1],a,S,!0),rt&&(h[C]=h[C]||[],h[C].push(rt[0]),(rt[1]!==ut[S+1]||S===Q-2)&&(h[C].push(rt[1]),C++))}},_simplifyPoints:function(){for(var a=this._parts,h=this.options.smoothFactor,_=0,S=a.length;_<S;_++)a[_]=Zh(a[_],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,h){var _,S,C,N,Q,rt,ut=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(_=0,N=this._parts.length;_<N;_++)for(rt=this._parts[_],S=0,Q=rt.length,C=Q-1;S<Q;C=S++)if(!(!h&&S===0)&&Wh(a,rt[C],rt[S])<=ut)return!0;return!1}});function Vp(a,h){return new ks(a,h)}ks._flat=Ml;var Co=ks.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var h=ks.prototype._convertLatLngs.call(this,a),_=h.length;return _>=2&&h[0]instanceof gt&&h[0].equals(h[_-1])&&h.pop(),h},_setLatLngs:function(a){ks.prototype._setLatLngs.call(this,a),mi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,h=this.options.weight,_=new et(h,h);if(a=new O(a.min.subtract(_),a.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var S=0,C=this._rings.length,N;S<C;S++)N=jh(this._rings[S],a,!0),N.length&&this._parts.push(N)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var h=!1,_,S,C,N,Q,rt,ut,bt;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(N=0,ut=this._parts.length;N<ut;N++)for(_=this._parts[N],Q=0,bt=_.length,rt=bt-1;Q<bt;rt=Q++)S=_[Q],C=_[rt],S.y>a.y!=C.y>a.y&&a.x<(C.x-S.x)*(a.y-S.y)/(C.y-S.y)+S.x&&(h=!h);return h||ks.prototype._containsPoint.call(this,a,!0)}});function qp(a,h){return new Co(a,h)}var Ds=ss.extend({initialize:function(a,h){A(this,h),this._layers={},a&&this.addData(a)},addData:function(a){var h=D(a)?a:a.features,_,S,C;if(h){for(_=0,S=h.length;_<S;_++)C=h[_],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var N=this.options;if(N.filter&&!N.filter(a))return this;var Q=zn(a,N);return Q?(Q.feature=Nl(a),Q.defaultOptions=Q.options,this.resetStyle(Q),N.onEachFeature&&N.onEachFeature(a,Q),this.addLayer(Q)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=r({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(h){this._setLayerStyle(h,a)},this)},_setLayerStyle:function(a,h){a.setStyle&&(typeof h=="function"&&(h=h(a.feature)),a.setStyle(h))}});function zn(a,h){var _=a.type==="Feature"?a.geometry:a,S=_?_.coordinates:null,C=[],N=h&&h.pointToLayer,Q=h&&h.coordsToLatLng||Rl,rt,ut,bt,kt;if(!S&&!_)return null;switch(_.type){case"Point":return rt=Q(S),Lo(N,a,rt,h);case"MultiPoint":for(bt=0,kt=S.length;bt<kt;bt++)rt=Q(S[bt]),C.push(Lo(N,a,rt,h));return new ss(C);case"LineString":case"MultiLineString":return ut=Oa(S,_.type==="LineString"?0:1,Q),new ks(ut,h);case"Polygon":case"MultiPolygon":return ut=Oa(S,_.type==="Polygon"?1:2,Q),new Co(ut,h);case"GeometryCollection":for(bt=0,kt=_.geometries.length;bt<kt;bt++){var jt=zn({geometry:_.geometries[bt],type:"Feature",properties:a.properties},h);jt&&C.push(jt)}return new ss(C);case"FeatureCollection":for(bt=0,kt=_.features.length;bt<kt;bt++){var se=zn(_.features[bt],h);se&&C.push(se)}return new ss(C);default:throw new Error("Invalid GeoJSON object.")}}function Lo(a,h,_,S){return a?a(h,_):new Da(_,S&&S.markersInheritOptions&&S)}function Rl(a){return new gt(a[1],a[0],a[2])}function Oa(a,h,_){for(var S=[],C=0,N=a.length,Q;C<N;C++)Q=h?Oa(a[C],h-1,_):(_||Rl)(a[C]),S.push(Q);return S}function Il(a,h){return a=mt(a),a.alt!==void 0?[w(a.lng,h),w(a.lat,h),w(a.alt,h)]:[w(a.lng,h),w(a.lat,h)]}function Ra(a,h,_,S){for(var C=[],N=0,Q=a.length;N<Q;N++)C.push(h?Ra(a[N],mi(a[N])?0:h-1,_,S):Il(a[N],S));return!h&&_&&C.length>0&&C.push(C[0].slice()),C}function tr(a,h){return a.feature?r({},a.feature,{geometry:h}):Nl(h)}function Nl(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var er={toGeoJSON:function(a){return tr(this,{type:"Point",coordinates:Il(this.getLatLng(),a)})}};Da.include(er),Ol.include(er),Eo.include(er),ks.include({toGeoJSON:function(a){var h=!mi(this._latlngs),_=Ra(this._latlngs,h?1:0,!1,a);return tr(this,{type:(h?"Multi":"")+"LineString",coordinates:_})}}),Co.include({toGeoJSON:function(a){var h=!mi(this._latlngs),_=h&&!mi(this._latlngs[0]),S=Ra(this._latlngs,_?2:h?1:0,!0,a);return h||(S=[S]),tr(this,{type:(_?"Multi":"")+"Polygon",coordinates:S})}}),Ao.include({toMultiPoint:function(a){var h=[];return this.eachLayer(function(_){h.push(_.toGeoJSON(a).geometry.coordinates)}),tr(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(a){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(a);var _=h==="GeometryCollection",S=[];return this.eachLayer(function(C){if(C.toGeoJSON){var N=C.toGeoJSON(a);if(_)S.push(N.geometry);else{var Q=Nl(N);Q.type==="FeatureCollection"?S.push.apply(S,Q.features):S.push(Q)}}}),_?tr(this,{geometries:S,type:"GeometryCollection"}):{type:"FeatureCollection",features:S}}});function zl(a,h){return new Ds(a,h)}var Ia=zl,Mo=Pi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,h,_){this._url=a,this._bounds=dt(h),A(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(te(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ze(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Ln(this._image),this},bringToBack:function(){return this._map&&Ir(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=dt(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",h=this._image=a?this._url:le("img");if(te(h,"leaflet-image-layer"),this._zoomAnimated&&te(h,"leaflet-zoom-animated"),this.options.className&&te(h,this.options.className),h.onselectstart=y,h.onmousemove=y,h.onload=u(this.fire,this,"load"),h.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(a){var h=this._map.getZoomScale(a.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Cs(this._image,_,h)},_reset:function(){var a=this._image,h=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=h.getSize();Ve(a,h.min),a.style.width=_.x+"px",a.style.height=_.y+"px"},_updateOpacity:function(){Fe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),nf=function(a,h,_){return new Mo(a,h,_)},nr=Mo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",h=this._image=a?this._url:le("video");if(te(h,"leaflet-image-layer"),this._zoomAnimated&&te(h,"leaflet-zoom-animated"),this.options.className&&te(h,this.options.className),h.onselectstart=y,h.onmousemove=y,h.onloadeddata=u(this.fire,this,"load"),a){for(var _=h.getElementsByTagName("source"),S=[],C=0;C<_.length;C++)S.push(_[C].src);this._url=_.length>0?S:[h.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var N=0;N<this._url.length;N++){var Q=le("source");Q.src=this._url[N],h.appendChild(Q)}}});function ko(a,h,_){return new nr(a,h,_)}var Pl=Mo.extend({_initImage:function(){var a=this._image=this._url;te(a,"leaflet-image-layer"),this._zoomAnimated&&te(a,"leaflet-zoom-animated"),this.options.className&&te(a,this.options.className),a.onselectstart=y,a.onmousemove=y}});function sf(a,h,_){return new Pl(a,h,_)}var Pn=Pi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,h){a&&(a instanceof gt||D(a))?(this._latlng=mt(a),A(this,h)):(A(this,a),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Fe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Fe(this._container,1),this.bringToFront(),this.options.interactive&&(te(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Fe(this._container,0),this._removeTimeout=setTimeout(u(ze,void 0,this._container),200)):ze(this._container),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=mt(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ln(this._container),this},bringToBack:function(){return this._map&&Ir(this._container),this},_prepareOpen:function(a){var h=this._source;if(!h._map)return!1;if(h instanceof ss){h=null;var _=this._source._layers;for(var S in _)if(_[S]._map){h=_[S];break}if(!h)return!1;this._source=h}if(!a)if(h.getCenter)a=h.getCenter();else if(h.getLatLng)a=h.getLatLng();else if(h.getBounds)a=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")a.innerHTML=h;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),h=j(this.options.offset),_=this._getAnchor();this._zoomAnimated?Ve(this._container,a.add(_)):h=h.add(a).add(_);var S=this._containerBottom=-h.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=S+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});fe.include({_initOverlay:function(a,h,_,S){var C=h;return C instanceof a||(C=new a(S).setContent(h)),_&&C.setLatLng(_),C}}),Pi.include({_initOverlay:function(a,h,_,S){var C=_;return C instanceof a?(A(C,S),C._source=this):(C=h&&!S?h:new a(S,this),C.setContent(_)),C}});var Na=Pn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Pn.prototype.openOn.call(this,a)},onAdd:function(a){Pn.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof os||this._source.on("preclick",zi))},onRemove:function(a){Pn.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof os||this._source.off("preclick",zi))},getEvents:function(){var a=Pn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",h=this._container=le("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=le("div",a+"-content-wrapper",h);if(this._contentNode=le("div",a+"-content",_),zr(h),ns(this._contentNode),Ft(h,"contextmenu",zi),this._tipContainer=le("div",a+"-tip-container",h),this._tip=le("div",a+"-tip",this._tipContainer),this.options.closeButton){var S=this._closeButton=le("a",a+"-close-button",h);S.setAttribute("role","button"),S.setAttribute("aria-label","Close popup"),S.href="#close",S.innerHTML='<span aria-hidden="true">&#215;</span>',Ft(S,"click",function(C){on(C),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,h=a.style;h.width="",h.whiteSpace="nowrap";var _=a.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),h.width=_+1+"px",h.whiteSpace="",h.height="";var S=a.offsetHeight,C=this.options.maxHeight,N="leaflet-popup-scrolled";C&&S>C?(h.height=C+"px",te(a,N)):$e(a,N),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),_=this._getAnchor();Ve(this._container,h.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,h=parseInt(va(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+h,S=this._containerWidth,C=new et(this._containerLeft,-_-this._containerBottom);C._add(Ks(this._container));var N=a.layerPointToContainerPoint(C),Q=j(this.options.autoPanPadding),rt=j(this.options.autoPanPaddingTopLeft||Q),ut=j(this.options.autoPanPaddingBottomRight||Q),bt=a.getSize(),kt=0,jt=0;N.x+S+ut.x>bt.x&&(kt=N.x+S-bt.x+ut.x),N.x-kt-rt.x<0&&(kt=N.x-rt.x),N.y+_+ut.y>bt.y&&(jt=N.y+_-bt.y+ut.y),N.y-jt-rt.y<0&&(jt=N.y-rt.y),(kt||jt)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([kt,jt]))}},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),rf=function(a,h){return new Na(a,h)};fe.mergeOptions({closePopupOnClick:!0}),fe.include({openPopup:function(a,h,_){return this._initOverlay(Na,a,h,_).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Pi.include({bindPopup:function(a,h){return this._popup=this._initOverlay(Na,this._popup,a,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof ss||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Js(a);var h=a.layer||a.target;if(this._popup._source===h&&!(h instanceof os)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=h,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var za=Pn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Pn.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Pn.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Pn.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",h=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=le("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var h,_,S=this._map,C=this._container,N=S.latLngToContainerPoint(S.getCenter()),Q=S.layerPointToContainerPoint(a),rt=this.options.direction,ut=C.offsetWidth,bt=C.offsetHeight,kt=j(this.options.offset),jt=this._getAnchor();rt==="top"?(h=ut/2,_=bt):rt==="bottom"?(h=ut/2,_=0):rt==="center"?(h=ut/2,_=bt/2):rt==="right"?(h=0,_=bt/2):rt==="left"?(h=ut,_=bt/2):Q.x<N.x?(rt="right",h=0,_=bt/2):(rt="left",h=ut+(kt.x+jt.x)*2,_=bt/2),a=a.subtract(j(h,_,!0)).add(kt).add(jt),$e(C,"leaflet-tooltip-right"),$e(C,"leaflet-tooltip-left"),$e(C,"leaflet-tooltip-top"),$e(C,"leaflet-tooltip-bottom"),te(C,"leaflet-tooltip-"+rt),Ve(C,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Fe(this._container,a)},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(h)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),jp=function(a,h){return new za(a,h)};fe.include({openTooltip:function(a,h,_){return this._initOverlay(za,a,h,_).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Pi.include({bindTooltip:function(a,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(za,this._tooltip,a,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var h=a?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[h](_),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof ss||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var h=typeof a.getElement=="function"&&a.getElement();h&&(Ft(h,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Ft(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var h=typeof a.getElement=="function"&&a.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var h=a.latlng,_,S;this._tooltip.options.sticky&&a.originalEvent&&(_=this._map.mouseEventToContainerPoint(a.originalEvent),S=this._map.containerPointToLayerPoint(_),h=this._map.layerPointToLatLng(S)),this._tooltip.setLatLng(h)}});var of=rs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var h=a&&a.tagName==="DIV"?a:document.createElement("div"),_=this.options;if(_.html instanceof Element?(di(h),h.appendChild(_.html)):h.innerHTML=_.html!==!1?_.html:"",_.bgPos){var S=j(_.bgPos);h.style.backgroundPosition=-S.x+"px "+-S.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Gp(a){return new of(a)}rs.Default=Ma;var Do=Pi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Dt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){A(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),ze(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ir(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof et?a:new et(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var h=this.getPane().children,_=-a(-1/0,1/0),S=0,C=h.length,N;S<C;S++)N=h[S].style.zIndex,h[S]!==this._container&&N&&(_=a(_,+N));isFinite(_)&&(this.options.zIndex=_+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Dt.ielt9){Fe(this._container,this.options.opacity);var a=+new Date,h=!1,_=!1;for(var S in this._tiles){var C=this._tiles[S];if(!(!C.current||!C.loaded)){var N=Math.min(1,(a-C.loaded)/200);Fe(C.el,N),N<1?h=!0:(C.active?_=!0:this._onOpaqueTile(C),C.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),h&&(tt(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,h=this.options.maxZoom;if(a!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===a?(this._levels[_].el.style.zIndex=h-Math.abs(a-_),this._onUpdateLevel(_)):(ze(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var S=this._levels[a],C=this._map;return S||(S=this._levels[a]={},S.el=le("div","leaflet-tile-container leaflet-zoom-animated",this._container),S.el.style.zIndex=h,S.origin=C.project(C.unproject(C.getPixelOrigin()),a).round(),S.zoom=a,this._setZoomTransform(S,C.getCenter(),C.getZoom()),y(S.el.offsetWidth),this._onCreateLevel(S)),this._level=S,S}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var a,h,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)h=this._tiles[a],h.retain=h.current;for(a in this._tiles)if(h=this._tiles[a],h.current&&!h.active){var S=h.coords;this._retainParent(S.x,S.y,S.z,S.z-5)||this._retainChildren(S.x,S.y,S.z,S.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var h in this._tiles)this._tiles[h].coords.z===a&&this._removeTile(h)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)ze(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,h,_,S){var C=Math.floor(a/2),N=Math.floor(h/2),Q=_-1,rt=new et(+C,+N);rt.z=+Q;var ut=this._tileCoordsToKey(rt),bt=this._tiles[ut];return bt&&bt.active?(bt.retain=!0,!0):(bt&&bt.loaded&&(bt.retain=!0),Q>S?this._retainParent(C,N,Q,S):!1)},_retainChildren:function(a,h,_,S){for(var C=2*a;C<2*a+2;C++)for(var N=2*h;N<2*h+2;N++){var Q=new et(C,N);Q.z=_+1;var rt=this._tileCoordsToKey(Q),ut=this._tiles[rt];if(ut&&ut.active){ut.retain=!0;continue}else ut&&ut.loaded&&(ut.retain=!0);_+1<S&&this._retainChildren(C,N,_+1,S)}},_resetView:function(a){var h=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var h=this.options;return h.minNativeZoom!==void 0&&a<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<a?h.maxNativeZoom:a},_setView:function(a,h,_,S){var C=Math.round(h);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var N=this.options.updateWhenZooming&&C!==this._tileZoom;(!S||N)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(a),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(a,h)},_setZoomTransforms:function(a,h){for(var _ in this._levels)this._setZoomTransform(this._levels[_],a,h)},_setZoomTransform:function(a,h,_){var S=this._map.getZoomScale(_,a.zoom),C=a.origin.multiplyBy(S).subtract(this._map._getNewPixelOrigin(h,_)).round();Dt.any3d?Cs(a.el,C,S):Ve(a.el,C)},_resetGrid:function(){var a=this._map,h=a.options.crs,_=this._tileSize=this.getTileSize(),S=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,h.wrapLng[0]],S).x/_.x),Math.ceil(a.project([0,h.wrapLng[1]],S).x/_.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([h.wrapLat[0],0],S).y/_.x),Math.ceil(a.project([h.wrapLat[1],0],S).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var h=this._map,_=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),S=h.getZoomScale(_,this._tileZoom),C=h.project(a,this._tileZoom).floor(),N=h.getSize().divideBy(S*2);return new O(C.subtract(N),C.add(N))},_update:function(a){var h=this._map;if(h){var _=this._clampZoom(h.getZoom());if(a===void 0&&(a=h.getCenter()),this._tileZoom!==void 0){var S=this._getTiledPixelBounds(a),C=this._pxBoundsToTileRange(S),N=C.getCenter(),Q=[],rt=this.options.keepBuffer,ut=new O(C.getBottomLeft().subtract([rt,-rt]),C.getTopRight().add([rt,-rt]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var bt in this._tiles){var kt=this._tiles[bt].coords;(kt.z!==this._tileZoom||!ut.contains(new et(kt.x,kt.y)))&&(this._tiles[bt].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(a,_);return}for(var jt=C.min.y;jt<=C.max.y;jt++)for(var se=C.min.x;se<=C.max.x;se++){var Mn=new et(se,jt);if(Mn.z=this._tileZoom,!!this._isValidTile(Mn)){var an=this._tiles[this._tileCoordsToKey(Mn)];an?an.current=!0:Q.push(Mn)}}if(Q.sort(function(Ae,Ee){return Ae.distanceTo(N)-Ee.distanceTo(N)}),Q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var si=document.createDocumentFragment();for(se=0;se<Q.length;se++)this._addTile(Q[se],si);this._level.el.appendChild(si)}}}},_isValidTile:function(a){var h=this._map.options.crs;if(!h.infinite){var _=this._globalTileRange;if(!h.wrapLng&&(a.x<_.min.x||a.x>_.max.x)||!h.wrapLat&&(a.y<_.min.y||a.y>_.max.y))return!1}if(!this.options.bounds)return!0;var S=this._tileCoordsToBounds(a);return dt(this.options.bounds).overlaps(S)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var h=this._map,_=this.getTileSize(),S=a.scaleBy(_),C=S.add(_),N=h.unproject(S,a.z),Q=h.unproject(C,a.z);return[N,Q]},_tileCoordsToBounds:function(a){var h=this._tileCoordsToNwSe(a),_=new ot(h[0],h[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var h=a.split(":"),_=new et(+h[0],+h[1]);return _.z=+h[2],_},_removeTile:function(a){var h=this._tiles[a];h&&(ze(h.el),delete this._tiles[a],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){te(a,"leaflet-tile");var h=this.getTileSize();a.style.width=h.x+"px",a.style.height=h.y+"px",a.onselectstart=y,a.onmousemove=y,Dt.ielt9&&this.options.opacity<1&&Fe(a,this.options.opacity)},_addTile:function(a,h){var _=this._getTilePos(a),S=this._tileCoordsToKey(a),C=this.createTile(this._wrapCoords(a),u(this._tileReady,this,a));this._initTile(C),this.createTile.length<2&&X(u(this._tileReady,this,a,null,C)),Ve(C,_),this._tiles[S]={el:C,coords:a,current:!0},h.appendChild(C),this.fire("tileloadstart",{tile:C,coords:a})},_tileReady:function(a,h,_){h&&this.fire("tileerror",{error:h,tile:_,coords:a});var S=this._tileCoordsToKey(a);_=this._tiles[S],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Fe(_.el,0),tt(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),h||(te(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Dt.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var h=new et(this._wrapX?v(a.x,this._wrapX):a.x,this._wrapY?v(a.y,this._wrapY):a.y);return h.z=a.z,h},_pxBoundsToTileRange:function(a){var h=this.getTileSize();return new O(a.min.unscaleBy(h).floor(),a.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function af(a){return new Do(a)}var ir=Do.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,h){this._url=a,h=A(this,h),h.detectRetina&&Dt.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,h){return this._url===a&&h===void 0&&(h=!0),this._url=a,h||this.redraw(),this},createTile:function(a,h){var _=document.createElement("img");return Ft(_,"load",u(this._tileOnLoad,this,h,_)),Ft(_,"error",u(this._tileOnError,this,h,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(a),_},getTileUrl:function(a){var h={r:Dt.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-a.y;this.options.tms&&(h.y=_),h["-y"]=_}return B(this._url,r(h,this.options))},_tileOnLoad:function(a,h){Dt.ielt9?setTimeout(u(a,this,null,h),0):a(null,h)},_tileOnError:function(a,h,_){var S=this.options.errorTileUrl;S&&h.getAttribute("src")!==S&&(h.src=S),a(_,h)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,h=this.options.maxZoom,_=this.options.zoomReverse,S=this.options.zoomOffset;return _&&(a=h-a),a+S},_getSubdomain:function(a){var h=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var a,h;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(h=this._tiles[a].el,h.onload=y,h.onerror=y,!h.complete)){h.src=R;var _=this._tiles[a].coords;ze(h),delete this._tiles[a],this.fire("tileabort",{tile:h,coords:_})}},_removeTile:function(a){var h=this._tiles[a];if(h)return h.el.setAttribute("src",R),Do.prototype._removeTile.call(this,a)},_tileReady:function(a,h,_){if(!(!this._map||_&&_.getAttribute("src")===R))return Do.prototype._tileReady.call(this,a,h,_)}});function _i(a,h){return new ir(a,h)}var Pa=ir.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,h){this._url=a;var _=r({},this.defaultWmsParams);for(var S in h)S in this.options||(_[S]=h[S]);h=A(this,h);var C=h.detectRetina&&Dt.retina?2:1,N=this.getTileSize();_.width=N.x*C,_.height=N.y*C,this.wmsParams=_},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,ir.prototype.onAdd.call(this,a)},getTileUrl:function(a){var h=this._tileCoordsToNwSe(a),_=this._crs,S=G(_.project(h[0]),_.project(h[1])),C=S.min,N=S.max,Q=(this._wmsVersion>=1.3&&this._crs===su?[C.y,C.x,N.y,N.x]:[C.x,C.y,N.x,N.y]).join(","),rt=ir.prototype.getTileUrl.call(this,a);return rt+E(this.wmsParams,rt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Q},setParams:function(a,h){return r(this.wmsParams,a),h||this.redraw(),this}});function gi(a,h){return new Pa(a,h)}ir.WMS=Pa,_i.wms=gi;var Kn=Pi.extend({options:{padding:.1},initialize:function(a){A(this,a),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),te(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,h){var _=this._map.getZoomScale(h,this._zoom),S=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,h),N=S.multiplyBy(-_).add(C).subtract(this._map._getNewPixelOrigin(a,h));Dt.any3d?Cs(this._container,N,_):Ve(this._container,N)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,h=this._map.getSize(),_=this._map.containerPointToLayerPoint(h.multiplyBy(-a)).round();this._bounds=new O(_,_.add(h.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Bl=Kn.extend({options:{tolerance:0},getEvents:function(){var a=Kn.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Kn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Ft(a,"mousemove",this._onMouseMove,this),Ft(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ft(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){tt(this._redrawRequest),delete this._ctx,ze(this._container),Oe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var h in this._layers)a=this._layers[h],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kn.prototype._update.call(this);var a=this._bounds,h=this._container,_=a.getSize(),S=Dt.retina?2:1;Ve(h,a.min),h.width=S*_.x,h.height=S*_.y,h.style.width=_.x+"px",h.style.height=_.y+"px",Dt.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Kn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[p(a)]=a;var h=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var h=a._order,_=h.next,S=h.prev;_?_.prev=S:this._drawLast=S,S?S.next=_:this._drawFirst=_,delete a._order,delete this._layers[p(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var h=a.options.dashArray.split(/[, ]+/),_=[],S,C;for(C=0;C<h.length;C++){if(S=Number(h[C]),isNaN(S))return;_.push(S)}a.options._dashArray=_}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var h=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(a._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(a._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var h=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,h=this._redrawBounds;if(this._ctx.save(),h){var _=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var S=this._drawFirst;S;S=S.next)a=S.layer,(!h||a._pxBounds&&a._pxBounds.intersects(h))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,h){if(this._drawing){var _,S,C,N,Q=a._parts,rt=Q.length,ut=this._ctx;if(rt){for(ut.beginPath(),_=0;_<rt;_++){for(S=0,C=Q[_].length;S<C;S++)N=Q[_][S],ut[S?"lineTo":"moveTo"](N.x,N.y);h&&ut.closePath()}this._fillStroke(ut,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var h=a._point,_=this._ctx,S=Math.max(Math.round(a._radius),1),C=(Math.max(Math.round(a._radiusY),1)||S)/S;C!==1&&(_.save(),_.scale(1,C)),_.beginPath(),_.arc(h.x,h.y/C,S,0,Math.PI*2,!1),C!==1&&_.restore(),this._fillStroke(_,a)}},_fillStroke:function(a,h){var _=h.options;_.fill&&(a.globalAlpha=_.fillOpacity,a.fillStyle=_.fillColor||_.color,a.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(a.setLineDash&&a.setLineDash(h.options&&h.options._dashArray||[]),a.globalAlpha=_.opacity,a.lineWidth=_.weight,a.strokeStyle=_.color,a.lineCap=_.lineCap,a.lineJoin=_.lineJoin,a.stroke())},_onClick:function(a){for(var h=this._map.mouseEventToLayerPoint(a),_,S,C=this._drawFirst;C;C=C.next)_=C.layer,_.options.interactive&&_._containsPoint(h)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(_))&&(S=_);this._fireEvent(S?[S]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,h)}},_handleMouseOut:function(a){var h=this._hoveredLayer;h&&($e(this._container,"leaflet-interactive"),this._fireEvent([h],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,h){if(!this._mouseHoverThrottled){for(var _,S,C=this._drawFirst;C;C=C.next)_=C.layer,_.options.interactive&&_._containsPoint(h)&&(S=_);S!==this._hoveredLayer&&(this._handleMouseOut(a),S&&(te(this._container,"leaflet-interactive"),this._fireEvent([S],a,"mouseover"),this._hoveredLayer=S)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,h,_){this._map._fireDOMEvent(h,_||h.type,a)},_bringToFront:function(a){var h=a._order;if(h){var _=h.next,S=h.prev;if(_)_.prev=S;else return;S?S.next=_:_&&(this._drawFirst=_),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(a)}},_bringToBack:function(a){var h=a._order;if(h){var _=h.next,S=h.prev;if(S)S.next=_;else return;_?_.prev=S:S&&(this._drawLast=S),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(a)}}});function Ba(a){return Dt.canvas?new Bl(a):null}var sr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ru={_initContainer:function(){this._container=le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Kn.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var h=a._container=sr("shape");te(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",a._path=sr("path"),h.appendChild(a._path),this._updateStyle(a),this._layers[p(a)]=a},_addPath:function(a){var h=a._container;this._container.appendChild(h),a.options.interactive&&a.addInteractiveTarget(h)},_removePath:function(a){var h=a._container;ze(h),a.removeInteractiveTarget(h),delete this._layers[p(a)]},_updateStyle:function(a){var h=a._stroke,_=a._fill,S=a.options,C=a._container;C.stroked=!!S.stroke,C.filled=!!S.fill,S.stroke?(h||(h=a._stroke=sr("stroke")),C.appendChild(h),h.weight=S.weight+"px",h.color=S.color,h.opacity=S.opacity,S.dashArray?h.dashStyle=D(S.dashArray)?S.dashArray.join(" "):S.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=S.lineCap.replace("butt","flat"),h.joinstyle=S.lineJoin):h&&(C.removeChild(h),a._stroke=null),S.fill?(_||(_=a._fill=sr("fill")),C.appendChild(_),_.color=S.fillColor||S.color,_.opacity=S.fillOpacity):_&&(C.removeChild(_),a._fill=null)},_updateCircle:function(a){var h=a._point.round(),_=Math.round(a._radius),S=Math.round(a._radiusY||_);this._setPath(a,a._empty()?"M0 0":"AL "+h.x+","+h.y+" "+_+","+S+" 0,"+65535*360)},_setPath:function(a,h){a._path.v=h},_bringToFront:function(a){Ln(a._container)},_bringToBack:function(a){Ir(a._container)}},as=Dt.vml?sr:Ot,Oo=Kn.extend({_initContainer:function(){this._container=as("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=as("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ze(this._container),Oe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kn.prototype._update.call(this);var a=this._bounds,h=a.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,_.setAttribute("width",h.x),_.setAttribute("height",h.y)),Ve(_,a.min),_.setAttribute("viewBox",[a.min.x,a.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(a){var h=a._path=as("path");a.options.className&&te(h,a.options.className),a.options.interactive&&te(h,"leaflet-interactive"),this._updateStyle(a),this._layers[p(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){ze(a._path),a.removeInteractiveTarget(a._path),delete this._layers[p(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var h=a._path,_=a.options;h&&(_.stroke?(h.setAttribute("stroke",_.color),h.setAttribute("stroke-opacity",_.opacity),h.setAttribute("stroke-width",_.weight),h.setAttribute("stroke-linecap",_.lineCap),h.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?h.setAttribute("stroke-dasharray",_.dashArray):h.removeAttribute("stroke-dasharray"),_.dashOffset?h.setAttribute("stroke-dashoffset",_.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),_.fill?(h.setAttribute("fill",_.fillColor||_.color),h.setAttribute("fill-opacity",_.fillOpacity),h.setAttribute("fill-rule",_.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(a,h){this._setPath(a,Zt(a._parts,h))},_updateCircle:function(a){var h=a._point,_=Math.max(Math.round(a._radius),1),S=Math.max(Math.round(a._radiusY),1)||_,C="a"+_+","+S+" 0 1,0 ",N=a._empty()?"M0 0":"M"+(h.x-_)+","+h.y+C+_*2+",0 "+C+-_*2+",0 ";this._setPath(a,N)},_setPath:function(a,h){a._path.setAttribute("d",h)},_bringToFront:function(a){Ln(a._path)},_bringToBack:function(a){Ir(a._path)}});Dt.vml&&Oo.include(ru);function Ua(a){return Dt.svg||Dt.vml?new Oo(a):null}fe.include({getRenderer:function(a){var h=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var h=this._paneRenderers[a];return h===void 0&&(h=this._createRenderer({pane:a}),this._paneRenderers[a]=h),h},_createRenderer:function(a){return this.options.preferCanvas&&Ba(a)||Ua(a)}});var Br=Co.extend({initialize:function(a,h){Co.prototype.initialize.call(this,this._boundsToLatLngs(a),h)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=dt(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function Zp(a,h){return new Br(a,h)}Oo.create=as,Oo.pointsToPath=Zt,Ds.geometryToLayer=zn,Ds.coordsToLatLng=Rl,Ds.coordsToLatLngs=Oa,Ds.latLngToCoords=Il,Ds.latLngsToCoords=Ra,Ds.getFeature=tr,Ds.asFeature=Nl,fe.mergeOptions({boxZoom:!0});var Jn=is.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Ft(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ze(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),yo(),Tl(),this._startPoint=this._map.mouseEventToContainerPoint(a),Ft(document,{contextmenu:Js,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=le("div","leaflet-zoom-box",this._container),te(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var h=new O(this._point,this._startPoint),_=h.getSize();Ve(this._box,h.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(ze(this._box),$e(this._container,"leaflet-crosshair")),es(),wa(),Oe(document,{contextmenu:Js,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var h=new ot(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});fe.addInitHook("addHandler","boxZoom",Jn),fe.mergeOptions({doubleClickZoom:!0});var Ul=is.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var h=this._map,_=h.getZoom(),S=h.options.zoomDelta,C=a.originalEvent.shiftKey?_-S:_+S;h.options.doubleClickZoom==="center"?h.setZoom(C):h.setZoomAround(a.containerPoint,C)}});fe.addInitHook("addHandler","doubleClickZoom",Ul),fe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ls=is.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new $s(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}te(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$e(this._map._container,"leaflet-grab"),$e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=dt(this._map.options.maxBounds);this._offsetLimit=G(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var h=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(h),this._prunePositions(h)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,h){return a-(a-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;a.x<h.min.x&&(a.x=this._viscousLimit(a.x,h.min.x)),a.y<h.min.y&&(a.y=this._viscousLimit(a.y,h.min.y)),a.x>h.max.x&&(a.x=this._viscousLimit(a.x,h.max.x)),a.y>h.max.y&&(a.y=this._viscousLimit(a.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,h=Math.round(a/2),_=this._initialWorldOffset,S=this._draggable._newPos.x,C=(S-h+_)%a+h-_,N=(S+h+_)%a-h-_,Q=Math.abs(C+_)<Math.abs(N+_)?C:N;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Q},_onDragEnd:function(a){var h=this._map,_=h.options,S=!_.inertia||a.noInertia||this._times.length<2;if(h.fire("dragend",a),S)h.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),N=(this._lastTime-this._times[0])/1e3,Q=_.easeLinearity,rt=C.multiplyBy(Q/N),ut=rt.distanceTo([0,0]),bt=Math.min(_.inertiaMaxSpeed,ut),kt=rt.multiplyBy(bt/ut),jt=bt/(_.inertiaDeceleration*Q),se=kt.multiplyBy(-jt/2).round();!se.x&&!se.y?h.fire("moveend"):(se=h._limitOffset(se,h.options.maxBounds),X(function(){h.panBy(se,{duration:jt,easeLinearity:Q,noMoveStart:!0,animate:!0})}))}}});fe.addInitHook("addHandler","dragging",ls),fe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ou=is.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Ft(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Oe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,h=document.documentElement,_=a.scrollTop||h.scrollTop,S=a.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(S,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var h=this._panKeys={},_=this.keyCodes,S,C;for(S=0,C=_.left.length;S<C;S++)h[_.left[S]]=[-1*a,0];for(S=0,C=_.right.length;S<C;S++)h[_.right[S]]=[a,0];for(S=0,C=_.down.length;S<C;S++)h[_.down[S]]=[0,a];for(S=0,C=_.up.length;S<C;S++)h[_.up[S]]=[0,-1*a]},_setZoomDelta:function(a){var h=this._zoomKeys={},_=this.keyCodes,S,C;for(S=0,C=_.zoomIn.length;S<C;S++)h[_.zoomIn[S]]=a;for(S=0,C=_.zoomOut.length;S<C;S++)h[_.zoomOut[S]]=-a},_addHooks:function(){Ft(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var h=a.keyCode,_=this._map,S;if(h in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(S=this._panKeys[h],a.shiftKey&&(S=j(S).multiplyBy(3)),_.options.maxBounds&&(S=_._limitOffset(j(S),_.options.maxBounds)),_.options.worldCopyJump){var C=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(S)));_.panTo(C)}else _.panBy(S)}else if(h in this._zoomKeys)_.setZoom(_.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Js(a)}}});fe.addInitHook("addHandler","keyboard",ou),fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ha=is.extend({addHooks:function(){Ft(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var h=Gn(a),_=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var S=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),S),Js(a)},_performZoom:function(){var a=this._map,h=a.getZoom(),_=this._map.options.zoomSnap||0;a._stop();var S=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(S))))/Math.LN2,N=_?Math.ceil(C/_)*_:C,Q=a._limitZoom(h+(this._delta>0?N:-N))-h;this._delta=0,this._startTime=null,Q&&(a.options.scrollWheelZoom==="center"?a.setZoom(h+Q):a.setZoomAround(this._lastMousePos,h+Q))}});fe.addInitHook("addHandler","scrollWheelZoom",Ha);var Ur=600;fe.mergeOptions({tapHold:Dt.touchNative&&Dt.safari&&Dt.mobile,tapTolerance:15});var Hl=is.extend({addHooks:function(){Ft(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var h=a.touches[0];this._startPos=this._newPos=new et(h.clientX,h.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Ft(document,"touchend",on),Ft(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),Ur),Ft(document,"touchend touchcancel contextmenu",this._cancel,this),Ft(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Oe(document,"touchend",on),Oe(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Oe(document,"touchend touchcancel contextmenu",this._cancel,this),Oe(document,"touchmove",this._onMove,this)},_onMove:function(a){var h=a.touches[0];this._newPos=new et(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,h){var _=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});_._simulated=!0,h.target.dispatchEvent(_)}});fe.addInitHook("addHandler","tapHold",Hl),fe.mergeOptions({touchZoom:Dt.touch,bounceAtZoomLimits:!0});var au=is.extend({addHooks:function(){te(this._map._container,"leaflet-touch-zoom"),Ft(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var h=this._map;if(!(!a.touches||a.touches.length!==2||h._animatingZoom||this._zooming)){var _=h.mouseEventToContainerPoint(a.touches[0]),S=h.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(_.add(S)._divideBy(2))),this._startDist=_.distanceTo(S),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Ft(document,"touchmove",this._onTouchMove,this),Ft(document,"touchend touchcancel",this._onTouchEnd,this),on(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var h=this._map,_=h.mouseEventToContainerPoint(a.touches[0]),S=h.mouseEventToContainerPoint(a.touches[1]),C=_.distanceTo(S)/this._startDist;if(this._zoom=h.getScaleZoom(C,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&C<1||this._zoom>h.getMaxZoom()&&C>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var N=_._add(S)._divideBy(2)._subtract(this._centerPoint);if(C===1&&N.x===0&&N.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(N),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),tt(this._animRequest);var Q=u(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(Q,this,!0),on(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,tt(this._animRequest),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});fe.addInitHook("addHandler","touchZoom",au),fe.BoxZoom=Jn,fe.DoubleClickZoom=Ul,fe.Drag=ls,fe.Keyboard=ou,fe.ScrollWheelZoom=Ha,fe.TapHold=Hl,fe.TouchZoom=au,e.Bounds=O,e.Browser=Dt,e.CRS=Mt,e.Canvas=Bl,e.Circle=Ol,e.CircleMarker=Eo,e.Class=J,e.Control=ii,e.DivIcon=of,e.DivOverlay=Pn,e.DomEvent=Cl,e.DomUtil=wo,e.Draggable=$s,e.Evented=Y,e.FeatureGroup=ss,e.GeoJSON=Ds,e.GridLayer=Do,e.Handler=is,e.Icon=rs,e.ImageOverlay=Mo,e.LatLng=gt,e.LatLngBounds=ot,e.Layer=Pi,e.LayerGroup=Ao,e.LineUtil=Up,e.Map=fe,e.Marker=Da,e.Mixin=Np,e.Path=os,e.Point=et,e.PolyUtil=nu,e.Polygon=Co,e.Polyline=ks,e.Popup=Na,e.PosAnimation=xo,e.Projection=Qh,e.Rectangle=Br,e.Renderer=Kn,e.SVG=Oo,e.SVGOverlay=Pl,e.TileLayer=ir,e.Tooltip=za,e.Transformation=We,e.Util=P,e.VideoOverlay=nr,e.bind=u,e.bounds=G,e.canvas=Ba,e.circle=ef,e.circleMarker=tf,e.control=Ms,e.divIcon=Gp,e.extend=r,e.featureGroup=Jh,e.geoJSON=zl,e.geoJson=Ia,e.gridLayer=af,e.icon=La,e.imageOverlay=nf,e.latLng=mt,e.latLngBounds=dt,e.layerGroup=Hp,e.map=Qc,e.marker=$h,e.point=j,e.polygon=qp,e.polyline=Vp,e.popup=rf,e.rectangle=Zp,e.setOptions=A,e.stamp=p,e.svg=Ua,e.svgOverlay=sf,e.tileLayer=_i,e.tooltip=jp,e.transformation=Xe,e.version=s,e.videoOverlay=ko;var lu=window.L;e.noConflict=function(){return window.L=lu,this},window.L=e}))})(Xu,Xu.exports)),Xu.exports}var GA=jA();const un=gh(GA);(function(i,t,e){function s(r,l){for(;(r=r.parentElement)&&!r.classList.contains(l););return r}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(r,l){this._map=r,this._container=r._container,this._overlayPane=r._panes.overlayPane,this._popupPane=r._panes.popupPane,l&&l.shapeOptions&&(l.shapeOptions=L.Util.extend({},this.options.shapeOptions,l.shapeOptions)),L.setOptions(this,l);var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(L.DomUtil.disableTextSelection(),r.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(r){L.setOptions(this,r)},_fireCreatedEvent:function(r){this._map.fire(L.Draw.Event.CREATED,{layer:r,layerType:this.type})},_cancelDrawing:function(r){r.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(r,l){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,l&&l.drawError&&(l.drawError=L.Util.extend({},this.options.drawError,l.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,r,l)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var r=this._markers.pop(),l=this._poly,u=l.getLatLngs(),f=u.splice(-1,1)[0];this._poly.setLatLngs(u),this._markerGroup.removeLayer(r),l.getLatLngs().length<2&&this._map.removeLayer(l),this._vertexChanged(f,!1)}},addVertex:function(r){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(r))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(r)),this._poly.addLatLng(r),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(r,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var r=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),l=this._poly.newLatLngIntersects(r[r.length-1]);if(!this.options.allowIntersection&&l||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(r){var l=this._map.mouseEventToLayerPoint(r.originalEvent),u=this._map.layerPointToLatLng(l);this._currentLatLng=u,this._updateTooltip(u),this._updateGuide(l),this._mouseMarker.setLatLng(u),L.DomEvent.preventDefault(r.originalEvent)},_vertexChanged:function(r,l){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(r,l),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(r){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(r),this._clickHandled=!0,this._disableNewMarkers();var l=r.originalEvent,u=l.clientX,f=l.clientY;this._startPoint.call(this,u,f)}},_startPoint:function(r,l){this._mouseDownOrigin=L.point(r,l)},_onMouseUp:function(r){var l=r.originalEvent,u=l.clientX,f=l.clientY;this._endPoint.call(this,u,f,r),this._clickHandled=null},_endPoint:function(r,l,u){if(this._mouseDownOrigin){var f=L.point(r,l).distanceTo(this._mouseDownOrigin),p=this._calculateFinishDistance(u.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(u.latlng),this._finishShape()):p<10&&L.Browser.touch?this._finishShape():Math.abs(f)<9*(i.devicePixelRatio||1)&&this.addVertex(u.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(r){var l,u,f=r.originalEvent;!f.touches||!f.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(l=f.touches[0].clientX,u=f.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,l,u),this._endPoint.call(this,l,u,r),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(r){var l;if(this._markers.length>0){var u;if(this.type===L.Draw.Polyline.TYPE)u=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;u=this._markers[0]}var f=this._map.latLngToContainerPoint(u.getLatLng()),p=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),m=this._map.latLngToContainerPoint(p.getLatLng());l=f.distanceTo(m)}else l=1/0;return l},_updateFinishHandler:function(){var r=this._markers.length;r>1&&this._markers[r-1].on("click",this._finishShape,this),r>2&&this._markers[r-2].off("click",this._finishShape,this)},_createMarker:function(r){var l=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(l),l},_updateGuide:function(r){var l=this._markers?this._markers.length:0;l>0&&(r=r||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[l-1].getLatLng()),r))},_updateTooltip:function(r){var l=this._getTooltipText();r&&this._tooltip.updatePosition(r),this._errorShown||this._tooltip.updateContent(l)},_drawGuide:function(r,l){var u,f,p,m=Math.floor(Math.sqrt(Math.pow(l.x-r.x,2)+Math.pow(l.y-r.y,2))),v=this.options.guidelineDistance,y=this.options.maxGuideLineLength,w=m>y?m-y:v;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));w<m;w+=this.options.guidelineDistance)u=w/m,f={x:Math.floor(r.x*(1-u)+u*l.x),y:Math.floor(r.y*(1-u)+u*l.y)},p=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),p.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(p,f)},_updateGuideColor:function(r){if(this._guidesContainer)for(var l=0,u=this._guidesContainer.childNodes.length;l<u;l++)this._guidesContainer.childNodes[l].style.backgroundColor=r},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var r,l,u=this.options.showLength;return this._markers.length===0?r={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(l=u?this._getMeasurementString():"",r=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:l}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:l}),r},_updateRunningMeasure:function(r,l){var u,f,p=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(u=p-(l?2:1),f=L.GeometryUtil.isVersion07x()?r.distanceTo(this._markers[u].getLatLng())*(this.options.factor||1):this._map.distance(r,this._markers[u].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=f*(l?1:-1))},_getMeasurementString:function(){var r,l=this._currentLatLng,u=this._markers[this._markers.length-1].getLatLng();return r=L.GeometryUtil.isVersion07x()?u&&l&&l.distanceTo?this._measurementRunningTotal+l.distanceTo(u)*(this.options.factor||1):this._measurementRunningTotal||0:u&&l?this._measurementRunningTotal+this._map.distance(l,u)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(r,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var r=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(r,l){L.Draw.Polyline.prototype.initialize.call(this,r,l),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var r=this._markers.length;r===1&&this._markers[0].on("click",this._finishShape,this),r>2&&(this._markers[r-1].on("dblclick",this._finishShape,this),r>3&&this._markers[r-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var r,l;return this._markers.length===0?r=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(r=L.drawLocal.draw.handlers.polygon.tooltip.cont,l=this._getMeasurementString()):(r=L.drawLocal.draw.handlers.polygon.tooltip.end,l=this._getMeasurementString()),{text:r,subtext:l}},_getMeasurementString:function(){var r=this._area,l="";return r||this.options.showLength?(this.options.showLength&&(l=L.Draw.Polyline.prototype._getMeasurementString.call(this)),r&&(l+="<br>"+L.GeometryUtil.readableArea(r,this.options.metric,this.options.precision)),l):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(r,l){var u;!this.options.allowIntersection&&this.options.showArea&&(u=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(u)),L.Draw.Polyline.prototype._vertexChanged.call(this,r,l)},_cleanUpShape:function(){var r=this._markers.length;r>0&&(this._markers[0].off("click",this._finishShape,this),r>2&&this._markers[r-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(r,l){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,r,l)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),t.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(t,"mouseup",this._onMouseUp,this),L.DomEvent.off(t,"touchend",this._onMouseUp,this),t.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(r){this._isDrawing=!0,this._startLatLng=r.latlng,L.DomEvent.on(t,"mouseup",this._onMouseUp,this).on(t,"touchend",this._onMouseUp,this).preventDefault(r.originalEvent)},_onMouseMove:function(r){var l=r.latlng;this._tooltip.updatePosition(l),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(l))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(r,l){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,l)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(r){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!s(r.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(r){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,r)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,r),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_getTooltipText:function(){var r,l,u,f=L.Draw.SimpleShape.prototype._getTooltipText.call(this),p=this._shape,m=this.options.showArea;return p&&(r=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),l=L.GeometryUtil.geodesicArea(r),u=m?L.GeometryUtil.readableArea(l,this.options.metric):""),{text:f.text,subtext:u}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(r,l){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,l)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(r){var l=r.latlng;this._tooltip.updatePosition(l),this._mouseMarker.setLatLng(l),this._marker?(l=this._mouseMarker.getLatLng(),this._marker.setLatLng(l)):(this._marker=this._createMarker(l),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(r){return new L.Marker(r,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(r){this._onMouseMove(r),this._onClick()},_fireCreatedEvent:function(){var r=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(r,l){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,l)},_fireCreatedEvent:function(){var r=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)},_createMarker:function(r){return new L.CircleMarker(r,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(r,l){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,l)},_drawShape:function(r){if(L.GeometryUtil.isVersion07x())var l=this._startLatLng.distanceTo(r);else var l=this._map.distance(this._startLatLng,r);this._shape?this._shape.setRadius(l):(this._shape=new L.Circle(this._startLatLng,l,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_onMouseMove:function(r){var l,u=r.latlng,f=this.options.showRadius,p=this.options.metric;if(this._tooltip.updatePosition(u),this._isDrawing){this._drawShape(u),l=this._shape.getRadius().toFixed(1);var m="";f&&(m=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(l,p,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:m})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(r,l){this._marker=r,L.setOptions(this,l)},addHooks:function(){var r=this._marker;r.dragging.enable(),r.on("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},removeHooks:function(){var r=this._marker;r.dragging.disable(),r.off("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},_onDragEnd:function(r){var l=r.target;l.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:l})},_toggleMarkerHighlight:function(){var r=this._marker._icon;r&&(r.style.display="none",L.DomUtil.hasClass(r,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,-4)):(L.DomUtil.addClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,4)),r.style.display="")},_offsetMarker:function(r,l){var u=parseInt(r.style.marginTop,10)-l,f=parseInt(r.style.marginLeft,10)-l;r.style.marginTop=u+"px",r.style.marginLeft=f+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(r){this.latlngs=[r._latlngs],r._holes&&(this.latlngs=this.latlngs.concat(r._holes)),this._poly=r,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(r){for(var l=0;l<this._verticesHandlers.length;l++)r(this._verticesHandlers[l])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(r){r.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(r){r.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(r){r.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var r=0;r<this.latlngs.length;r++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[r],this._poly.options.poly))},_updateLatLngs:function(r){this.latlngs=[r.layer._latlngs],r.layer._holes&&(this.latlngs=this.latlngs.concat(r.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(r,l,u){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=r,u&&u.drawError&&(u.drawError=L.Util.extend({},this.options.drawError,u.drawError)),this._latlngs=l,L.setOptions(this,u)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var r=this._poly,l=r._path;r instanceof L.Polygon||(r.options.fill=!1,r.options.editing&&(r.options.editing.fill=!1)),l&&r.options.editing&&r.options.editing.className&&(r.options.original.className&&r.options.original.className.split(" ").forEach(function(u){L.DomUtil.removeClass(l,u)}),r.options.editing.className.split(" ").forEach(function(u){L.DomUtil.addClass(l,u)})),r.setStyle(r.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var r=this._poly,l=r._path;l&&r.options.editing&&r.options.editing.className&&(r.options.editing.className.split(" ").forEach(function(u){L.DomUtil.removeClass(l,u)}),r.options.original.className&&r.options.original.className.split(" ").forEach(function(u){L.DomUtil.addClass(l,u)})),r.setStyle(r.options.original),r._map&&(r._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var r,l,u,f,p=this._defaultShape();for(r=0,u=p.length;r<u;r++)f=this._createMarker(p[r],r),f.on("click",this._onMarkerClick,this),f.on("contextmenu",this._onContextMenu,this),this._markers.push(f);var m,v;for(r=0,l=u-1;r<u;l=r++)(r!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(m=this._markers[l],v=this._markers[r],this._createMiddleMarker(m,v),this._updatePrevNext(m,v))},_createMarker:function(r,l){var u=new L.Marker.Touch(r,{draggable:!0,icon:this.options.icon});return u._origLatLng=r,u._index=l,u.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(u),u},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var r=this._defaultShape(),l=[].splice.apply(r,arguments);return this._poly._convertLatLngs(r,!0),this._poly.redraw(),l},_removeMarker:function(r){var l=r._index;this._markerGroup.removeLayer(r),this._markers.splice(l,1),this._spliceLatLngs(l,1),this._updateIndexes(l,-1),r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(r){var l=r.target,u=this._poly,f=L.LatLngUtil.cloneLatLng(l._origLatLng);if(L.extend(l._origLatLng,l._latlng),u.options.poly){var p=u._map._editTooltip;if(!u.options.poly.allowIntersection&&u.intersects()){L.extend(l._origLatLng,f),l.setLatLng(f);var m=u.options.color;u.setStyle({color:this.options.drawError.color}),p&&p.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){u.setStyle({color:m}),p&&p.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}l._middleLeft&&l._middleLeft.setLatLng(this._getMiddleLatLng(l._prev,l)),l._middleRight&&l._middleRight.setLatLng(this._getMiddleLatLng(l,l._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var v=this._poly.getLatLngs();this._poly._convertLatLngs(v,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(r){var l=L.Polygon&&this._poly instanceof L.Polygon?4:3,u=r.target;this._defaultShape().length<l||(this._removeMarker(u),this._updatePrevNext(u._prev,u._next),u._middleLeft&&this._markerGroup.removeLayer(u._middleLeft),u._middleRight&&this._markerGroup.removeLayer(u._middleRight),u._prev&&u._next?this._createMiddleMarker(u._prev,u._next):u._prev?u._next||(u._prev._middleRight=null):u._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(r){var l=r.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:l,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(r){var l=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),u=this._map.layerPointToLatLng(l),f=r.target;L.extend(f._origLatLng,u),f._middleLeft&&f._middleLeft.setLatLng(this._getMiddleLatLng(f._prev,f)),f._middleRight&&f._middleRight.setLatLng(this._getMiddleLatLng(f,f._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(r,l){this._markerGroup.eachLayer(function(u){u._index>r&&(u._index+=l)})},_createMiddleMarker:function(r,l){var u,f,p,m=this._getMiddleLatLng(r,l),v=this._createMarker(m);v.setOpacity(.6),r._middleRight=l._middleLeft=v,f=function(){v.off("touchmove",f,this);var y=l._index;v._index=y,v.off("click",u,this).on("click",this._onMarkerClick,this),m.lat=v.getLatLng().lat,m.lng=v.getLatLng().lng,this._spliceLatLngs(y,0,m),this._markers.splice(y,0,v),v.setOpacity(1),this._updateIndexes(y,1),l._index++,this._updatePrevNext(r,v),this._updatePrevNext(v,l),this._poly.fire("editstart")},p=function(){v.off("dragstart",f,this),v.off("dragend",p,this),v.off("touchmove",f,this),this._createMiddleMarker(r,v),this._createMiddleMarker(v,l)},u=function(){f.call(this),p.call(this),this._fireEdit()},v.on("click",u,this).on("dragstart",f,this).on("dragend",p,this).on("touchmove",f,this),this._markerGroup.addLayer(v)},_updatePrevNext:function(r,l){r&&(r._next=l),l&&(l._prev=r)},_getMiddleLatLng:function(r,l){var u=this._poly._map,f=u.project(r.getLatLng()),p=u.project(l.getLatLng());return u.unproject(f._add(p)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(r,l){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=r,L.Util.setOptions(this,l)},addHooks:function(){var r=this._shape;this._shape._map&&(this._map=this._shape._map,r.setStyle(r.options.editing),r._map&&(this._map=r._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var r=this._shape;if(r.setStyle(r.options.original),r._map){this._unbindMarker(this._moveMarker);for(var l=0,u=this._resizeMarkers.length;l<u;l++)this._unbindMarker(this._resizeMarkers[l]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(r,l){var u=new L.Marker.Touch(r,{draggable:!0,icon:l,zIndexOffset:10});return this._bindMarker(u),this._markerGroup.addLayer(u),u},_bindMarker:function(r){r.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(r){r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(r){r.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(r){var l=r.target,u=l.getLatLng();l===this._moveMarker?this._move(u):this._resize(u),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(r){r.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(r){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r),typeof this._getCorners=="function"){var l=this._getCorners(),u=r.target,f=u._cornerIndex;u.setOpacity(0),this._oppositeCorner=l[(f+2)%4],this._toggleCornerMarkers(0,f)}this._shape.fire("editstart")},_onTouchMove:function(r){var l=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),u=this._map.layerPointToLatLng(l);return r.target===this._moveMarker?this._move(u):this._resize(u),this._shape.redraw(),!1},_onTouchEnd:function(r){r.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getBounds(),l=r.getCenter();this._moveMarker=this._createMarker(l,this.options.moveIcon)},_createResizeMarker:function(){var r=this._getCorners();this._resizeMarkers=[];for(var l=0,u=r.length;l<u;l++)this._resizeMarkers.push(this._createMarker(r[l],this.options.resizeIcon)),this._resizeMarkers[l]._cornerIndex=l},_onMarkerDragStart:function(r){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r);var l=this._getCorners(),u=r.target,f=u._cornerIndex;this._oppositeCorner=l[(f+2)%4],this._toggleCornerMarkers(0,f)},_onMarkerDragEnd:function(r){var l,u,f=r.target;f===this._moveMarker&&(l=this._shape.getBounds(),u=l.getCenter(),f.setLatLng(u)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,r)},_move:function(r){for(var l,u=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),f=this._shape.getBounds(),p=f.getCenter(),m=[],v=0,y=u.length;v<y;v++)l=[u[v].lat-p.lat,u[v].lng-p.lng],m.push([r.lat+l[0],r.lng+l[1]]);this._shape.setLatLngs(m),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(r){var l;this._shape.setBounds(L.latLngBounds(r,this._oppositeCorner)),l=this._shape.getBounds(),this._moveMarker.setLatLng(l.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var r=this._shape.getBounds();return[r.getNorthWest(),r.getNorthEast(),r.getSouthEast(),r.getSouthWest()]},_toggleCornerMarkers:function(r){for(var l=0,u=this._resizeMarkers.length;l<u;l++)this._resizeMarkers[l].setOpacity(r)},_repositionCornerMarkers:function(){for(var r=this._getCorners(),l=0,u=this._resizeMarkers.length;l<u;l++)this._resizeMarkers[l].setLatLng(r[l])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getLatLng();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(r){if(this._resizeMarkers.length){var l=this._getResizeMarkerPoint(r);this._resizeMarkers[0].setLatLng(l)}this._shape.setLatLng(r),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var r=this._shape.getLatLng(),l=this._getResizeMarkerPoint(r);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(l,this.options.resizeIcon))},_getResizeMarkerPoint:function(r){var l=this._shape._radius*Math.cos(Math.PI/4),u=this._map.project(r);return this._map.unproject([u.x+l,u.y-l])},_resize:function(r){var l=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=l.distanceTo(r):radius=this._map.distance(l,r),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(r,l){var u={};if(r.touches!==void 0){if(!r.touches.length)return;u=r.touches[0]}else if(r.pointerType!=="touch"||(u=r,!this._filterClick(r)))return;var f=this._map.mouseEventToContainerPoint(u),p=this._map.mouseEventToLayerPoint(u),m=this._map.layerPointToLatLng(p);this._map.fire(l,{latlng:m,layerPoint:p,containerPoint:f,pageX:u.pageX,pageY:u.pageY,originalEvent:r})},_filterClick:function(r){var l=r.timeStamp||r.originalEvent.timeStamp,u=L.DomEvent._lastClick&&l-L.DomEvent._lastClick;return u&&u>100&&u<500||r.target._simulatedClick&&!r._simulated?(L.DomEvent.stop(r),!1):(L.DomEvent._lastClick=l,!0)},_onTouchStart:function(r){this._map._loaded&&this._touchEvent(r,"touchstart")},_onTouchEnd:function(r){this._map._loaded&&this._touchEvent(r,"touchend")},_onTouchCancel:function(r){if(this._map._loaded){var l="touchcancel";this._detectIE()&&(l="pointercancel"),this._touchEvent(r,l)}},_onTouchLeave:function(r){this._map._loaded&&this._touchEvent(r,"touchleave")},_onTouchMove:function(r){this._map._loaded&&this._touchEvent(r,"touchmove")},_detectIE:function(){var r=i.navigator.userAgent,l=r.indexOf("MSIE ");if(l>0)return parseInt(r.substring(l+5,r.indexOf(".",l)),10);if(r.indexOf("Trident/")>0){var u=r.indexOf("rv:");return parseInt(r.substring(u+3,r.indexOf(".",u)),10)}var f=r.indexOf("Edge/");return f>0&&parseInt(r.substring(f+5,r.indexOf(".",f)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var r=this._icon,l=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?l.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):l.concat(["touchcancel"]),L.DomUtil.addClass(r,"leaflet-clickable"),L.DomEvent.on(r,"click",this._onMouseClick,this),L.DomEvent.on(r,"keypress",this._onKeyPress,this);for(var u=0;u<l.length;u++)L.DomEvent.on(r,l[u],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var r=i.navigator.userAgent,l=r.indexOf("MSIE ");if(l>0)return parseInt(r.substring(l+5,r.indexOf(".",l)),10);if(r.indexOf("Trident/")>0){var u=r.indexOf("rv:");return parseInt(r.substring(u+3,r.indexOf(".",u)),10)}var f=r.indexOf("Edge/");return f>0&&parseInt(r.substring(f+5,r.indexOf(".",f)),10)}}),L.LatLngUtil={cloneLatLngs:function(r){for(var l=[],u=0,f=r.length;u<f;u++)Array.isArray(r[u])?l.push(L.LatLngUtil.cloneLatLngs(r[u])):l.push(this.cloneLatLng(r[u]));return l},cloneLatLng:function(r){return L.latLng(r.lat,r.lng)}},(function(){var r={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(l){var u,f,p=l.length,m=0,v=Math.PI/180;if(p>2){for(var y=0;y<p;y++)u=l[y],f=l[(y+1)%p],m+=(f.lng-u.lng)*v*(2+Math.sin(u.lat*v)+Math.sin(f.lat*v));m=6378137*m*6378137/2}return Math.abs(m)},formattedNumber:function(l,u){var f=parseFloat(l).toFixed(u),p=L.drawLocal.format&&L.drawLocal.format.numeric,m=p&&p.delimiters,v=m&&m.thousands,y=m&&m.decimal;if(v||y){var w=f.split(".");f=v?w[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+v):w[0],y=y||".",w.length>1&&(f=f+y+w[1])}return f},readableArea:function(l,u,v){var p,m,v=L.Util.extend({},r,v);return u?(m=["ha","m"],type=typeof u,type==="string"?m=[u]:type!=="boolean"&&(m=u),p=l>=1e6&&m.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*l,v.km)+" km":l>=1e4&&m.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*l,v.ha)+" ha":L.GeometryUtil.formattedNumber(l,v.m)+" m"):(l/=.836127,p=l>=3097600?L.GeometryUtil.formattedNumber(l/3097600,v.mi)+" mi":l>=4840?L.GeometryUtil.formattedNumber(l/4840,v.ac)+" acres":L.GeometryUtil.formattedNumber(l,v.yd)+" yd"),p},readableDistance:function(l,u,f,p,y){var v,y=L.Util.extend({},r,y);switch(u?typeof u=="string"?u:"metric":f?"feet":p?"nauticalMile":"yards"){case"metric":v=l>1e3?L.GeometryUtil.formattedNumber(l/1e3,y.km)+" km":L.GeometryUtil.formattedNumber(l,y.m)+" m";break;case"feet":l*=3.28083,v=L.GeometryUtil.formattedNumber(l,y.ft)+" ft";break;case"nauticalMile":l*=.53996,v=L.GeometryUtil.formattedNumber(l/1e3,y.nm)+" nm";break;default:l*=1.09361,v=l>1760?L.GeometryUtil.formattedNumber(l/1760,y.mi)+" miles":L.GeometryUtil.formattedNumber(l,y.yd)+" yd"}return v},isVersion07x:function(){var l=L.version.split(".");return parseInt(l[0],10)===0&&parseInt(l[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(r,l,u,f){return this._checkCounterclockwise(r,u,f)!==this._checkCounterclockwise(l,u,f)&&this._checkCounterclockwise(r,l,u)!==this._checkCounterclockwise(r,l,f)},_checkCounterclockwise:function(r,l,u){return(u.y-r.y)*(l.x-r.x)>(l.y-r.y)*(u.x-r.x)}}),L.Polyline.include({intersects:function(){var r,l,u,f=this._getProjectedPoints(),p=f?f.length:0;if(this._tooFewPointsForIntersection())return!1;for(r=p-1;r>=3;r--)if(l=f[r-1],u=f[r],this._lineSegmentsIntersectsRange(l,u,r-2))return!0;return!1},newLatLngIntersects:function(r,l){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(r),l)},newPointIntersects:function(r,l){var u=this._getProjectedPoints(),f=u?u.length:0,p=u?u[f-1]:null,m=f-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(p,r,m,l?1:0)},_tooFewPointsForIntersection:function(r){var l=this._getProjectedPoints(),u=l?l.length:0;return u+=r||0,!l||u<=3},_lineSegmentsIntersectsRange:function(r,l,u,f){var p,m,v=this._getProjectedPoints();f=f||0;for(var y=u;y>f;y--)if(p=v[y-1],m=v[y],L.LineUtil.segmentsIntersect(r,l,p,m))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var r=[],l=this._defaultShape(),u=0;u<l.length;u++)r.push(this._map.latLngToLayerPoint(l[u]));return r}}),L.Polygon.include({intersects:function(){var r,l,u,f,p=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(r=p.length,l=p[0],u=p[r-1],f=r-2,this._lineSegmentsIntersectsRange(u,l,f,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(r){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,r);var l;this._toolbars={},L.DrawToolbar&&this.options.draw&&(l=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=l,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(l=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=l,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(r){var l,u=L.DomUtil.create("div","leaflet-draw"),f=!1;for(var p in this._toolbars)this._toolbars.hasOwnProperty(p)&&(l=this._toolbars[p].addToolbar(r))&&(f||(L.DomUtil.hasClass(l,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(l.childNodes[0],"leaflet-draw-toolbar-top"),f=!0),u.appendChild(l));return u},onRemove:function(){for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&this._toolbars[r].removeToolbar()},setDrawingOptions:function(r){for(var l in this._toolbars)this._toolbars[l]instanceof L.DrawToolbar&&this._toolbars[l].setOptions(r)},_toolbarEnabled:function(r){var l=r.target;for(var u in this._toolbars)this._toolbars[u]!==l&&this._toolbars[u].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(r){L.setOptions(this,r),this._modes={},this._actionButtons=[],this._activeMode=null;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(r){var l,u=L.DomUtil.create("div","leaflet-draw-section"),f=0,p=this._toolbarClass||"",m=this.getModeHandlers(r);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=r,l=0;l<m.length;l++)m[l].enabled&&this._initModeHandler(m[l].handler,this._toolbarContainer,f++,p,m[l].title);if(f)return this._lastButtonIndex=--f,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),u.appendChild(this._toolbarContainer),u.appendChild(this._actionsContainer),u},removeToolbar:function(){for(var r in this._modes)this._modes.hasOwnProperty(r)&&(this._disposeButton(this._modes[r].button,this._modes[r].handler.enable,this._modes[r].handler),this._modes[r].handler.disable(),this._modes[r].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var l=0,u=this._actionButtons.length;l<u;l++)this._disposeButton(this._actionButtons[l].button,this._actionButtons[l].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(r,l,u,f,p){var m=r.type;this._modes[m]={},this._modes[m].handler=r,this._modes[m].button=this._createButton({type:m,title:p,className:f+"-"+m,container:l,callback:this._modes[m].handler.enable,context:this._modes[m].handler}),this._modes[m].buttonIndex=u,this._modes[m].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!i.MSStream},_createButton:function(r){var l=L.DomUtil.create("a",r.className||"",r.container),u=L.DomUtil.create("span","sr-only",r.container);l.href="#",l.appendChild(u),r.title&&(l.title=r.title,u.innerHTML=r.title),r.text&&(l.innerHTML=r.text,u.innerHTML=r.text);var f=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(l,"click",L.DomEvent.stopPropagation).on(l,"mousedown",L.DomEvent.stopPropagation).on(l,"dblclick",L.DomEvent.stopPropagation).on(l,"touchstart",L.DomEvent.stopPropagation).on(l,"click",L.DomEvent.preventDefault).on(l,f,r.callback,r.context),l},_disposeButton:function(r,l){var u=this._detectIOS()?"touchstart":"click";L.DomEvent.off(r,"click",L.DomEvent.stopPropagation).off(r,"mousedown",L.DomEvent.stopPropagation).off(r,"dblclick",L.DomEvent.stopPropagation).off(r,"touchstart",L.DomEvent.stopPropagation).off(r,"click",L.DomEvent.preventDefault).off(r,u,l)},_handlerActivated:function(r){this.disable(),this._activeMode=this._modes[r.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(r){var l,u,f,p,m=this._actionsContainer,v=this.getActions(r),y=v.length;for(u=0,f=this._actionButtons.length;u<f;u++)this._disposeButton(this._actionButtons[u].button,this._actionButtons[u].callback);for(this._actionButtons=[];m.firstChild;)m.removeChild(m.firstChild);for(var w=0;w<y;w++)"enabled"in v[w]&&!v[w].enabled||(l=L.DomUtil.create("li","",m),p=this._createButton({title:v[w].title,text:v[w].text,container:l,callback:v[w].callback,context:v[w].context}),this._actionButtons.push({button:p,callback:v[w].callback}))},_showActionsToolbar:function(){var r=this._activeMode.buttonIndex,l=this._lastButtonIndex,u=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=u+"px",r===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),r===l&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(r){this._map=r,this._popupPane=r._panes.popupPane,this._visible=!1,this._container=r.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(r){return this._container?(r.subtext=r.subtext||"",r.subtext.length!==0||this._singleLineLabel?r.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(r.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+r.subtext+"</span><br />":"")+"<span>"+r.text+"</span>",r.text||r.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(r){var l=this._map.latLngToLayerPoint(r),u=this._container;return this._container&&(this._visible&&(u.style.visibility="inherit"),L.DomUtil.setPosition(u,l)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(r){for(var l in this.options)this.options.hasOwnProperty(l)&&r[l]&&(r[l]=L.extend({},this.options[l],r[l]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,r)},getModeHandlers:function(r){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(r,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(r,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(r,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(r,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(r,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(r,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(r){return[{enabled:r.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:r.completeShape,context:r},{enabled:r.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:r.deleteLastVertex,context:r},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(r){L.setOptions(this,r);for(var l in this._modes)this._modes.hasOwnProperty(l)&&r.hasOwnProperty(l)&&this._modes[l].handler.setOptions(r[l])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(r){r.edit&&(r.edit.selectedPathOptions===void 0&&(r.edit.selectedPathOptions=this.options.edit.selectedPathOptions),r.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,r.edit.selectedPathOptions)),r.remove&&(r.remove=L.extend({},this.options.remove,r.remove)),r.poly&&(r.poly=L.extend({},this.options.poly,r.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,r),this._selectedFeatureCount=0},getModeHandlers:function(r){var l=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(r,{featureGroup:l,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(r,{featureGroup:l}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(r){var l=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return r.removeAllLayers&&l.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),l},addToolbar:function(r){var l=L.Toolbar.prototype.addToolbar.call(this,r);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),l},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var r,l=this.options.featureGroup,u=l.getLayers().length!==0;this.options.edit&&(r=this._modes[L.EditToolbar.Edit.TYPE].button,u?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",u?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(r=this._modes[L.EditToolbar.Delete.TYPE].button,u?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",u?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(r,l){if(L.Handler.prototype.initialize.call(this,r),L.setOptions(this,l),this._featureGroup=l.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),r._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(r){this._revertLayer(r)},this)},save:function(){var r=new L.LayerGroup;this._featureGroup.eachLayer(function(l){l.edited&&(r.addLayer(l),l.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:r})},_backupLayer:function(r){var l=L.Util.stamp(r);this._uneditedLayerProps[l]||(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?this._uneditedLayerProps[l]={latlngs:L.LatLngUtil.cloneLatLngs(r.getLatLngs())}:r instanceof L.Circle?this._uneditedLayerProps[l]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng()),radius:r.getRadius()}:(r instanceof L.Marker||r instanceof L.CircleMarker)&&(this._uneditedLayerProps[l]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(r){var l=L.Util.stamp(r);r.edited=!1,this._uneditedLayerProps.hasOwnProperty(l)&&(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?r.setLatLngs(this._uneditedLayerProps[l].latlngs):r instanceof L.Circle?(r.setLatLng(this._uneditedLayerProps[l].latlng),r.setRadius(this._uneditedLayerProps[l].radius)):(r instanceof L.Marker||r instanceof L.CircleMarker)&&r.setLatLng(this._uneditedLayerProps[l].latlng),r.fire("revert-edited",{layer:r}))},_enableLayerEdit:function(r){var l,u,f=r.layer||r.target||r;this._backupLayer(f),this.options.poly&&(u=L.Util.extend({},this.options.poly),f.options.poly=u),this.options.selectedPathOptions&&(l=L.Util.extend({},this.options.selectedPathOptions),l.maintainColor&&(l.color=f.options.color,l.fillColor=f.options.fillColor),f.options.original=L.extend({},f.options),f.options.editing=l),f instanceof L.Marker?(f.editing&&f.editing.enable(),f.dragging.enable(),f.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):f.editing.enable()},_disableLayerEdit:function(r){var l=r.layer||r.target||r;l.edited=!1,l.editing&&l.editing.disable(),delete l.options.editing,delete l.options.original,this._selectedPathOptions&&(l instanceof L.Marker?this._toggleMarkerHighlight(l):(l.setStyle(l.options.previousOptions),delete l.options.previousOptions)),l instanceof L.Marker?(l.dragging.disable(),l.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):l.editing.disable()},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_onMarkerDragEnd:function(r){var l=r.target;l.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:l})},_onTouchMove:function(r){var l=r.originalEvent.changedTouches[0],u=this._map.mouseEventToLayerPoint(l),f=this._map.layerPointToLatLng(u);r.target.setLatLng(f)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(r,l){if(L.Handler.prototype.initialize.call(this,r),L.Util.setOptions(this,l),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(r){this._deletableLayers.addLayer(r),r.fire("revert-deleted",{layer:r})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(r){this._removeLayer({layer:r})},this),this.save()},_enableLayerDelete:function(r){(r.layer||r.target||r).on("click",this._removeLayer,this)},_disableLayerDelete:function(r){var l=r.layer||r.target||r;l.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(l)},_removeLayer:function(r){var l=r.layer||r.target||r;this._deletableLayers.removeLayer(l),this._deletedLayers.addLayer(l),l.fire("deleted")},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var I_,Ow;function ZA(){if(Ow)return I_;Ow=1;const i=1e-6;return I_={DP_TOL:i,EQ_0:function(t){return t<i&&t>-i},EQ:function(t,e){return t-e<i&&t-e>-i},GT:(t,e)=>t-e>i,GE:(t,e)=>t-e>-i,LT:(t,e)=>t-e<-i,LE:(t,e)=>t-e<i},I_}var N_,Rw;function WA(){return Rw||(Rw=1,N_={ILLEGAL_PARAMETERS:new ReferenceError("Illegal Parameters"),ZERO_DIVISION:new Error("Zero division")}),N_}var z_,Iw;function YA(){return Iw||(Iw=1,z_=function(i){i.Matrix=class pc{constructor(e=1,s=0,r=0,l=1,u=0,f=0){this.a=e,this.b=s,this.c=r,this.d=l,this.tx=u,this.ty=f}clone(){return new pc(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new pc(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let s,r;if(e.length==1&&e[0]instanceof i.Vector)s=e[0].x,r=e[0].y;else if(e.length==2&&typeof e[0]=="number"&&typeof e[1]=="number")s=e[0],r=e[1];else throw i.Errors.ILLEGAL_PARAMETERS;return this.multiply(new pc(1,0,0,1,s,r))}rotate(e){let s=Math.cos(e),r=Math.sin(e);return this.multiply(new pc(s,r,-r,s,0,0))}scale(e,s){return this.multiply(new pc(e,0,0,s,0,0))}equalTo(e){return!(!i.Utils.EQ(this.tx,e.tx)||!i.Utils.EQ(this.ty,e.ty)||!i.Utils.EQ(this.a,e.a)||!i.Utils.EQ(this.b,e.b)||!i.Utils.EQ(this.c,e.c)||!i.Utils.EQ(this.d,e.d))}},i.matrix=(...t)=>new i.Matrix(...t)}),z_}var P_,Nw;function XA(){return Nw||(Nw=1,P_=class Tg{constructor(e,s){this.low=e,this.high=s}get max(){return this.high}interval(e,s){return new Tg(e,s)}clone(){return new Tg(this.low,this.high)}less_than(e){return this.low<e.low||this.low==e.low&&this.high<e.high}equal_to(e){return this.low==e.low&&this.high==e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}output(){return[this.low,this.high]}maximal_val(e,s){return Math.max(e,s)}val_less_than(e,s){return e<s}}),P_}var B_,zw;function E1(){return zw||(zw=1,B_={RB_TREE_COLOR_RED:0,RB_TREE_COLOR_BLACK:1}),B_}var U_,Pw;function FA(){if(Pw)return U_;Pw=1;let i=XA(),{RB_TREE_COLOR_RED:t,RB_TREE_COLOR_BLACK:e}=E1();return U_=class{constructor(l=void 0,u=void 0,f=null,p=null,m=null,v=e){this.left=f,this.right=p,this.parent=m,this.color=v,this.item={key:l,value:u},l&&l instanceof Array&&l.length==2&&!Number.isNaN(l[0])&&!Number.isNaN(l[1])&&(this.item.key=new i(Math.min(l[0],l[1]),Math.max(l[0],l[1]))),this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===e}less_than(l){return this.item.key.less_than(l.item.key)}equal_to(l){let u=!0;return this.item.value&&l.item.value&&(u=this.item.value.equal_to?this.item.value.equal_to(l.item.value):this.item.value==l.item.value),this.item.key.equal_to(l.item.key)&&u}intersect(l){return this.item.key.intersect(l.item.key)}copy_data(l){this.item.key=l.item.key.clone(),this.item.value=l.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){let l=this.item.key.maximal_val;this.max=l(this.max,this.right.max)}if(this.left&&this.left.max){let l=this.item.key.maximal_val;this.max=l(this.max,this.left.max)}}not_intersect_left_subtree(l){let u=this.item.key.val_less_than,f=this.left.max.high?this.left.max.high:this.left.max;return u(f,l.item.key.low)}not_intersect_right_subtree(l){let u=this.item.key.val_less_than,f=this.right.max.low?this.right.max.low:this.right.item.key.low;return u(l.item.key.high,f)}},U_}var H_,Bw;function L1(){if(Bw)return H_;Bw=1;let i=FA(),{RB_TREE_COLOR_RED:t,RB_TREE_COLOR_BLACK:e}=E1(),s=new i;return H_=class C1{constructor(){this.root=null}get size(){let u=0;return this.tree_walk(this.root,()=>u++),u}get keys(){let u=[];return this.tree_walk(this.root,f=>u.push(f.item.key.output())),u}get values(){let u=[];return this.tree_walk(this.root,f=>u.push(f.item.value)),u}get items(){let u=[];return this.tree_walk(this.root,f=>u.push({key:f.item.key.output(),value:f.item.value})),u}get isEmpty(){return this.root==null||this.root==s}insert(u,f=u){if(u===void 0)return;let p=new i(u,f,s,s,null,t);return this.tree_insert(p),this.recalc_max(p),p}exist(u,f){let p=new i(u,f);return!!this.tree_search(this.root,p)}remove(u,f){let p=new i(u,f),m=this.tree_search(this.root,p);return m&&this.tree_delete(m),m}search(u){let f=new i(u),p=[];this.tree_search_interval(this.root,f,p);let m=[];return p.forEach(v=>{v.item.value?m.push(v.item.value):m.push(v.item.key.output())},[]),m}forEach(u){this.tree_walk(this.root,f=>u(f.item.key,f.item.value))}map(u){const f=new C1;return this.tree_walk(this.root,p=>f.insert(p.item.key,u(p.item.value,p.item.key))),f}recalc_max(u){let f=u;for(;f.parent!=null;)f.parent.update_max(),f=f.parent}tree_insert(u){let f=this.root,p=null;if(this.root==null||this.root==s)this.root=u;else{for(;f!=s;)p=f,u.less_than(f)?f=f.left:f=f.right;u.parent=p,u.less_than(p)?p.left=u:p.right=u}this.insert_fixup(u)}insert_fixup(u){let f,p;for(f=u;f!=this.root&&f.parent.color==t;)f.parent==f.parent.parent.left?(p=f.parent.parent.right,p.color==t?(f.parent.color=e,p.color=e,f.parent.parent.color=t,f=f.parent.parent):(f==f.parent.right&&(f=f.parent,this.rotate_left(f)),f.parent.color=e,f.parent.parent.color=t,this.rotate_right(f.parent.parent))):(p=f.parent.parent.left,p.color==t?(f.parent.color=e,p.color=e,f.parent.parent.color=t,f=f.parent.parent):(f==f.parent.left&&(f=f.parent,this.rotate_right(f)),f.parent.color=e,f.parent.parent.color=t,this.rotate_left(f.parent.parent)));this.root.color=e}tree_delete(u){let f,p;u.left==s||u.right==s?f=u:f=this.tree_successor(u),f.left!=s?p=f.left:p=f.right,p.parent=f.parent,f==this.root?this.root=p:(f==f.parent.left?f.parent.left=p:f.parent.right=p,f.parent.update_max()),this.recalc_max(p),f!=u&&(u.copy_data(f),u.update_max(),this.recalc_max(u)),f.color==e&&this.delete_fixup(p)}delete_fixup(u){let f=u,p;for(;f!=this.root&&f.parent!=null&&f.color==e;)f==f.parent.left?(p=f.parent.right,p.color==t&&(p.color=e,f.parent.color=t,this.rotate_left(f.parent),p=f.parent.right),p.left.color==e&&p.right.color==e?(p.color=t,f=f.parent):(p.right.color==e&&(p.color=t,p.left.color=e,this.rotate_right(p),p=f.parent.right),p.color=f.parent.color,f.parent.color=e,p.right.color=e,this.rotate_left(f.parent),f=this.root)):(p=f.parent.left,p.color==t&&(p.color=e,f.parent.color=t,this.rotate_right(f.parent),p=f.parent.left),p.left.color==e&&p.right.color==e?(p.color=t,f=f.parent):(p.left.color==e&&(p.color=t,p.right.color=e,this.rotate_left(p),p=f.parent.left),p.color=f.parent.color,f.parent.color=e,p.left.color=e,this.rotate_right(f.parent),f=this.root));f.color=e}tree_search(u,f){if(!(u==null||u==s))return f.equal_to(u)?u:f.less_than(u)?this.tree_search(u.left,f):this.tree_search(u.right,f)}tree_search_interval(u,f,p){u!=null&&u!=s&&(u.left!=s&&!u.not_intersect_left_subtree(f)&&this.tree_search_interval(u.left,f,p),u.intersect(f)&&p.push(u),u.right!=s&&!u.not_intersect_right_subtree(f)&&this.tree_search_interval(u.right,f,p))}local_minimum(u){let f=u;for(;f.left!=null&&f.left!=s;)f=f.left;return f}local_maximum(u){let f=u;for(;f.right!=null&&f.right!=s;)f=f.right;return f}tree_successor(u){let f,p,m;if(u.right!=s)f=this.local_minimum(u.right);else{for(p=u,m=u.parent;m!=null&&m.right==p;)p=m,m=m.parent;f=m}return f}rotate_left(u){let f=u.right;u.right=f.left,f.left!=s&&(f.left.parent=u),f.parent=u.parent,u==this.root?this.root=f:u==u.parent.left?u.parent.left=f:u.parent.right=f,f.left=u,u.parent=f,u!=null&&u!=s&&u.update_max(),f=u.parent,f!=null&&f!=s&&f.update_max()}rotate_right(u){let f=u.left;u.left=f.right,f.right!=s&&(f.right.parent=u),f.parent=u.parent,u==this.root?this.root=f:u==u.parent.left?u.parent.left=f:u.parent.right=f,f.right=u,u.parent=f,u!=null&&u!=s&&u.update_max(),f=u.parent,f!=null&&f!=s&&f.update_max()}tree_walk(u,f){u!=null&&u!=s&&(this.tree_walk(u.left,f),f(u),this.tree_walk(u.right,f))}testRedBlackProperty(){let u=!0;return this.tree_walk(this.root,function(f){f.color==t&&(f.left.color==e&&f.right.color==e||(u=!1))}),u}testBlackHeightProperty(u){let f=0,p=0,m=0;if(u.color==e&&f++,u.left!=s?p=this.testBlackHeightProperty(u.left):p=1,u.right!=s?m=this.testBlackHeightProperty(u.right):m=1,p!=m)throw new Error("Red-black height property violated");return f+=p,f}},H_}var V_,Uw;function QA(){if(Uw)return V_;Uw=1;let i=L1();return V_=function(t){t.PlanarSet=class extends Set{constructor(){super(),this.index=new i}add(s){let r=this.size;return super.add(s),this.size>r&&this.index.insert(s.box,s),this}delete(s){let r=super.delete(s);return r&&this.index.remove(s.box,s),r}clear(){super.clear(),this.index=new i}search(s){return this.index.search(s)}hit(s){let r=new t.Box(s.x-1,s.y-1,s.x+1,s.y+1);return this.index.search(r).filter(u=>s.on(u))}svg(){return[...this].reduce((r,l)=>r+l.svg(),"")}}},V_}var q_,Hw;function KA(){return Hw||(Hw=1,q_=function(i){i.Point=class M1{constructor(...e){if(this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let s=e[0];if(typeof s[0]=="number"&&typeof s[1]=="number"){this.x=s[0],this.y=s[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:s,y:r}=e[0];this.x=s,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw i.Errors.ILLEGAL_PARAMETERS}}get box(){return new i.Box(this.x,this.y,this.x,this.y)}clone(){return new i.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return i.Utils.EQ(this.x,e.x)&&i.Utils.EQ(this.y,e.y)}lessThan(e){return!!(i.Utils.LT(this.y,e.y)||i.Utils.EQ(this.y,e.y)&&i.Utils.LT(this.x,e.x))}rotate(e,s={x:0,y:0}){var r=s.x+(this.x-s.x)*Math.cos(e)-(this.y-s.y)*Math.sin(e),l=s.y+(this.x-s.x)*Math.sin(e)+(this.y-s.y)*Math.cos(e);return new i.Point(r,l)}translate(...e){if(e.length==1&&e[0]instanceof i.Vector)return new i.Point(this.x+e[0].x,this.y+e[0].y);if(e.length==2&&typeof e[0]=="number"&&typeof e[1]=="number")return new i.Point(this.x+e[0],this.y+e[1]);throw i.Errors.ILLEGAL_PARAMETERS}transform(e){return new i.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let s=new i.Vector(this,e.pt);if(i.Utils.EQ_0(s.cross(e.norm)))return e.pt.clone();let r=s.dot(e.norm),l=e.norm.multiply(r);return this.translate(l)}leftTo(e){let s=new i.Vector(e.pt,this);return i.Utils.GT(s.dot(e.norm),0)}distanceTo(e){let{Distance:s}=i;if(e instanceof M1){let r=e.x-this.x,l=e.y-this.y;return[Math.sqrt(r*r+l*l),new i.Segment(this,e)]}if(e instanceof i.Line)return s.point2line(this,e);if(e instanceof i.Circle)return s.point2circle(this,e);if(e instanceof i.Segment)return s.point2segment(this,e);if(e instanceof i.Arc)return s.point2arc(this,e);if(e instanceof i.Polygon)return s.point2polygon(this,e);if(e instanceof i.PlanarSet)return s.shape2planarSet(this,e)}on(e){if(e instanceof i.Point)return this.equalTo(e);if(e instanceof i.Line)return e.contains(this);if(e instanceof i.Circle)return e.contains(this);if(e instanceof i.Segment)return e.contains(this);if(e instanceof i.Arc)return e.contains(this);if(e instanceof i.Polygon)return e.contains(this)}svg(e={}){let{r:s,stroke:r,strokeWidth:l,fill:u,id:f,className:p}=e,m=f&&f.length>0?`id="${f}"`:"",v=p&&p.length>0?`class="${p}"`:"";return`
<circle cx="${this.x}" cy="${this.y}" r="${s||3}" stroke="${r||"black"}" stroke-width="${l||1}" fill="${u||"red"}" ${m} ${v} />`}toJSON(){return Object.assign({},this,{name:"point"})}},i.point=(...t)=>new i.Point(...t)}),q_}var j_,Vw;function JA(){return Vw||(Vw=1,j_=function(i){i.Vector=class yd{constructor(...e){if(this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let s=e[0];if(typeof s[0]=="number"&&typeof s[1]=="number"){this.x=s[0],this.y=s[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:s,y:r}=e[0];this.x=s,this.y=r;return}if(e.length===2){let s=e[0],r=e[1];if(typeof s=="number"&&typeof r=="number"){this.x=s,this.y=r;return}if(s instanceof i.Point&&r instanceof i.Point){this.x=r.x-s.x,this.y=r.y-s.y;return}}throw i.Errors.ILLEGAL_PARAMETERS}}clone(){return new yd(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return i.Utils.EQ(this.x,e.x)&&i.Utils.EQ(this.y,e.y)}multiply(e){return new yd(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!i.Utils.EQ_0(this.length))return new yd(this.x/this.length,this.y/this.length);throw i.Errors.ZERO_DIVISION}rotate(e){let r=new i.Point(this.x,this.y).rotate(e);return new i.Vector(r.x,r.y)}rotate90CCW(){return new i.Vector(-this.y,this.x)}rotate90CW(){return new i.Vector(this.y,-this.x)}invert(){return new i.Vector(-this.x,-this.y)}add(e){return new i.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new i.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let s=this.normalize(),r=e.normalize(),l=Math.atan2(s.cross(r),s.dot(r));return l<0&&(l+=2*Math.PI),l}projectionOn(e){let s=e.normalize(),r=this.dot(s);return s.multiply(r)}toJSON(){return Object.assign({},this,{name:"vector"})}},i.vector=(...t)=>new i.Vector(...t)}),j_}var G_,qw;function $A(){return qw||(qw=1,G_=function(i){i.Line=class $a{constructor(...e){if(this.pt=new i.Point,this.norm=new i.Vector(0,1),e.length!=0){if(e.length==1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:s,norm:r}=e[0];this.pt=new i.Point(s),this.norm=new i.Vector(r);return}if(e.length==2){let s=e[0],r=e[1];if(s instanceof i.Point&&r instanceof i.Point){this.pt=s,this.norm=$a.points2norm(s,r);return}if(s instanceof i.Point&&r instanceof i.Vector){if(i.Utils.EQ_0(r.x)&&i.Utils.EQ_0(r.y))throw i.Errors.ILLEGAL_PARAMETERS;this.pt=s.clone(),this.norm=r.clone(),this.norm=this.norm.normalize();return}if(s instanceof i.Vector&&r instanceof i.Point){if(i.Utils.EQ_0(s.x)&&i.Utils.EQ_0(s.y))throw i.Errors.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=s.clone(),this.norm=this.norm.normalize();return}}throw i.Errors.ILLEGAL_PARAMETERS}}clone(){return new i.Line(this.pt,this.norm)}get slope(){return new i.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,s=this.norm.y,r=this.norm.dot(this.pt);return[e,s,r]}parallelTo(e){return i.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let s=new i.Vector(this.pt,e);return i.Utils.EQ_0(this.norm.dot(s))}intersect(e){if(e instanceof i.Point)return this.contains(e)?[e]:[];if(e instanceof i.Line)return $a.intersectLine2Line(this,e);if(e instanceof i.Circle)return $a.intersectLine2Circle(this,e);if(e instanceof i.Segment)return e.intersect(this);if(e instanceof i.Arc)return $a.intersectLine2Arc(this,e);if(e instanceof i.Polygon)return i.Polygon.intersectLine2Polygon(this,e)}distanceTo(e){let{Distance:s}=i;if(e instanceof i.Point){let[r,l]=s.point2line(e,this);return l=l.reverse(),[r,l]}if(e instanceof i.Circle){let[r,l]=s.circle2line(e,this);return l=l.reverse(),[r,l]}if(e instanceof i.Segment){let[r,l]=s.segment2line(e,this);return[r,l.reverse()]}if(e instanceof i.Arc){let[r,l]=s.arc2line(e,this);return[r,l.reverse()]}if(e instanceof i.Polygon){let[r,l]=s.shape2polygon(this,e);return[r,l]}}svg(e,s={}){let r=$a.intersectLine2Box(this,e);if(r.length===0)return"";let l=r[0],u=r.length==2?r[1]:r.find(p=>!p.equalTo(l));return u===void 0&&(u=l),new i.Segment(l,u).svg(s)}toJSON(){return Object.assign({},this,{name:"line"})}static points2norm(e,s){if(e.equalTo(s))throw i.Errors.ILLEGAL_PARAMETERS;return new i.Vector(e,s).normalize().rotate90CCW()}static intersectLine2Line(e,s){let r=[],[l,u,f]=e.standard,[p,m,v]=s.standard,y=l*m-u*p,w=f*m-u*v,T=l*v-f*p;if(!i.Utils.EQ_0(y)){let x=new i.Point(w/y,T/y);r.push(x)}return r}static intersectLine2Circle(e,s){let r=[],l=s.pc.projectionOn(e),u=s.pc.distanceTo(l)[0];if(i.Utils.EQ(u,s.r))r.push(l);else if(i.Utils.LT(u,s.r)){let f=Math.sqrt(s.r*s.r-u*u),p,m;p=e.norm.rotate90CCW().multiply(f),m=l.translate(p),r.push(m),p=e.norm.rotate90CW().multiply(f),m=l.translate(p),r.push(m)}return r}static intersectLine2Box(e,s){let r=[new i.Point(s.xmin,s.ymin),new i.Point(s.xmax,s.ymin),new i.Point(s.xmax,s.ymax),new i.Point(s.xmin,s.ymax)],l=[new i.Segment(r[0],r[1]),new i.Segment(r[1],r[2]),new i.Segment(r[2],r[3]),new i.Segment(r[3],r[0])],u=[];for(let f of l){let p=f.intersect(e);for(let m of p)u.push(m)}return u}static intersectLine2Arc(e,s){let r=[];if($a.intersectLine2Box(e,s.box).length==0)return r;let l=new i.Circle(s.pc,s.r),u=e.intersect(l);for(let f of u)f.on(s)&&r.push(f);return r}},i.line=(...t)=>new i.Line(...t)}),G_}var Z_,jw;function tE(){return jw||(jw=1,Z_=function(i){let{Arc:t,vector:e}=i;i.Circle=class k1{constructor(...r){if(this.pc=new i.Point,this.r=1,r.length==1&&r[0]instanceof Object&&r[0].name==="circle"){let{pc:l,r:u}=r[0];this.pc=new i.Point(l),this.r=u;return}else{let[l,u]=[...r];l&&l instanceof i.Point&&(this.pc=l.clone()),u!==void 0&&(this.r=u);return}}clone(){return new i.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new i.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(r){return i.Utils.LE(r.distanceTo(this.center)[0],this.r)}toArc(r=!0){return new i.Arc(this.center,this.r,Math.PI,-Math.PI,r)}intersect(r){if(r instanceof i.Point)return this.contains(r)?[r]:[];if(r instanceof i.Line)return r.intersect(this);if(r instanceof i.Segment)return r.intersect(this);if(r instanceof i.Circle)return k1.intersectCirle2Circle(this,r);if(r instanceof i.Arc)return r.intersect(this);if(r instanceof i.Polygon)return i.Polygon.intersectShape2Polygon(this,r)}distanceTo(r){let{Distance:l}=i,{point2circle:u,circle2circle:f,circle2line:p,segment2circle:m,arc2circle:v}=l;if(r instanceof i.Point){let[y,w]=u(r,this);return w=w.reverse(),[y,w]}if(r instanceof i.Circle){let[y,w]=f(this,r);return[y,w]}if(r instanceof i.Line){let[y,w]=p(this,r);return[y,w]}if(r instanceof i.Segment){let[y,w]=m(r,this);return w=w.reverse(),[y,w]}if(r instanceof i.Arc){let[y,w]=v(r,this);return w=w.reverse(),[y,w]}if(r instanceof i.Polygon){let[y,w]=l.shape2polygon(this,r);return[y,w]}if(r instanceof i.PlanarSet){let[y,w]=l.shape2planarSet(this,r);return[y,w]}}static intersectCirle2Circle(r,l){let u=[];if(r.box.not_intersect(l.box))return u;let f=new i.Vector(r.pc,l.pc),p=r.r,m=l.r;if(i.Utils.EQ_0(p)||i.Utils.EQ_0(m))return u;if(i.Utils.EQ_0(f.x)&&i.Utils.EQ_0(f.y)&&i.Utils.EQ(p,m))return u.push(r.pc.translate(-p,0)),u;let v=r.pc.distanceTo(l.pc)[0];if(i.Utils.GT(v,p+m)||i.Utils.LT(v,Math.abs(p-m)))return u;f.x/=v,f.y/=v;let y;if(i.Utils.EQ(v,p+m)||i.Utils.EQ(v,Math.abs(p-m)))return y=r.pc.translate(p*f.x,p*f.y),u.push(y),u;let w=p*p/(2*v)-m*m/(2*v)+v/2,T=r.pc.translate(w*f.x,w*f.y),x=Math.sqrt(p*p-w*w);return y=T.translate(f.rotate90CCW().multiply(x)),u.push(y),y=T.translate(f.rotate90CW().multiply(x)),u.push(y),u}svg(r={}){let{stroke:l,strokeWidth:u,fill:f,fillOpacity:p,id:m,className:v}=r,y=m&&m.length>0?`id="${m}"`:"",w=v&&v.length>0?`class="${v}"`:"";return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}" stroke="${l||"black"}" stroke-width="${u||1}" fill="${f||"none"}" fill-opacity="${p||1}" ${y} ${w} />`}toJSON(){return Object.assign({},this,{name:"circle"})}},i.circle=(...s)=>new i.Circle(...s)}),Z_}var W_,Gw;function eE(){return Gw||(Gw=1,W_=function(i){i.Segment=class na{constructor(...e){if(this.ps=new i.Point,this.pe=new i.Point,e.length!=0){if(e.length==1&&e[0]instanceof Array&&e[0].length==4){let s=e[0];this.ps=new i.Point(s[0],s[1]),this.pe=new i.Point(s[2],s[3]);return}if(e.length==1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:s,pe:r}=e[0];this.ps=new i.Point(s.x,s.y),this.pe=new i.Point(r.x,r.y);return}if(e.length==2&&e[0]instanceof i.Point&&e[1]instanceof i.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length==4){this.ps=new i.Point(e[0],e[1]),this.pe=new i.Point(e[2],e[3]);return}throw i.Errors.ILLEGAL_PARAMETERS}}clone(){return new i.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new i.Vector(this.start,this.end).slope}get box(){return new i.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return i.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof i.Point)return this.contains(e)?[e]:[];if(e instanceof i.Line)return na.intersectSegment2Line(this,e);if(e instanceof i.Segment)return na.intersectSegment2Segment(this,e);if(e instanceof i.Circle)return na.intersectSegment2Circle(this,e);if(e instanceof i.Arc)return na.intersectSegment2Arc(this,e);if(e instanceof i.Polygon)return i.Polygon.intersectShape2Polygon(this,e)}distanceTo(e){let{Distance:s}=i;if(e instanceof i.Point){let[r,l]=s.point2segment(e,this);return l=l.reverse(),[r,l]}if(e instanceof i.Circle){let[r,l]=s.segment2circle(this,e);return[r,l]}if(e instanceof i.Line){let[r,l]=s.segment2line(this,e);return[r,l]}if(e instanceof i.Segment){let[r,l]=s.segment2segment(this,e);return[r,l]}if(e instanceof i.Arc){let[r,l]=s.segment2arc(this,e);return[r,l]}if(e instanceof i.Polygon){let[r,l]=s.shape2polygon(this,e);return[r,l]}if(e instanceof i.PlanarSet){let[r,l]=s.shape2planarSet(this,e);return[r,l]}}tangentInStart(){return new i.Vector(this.start,this.end).normalize()}tangentInEnd(){return new i.Vector(this.end,this.start).normalize()}reverse(){return new na(this.end,this.start)}split(e){return this.contains(e)?this.start.equalTo(this.end)?[this.clone()]:this.start.equalTo(e)||this.end.equalTo(e)?[this]:[new i.Segment(this.start,e),new i.Segment(e,this.end)]:[]}middle(){return new i.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}distanceToPoint(e){let[s,...r]=i.Distance.point2segment(e,this);return s}definiteIntegral(e=0){let s=this.end.x-this.start.x,r=this.start.y-e,l=this.end.y-e;return s*(r+l)/2}translate(...e){return new na(this.ps.translate(...e),this.pe.translate(...e))}rotate(e=0,s=new i.Point){let r=new i.Matrix;return r=r.translate(s.x,s.y).rotate(e).translate(-s.x,-s.y),this.transform(r)}transform(e=new i.Matrix){return new na(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}static intersectSegment2Line(e,s){let r=[];return e.ps.on(s)&&r.push(e.ps),e.pe.on(s)&&!e.isZeroLength()&&r.push(e.pe),r.length>0||e.isZeroLength()||e.ps.leftTo(s)&&e.pe.leftTo(s)||!e.ps.leftTo(s)&&!e.pe.leftTo(s)?r:new i.Line(e.ps,e.pe).intersect(s)}static intersectSegment2Segment(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength())return e.ps.on(s)&&r.push(e.ps),r;if(s.isZeroLength())return s.ps.on(e)&&r.push(s.ps),r;let l=new i.Line(e.ps,e.pe),u=new i.Line(s.ps,s.pe);if(l.incidentTo(u))e.ps.on(s)&&r.push(e.ps),e.pe.on(s)&&r.push(e.pe),s.ps.on(e)&&!s.ps.equalTo(e.ps)&&!s.ps.equalTo(e.pe)&&r.push(s.ps),s.pe.on(e)&&!s.pe.equalTo(e.ps)&&!s.pe.equalTo(e.pe)&&r.push(s.pe);else{let f=l.intersect(u);f.length>0&&f[0].on(e)&&f[0].on(s)&&r.push(f[0])}return r}static intersectSegment2Circle(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength()){let[f,p]=e.ps.distanceTo(s.pc);return i.Utils.EQ(f,s.r)&&r.push(e.ps),r}let u=new i.Line(e.ps,e.pe).intersect(s);for(let f of u)f.on(e)&&r.push(f);return r}static intersectSegment2Arc(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength())return e.ps.on(s)&&r.push(e.ps),r;let l=new i.Line(e.ps,e.pe),u=new i.Circle(s.pc,s.r),f=l.intersect(u);for(let p of f)p.on(e)&&p.on(s)&&r.push(p);return r}svg(e={}){let{stroke:s,strokeWidth:r,id:l,className:u}=e,f=l&&l.length>0?`id="${l}"`:"",p=u&&u.length>0?`class="${u}"`:"";return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" stroke="${s||"black"}" stroke-width="${r||1}" ${f} ${p} />`}toJSON(){return Object.assign({},this,{name:"segment"})}},i.segment=(...t)=>new i.Segment(...t)}),W_}var Y_,Zw;function nE(){return Zw||(Zw=1,Y_=function(i){i.Arc=class mc{constructor(...e){if(this.pc=new i.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=i.CCW,e.length!=0)if(e.length==1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:s,r,startAngle:l,endAngle:u,counterClockwise:f}=e[0];this.pc=new i.Point(s.x,s.y),this.r=r,this.startAngle=l,this.endAngle=u,this.counterClockwise=f;return}else{let[s,r,l,u,f]=[...e];s&&s instanceof i.Point&&(this.pc=s.clone()),r!==void 0&&(this.r=r),l!==void 0&&(this.startAngle=l),u!==void 0&&(this.endAngle=u),f!==void 0&&(this.counterClockwise=f);return}}clone(){return new i.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(i.Utils.EQ(this.startAngle,this.endAngle))return 0;if(i.Utils.EQ(Math.abs(this.startAngle-this.endAngle),i.PIx2))return i.PIx2;let e;return this.counterClockwise?e=i.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+i.PIx2:e=i.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+i.PIx2,i.Utils.GT(e,i.PIx2)&&(e-=i.PIx2),i.Utils.LT(e,0)&&(e+=i.PIx2),e}get start(){return new i.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new i.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let s=this.breakToFunctional().reduce((r,l)=>r.merge(l.start.box),new i.Box);return s=s.merge(this.end.box),s}contains(e){if(!i.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let s=new i.Vector(this.pc,e).slope,r=new i.Arc(this.pc,this.r,this.startAngle,s,this.counterClockwise);return i.Utils.LE(r.length,this.length)}split(e){if(!this.contains(e))return[];if(i.Utils.EQ_0(this.sweep))return[this.clone()];if(this.start.equalTo(e)||this.end.equalTo(e))return[this.clone()];let s=new i.Vector(this.pc,e).slope;return[new i.Arc(this.pc,this.r,this.startAngle,s,this.counterClockwise),new i.Arc(this.pc,this.r,s,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new i.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof i.Point)return this.contains(e)?[e]:[];if(e instanceof i.Line)return e.intersect(this);if(e instanceof i.Circle)return mc.intersectArc2Circle(this,e);if(e instanceof i.Segment)return e.intersect(this);if(e instanceof i.Arc)return mc.intersectArc2Arc(this,e);if(e instanceof i.Polygon)return i.Polygon.intersectShape2Polygon(this,e)}distanceTo(e){let{Distance:s}=i;if(e instanceof i.Point){let[r,l]=s.point2arc(e,this);return l=l.reverse(),[r,l]}if(e instanceof i.Circle){let[r,l]=s.arc2circle(this,e);return[r,l]}if(e instanceof i.Line){let[r,l]=s.arc2line(this,e);return[r,l]}if(e instanceof i.Segment){let[r,l]=s.segment2arc(e,this);return l=l.reverse(),[r,l]}if(e instanceof i.Arc){let[r,l]=s.arc2arc(this,e);return[r,l]}if(e instanceof i.Polygon){let[r,l]=s.shape2polygon(this,e);return[r,l]}if(e instanceof i.PlanarSet){let[r,l]=s.shape2planarSet(this,e);return[r,l]}}breakToFunctional(){let e=[],s=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],l=[];for(let u=0;u<4;u++)r[u].on(this)&&l.push(new i.Arc(this.pc,this.r,this.startAngle,s[u],this.counterClockwise));if(l.length==0)e.push(this.clone());else{l.sort((p,m)=>p.length-m.length);for(let p=0;p<l.length;p++){let m=e.length>0?e[e.length-1]:void 0,v;m?v=new i.Arc(this.pc,this.r,m.endAngle,l[p].endAngle,this.counterClockwise):v=new i.Arc(this.pc,this.r,this.startAngle,l[p].endAngle,this.counterClockwise),i.Utils.EQ_0(v.length)||e.push(v.clone())}let u=e.length>0?e[e.length-1]:void 0,f;u?f=new i.Arc(this.pc,this.r,u.endAngle,this.endAngle,this.counterClockwise):f=new i.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),i.Utils.EQ_0(f.length)||e.push(f.clone())}return e}tangentInStart(){let e=new i.Vector(this.pc,this.start),s=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(s).normalize()}tangentInEnd(){let e=new i.Vector(this.pc,this.end),s=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(s).normalize()}reverse(){return new mc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}translate(...e){let s=this.clone();return s.pc=this.pc.translate(...e),s}rotate(e=0,s=new i.Point){let r=new i.Matrix;return r=r.translate(s.x,s.y).rotate(e).translate(-s.x,-s.y),this.transform(r)}transform(e=new i.Matrix){let s=this.start.transform(e),r=this.end.transform(e),l=this.pc.transform(e);return mc.arcSE(l,s,r,this.counterClockwise)}static arcSE(e,s,r,l){let{vector:u}=i,f=u(e,s).slope,p=u(e,r).slope;i.Utils.EQ(f,p)&&(p+=2*Math.PI,l=!0);let m=u(e,s).length;return new mc(e,m,f,p,l)}static intersectArc2Arc(e,s){var r=[];if(e.box.not_intersect(s.box))return r;if(e.pc.equalTo(s.pc)&&i.Utils.EQ(e.r,s.r)){let p;return p=e.start,p.on(s)&&r.push(p),p=e.end,p.on(s)&&r.push(p),p=s.start,p.on(e)&&r.push(p),p=s.end,p.on(e)&&r.push(p),r}let l=new i.Circle(e.pc,e.r),u=new i.Circle(s.pc,s.r),f=l.intersect(u);for(let p of f)p.on(e)&&p.on(s)&&r.push(p);return r}static intersectArc2Circle(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(s.pc.equalTo(e.pc)&&i.Utils.EQ(s.r,e.r))return r.push(e.start),r.push(e.end),r;let l=s,u=new i.Circle(e.pc,e.r),f=l.intersect(u);for(let p of f)p.on(e)&&r.push(p);return r}definiteIntegral(e=0){return this.breakToFunctional().reduce((l,u)=>l+u.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let s=new i.Line(this.start,this.end),r=this.pc.leftTo(s),u=new i.Segment(this.start,this.end).definiteIntegral(e),f=this.circularSegmentArea();return r?u-f:u+f}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}svg(e={}){let s=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0",{stroke:l,strokeWidth:u,fill:f,id:p,className:m}=e,v=p&&p.length>0?`id="${p}"`:"",y=m&&m.length>0?`class="${m}"`:"";return i.Utils.EQ(this.sweep,2*Math.PI)?new i.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${s},${r} ${this.end.x},${this.end.y}"
                    stroke="${l||"black"}" stroke-width="${u||1}" fill="${f||"none"}" ${v} ${y} />`}toJSON(){return Object.assign({},this,{name:"arc"})}},i.arc=(...t)=>new i.Arc(...t)}),Y_}var X_,Ww;function iE(){return Ww||(Ww=1,X_=function(i){i.Box=class Ag{constructor(e=void 0,s=void 0,r=void 0,l=void 0){this.xmin=e,this.ymin=s,this.xmax=r,this.ymax=l}clone(){return new Ag(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new i.Point(this.xmin,this.ymin)}get high(){return new i.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new i.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new Ag(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}maximal_val(e,s){return e.merge(s)}val_less_than(e,s){return e.lessThan(s)}set(e,s,r,l){this.xmin=e,this.ymin=s,this.xmax=r,this.ymax=l}svg(e={}){let{stroke:s,strokeWidth:r,fill:l,id:u,className:f}=e,p=u&&u.length>0?`id="${u}"`:"",m=f&&f.length>0?`class="${f}"`:"",v=this.xmax-this.xmin,y=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width=${v} height=${y} stroke="${s||"black"}" stroke-width="${r||1}" fill="${l||"none"}" ${p} ${m} />`}},i.box=(...t)=>new i.Box(...t)}),X_}var F_,Yw;function sE(){return Yw||(Yw=1,F_=function(i){i.Edge=class{constructor(e){this.shape=e,this.next,this.prev,this.face,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}isSegment(){return this.shape instanceof i.Segment}isArc(){return this.shape instanceof i.Arc}middle(){return this.shape.middle()}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.bvStart===void 0&&(this.bvStart=i.ray_shoot(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=i.ray_shoot(e,this.end)),this.bvStart===i.OUTSIDE||this.bvEnd==i.OUTSIDE)this.bv=i.OUTSIDE;else if(this.bvStart===i.INSIDE||this.bvEnd==i.INSIDE)this.bv=i.INSIDE;else{let s=i.ray_shoot(e,this.middle());this.bv=s}return this.bv}setOverlap(e){let s,r=this.shape,l=e.shape;r instanceof i.Segment&&l instanceof i.Segment?r.start.equalTo(l.start)&&r.end.equalTo(l.end)?s=i.OVERLAP_SAME:r.start.equalTo(l.end)&&r.end.equalTo(l.start)&&(s=i.OVERLAP_OPPOSITE):(r instanceof i.Arc&&l instanceof i.Arc||r instanceof i.Segment&&l instanceof i.Arc||r instanceof i.Arc&&l instanceof i.Segment)&&(r.start.equalTo(l.start)&&r.end.equalTo(l.end)&&r.middle().equalTo(l.middle())?s=i.OVERLAP_SAME:r.start.equalTo(l.end)&&r.end.equalTo(l.start)&&r.middle().equalTo(l.middle())&&(s=i.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=s),e.overlap===void 0&&(e.overlap=s)}svg(){if(this.shape instanceof i.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof i.Arc){let e=this.shape,s,r=e.counterClockwise?"1":"0";if(i.Utils.EQ(e.sweep,2*Math.PI)){let l=e.counterClockwise?1:-1,u=new i.Arc(e.pc,e.r,e.startAngle,e.startAngle+l*Math.PI,e.counterClockwise),f=new i.Arc(e.pc,e.r,e.startAngle+l*Math.PI,e.endAngle,e.counterClockwise);return s="0",` A${u.r},${u.r} 0 ${s},${r} ${u.end.x},${u.end.y}
                    A${f.r},${f.r} 0 ${s},${r} ${f.end.x},${f.end.y}`}else return s=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${s},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}}),F_}var Q_,Xw;function rE(){return Xw||(Xw=1,Q_=function(i){let{Point:t,point:e,Segment:s,segment:r,Arc:l,Box:u,Edge:f,Circle:p}=i;i.Face=class vd{constructor(v,...y){if(this.first,this.last,this._box=void 0,this._orientation=void 0,y.length!=0){if(y.length==1){if(y[0]instanceof Array){let w=y[0];if(w.length==0)return;if(w.every(T=>T instanceof t)){let T=vd.points2segments(w);this.shapes2face(v.edges,T)}else if(w.every(T=>T instanceof s||T instanceof l))this.shapes2face(v.edges,w);else if(w.every(T=>T.name==="segment"||T.name==="arc")){let T=[];for(let x of w){let A;x.name==="segment"?A=new s(x):A=new l(x),T.push(A)}this.shapes2face(v.edges,T)}}else if(y[0]instanceof vd){let w=y[0];this.first=w.first,this.last=w.last;for(let T of w)v.edges.add(T)}else if(y[0]instanceof p)this.shapes2face(v.edges,[y[0].toArc(i.CCW)]);else if(y[0]instanceof u){let w=y[0];this.shapes2face(v.edges,[r(e(w.xmin,w.ymin),e(w.xmax,w.ymin)),r(e(w.xmax,w.ymin),e(w.xmax,w.ymax)),r(e(w.xmax,w.ymax),e(w.xmin,w.ymax)),r(e(w.xmin,w.ymax),e(w.xmin,w.ymin))])}}y.length==2&&y[0]instanceof f&&y[1]instanceof f&&(this.first=y[0],this.last=y[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}[Symbol.iterator](){let v;return{next:()=>{let y=v||this.first,w=this.first?v?v===this.first:!1:!0;return v=y?y.next:void 0,{value:y,done:w}}}}get edges(){let v=[];for(let y of this)v.push(y);return v}get size(){let v=0;for(let y of this)v++;return v}get box(){if(this._box===void 0){let v=new i.Box;for(let y of this)v=v.merge(y.box);this._box=v}return this._box}static points2segments(v){let y=[];for(let w=0;w<v.length;w++)y.push(new s(v[w],v[(w+1)%v.length]));return y}shapes2face(v,y){for(let w of y){let T=new f(w);this.append(v,T)}}isEmpty(){return this.first===void 0&&this.last===void 0}append(v,y){this.first===void 0?(y.prev=y,y.next=y,this.first=y,this.last=y,y.arc_length=0):(y.prev=this.last,this.last.next=y,this.last=y,this.last.next=this.first,this.first.prev=this.last,y.arc_length=y.prev.arc_length+y.prev.length),y.face=this,v.add(y)}insert(v,y,w){if(this.first===void 0)y.prev=y,y.next=y,this.first=y,this.last=y;else{let T=w.next;w.next=y,T.prev=y,y.prev=w,y.next=T,this.last===w&&(this.first=y)}y.face=this,y.prev===this.last?y.arc_length=0:y.arc_length=y.prev.arc_length+y.prev.length,v.add(y)}remove(v,y){y===this.first&&y===this.last?(this.first=void 0,this.last=void 0):(y.prev.next=y.next,y.next.prev=y.prev,y===this.first&&(this.first=y.next),y===this.last&&(this.last=y.prev)),v.delete(y)}reverse(){let v=[],y=this.last;do y.shape=y.shape.reverse(),v.push(y),y=y.prev;while(y!==this.last);this.first=void 0,this.last=void 0;for(let w of v)this.first===void 0?(w.prev=w,w.next=w,this.first=w,this.last=w,w.arc_length=0):(w.prev=this.last,this.last.next=w,this.last=w,this.last.next=this.first,this.first.prev=this.last,w.arc_length=w.prev.arc_length+w.prev.length);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let v of this)v===this.first?v.arc_length=0:v.arc_length=v.prev.arc_length+v.prev.length,v.face=this}area(){return Math.abs(this.signedArea())}signedArea(){let v=0,y=this.box.ymin;for(let w of this)v+=w.shape.definiteIntegral(y);return v}orientation(){if(this._orientation===void 0){let v=this.signedArea();i.Utils.EQ_0(v)?this._orientation=i.ORIENTATION.NOT_ORIENTABLE:i.Utils.LT(v,0)?this._orientation=i.ORIENTATION.CCW:this._orientation=i.ORIENTATION.CW}return this._orientation}isSimple(v){return vd.getSelfIntersections(this,v,!0).length==0}static getSelfIntersections(v,y,w=!1){let T=[];for(let x of v){let A=y.search(x.box);for(let E of A){if(x===E||x.shape instanceof i.Segment&&E.shape instanceof i.Segment&&(x.next===E||x.prev===E))continue;let I=x.shape.intersect(E.shape);for(let B of I)if(!(B.equalTo(x.start)&&B.equalTo(E.end)&&E===x.prev)&&!(B.equalTo(x.end)&&B.equalTo(E.start)&&E===x.next)&&(T.push(B),w))break;if(T.length>0&&w)break}if(T.length>0&&w)break}return T}toJSON(){return this.edges.map(v=>v.toJSON())}svg(){let v=`
M${this.first.start.x},${this.first.start.y}`;for(let y of this)v+=y.svg();return v+=" z",v}}}),Q_}var K_,Fw;function oE(){return Fw||(Fw=1,K_=function(i){let{Point:t,Segment:e,Line:s,Circle:r,Arc:l,Box:u,Vector:f}=i;i.Ray=class D1{constructor(...m){if(this.pt=new t,m.length!=0){if(m.length==1&&m[0]instanceof t){this.pt=m[0].clone();return}if(m.length==2&&typeof m[0]=="number"&&typeof m[1]=="number"){this.pt=new t(m[0],m[1]);return}throw i.Errors.ILLEGAL_PARAMETERS}}clone(){return new D1(this.pt)}get box(){return new u(this.pt.x,this.pt.y,Number.POSITIVE_INFINITY,this.pt.y)}get start(){return this.pt}get norm(){return new f(0,1)}intersect(m){if(m instanceof e)return this.intersectRay2Segment(this,m);if(m instanceof l)return this.intersectRay2Arc(this,m)}intersectRay2Segment(m,v){let y=[];if(m.box.not_intersect(v.box))return y;let w=new s(m.start,m.norm),T=w.intersect(v);for(let x of T)i.Utils.GE(x.x,m.start.x)&&y.push(x);return T.length==2&&y.length==1&&m.start.on(w)&&y.push(m.start),y}intersectRay2Arc(m,v){let y=[];if(m.box.not_intersect(v.box))return y;let T=new s(m.start,m.norm).intersect(v);for(let x of T)i.Utils.GE(x.x,m.start.x)&&y.push(x);return y}},i.ray=(...p)=>new i.Ray(...p)}),K_}var J_,Qw;function aE(){return Qw||(Qw=1,J_=function(i){let{Polygon:t,Point:e,Segment:s,Arc:r,Line:l,Ray:u}=i;i.ray_shoot=function(f,p){let m;if(f.box.not_intersect(p.box))return i.OUTSIDE;let v=new u(p),y=new l(v.pt,v.norm),w=f.edges.search(v.box);if(w.length==0)return i.OUTSIDE;let T=[];for(let A of w)for(let E of v.intersect(A.shape)){if(E.equalTo(p))return i.BOUNDARY;T.push({pt:E,edge:A})}T.sort((A,E)=>i.Utils.LT(A.pt.x,E.pt.x)?-1:i.Utils.GT(A.pt.x,E.pt.x)?1:0);let x=0;for(let A=0;A<T.length;A++){let E=T[A];if(E.pt.equalTo(E.edge.shape.start)){if(A>0&&E.pt.equalTo(T[A-1].pt)&&E.edge.prev===T[A-1].edge)continue;let I=E.edge.prev;for(;i.Utils.EQ_0(I.length);)I=I.prev;let B=I.shape.tangentInEnd(),D=E.pt.translate(B),F=E.edge.shape.tangentInStart(),R=E.pt.translate(F),H=D.leftTo(y),Z=R.leftTo(y);(H&&!Z||!H&&Z)&&x++}else if(E.pt.equalTo(E.edge.shape.end)){if(A>0&&E.pt.equalTo(T[A-1].pt)&&E.edge.next===T[A-1].edge)continue;let I=E.edge.next;for(;i.Utils.EQ_0(I.length);)I=I.next;let B=I.shape.tangentInStart(),D=E.pt.translate(B),F=E.edge.shape.tangentInEnd(),R=E.pt.translate(F),H=D.leftTo(y),Z=R.leftTo(y);(H&&!Z||!H&&Z)&&x++}else if(E.edge.shape instanceof s)x++;else{let I=E.edge.shape.box;i.Utils.EQ(E.pt.y,I.ymin)||i.Utils.EQ(E.pt.y,I.ymax)||x++}}return m=x%2==1?i.INSIDE:i.OUTSIDE,m}}),J_}var $_,Kw;function lE(){return Kw||(Kw=1,$_=function(i){let{Edge:t,Face:e,PlanarSet:s,Box:r}=i,{ray_shoot:l}=i;i.Polygon=class no{constructor(){this.faces=new s,this.edges=new s}get box(){return[...this.faces].reduce((f,p)=>f.merge(p.box),new r)}get vertices(){return[...this.edges].map(f=>f.start)}isEmpty(){return this.edges.size===0}addFace(...f){let p=new e(this,...f);return this.faces.add(p),p}deleteFace(f){for(let m of f)this.edges.delete(m);return this.faces.delete(f)}removeChain(f,p,m){if(m.next===p){this.deleteFace(f);return}for(let v=p;v!==m.next;v=v.next)if(f.remove(this.edges,v),f.isEmpty()){this.deleteFace(f);break}}addVertex(f,p){let m=p.shape.split(f);if(m.length<2)return;let v=new i.Edge(m[0]),y=p.prev;return p.face.insert(this.edges,v,y),this.edges.delete(p),p.shape=m[1],this.edges.add(p),v}reverse(){for(let f of this.faces)f.reverse();return this}clone(){let f=new no;for(let p of this.faces){let m=[];for(let v of p)m.push(v.shape.clone());f.addFace(m)}return f}area(){let f=[...this.faces].reduce((p,m)=>p+m.signedArea(),0);return Math.abs(f)}contains(f){let p=l(this,f);return p==i.INSIDE||p==i.BOUNDARY}distanceTo(f){let{Distance:p}=i;if(f instanceof i.Point){let[m,v]=p.point2polygon(f,this);return v=v.reverse(),[m,v]}if(f instanceof i.Circle||f instanceof i.Line||f instanceof i.Segment||f instanceof i.Arc){let[m,v]=p.shape2polygon(f,this);return v=v.reverse(),[m,v]}if(f instanceof i.Polygon){let m=[Number.POSITIVE_INFINITY,new i.Segment],v,y;for(let w of this.edges){let T=m[0];[v,y]=p.shape2planarSet(w.shape,f.edges,T),i.Utils.LT(v,T)&&(m=[v,y])}return m}}intersect(f){if(f instanceof i.Point)return this.contains(f)?[f]:[];if(f instanceof i.Line)return no.intersectLine2Polygon(f,this);if(f instanceof i.Circle||f instanceof i.Segment||f instanceof i.Arc)return no.intersectShape2Polygon(f,this);if(f instanceof i.Polygon)return no.intersectPolygon2Polygon(f,this)}isValid(){let f=!0;for(let p of this.faces)if(!p.isSimple(this.edges)){f=!1;break}return f}translate(f){let p=new no;for(let m of this.faces){let v=[];for(let y of m)v.push(y.shape.translate(f));p.addFace(v)}return p}rotate(f=0,p=new i.Point){let m=new no;for(let v of this.faces){let y=[];for(let w of v)y.push(w.shape.rotate(f,p));m.addFace(y)}return m}transform(f=new i.Matrix){let p=new no;for(let m of this.faces){let v=[];for(let y of m)v.push(y.shape.transform(f));p.addFace(v)}return p}static intersectShape2Polygon(f,p){let m=[];if(p.isEmpty()||f.box.not_intersect(p.box))return m;let v=p.edges.search(f.box);for(let y of v)for(let w of f.intersect(y.shape))m.push(w);return m}static intersectLine2Polygon(f,p){let m=[];if(p.isEmpty())return m;for(let v of p.edges)for(let y of f.intersect(v.shape))m.push(y);return m}static intersectPolygon2Polygon(f,p){let m=[];if(f.isEmpty()||p.isEmpty()||f.box.not_intersect(p.box))return m;for(let v of f.edges)for(let y of no.intersectShape2Polygon(v.shape,p))m.push(y);return m}svg(f={}){let{stroke:p,strokeWidth:m,fill:v,fillRule:y,fillOpacity:w,id:T,className:x}=f,A=T&&T.length>0?`id="${T}"`:"",E=x&&x.length>0?`class="${x}"`:"",I=`
<path stroke="${p||"black"}" stroke-width="${m||1}" fill="${v||"lightcyan"}" fill-rule="${y||"evenodd"}" fill-opacity="${w||1}" ${A} ${E} d="`;for(let B of this.faces)I+=B.svg();return I+=`" >
</path>`,I}toJSON(){return[...this.faces].map(f=>f.toJSON())}}}),$_}var tg,Jw;function cE(){if(Jw)return tg;Jw=1;let i=L1();return tg=function(t){let{Polygon:e,Point:s,Segment:r,Arc:l,Circle:u,Line:f,Ray:p,Vector:m}=t,{vector:v}=t;t.Distance=class Ut{static point2point(w,T){return w.distanceTo(T)}static point2line(w,T){let x=w.projectionOn(T);return[v(w,x).length,new r(w,x)]}static point2circle(w,T){let[x,A]=w.distanceTo(T.center);if(t.Utils.EQ_0(x))return[T.r,new r(w,T.toArc().start)];{let E=Math.abs(x-T.r),I=v(T.pc,w).normalize().multiply(T.r),B=T.pc.translate(I);return[E,new r(w,B)]}}static point2segment(w,T){if(T.start.equalTo(T.end))return Ut.point2point(w,T.start);let x=new t.Vector(T.start,T.end),A=new t.Vector(T.start,w),E=new t.Vector(T.end,w),I=x.dot(A),B=-x.dot(E),D,F;if(t.Utils.GE(I,0)&&t.Utils.GE(B,0)){let R=T.tangentInStart();return D=Math.abs(R.cross(A)),F=T.start.translate(R.multiply(R.dot(A))),[D,new r(w,F)]}else return I<0?w.distanceTo(T.start):w.distanceTo(T.end)}static point2arc(w,T){let x=new t.Circle(T.pc,T.r),A=[],E,I;return[E,I]=Ut.point2circle(w,x),I.end.on(T)&&A.push(Ut.point2circle(w,x)),A.push(Ut.point2point(w,T.start)),A.push(Ut.point2point(w,T.end)),Ut.sort(A),A[0]}static segment2line(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let A=[];return A.push(Ut.point2line(w.start,T)),A.push(Ut.point2line(w.end,T)),Ut.sort(A),A[0]}static segment2segment(w,T){let x=r.intersectSegment2Segment(w,T);if(x.length>0)return[0,new r(x[0],x[0])];let A=[];return A.push(Ut.point2segment(T.start,w)),A.push(Ut.point2segment(T.end,w)),A.push(Ut.point2segment(w.start,T)),A.push(Ut.point2segment(w.end,T)),Ut.sort(A),A[0]}static segment2circle(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Line(w.ps,w.pe),[E,I]=Ut.point2line(T.center,A);if(t.Utils.GE(E,T.r)&&I.end.on(w))return Ut.point2circle(I.end,T);{let[B,D]=Ut.point2circle(w.start,T),[F,R]=Ut.point2circle(w.end,T);return t.Utils.LT(B,F)?[B,D]:[F,R]}}static segment2arc(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Line(w.ps,w.pe),E=new t.Circle(T.pc,T.r),[I,B]=Ut.point2line(E.center,A);if(t.Utils.GE(I,E.r)&&B.end.on(w)){let[H,Z]=Ut.point2circle(B.end,E);if(Z.end.on(T))return[H,Z]}let D=[];D.push(Ut.point2arc(w.start,T)),D.push(Ut.point2arc(w.end,T));let F,R;return[F,R]=Ut.point2segment(T.start,w),D.push([F,R.reverse()]),[F,R]=Ut.point2segment(T.end,w),D.push([F,R.reverse()]),Ut.sort(D),D[0]}static circle2circle(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];if(w.center.equalTo(T.center)){let A=w.toArc(),E=T.toArc();return Ut.point2point(A.start,E.start)}else{let A=new f(w.center,T.center),E=A.intersect(w),I=A.intersect(T),B=[];return B.push(Ut.point2point(E[0],I[0])),B.push(Ut.point2point(E[0],I[1])),B.push(Ut.point2point(E[1],I[0])),B.push(Ut.point2point(E[1],I[1])),Ut.sort(B),B[0]}}static circle2line(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let[A,E]=Ut.point2line(w.center,T),[I,B]=Ut.point2circle(E.end,w);return B=B.reverse(),[I,B]}static arc2line(w,T){let x=T.intersect(w);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Circle(w.center,w.r),[E,I]=Ut.point2line(A.center,T);if(t.Utils.GE(E,A.r)){let[B,D]=Ut.point2circle(I.end,A);if(D.end.on(w))return[B,D]}else{let B=[];return B.push(Ut.point2line(w.start,T)),B.push(Ut.point2line(w.end,T)),Ut.sort(B),B[0]}}static arc2circle(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Circle(w.center,w.r),[E,I]=Ut.circle2circle(A,T);if(I.start.on(w))return[E,I];{let B=[];return B.push(Ut.point2circle(w.start,T)),B.push(Ut.point2circle(w.end,T)),Ut.sort(B),B[0]}}static arc2arc(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Circle(w.center,w.r),E=new t.Circle(T.center,T.r),[I,B]=Ut.circle2circle(A,E);if(B.start.on(w)&&B.end.on(T))return[I,B];{let D=[],F,R;return[F,R]=Ut.point2arc(w.start,T),R.end.on(T)&&D.push([F,R]),[F,R]=Ut.point2arc(w.end,T),R.end.on(T)&&D.push([F,R]),[F,R]=Ut.point2arc(T.start,w),R.end.on(w)&&D.push([F,R.reverse()]),[F,R]=Ut.point2arc(T.end,w),R.end.on(w)&&D.push([F,R.reverse()]),[F,R]=Ut.point2point(w.start,T.start),D.push([F,R]),[F,R]=Ut.point2point(w.start,T.end),D.push([F,R]),[F,R]=Ut.point2point(w.end,T.start),D.push([F,R]),[F,R]=Ut.point2point(w.end,T.end),D.push([F,R]),Ut.sort(D),D[0]}}static point2polygon(w,T){let x=[Number.POSITIVE_INFINITY,new r];for(let A of T.edges){let[E,I]=A.shape instanceof r?Ut.point2segment(w,A.shape):Ut.point2arc(w,A.shape);t.Utils.LT(E,x[0])&&(x=[E,I])}return x}static shape2polygon(w,T){let x=[Number.POSITIVE_INFINITY,new r];for(let A of T.edges){let[E,I]=w.distanceTo(A.shape);t.Utils.LT(E,x[0])&&(x=[E,I])}return x}static polygon2polygon(w,T){let x=[Number.POSITIVE_INFINITY,new t.Segment];for(let A of w.edges)for(let E of T.edges){let[I,B]=A.shape.distanceTo(E.shape);t.Utils.LT(I,x[0])&&(x=[I,B])}return x}static box2box_minmax(w,T){let x=Math.max(Math.max(w.xmin-T.xmax,0),Math.max(T.xmin-w.xmax,0)),A=Math.max(Math.max(w.ymin-T.ymax,0),Math.max(T.ymin-w.ymax,0)),E=x*x+A*A,I=w.merge(T),B=I.xmax-I.xmin,D=I.ymax-I.ymin,F=B*B+D*D;return[E,F]}static minmax_tree_process_level(w,T,x,A){let E,I;for(let R of T)[E,I]=Ut.box2box_minmax(w.box,R.item.key),R.item.value instanceof t.Edge?A.insert([E,I],R.item.value.shape):A.insert([E,I],R.item.value),t.Utils.LT(I,x)&&(x=I);if(T.length===0)return x;let B=T.map(R=>R.left.isNil()?void 0:R.left).filter(R=>R!==void 0),D=T.map(R=>R.right.isNil()?void 0:R.right).filter(R=>R!==void 0),F=[...B,...D].filter(R=>{let[H,Z]=Ut.box2box_minmax(w.box,R.max);return t.Utils.LE(H,x)});return x=Ut.minmax_tree_process_level(w,F,x,A),x}static minmax_tree(w,T,x){let A=new i,E=[T.index.root],I=x<Number.POSITIVE_INFINITY?x*x:Number.POSITIVE_INFINITY;return I=Ut.minmax_tree_process_level(w,E,I,A),A}static minmax_tree_calc_distance(w,T,x){let A,E;if(T!=null&&!T.isNil()){if([A,E]=Ut.minmax_tree_calc_distance(w,T.left,x),E)return[A,E];if(t.Utils.LT(A[0],Math.sqrt(T.item.key.low)))return[A,!0];let[I,B]=Ut.distance(w,T.item.value);return t.Utils.LT(I,A[0])&&(A=[I,B]),[A,E]=Ut.minmax_tree_calc_distance(w,T.right,A),[A,E]}return[x,!1]}static shape2planarSet(w,T,x=Number.POSITIVE_INFINITY){let A=[x,new t.Segment],E=!1;if(T instanceof t.PlanarSet){let I=Ut.minmax_tree(w,T,x);[A,E]=Ut.minmax_tree_calc_distance(w,I.root,A)}return A}static sort(w){w.sort((T,x)=>t.Utils.LT(T[0],x[0])?-1:t.Utils.GT(T[0],x[0])?1:0)}static distance(w,T){return w.distanceTo(T)}}},tg}var eg,$w;function uE(){if($w)return eg;$w=1;let i=ZA(),t=WA(),e=class{constructor(){this.DP_TOL=i.DP_TOL,this.CCW=!0,this.CW=!1,this.ORIENTATION={CCW:-1,CW:1,NOT_ORIENTABLE:0},this.PIx2=2*Math.PI,this.INSIDE=1,this.OUTSIDE=0,this.BOUNDARY=2,this.CONTAINS=3,this.INTERLACE=4,this.OVERLAP_SAME=1,this.OVERLAP_OPPOSITE=2,this.Utils=i,this.Errors=t}},s=new e;return YA()(s),QA()(s),KA()(s),JA()(s),$A()(s),tE()(s),eE()(s),nE()(s),iE()(s),sE()(s),rE()(s),oE()(s),aE()(s),lE()(s),cE()(s),eg=s,eg}var hE=uE();const Jo=gh(hE),O1="15.1.22",tx=(i,t,e)=>({endTime:t,insertTime:e,type:"exponentialRampToValue",value:i}),ex=(i,t,e)=>({endTime:t,insertTime:e,type:"linearRampToValue",value:i}),Eg=(i,t)=>({startTime:t,type:"setValue",value:i}),R1=(i,t,e)=>({duration:e,startTime:t,type:"setValueCurve",values:i}),I1=(i,t,{startTime:e,target:s,timeConstant:r})=>s+(t-s)*Math.exp((e-i)/r),vc=i=>i.type==="exponentialRampToValue",Ld=i=>i.type==="linearRampToValue",ia=i=>vc(i)||Ld(i),i0=i=>i.type==="setValue",so=i=>i.type==="setValueCurve",Md=(i,t,e,s)=>{const r=i[t];return r===void 0?s:ia(r)||i0(r)?r.value:so(r)?r.values[r.values.length-1]:I1(e,Md(i,t-1,r.startTime,s),r)},nx=(i,t,e,s,r)=>e===void 0?[s.insertTime,r]:ia(e)?[e.endTime,e.value]:i0(e)?[e.startTime,e.value]:so(e)?[e.startTime+e.duration,e.values[e.values.length-1]]:[e.startTime,Md(i,t-1,e.startTime,r)],Cg=i=>i.type==="cancelAndHold",Lg=i=>i.type==="cancelScheduledValues",$o=i=>Cg(i)||Lg(i)?i.cancelTime:vc(i)||Ld(i)?i.endTime:i.startTime,ix=(i,t,e,{endTime:s,value:r})=>e===r?r:0<e&&0<r||e<0&&r<0?e*(r/e)**((i-t)/(s-t)):0,sx=(i,t,e,{endTime:s,value:r})=>e+(i-t)/(s-t)*(r-e),fE=(i,t)=>{const e=Math.floor(t),s=Math.ceil(t);return e===s?i[e]:(1-(t-e))*i[e]+(1-(s-t))*i[s]},dE=(i,{duration:t,startTime:e,values:s})=>{const r=(i-e)/t*(s.length-1);return fE(s,r)},sd=i=>i.type==="setTarget";class pE{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=$o(t);if(Cg(t)||Lg(t)){const s=this._automationEvents.findIndex(l=>Lg(t)&&so(l)?l.startTime+l.duration>=e:$o(l)>=e),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Cg(t)){const l=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&ia(r)){if(l!==void 0&&sd(l))throw new Error("The internal list is malformed.");const u=l===void 0?r.insertTime:so(l)?l.startTime+l.duration:$o(l),f=l===void 0?this._defaultValue:so(l)?l.values[l.values.length-1]:l.value,p=vc(r)?ix(e,u,f,r):sx(e,u,f,r),m=vc(r)?tx(p,e,this._currenTime):ex(p,e,this._currenTime);this._automationEvents.push(m)}if(l!==void 0&&sd(l)&&this._automationEvents.push(Eg(this.getValue(e),e)),l!==void 0&&so(l)&&l.startTime+l.duration>e){const u=e-l.startTime,f=(l.values.length-1)/l.duration,p=Math.max(2,1+Math.ceil(u*f)),m=u/(p-1)*f,v=l.values.slice(0,p);if(m<1)for(let y=1;y<p;y+=1){const w=m*y%1;v[y]=l.values[y-1]*(1-w)+l.values[y]*w}this._automationEvents[this._automationEvents.length-1]=R1(v,l.startTime,u)}}}else{const s=this._automationEvents.findIndex(u=>$o(u)>e),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&so(r)&&$o(r)+r.duration>e)return!1;const l=vc(t)?tx(t.value,t.endTime,this._currenTime):Ld(t)?ex(t.value,e,this._currenTime):t;if(s===-1)this._automationEvents.push(l);else{if(so(t)&&e+t.duration>$o(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,l)}}return!0}flush(t){const e=this._automationEvents.findIndex(s=>$o(s)>t);if(e>1){const s=this._automationEvents.slice(e-1),r=s[0];sd(r)&&s.unshift(Eg(Md(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const e=this._automationEvents.findIndex(u=>$o(u)>t),s=this._automationEvents[e],r=(e===-1?this._automationEvents.length:e)-1,l=this._automationEvents[r];if(l!==void 0&&sd(l)&&(s===void 0||!ia(s)||s.insertTime>t))return I1(t,Md(this._automationEvents,r-1,l.startTime,this._defaultValue),l);if(l!==void 0&&i0(l)&&(s===void 0||!ia(s)))return l.value;if(l!==void 0&&so(l)&&(s===void 0||!ia(s)||l.startTime+l.duration>t))return t<l.startTime+l.duration?dE(t,l):l.values[l.values.length-1];if(l!==void 0&&ia(l)&&(s===void 0||!ia(s)))return l.value;if(s!==void 0&&vc(s)){const[u,f]=nx(this._automationEvents,r,l,s,this._defaultValue);return ix(t,u,f,s)}if(s!==void 0&&Ld(s)){const[u,f]=nx(this._automationEvents,r,l,s,this._defaultValue);return sx(t,u,f,s)}return this._defaultValue}}const mE=i=>({cancelTime:i,type:"cancelAndHold"}),_E=i=>({cancelTime:i,type:"cancelScheduledValues"}),gE=(i,t)=>({endTime:t,type:"exponentialRampToValue",value:i}),yE=(i,t)=>({endTime:t,type:"linearRampToValue",value:i}),vE=(i,t,e)=>({startTime:t,target:i,timeConstant:e,type:"setTarget"}),bE=()=>new DOMException("","AbortError"),wE=i=>(t,e,[s,r,l],u)=>{i(t[r],[e,s,l],f=>f[0]===e&&f[1]===s,u)},xE=i=>(t,e,s)=>{const r=[];for(let l=0;l<s.numberOfInputs;l+=1)r.push(new Set);i.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},SE=i=>(t,e)=>{i.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},Tc=new WeakSet,N1=new WeakMap,s0=new WeakMap,z1=new WeakMap,r0=new WeakMap,Jd=new WeakMap,P1=new WeakMap,Mg=new WeakMap,kg=new WeakMap,Dg=new WeakMap,B1={construct(){return B1}},TE=i=>{try{const t=new Proxy(i,B1);new t}catch{return!1}return!0},rx=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,ox=(i,t)=>{const e=[];let s=i.replace(/^[\s]+/,""),r=s.match(rx);for(;r!==null;){const l=r[1].slice(1,-1),u=r[0].replace(/([\s]+)?;?$/,"").replace(l,new URL(l,t).toString());e.push(u),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(rx)}return[e.join(";"),s]},ax=i=>{if(i!==void 0&&!Array.isArray(i))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},lx=i=>{if(!TE(i))throw new TypeError("The given value for processorCtor should be a constructor.");if(i.prototype===null||typeof i.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},AE=(i,t,e,s,r,l,u,f,p,m,v,y,w)=>{let T=0;return(x,A,E={credentials:"omit"})=>{const I=v.get(x);if(I!==void 0&&I.has(A))return Promise.resolve();const B=m.get(x);if(B!==void 0){const R=B.get(A);if(R!==void 0)return R}const D=l(x),F=D.audioWorklet===void 0?r(A).then(([R,H])=>{const[Z,q]=ox(R,H),V=`${Z};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${q}
})})(window,'_AWGS')`;return e(V)}).then(()=>{const R=w._AWGS.pop();if(R===void 0)throw new SyntaxError;s(D.currentTime,D.sampleRate,()=>R(class{},void 0,(H,Z)=>{if(H.trim()==="")throw t();const q=kg.get(D);if(q!==void 0){if(q.has(H))throw t();lx(Z),ax(Z.parameterDescriptors),q.set(H,Z)}else lx(Z),ax(Z.parameterDescriptors),kg.set(D,new Map([[H,Z]]))},D.sampleRate,void 0,void 0))}):Promise.all([r(A),Promise.resolve(i(y,y))]).then(([[R,H],Z])=>{const q=T+1;T=q;const[V,W]=ox(R,H),J=`${V};((AudioWorkletProcessor,registerProcessor)=>{${W}
})(${Z?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${Z?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${Z?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${q}',class extends AudioWorkletProcessor{process(){return !1}})`,$=new Blob([J],{type:"application/javascript; charset=utf-8"}),U=URL.createObjectURL($);return D.audioWorklet.addModule(U,E).then(()=>{if(f(D))return D;const Y=u(D);return Y.audioWorklet.addModule(U,E).then(()=>Y)}).then(Y=>{if(p===null)throw new SyntaxError;try{new p(Y,`__sac${q}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(U))});return B===void 0?m.set(x,new Map([[A,F]])):B.set(A,F),F.then(()=>{const R=v.get(x);R===void 0?v.set(x,new Set([A])):R.add(A)}).finally(()=>{const R=m.get(x);R!==void 0&&R.delete(A)}),F}},qs=(i,t)=>{const e=i.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e},$d=(i,t)=>{const e=Array.from(i).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");const[s]=e;return i.delete(s),s},U1=(i,t,e,s)=>{const r=qs(i,t),l=$d(r,u=>u[0]===e&&u[1]===s);return r.size===0&&i.delete(t),l},vh=i=>qs(P1,i),Ac=i=>{if(Tc.has(i))throw new Error("The AudioNode is already stored.");Tc.add(i),vh(i).forEach(t=>t(!0))},H1=i=>"port"in i,bh=i=>{if(!Tc.has(i))throw new Error("The AudioNode is not stored.");Tc.delete(i),vh(i).forEach(t=>t(!1))},Og=(i,t)=>{!H1(i)&&t.every(e=>e.size===0)&&bh(i)},EE=(i,t,e,s,r,l,u,f,p,m,v,y,w)=>{const T=new WeakMap;return(x,A,E,I,B)=>{const{activeInputs:D,passiveInputs:F}=l(A),{outputs:R}=l(x),H=f(x),Z=q=>{const V=p(A),W=p(x);if(q){const X=U1(F,x,E,I);i(D,x,X,!1),!B&&!y(x)&&e(W,V,E,I),w(A)&&Ac(A)}else{const X=s(D,x,E,I);t(F,I,X,!1),!B&&!y(x)&&r(W,V,E,I);const tt=u(A);if(tt===0)v(A)&&Og(A,D);else{const P=T.get(A);P!==void 0&&clearTimeout(P),T.set(A,setTimeout(()=>{v(A)&&Og(A,D)},tt*1e3))}}};return m(R,[A,E,I],q=>q[0]===A&&q[1]===E&&q[2]===I,!0)?(H.add(Z),v(x)?i(D,x,[E,I,Z],!0):t(F,I,[x,E,Z],!0),!0):!1}},CE=i=>(t,e,[s,r,l],u)=>{const f=t.get(s);f===void 0?t.set(s,new Set([[r,e,l]])):i(f,[r,e,l],p=>p[0]===r&&p[1]===e,u)},LE=i=>(t,e)=>{const s=i(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(s).connect(t.destination);const r=()=>{e.removeEventListener("ended",r),e.disconnect(s),s.disconnect()};e.addEventListener("ended",r)},ME=i=>(t,e)=>{i(t).add(e)},kE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},DE=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=r(f),v={...kE,...p},y=s(m,v),w=l(m)?t():null;super(f,!1,y,w),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(f){this._nativeAnalyserNode.fftSize=f}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(f){const p=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=f,!(f>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=p,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(f){const p=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=f,!(this._nativeAnalyserNode.maxDecibels>f))throw this._nativeAnalyserNode.minDecibels=p,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(f){this._nativeAnalyserNode.smoothingTimeConstant=f}getByteFrequencyData(f){this._nativeAnalyserNode.getByteFrequencyData(f)}getByteTimeDomainData(f){this._nativeAnalyserNode.getByteTimeDomainData(f)}getFloatFrequencyData(f){this._nativeAnalyserNode.getFloatFrequencyData(f)}getFloatTimeDomainData(f){this._nativeAnalyserNode.getFloatTimeDomainData(f)}},ni=(i,t)=>i.context===t,OE=(i,t,e)=>()=>{const s=new WeakMap,r=async(l,u)=>{let f=t(l);if(!ni(f,u)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,fftSize:f.fftSize,maxDecibels:f.maxDecibels,minDecibels:f.minDecibels,smoothingTimeConstant:f.smoothingTimeConstant};f=i(u,m)}return s.set(u,f),await e(l,u,f),f};return{render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):r(l,u)}}},kd=i=>{try{i.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},xr=()=>new DOMException("","IndexSizeError"),o0=i=>{i.getChannelData=(t=>e=>{try{return t.call(i,e)}catch(s){throw s.code===12?xr():s}})(i.getChannelData)},RE={numberOfChannels:1},IE=(i,t,e,s,r,l,u,f)=>{let p=null;return class V1{constructor(v){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:w,sampleRate:T}={...RE,...v};p===null&&(p=new r(1,1,44100));const x=s!==null&&t(l,l)?new s({length:y,numberOfChannels:w,sampleRate:T}):p.createBuffer(w,y,T);if(x.numberOfChannels===0)throw e();return typeof x.copyFromChannel!="function"?(u(x),o0(x)):t(kd,()=>kd(x))||f(x),i.add(x),x}static[Symbol.hasInstance](v){return v!==null&&typeof v=="object"&&Object.getPrototypeOf(v)===V1.prototype||i.has(v)}}},Ei=-34028234663852886e22,ai=-Ei,ao=i=>Tc.has(i),NE={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},zE=(i,t,e,s,r,l,u,f)=>class extends i{constructor(m,v){const y=l(m),w={...NE,...v},T=r(y,w),x=u(y),A=x?t():null;super(m,!1,T,A),this._audioBufferSourceNodeRenderer=A,this._isBufferNullified=!1,this._isBufferSet=w.buffer!==null,this._nativeAudioBufferSourceNode=T,this._onended=null,this._playbackRate=e(this,x,T.playbackRate,ai,Ei)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(m){if(this._nativeAudioBufferSourceNode.buffer=m,m!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(m){this._nativeAudioBufferSourceNode.loop=m}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(m){this._nativeAudioBufferSourceNode.loopEnd=m}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(m){this._nativeAudioBufferSourceNode.loopStart=m}get onended(){return this._onended}set onended(m){const v=typeof m=="function"?f(this,m):null;this._nativeAudioBufferSourceNode.onended=v;const y=this._nativeAudioBufferSourceNode.onended;this._onended=y!==null&&y===v?m:y}get playbackRate(){return this._playbackRate}start(m=0,v=0,y){if(this._nativeAudioBufferSourceNode.start(m,v,y),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=y===void 0?[m,v]:[m,v,y]),this.context.state!=="closed"){Ac(this);const w=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",w),ao(this)&&bh(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",w)}}stop(m=0){this._nativeAudioBufferSourceNode.stop(m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=m)}},PE=(i,t,e,s,r)=>()=>{const l=new WeakMap;let u=null,f=null;const p=async(m,v)=>{let y=e(m);const w=ni(y,v);if(!w){const T={buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value};y=t(v,T),u!==null&&y.start(...u),f!==null&&y.stop(f)}return l.set(v,y),w?await i(v,m.playbackRate,y.playbackRate):await s(v,m.playbackRate,y.playbackRate),await r(m,v,y),y};return{set start(m){u=m},set stop(m){f=m},render(m,v){const y=l.get(v);return y!==void 0?Promise.resolve(y):p(m,v)}}},BE=i=>"playbackRate"in i,UE=i=>"frequency"in i&&"gain"in i,HE=i=>"offset"in i,VE=i=>!("frequency"in i)&&"gain"in i,qE=i=>"detune"in i&&"frequency"in i&&!("gain"in i),jE=i=>"pan"in i,li=i=>qs(N1,i),wh=i=>qs(z1,i),Rg=(i,t)=>{const{activeInputs:e}=li(i);e.forEach(r=>r.forEach(([l])=>{t.includes(i)||Rg(l,[...t,i])}));const s=BE(i)?[i.playbackRate]:H1(i)?Array.from(i.parameters.values()):UE(i)?[i.Q,i.detune,i.frequency,i.gain]:HE(i)?[i.offset]:VE(i)?[i.gain]:qE(i)?[i.detune,i.frequency]:jE(i)?[i.pan]:[];for(const r of s){const l=wh(r);l!==void 0&&l.activeInputs.forEach(([u])=>Rg(u,t))}ao(i)&&bh(i)},q1=i=>{Rg(i.destination,[])},GE=i=>i===void 0||typeof i=="number"||typeof i=="string"&&(i==="balanced"||i==="interactive"||i==="playback"),ZE=(i,t,e,s,r,l,u,f,p)=>class extends i{constructor(v={}){if(p===null)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new p(v)}catch(x){throw x.code===12&&x.message==="sampleRate is not in range"?e():x}if(y===null)throw s();if(!GE(v.latencyHint))throw new TypeError(`The provided value '${v.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(v.sampleRate!==void 0&&y.sampleRate!==v.sampleRate)throw e();super(y,2);const{latencyHint:w}=v,{sampleRate:T}=y;if(this._baseLatency=typeof y.baseLatency=="number"?y.baseLatency:w==="balanced"?512/T:w==="interactive"||w===void 0?256/T:w==="playback"?1024/T:Math.max(2,Math.min(128,Math.round(w*T/128)))*128/T,this._nativeAudioContext=y,p.name==="webkitAudioContext"?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,y.state==="running"){this._state="suspended";const x=()=>{this._state==="suspended"&&(this._state=null),y.removeEventListener("statechange",x)};y.addEventListener("statechange",x)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),q1(this)}))}createMediaElementSource(v){return new r(this,{mediaElement:v})}createMediaStreamDestination(){return new l(this)}createMediaStreamSource(v){return new u(this,{mediaStream:v})}createMediaStreamTrackSource(v){return new f(this,{mediaStreamTrack:v})}resume(){return this._state==="suspended"?new Promise((v,y)=>{const w=()=>{this._nativeAudioContext.removeEventListener("statechange",w),this._nativeAudioContext.state==="running"?v():this.resume().then(v,y)};this._nativeAudioContext.addEventListener("statechange",w)}):this._nativeAudioContext.resume().catch(v=>{throw v===void 0||v.code===15?t():v})}suspend(){return this._nativeAudioContext.suspend().catch(v=>{throw v===void 0?t():v})}},WE=(i,t,e,s,r,l,u,f)=>class extends i{constructor(m,v){const y=l(m),w=u(y),T=r(y,v,w),x=w?t(f):null;super(m,!1,T,x),this._isNodeOfNativeOfflineAudioContext=w,this._nativeAudioDestinationNode=T}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(m){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(m>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=m}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(m){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=m}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},YE=i=>{const t=new WeakMap,e=async(s,r)=>{const l=r.destination;return t.set(r,l),await i(s,r,l),l};return{render(s,r){const l=t.get(r);return l!==void 0?Promise.resolve(l):e(s,r)}}},XE=(i,t,e,s,r,l,u,f)=>(p,m)=>{const v=m.listener,y=()=>{const R=new Float32Array(1),H=t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),Z=u(m);let q=!1,V=[0,0,-1,0,1,0],W=[0,0,0];const X=()=>{if(q)return;q=!0;const $=s(m,256,9,0);$.onaudioprocess=({inputBuffer:U})=>{const Y=[l(U,R,0),l(U,R,1),l(U,R,2),l(U,R,3),l(U,R,4),l(U,R,5)];Y.some((k,j)=>k!==V[j])&&(v.setOrientation(...Y),V=Y);const et=[l(U,R,6),l(U,R,7),l(U,R,8)];et.some((k,j)=>k!==W[j])&&(v.setPosition(...et),W=et)},H.connect($)},tt=$=>U=>{U!==V[$]&&(V[$]=U,v.setOrientation(...V))},P=$=>U=>{U!==W[$]&&(W[$]=U,v.setPosition(...W))},J=($,U,Y)=>{const et=e(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:U});et.connect(H,0,$),et.start(),Object.defineProperty(et.offset,"defaultValue",{get(){return U}});const k=i({context:p},Z,et.offset,ai,Ei);return f(k,"value",j=>()=>j.call(k),j=>O=>{try{j.call(k,O)}catch(G){if(G.code!==9)throw G}X(),Z&&Y(O)}),k.cancelAndHoldAtTime=(j=>Z?()=>{throw r()}:(...O)=>{const G=j.apply(k,O);return X(),G})(k.cancelAndHoldAtTime),k.cancelScheduledValues=(j=>Z?()=>{throw r()}:(...O)=>{const G=j.apply(k,O);return X(),G})(k.cancelScheduledValues),k.exponentialRampToValueAtTime=(j=>Z?()=>{throw r()}:(...O)=>{const G=j.apply(k,O);return X(),G})(k.exponentialRampToValueAtTime),k.linearRampToValueAtTime=(j=>Z?()=>{throw r()}:(...O)=>{const G=j.apply(k,O);return X(),G})(k.linearRampToValueAtTime),k.setTargetAtTime=(j=>Z?()=>{throw r()}:(...O)=>{const G=j.apply(k,O);return X(),G})(k.setTargetAtTime),k.setValueAtTime=(j=>Z?()=>{throw r()}:(...O)=>{const G=j.apply(k,O);return X(),G})(k.setValueAtTime),k.setValueCurveAtTime=(j=>Z?()=>{throw r()}:(...O)=>{const G=j.apply(k,O);return X(),G})(k.setValueCurveAtTime),k};return{forwardX:J(0,0,tt(0)),forwardY:J(1,0,tt(1)),forwardZ:J(2,-1,tt(2)),positionX:J(6,0,P(0)),positionY:J(7,0,P(1)),positionZ:J(8,0,P(2)),upX:J(3,0,tt(3)),upY:J(4,1,tt(4)),upZ:J(5,0,tt(5))}},{forwardX:w,forwardY:T,forwardZ:x,positionX:A,positionY:E,positionZ:I,upX:B,upY:D,upZ:F}=v.forwardX===void 0?y():v;return{get forwardX(){return w},get forwardY(){return T},get forwardZ(){return x},get positionX(){return A},get positionY(){return E},get positionZ(){return I},get upX(){return B},get upY(){return D},get upZ(){return F}}},Dd=i=>"context"in i,xh=i=>Dd(i[0]),ml=(i,t,e,s)=>{for(const r of i)if(e(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return i.add(t),!0},cx=(i,t,[e,s],r)=>{ml(i,[t,e,s],l=>l[0]===t&&l[1]===e,r)},ux=(i,[t,e,s],r)=>{const l=i.get(t);l===void 0?i.set(t,new Set([[e,s]])):ml(l,[e,s],u=>u[0]===e,r)},Dc=i=>"inputs"in i,Od=(i,t,e,s)=>{if(Dc(t)){const r=t.inputs[s];return i.connect(r,e,0),[r,e,0]}return i.connect(t,e,s),[t,e,s]},j1=(i,t,e)=>{for(const s of i)if(s[0]===t&&s[1]===e)return i.delete(s),s;return null},FE=(i,t,e)=>$d(i,s=>s[0]===t&&s[1]===e),G1=(i,t)=>{if(!vh(i).delete(t))throw new Error("Missing the expected event listener.")},Z1=(i,t,e)=>{const s=qs(i,t),r=$d(s,l=>l[0]===e);return s.size===0&&i.delete(t),r},Rd=(i,t,e,s)=>{Dc(t)?i.disconnect(t.inputs[s],e,0):i.disconnect(t,e,s)},Je=i=>qs(s0,i),ih=i=>qs(r0,i),hl=i=>Mg.has(i),bd=i=>!Tc.has(i),hx=(i,t)=>new Promise(e=>{if(t!==null)e(!0);else{const s=i.createScriptProcessor(256,1,1),r=i.createGain(),l=i.createBuffer(1,2,44100),u=l.getChannelData(0);u[0]=1,u[1]=1;const f=i.createBufferSource();f.buffer=l,f.loop=!0,f.connect(s).connect(i.destination),f.connect(r),f.disconnect(r),s.onaudioprocess=p=>{const m=p.inputBuffer.getChannelData(0);Array.prototype.some.call(m,v=>v===1)?e(!0):e(!1),f.stop(),s.onaudioprocess=null,f.disconnect(s),s.disconnect(i.destination)},f.start()}}),ng=(i,t)=>{const e=new Map;for(const s of i)for(const r of s){const l=e.get(r);e.set(r,l===void 0?1:l+1)}e.forEach((s,r)=>t(r,s))},Id=i=>"context"in i,QE=i=>{const t=new Map;i.connect=(e=>(s,r=0,l=0)=>{const u=Id(s)?e(s,r,l):e(s,r),f=t.get(s);return f===void 0?t.set(s,[{input:l,output:r}]):f.every(p=>p.input!==l||p.output!==r)&&f.push({input:l,output:r}),u})(i.connect.bind(i)),i.disconnect=(e=>(s,r,l)=>{if(e.apply(i),s===void 0)t.clear();else if(typeof s=="number")for(const[u,f]of t){const p=f.filter(m=>m.output!==s);p.length===0?t.delete(u):t.set(u,p)}else if(t.has(s))if(r===void 0)t.delete(s);else{const u=t.get(s);if(u!==void 0){const f=u.filter(p=>p.output!==r&&(p.input!==l||l===void 0));f.length===0?t.delete(s):t.set(s,f)}}for(const[u,f]of t)f.forEach(p=>{Id(u)?i.connect(u,p.output,p.input):i.connect(u,p.output)})})(i.disconnect)},KE=(i,t,e,s)=>{const{activeInputs:r,passiveInputs:l}=wh(t),{outputs:u}=li(i),f=vh(i),p=m=>{const v=Je(i),y=ih(t);if(m){const w=Z1(l,i,e);cx(r,i,w,!1),!s&&!hl(i)&&v.connect(y,e)}else{const w=FE(r,i,e);ux(l,w,!1),!s&&!hl(i)&&v.disconnect(y,e)}};return ml(u,[t,e],m=>m[0]===t&&m[1]===e,!0)?(f.add(p),ao(i)?cx(r,i,[e,p],!0):ux(l,[i,e,p],!0),!0):!1},JE=(i,t,e,s)=>{const{activeInputs:r,passiveInputs:l}=li(t),u=j1(r[s],i,e);return u===null?[U1(l,i,e,s)[2],!1]:[u[2],!0]},$E=(i,t,e)=>{const{activeInputs:s,passiveInputs:r}=wh(t),l=j1(s,i,e);return l===null?[Z1(r,i,e)[1],!1]:[l[2],!0]},a0=(i,t,e,s,r)=>{const[l,u]=JE(i,e,s,r);if(l!==null&&(G1(i,l),u&&!t&&!hl(i)&&Rd(Je(i),Je(e),s,r)),ao(e)){const{activeInputs:f}=li(e);Og(e,f)}},l0=(i,t,e,s)=>{const[r,l]=$E(i,e,s);r!==null&&(G1(i,r),l&&!t&&!hl(i)&&Je(i).disconnect(ih(e),s))},tC=(i,t)=>{const e=li(i),s=[];for(const r of e.outputs)xh(r)?a0(i,t,...r):l0(i,t,...r),s.push(r[0]);return e.outputs.clear(),s},eC=(i,t,e)=>{const s=li(i),r=[];for(const l of s.outputs)l[1]===e&&(xh(l)?a0(i,t,...l):l0(i,t,...l),r.push(l[0]),s.outputs.delete(l));return r},nC=(i,t,e,s,r)=>{const l=li(i);return Array.from(l.outputs).filter(u=>u[0]===e&&(s===void 0||u[1]===s)&&(r===void 0||u[2]===r)).map(u=>(xh(u)?a0(i,t,...u):l0(i,t,...u),l.outputs.delete(u),u[0]))},iC=(i,t,e,s,r,l,u,f,p,m,v,y,w,T,x,A)=>class extends m{constructor(I,B,D,F){super(D),this._context=I,this._nativeAudioNode=D;const R=v(I);y(R)&&e(hx,()=>hx(R,A))!==!0&&QE(D),s0.set(this,D),P1.set(this,new Set),I.state!=="closed"&&B&&Ac(this),i(this,F,D)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(I){this._nativeAudioNode.channelCount=I}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(I){this._nativeAudioNode.channelCountMode=I}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(I){this._nativeAudioNode.channelInterpretation=I}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(I,B=0,D=0){if(B<0||B>=this._nativeAudioNode.numberOfOutputs)throw r();const F=v(this._context),R=x(F);if(w(I)||T(I))throw l();if(Dd(I)){const q=Je(I);try{const W=Od(this._nativeAudioNode,q,B,D),X=bd(this);(R||X)&&this._nativeAudioNode.disconnect(...W),this.context.state!=="closed"&&!X&&bd(I)&&Ac(I)}catch(W){throw W.code===12?l():W}if(t(this,I,B,D,R)){const W=p([this],I);ng(W,s(R))}return I}const H=ih(I);if(H.name==="playbackRate"&&H.maxValue===1024)throw u();try{this._nativeAudioNode.connect(H,B),(R||bd(this))&&this._nativeAudioNode.disconnect(H,B)}catch(q){throw q.code===12?l():q}if(KE(this,I,B,R)){const q=p([this],I);ng(q,s(R))}}disconnect(I,B,D){let F;const R=v(this._context),H=x(R);if(I===void 0)F=tC(this,H);else if(typeof I=="number"){if(I<0||I>=this.numberOfOutputs)throw r();F=eC(this,H,I)}else{if(B!==void 0&&(B<0||B>=this.numberOfOutputs)||Dd(I)&&D!==void 0&&(D<0||D>=I.numberOfInputs))throw r();if(F=nC(this,H,I,B,D),F.length===0)throw l()}for(const Z of F){const q=p([this],Z);ng(q,f)}}},sC=(i,t,e,s,r,l,u,f,p,m,v,y,w)=>(T,x,A,E=null,I=null)=>{const B=A.value,D=new pE(B),F=x?s(D):null,R={get defaultValue(){return B},get maxValue(){return E===null?A.maxValue:E},get minValue(){return I===null?A.minValue:I},get value(){return A.value},set value(H){A.value=H,R.setValueAtTime(H,T.context.currentTime)},cancelAndHoldAtTime(H){if(typeof A.cancelAndHoldAtTime=="function")F===null&&D.flush(T.context.currentTime),D.add(r(H)),A.cancelAndHoldAtTime(H);else{const Z=Array.from(D).pop();F===null&&D.flush(T.context.currentTime),D.add(r(H));const q=Array.from(D).pop();A.cancelScheduledValues(H),Z!==q&&q!==void 0&&(q.type==="exponentialRampToValue"?A.exponentialRampToValueAtTime(q.value,q.endTime):q.type==="linearRampToValue"?A.linearRampToValueAtTime(q.value,q.endTime):q.type==="setValue"?A.setValueAtTime(q.value,q.startTime):q.type==="setValueCurve"&&A.setValueCurveAtTime(q.values,q.startTime,q.duration))}return R},cancelScheduledValues(H){return F===null&&D.flush(T.context.currentTime),D.add(l(H)),A.cancelScheduledValues(H),R},exponentialRampToValueAtTime(H,Z){if(H===0)throw new RangeError;if(!Number.isFinite(Z)||Z<0)throw new RangeError;const q=T.context.currentTime;return F===null&&D.flush(q),Array.from(D).length===0&&(D.add(m(B,q)),A.setValueAtTime(B,q)),D.add(u(H,Z)),A.exponentialRampToValueAtTime(H,Z),R},linearRampToValueAtTime(H,Z){const q=T.context.currentTime;return F===null&&D.flush(q),Array.from(D).length===0&&(D.add(m(B,q)),A.setValueAtTime(B,q)),D.add(f(H,Z)),A.linearRampToValueAtTime(H,Z),R},setTargetAtTime(H,Z,q){return F===null&&D.flush(T.context.currentTime),D.add(p(H,Z,q)),A.setTargetAtTime(H,Z,q),R},setValueAtTime(H,Z){return F===null&&D.flush(T.context.currentTime),D.add(m(H,Z)),A.setValueAtTime(H,Z),R},setValueCurveAtTime(H,Z,q){const V=H instanceof Float32Array?H:new Float32Array(H);if(y!==null&&y.name==="webkitAudioContext"){const W=Z+q,X=T.context.sampleRate,tt=Math.ceil(Z*X),P=Math.floor(W*X),J=P-tt,$=new Float32Array(J);for(let Y=0;Y<J;Y+=1){const et=(V.length-1)/q*((tt+Y)/X-Z),k=Math.floor(et),j=Math.ceil(et);$[Y]=k===j?V[k]:(1-(et-k))*V[k]+(1-(j-et))*V[j]}F===null&&D.flush(T.context.currentTime),D.add(v($,Z,q)),A.setValueCurveAtTime($,Z,q);const U=P/X;U<W&&w(R,$[$.length-1],U),w(R,V[V.length-1],W)}else F===null&&D.flush(T.context.currentTime),D.add(v(V,Z,q)),A.setValueCurveAtTime(V,Z,q);return R}};return e.set(R,A),t.set(R,T),i(R,F),R},rC=i=>({replay(t){for(const e of i)if(e.type==="exponentialRampToValue"){const{endTime:s,value:r}=e;t.exponentialRampToValueAtTime(r,s)}else if(e.type==="linearRampToValue"){const{endTime:s,value:r}=e;t.linearRampToValueAtTime(r,s)}else if(e.type==="setTarget"){const{startTime:s,target:r,timeConstant:l}=e;t.setTargetAtTime(r,s,l)}else if(e.type==="setValue"){const{startTime:s,value:r}=e;t.setValueAtTime(r,s)}else if(e.type==="setValueCurve"){const{duration:s,startTime:r,values:l}=e;t.setValueCurveAtTime(l,r,s)}else throw new Error("Can't apply an unknown automation.")}});class W1{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((s,r)=>t.call(e,s,r,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const oC={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},aC=(i,t,e,s,r,l,u,f,p,m,v,y,w,T)=>class extends t{constructor(A,E,I){var B;const D=f(A),F=p(D),R=v({...oC,...I});w(R);const H=kg.get(D),Z=H?.get(E),q=F||D.state!=="closed"?D:(B=u(D))!==null&&B!==void 0?B:D,V=r(q,F?null:A.baseLatency,m,E,Z,R),W=F?s(E,R,Z):null;super(A,!0,V,W);const X=[];V.parameters.forEach((P,J)=>{const $=e(this,F,P);X.push([J,$])}),this._nativeAudioWorkletNode=V,this._onprocessorerror=null,this._parameters=new W1(X),F&&i(D,this);const{activeInputs:tt}=l(this);y(V,tt)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(A){const E=typeof A=="function"?T(this,A):null;this._nativeAudioWorkletNode.onprocessorerror=E;const I=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=I!==null&&I===E?A:I}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Nd(i,t,e,s,r){if(typeof i.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),i.copyFromChannel(t[e],s,r);else{const l=i.getChannelData(s);if(t[e].byteLength===0)t[e]=l.slice(r,r+128);else{const u=new Float32Array(l.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(u)}}}const Y1=(i,t,e,s,r)=>{typeof i.copyToChannel=="function"?t[e].byteLength!==0&&i.copyToChannel(t[e],s,r):t[e].byteLength!==0&&i.getChannelData(s).set(t[e],r)},zd=(i,t)=>{const e=[];for(let s=0;s<i;s+=1){const r=[],l=typeof t=="number"?t:t[s];for(let u=0;u<l;u+=1)r.push(new Float32Array(128));e.push(r)}return e},lC=(i,t)=>{const e=qs(Dg,i),s=Je(t);return qs(e,s)},cC=async(i,t,e,s,r,l,u)=>{const f=t===null?Math.ceil(i.context.length/128)*128:t.length,p=s.channelCount*s.numberOfInputs,m=r.reduce((E,I)=>E+I,0),v=m===0?null:e.createBuffer(m,f,e.sampleRate);if(l===void 0)throw new Error("Missing the processor constructor.");const y=li(i),w=await lC(e,i),T=zd(s.numberOfInputs,s.channelCount),x=zd(s.numberOfOutputs,r),A=Array.from(i.parameters.keys()).reduce((E,I)=>({...E,[I]:new Float32Array(128)}),{});for(let E=0;E<f;E+=128){if(s.numberOfInputs>0&&t!==null)for(let I=0;I<s.numberOfInputs;I+=1)for(let B=0;B<s.channelCount;B+=1)Nd(t,T[I],B,B,E);l.parameterDescriptors!==void 0&&t!==null&&l.parameterDescriptors.forEach(({name:I},B)=>{Nd(t,A,I,p+B,E)});for(let I=0;I<s.numberOfInputs;I+=1)for(let B=0;B<r[I];B+=1)x[I][B].byteLength===0&&(x[I][B]=new Float32Array(128));try{const I=T.map((D,F)=>y.activeInputs[F].size===0?[]:D),B=u(E/e.sampleRate,e.sampleRate,()=>w.process(I,x,A));if(v!==null)for(let D=0,F=0;D<s.numberOfOutputs;D+=1){for(let R=0;R<r[D];R+=1)Y1(v,x[D],R,F+R,E);F+=r[D]}if(!B)break}catch(I){i.dispatchEvent(new ErrorEvent("processorerror",{colno:I.colno,filename:I.filename,lineno:I.lineno,message:I.message}));break}}return v},uC=(i,t,e,s,r,l,u,f,p,m,v,y,w,T,x,A)=>(E,I,B)=>{const D=new WeakMap;let F=null;const R=async(H,Z)=>{let q=v(H),V=null;const W=ni(q,Z),X=Array.isArray(I.outputChannelCount)?I.outputChannelCount:Array.from(I.outputChannelCount);if(y===null){const tt=X.reduce((U,Y)=>U+Y,0),P=r(Z,{channelCount:Math.max(1,tt),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,tt)}),J=[];for(let U=0;U<H.numberOfOutputs;U+=1)J.push(s(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:X[U]}));const $=u(Z,{channelCount:I.channelCount,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation,gain:1});$.connect=t.bind(null,J),$.disconnect=p.bind(null,J),V=[P,J,$]}else W||(q=new y(Z,E));if(D.set(Z,V===null?q:V[2]),V!==null){if(F===null){if(B===void 0)throw new Error("Missing the processor constructor.");if(w===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Y=H.channelCount*H.numberOfInputs,et=B.parameterDescriptors===void 0?0:B.parameterDescriptors.length,k=Y+et;F=cC(H,k===0?null:await(async()=>{const O=new w(k,Math.ceil(H.context.length/128)*128,Z.sampleRate),G=[],ot=[];for(let mt=0;mt<I.numberOfInputs;mt+=1)G.push(u(O,{channelCount:I.channelCount,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation,gain:1})),ot.push(r(O,{channelCount:I.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:I.channelCount}));const dt=await Promise.all(Array.from(H.parameters.values()).map(async mt=>{const Mt=l(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:mt.value});return await T(O,mt,Mt.offset),Mt})),gt=s(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Y+et)});for(let mt=0;mt<I.numberOfInputs;mt+=1){G[mt].connect(ot[mt]);for(let Mt=0;Mt<I.channelCount;Mt+=1)ot[mt].connect(gt,Mt,mt*I.channelCount+Mt)}for(const[mt,Mt]of dt.entries())Mt.connect(gt,0,Y+mt),Mt.start(0);return gt.connect(O.destination),await Promise.all(G.map(mt=>x(H,O,mt))),A(O)})(),Z,I,X,B,m)}const tt=await F,P=e(Z,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[J,$,U]=V;tt!==null&&(P.buffer=tt,P.start(0)),P.connect(J);for(let Y=0,et=0;Y<H.numberOfOutputs;Y+=1){const k=$[Y];for(let j=0;j<X[Y];j+=1)J.connect(k,et+j,j);et+=X[Y]}return U}if(W)for(const[tt,P]of H.parameters.entries())await i(Z,P,q.parameters.get(tt));else for(const[tt,P]of H.parameters.entries())await T(Z,P,q.parameters.get(tt));return await x(H,Z,q),q};return{render(H,Z){f(Z,H);const q=D.get(Z);return q!==void 0?Promise.resolve(q):R(H,Z)}}},hC=(i,t,e,s,r,l,u,f,p,m,v,y,w,T,x,A,E,I,B,D)=>class extends x{constructor(R,H){super(R,H),this._nativeContext=R,this._audioWorklet=i===void 0?void 0:{addModule:(Z,q)=>i(this,Z,q)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new r(this)}createBuffer(R,H,Z){return new e({length:H,numberOfChannels:R,sampleRate:Z})}createBufferSource(){return new s(this)}createChannelMerger(R=6){return new l(this,{numberOfInputs:R})}createChannelSplitter(R=6){return new u(this,{numberOfOutputs:R})}createConstantSource(){return new f(this)}createConvolver(){return new p(this)}createDelay(R=1){return new v(this,{maxDelayTime:R})}createDynamicsCompressor(){return new y(this)}createGain(){return new w(this)}createIIRFilter(R,H){return new T(this,{feedback:H,feedforward:R})}createOscillator(){return new A(this)}createPanner(){return new E(this)}createPeriodicWave(R,H,Z={disableNormalization:!1}){return new I(this,{...Z,imag:H,real:R})}createStereoPanner(){return new B(this)}createWaveShaper(){return new D(this)}decodeAudioData(R,H,Z){return m(this._nativeContext,R).then(q=>(typeof H=="function"&&H(q),q),q=>{throw typeof Z=="function"&&Z(q),q})}},fC={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},dC=(i,t,e,s,r,l,u,f)=>class extends i{constructor(m,v){const y=l(m),w={...fC,...v},T=r(y,w),x=u(y),A=x?e():null;super(m,!1,T,A),this._Q=t(this,x,T.Q,ai,Ei),this._detune=t(this,x,T.detune,1200*Math.log2(ai),-1200*Math.log2(ai)),this._frequency=t(this,x,T.frequency,m.sampleRate/2,0),this._gain=t(this,x,T.gain,40*Math.log10(ai),Ei),this._nativeBiquadFilterNode=T,f(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(m){this._nativeBiquadFilterNode.type=m}getFrequencyResponse(m,v,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(m,v,y)}catch(w){throw w.code===11?s():w}if(m.length!==v.length||v.length!==y.length)throw s()}},pC=(i,t,e,s,r)=>()=>{const l=new WeakMap,u=async(f,p)=>{let m=e(f);const v=ni(m,p);if(!v){const y={Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type};m=t(p,y)}return l.set(p,m),v?(await i(p,f.Q,m.Q),await i(p,f.detune,m.detune),await i(p,f.frequency,m.frequency),await i(p,f.gain,m.gain)):(await s(p,f.Q,m.Q),await s(p,f.detune,m.detune),await s(p,f.frequency,m.frequency),await s(p,f.gain,m.gain)),await r(f,p,m),m};return{render(f,p){const m=l.get(p);return m!==void 0?Promise.resolve(m):u(f,p)}}},mC=(i,t)=>(e,s)=>{const r=t.get(e);if(r!==void 0)return r;const l=i.get(e);if(l!==void 0)return l;try{const u=s();return u instanceof Promise?(i.set(e,u),u.catch(()=>!1).then(f=>(i.delete(e),t.set(e,f),f))):(t.set(e,u),u)}catch{return t.set(e,!1),!1}},_C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},gC=(i,t,e,s,r)=>class extends i{constructor(u,f){const p=s(u),m={..._C,...f},v=e(p,m),y=r(p)?t():null;super(u,!1,v,y)}},yC=(i,t,e)=>()=>{const s=new WeakMap,r=async(l,u)=>{let f=t(l);if(!ni(f,u)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfInputs:f.numberOfInputs};f=i(u,m)}return s.set(u,f),await e(l,u,f),f};return{render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):r(l,u)}}},vC={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},bC=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=s(f),v=l({...vC,...p}),y=e(m,v),w=r(m)?t():null;super(f,!1,y,w)}},wC=(i,t,e)=>()=>{const s=new WeakMap,r=async(l,u)=>{let f=t(l);if(!ni(f,u)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfOutputs:f.numberOfOutputs};f=i(u,m)}return s.set(u,f),await e(l,u,f),f};return{render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):r(l,u)}}},xC=i=>(t,e,s)=>i(e,t,s),SC=i=>(t,e,s=0,r=0)=>{const l=t[s];if(l===void 0)throw i();return Id(e)?l.connect(e,0,r):l.connect(e,0)},TC=i=>(t,e)=>{const s=i(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(e),s.start(),()=>{s.stop(),s.disconnect(e)}},AC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},EC=(i,t,e,s,r,l,u)=>class extends i{constructor(p,m){const v=r(p),y={...AC,...m},w=s(v,y),T=l(v),x=T?e():null;super(p,!1,w,x),this._constantSourceNodeRenderer=x,this._nativeConstantSourceNode=w,this._offset=t(this,T,w.offset,ai,Ei),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(p){const m=typeof p=="function"?u(this,p):null;this._nativeConstantSourceNode.onended=m;const v=this._nativeConstantSourceNode.onended;this._onended=v!==null&&v===m?p:v}start(p=0){if(this._nativeConstantSourceNode.start(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=p),this.context.state!=="closed"){Ac(this);const m=()=>{this._nativeConstantSourceNode.removeEventListener("ended",m),ao(this)&&bh(this)};this._nativeConstantSourceNode.addEventListener("ended",m)}}stop(p=0){this._nativeConstantSourceNode.stop(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=p)}},CC=(i,t,e,s,r)=>()=>{const l=new WeakMap;let u=null,f=null;const p=async(m,v)=>{let y=e(m);const w=ni(y,v);if(!w){const T={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value};y=t(v,T),u!==null&&y.start(u),f!==null&&y.stop(f)}return l.set(v,y),w?await i(v,m.offset,y.offset):await s(v,m.offset,y.offset),await r(m,v,y),y};return{set start(m){u=m},set stop(m){f=m},render(m,v){const y=l.get(v);return y!==void 0?Promise.resolve(y):p(m,v)}}},LC=i=>t=>(i[0]=t,i[0]),MC={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},kC=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=s(f),v={...MC,...p},y=e(m,v),T=r(m)?t():null;super(f,!1,y,T),this._isBufferNullified=!1,this._nativeConvolverNode=y,v.buffer!==null&&l(this,v.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(f){if(this._nativeConvolverNode.buffer=f,f===null&&this._nativeConvolverNode.buffer!==null){const p=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=p.createBuffer(1,1,p.sampleRate),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(f){this._nativeConvolverNode.normalize=f}},DC=(i,t,e)=>()=>{const s=new WeakMap,r=async(l,u)=>{let f=t(l);if(!ni(f,u)){const m={buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,disableNormalization:!f.normalize};f=i(u,m)}return s.set(u,f),Dc(f)?await e(l,u,f.inputs[0]):await e(l,u,f),f};return{render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):r(l,u)}}},OC=(i,t)=>(e,s,r)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,s,r)}catch(l){throw l.name==="SyntaxError"?i():l}},RC=()=>new DOMException("","DataCloneError"),fx=i=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(s=>{const r=()=>{e.onmessage=null,t.close(),e.close(),s()};e.onmessage=()=>r();try{t.postMessage(i,[i])}catch{}finally{r()}})},IC=(i,t,e,s,r,l,u,f,p,m,v)=>(y,w)=>{const T=u(y)?y:l(y);if(r.has(w)){const x=e();return Promise.reject(x)}try{r.add(w)}catch{}return t(p,()=>p(T))?T.decodeAudioData(w).then(x=>(fx(w).catch(()=>{}),t(f,()=>f(x))||v(x),i.add(x),x)):new Promise((x,A)=>{const E=async()=>{try{await fx(w)}catch{}},I=B=>{A(B),E()};try{T.decodeAudioData(w,B=>{typeof B.copyFromChannel!="function"&&(m(B),o0(B)),i.add(B),E().then(()=>x(B))},B=>{I(B===null?s():B)})}catch(B){I(B)}})},NC=(i,t,e,s,r,l,u,f)=>(p,m)=>{const v=t.get(p);if(v===void 0)throw new Error("Missing the expected cycle count.");const y=l(p.context),w=f(y);if(v===m){if(t.delete(p),!w&&u(p)){const T=s(p),{outputs:x}=e(p);for(const A of x)if(xh(A)){const E=s(A[0]);i(T,E,A[1],A[2])}else{const E=r(A[0]);T.connect(E,A[1])}}}else t.set(p,v-m)},zC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},PC=(i,t,e,s,r,l,u)=>class extends i{constructor(p,m){const v=r(p),y={...zC,...m},w=s(v,y),T=l(v),x=T?e(y.maxDelayTime):null;super(p,!1,w,x),this._delayTime=t(this,T,w.delayTime),u(this,y.maxDelayTime)}get delayTime(){return this._delayTime}},BC=(i,t,e,s,r)=>l=>{const u=new WeakMap,f=async(p,m)=>{let v=e(p);const y=ni(v,m);if(!y){const w={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,delayTime:v.delayTime.value,maxDelayTime:l};v=t(m,w)}return u.set(m,v),y?await i(m,p.delayTime,v.delayTime):await s(m,p.delayTime,v.delayTime),await r(p,m,v),v};return{render(p,m){const v=u.get(m);return v!==void 0?Promise.resolve(v):f(p,m)}}},UC=i=>(t,e,s,r)=>i(t[r],l=>l[0]===e&&l[1]===s),HC=i=>(t,e)=>{i(t).delete(e)},VC=i=>"delayTime"in i,qC=(i,t,e)=>function s(r,l){const u=Dd(l)?l:e(i,l);if(VC(u))return[];if(r[0]===u)return[r];if(r.includes(u))return[];const{outputs:f}=t(u);return Array.from(f).map(p=>s([...r,u],p[0])).reduce((p,m)=>p.concat(m),[])},rd=(i,t,e)=>{const s=t[e];if(s===void 0)throw i();return s},jC=i=>(t,e=void 0,s=void 0,r=0)=>e===void 0?t.forEach(l=>l.disconnect()):typeof e=="number"?rd(i,t,e).disconnect():Id(e)?s===void 0?t.forEach(l=>l.disconnect(e)):r===void 0?rd(i,t,s).disconnect(e,0):rd(i,t,s).disconnect(e,0,r):s===void 0?t.forEach(l=>l.disconnect(e)):rd(i,t,s).disconnect(e,0),GC={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},ZC=(i,t,e,s,r,l,u,f)=>class extends i{constructor(m,v){const y=l(m),w={...GC,...v},T=s(y,w),x=u(y),A=x?e():null;super(m,!1,T,A),this._attack=t(this,x,T.attack),this._knee=t(this,x,T.knee),this._nativeDynamicsCompressorNode=T,this._ratio=t(this,x,T.ratio),this._release=t(this,x,T.release),this._threshold=t(this,x,T.threshold),f(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(m){const v=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=m,m>2)throw this._nativeDynamicsCompressorNode.channelCount=v,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(m){const v=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=m,m==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=v,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},WC=(i,t,e,s,r)=>()=>{const l=new WeakMap,u=async(f,p)=>{let m=e(f);const v=ni(m,p);if(!v){const y={attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value};m=t(p,y)}return l.set(p,m),v?(await i(p,f.attack,m.attack),await i(p,f.knee,m.knee),await i(p,f.ratio,m.ratio),await i(p,f.release,m.release),await i(p,f.threshold,m.threshold)):(await s(p,f.attack,m.attack),await s(p,f.knee,m.knee),await s(p,f.ratio,m.ratio),await s(p,f.release,m.release),await s(p,f.threshold,m.threshold)),await r(f,p,m),m};return{render(f,p){const m=l.get(p);return m!==void 0?Promise.resolve(m):u(f,p)}}},YC=()=>new DOMException("","EncodingError"),XC=i=>t=>new Promise((e,s)=>{if(i===null){s(new SyntaxError);return}const r=i.document.head;if(r===null)s(new SyntaxError);else{const l=i.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),f=URL.createObjectURL(u),p=i.onerror,m=()=>{i.onerror=p,URL.revokeObjectURL(f)};i.onerror=(v,y,w,T,x)=>{if(y===f||y===i.location.href&&w===1&&T===1)return m(),s(x),!1;if(p!==null)return p(v,y,w,T,x)},l.onerror=()=>{m(),s(new SyntaxError)},l.onload=()=>{m(),e()},l.src=f,l.type="module",r.appendChild(l)}}),FC=i=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,s,r){if(s!==null){let l=this._listeners.get(s);l===void 0&&(l=i(this,s),typeof s=="function"&&this._listeners.set(s,l)),this._nativeEventTarget.addEventListener(e,l,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,s,r){const l=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(e,l===void 0?null:l,r)}},QC=i=>(t,e,s)=>{Object.defineProperties(i,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return s()}finally{i!==null&&(delete i.currentFrame,delete i.currentTime)}},KC=i=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw i()},JC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},$C=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=r(f),v={...JC,...p},y=s(m,v),w=l(m),T=w?e():null;super(f,!1,y,T),this._gain=t(this,w,y.gain,ai,Ei)}get gain(){return this._gain}},tL=(i,t,e,s,r)=>()=>{const l=new WeakMap,u=async(f,p)=>{let m=e(f);const v=ni(m,p);if(!v){const y={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value};m=t(p,y)}return l.set(p,m),v?await i(p,f.gain,m.gain):await s(p,f.gain,m.gain),await r(f,p,m),m};return{render(f,p){const m=l.get(p);return m!==void 0?Promise.resolve(m):u(f,p)}}},eL=(i,t)=>e=>t(i,e),nL=i=>t=>{const e=i(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},iL=i=>t=>{var e;return(e=i.get(t))!==null&&e!==void 0?e:0},sL=i=>t=>{const e=i(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},rL=i=>t=>i.get(t),Hn=()=>new DOMException("","InvalidStateError"),oL=i=>t=>{const e=i.get(t);if(e===void 0)throw Hn();return e},aL=(i,t)=>e=>{let s=i.get(e);if(s!==void 0)return s;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),i.set(e,s),s},lL=i=>t=>{const e=i.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e},tp=()=>new DOMException("","InvalidAccessError"),cL=i=>{i.getFrequencyResponse=(t=>(e,s,r)=>{if(e.length!==s.length||s.length!==r.length)throw tp();return t.call(i,e,s,r)})(i.getFrequencyResponse)},uL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},hL=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=s(f),v=r(m),y={...uL,...p},w=t(m,v?null:f.baseLatency,y),T=v?e(y.feedback,y.feedforward):null;super(f,!1,w,T),cL(w),this._nativeIIRFilterNode=w,l(this,1)}getFrequencyResponse(f,p,m){return this._nativeIIRFilterNode.getFrequencyResponse(f,p,m)}},X1=(i,t,e,s,r,l,u,f,p,m,v)=>{const y=m.length;let w=f;for(let T=0;T<y;T+=1){let x=e[0]*m[T];for(let A=1;A<r;A+=1){const E=w-A&p-1;x+=e[A]*l[E],x-=i[A]*u[E]}for(let A=r;A<s;A+=1)x+=e[A]*l[w-A&p-1];for(let A=r;A<t;A+=1)x-=i[A]*u[w-A&p-1];l[w]=m[T],u[w]=x,w=w+1&p-1,v[T]=x}return w},fL=(i,t,e,s)=>{const r=e instanceof Float64Array?e:new Float64Array(e),l=s instanceof Float64Array?s:new Float64Array(s),u=r.length,f=l.length,p=Math.min(u,f);if(r[0]!==1){for(let x=0;x<u;x+=1)l[x]/=r[0];for(let x=1;x<f;x+=1)r[x]/=r[0]}const m=32,v=new Float32Array(m),y=new Float32Array(m),w=t.createBuffer(i.numberOfChannels,i.length,i.sampleRate),T=i.numberOfChannels;for(let x=0;x<T;x+=1){const A=i.getChannelData(x),E=w.getChannelData(x);v.fill(0),y.fill(0),X1(r,u,l,f,p,v,y,0,m,A,E)}return w},dL=(i,t,e,s,r)=>(l,u)=>{const f=new WeakMap;let p=null;const m=async(v,y)=>{let w=null,T=t(v);const x=ni(T,y);if(y.createIIRFilter===void 0?w=i(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):x||(T=y.createIIRFilter(u,l)),f.set(y,w===null?T:w),w!==null){if(p===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const E=new e(v.context.destination.channelCount,v.context.length,y.sampleRate);p=(async()=>{await s(v,E,E.destination);const I=await r(E);return fL(I,y,l,u)})()}const A=await p;return w.buffer=A,w.start(0),w}return await s(v,y,T),T};return{render(v,y){const w=f.get(y);return w!==void 0?Promise.resolve(w):m(v,y)}}},pL=(i,t,e,s,r,l)=>u=>(f,p)=>{const m=i.get(f);if(m===void 0){if(!u&&l(f)){const v=s(f),{outputs:y}=e(f);for(const w of y)if(xh(w)){const T=s(w[0]);t(v,T,w[1],w[2])}else{const T=r(w[0]);v.disconnect(T,w[1])}}i.set(f,p)}else i.set(f,m+p)},mL=(i,t)=>e=>{const s=i.get(e);return t(s)||t(e)},_L=(i,t)=>e=>i.has(e)||t(e),gL=(i,t)=>e=>i.has(e)||t(e),yL=(i,t)=>e=>{const s=i.get(e);return t(s)||t(e)},vL=i=>t=>i!==null&&t instanceof i,bL=i=>t=>i!==null&&typeof i.AudioNode=="function"&&t instanceof i.AudioNode,wL=i=>t=>i!==null&&typeof i.AudioParam=="function"&&t instanceof i.AudioParam,xL=(i,t)=>e=>i(e)||t(e),SL=i=>t=>i!==null&&t instanceof i,TL=i=>i!==null&&i.isSecureContext,AL=(i,t,e,s)=>class extends i{constructor(l,u){const f=e(l),p=t(f,u);if(s(f))throw TypeError();super(l,!0,p,null),this._nativeMediaElementAudioSourceNode=p}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},EL={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},CL=(i,t,e,s)=>class extends i{constructor(l,u){const f=e(l);if(s(f))throw new TypeError;const p={...EL,...u},m=t(f,p);super(l,!1,m,null),this._nativeMediaStreamAudioDestinationNode=m}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},LL=(i,t,e,s)=>class extends i{constructor(l,u){const f=e(l),p=t(f,u);if(s(f))throw new TypeError;super(l,!0,p,null),this._nativeMediaStreamAudioSourceNode=p}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},ML=(i,t,e)=>class extends i{constructor(r,l){const u=e(r),f=t(u,l);super(r,!0,f,null)}},kL=(i,t,e,s,r,l)=>class extends e{constructor(f,p){super(f),this._nativeContext=f,Jd.set(this,f),s(f)&&r.set(f,new Set),this._destination=new i(this,p),this._listener=t(this,f),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(f){const p=typeof f=="function"?l(this,f):null;this._nativeContext.onstatechange=p;const m=this._nativeContext.onstatechange;this._onstatechange=m!==null&&m===p?f:m}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},sh=i=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=i.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1},DL=(i,t)=>(e,s,r)=>{const l=new Set;return e.connect=(u=>(f,p=0,m=0)=>{const v=l.size===0;if(t(f))return u.call(e,f,p,m),i(l,[f,p,m],y=>y[0]===f&&y[1]===p&&y[2]===m,!0),v&&s(),f;u.call(e,f,p),i(l,[f,p],y=>y[0]===f&&y[1]===p,!0),v&&s()})(e.connect),e.disconnect=(u=>(f,p,m)=>{const v=l.size>0;if(f===void 0)u.apply(e),l.clear();else if(typeof f=="number"){u.call(e,f);for(const w of l)w[1]===f&&l.delete(w)}else{t(f)?u.call(e,f,p,m):u.call(e,f,p);for(const w of l)w[0]===f&&(p===void 0||w[1]===p)&&(m===void 0||w[2]===m)&&l.delete(w)}const y=l.size===0;v&&y&&r()})(e.disconnect),e},en=(i,t,e)=>{const s=t[e];s!==void 0&&s!==i[e]&&(i[e]=s)},In=(i,t)=>{en(i,t,"channelCount"),en(i,t,"channelCountMode"),en(i,t,"channelInterpretation")},dx=i=>typeof i.getFloatTimeDomainData=="function",OL=i=>{i.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);i.getByteTimeDomainData(e);const s=Math.max(e.length,i.fftSize);for(let r=0;r<s;r+=1)t[r]=(e[r]-128)*.0078125;return t}},RL=(i,t)=>(e,s)=>{const r=e.createAnalyser();if(In(r,s),!(s.maxDecibels>s.minDecibels))throw t();return en(r,s,"fftSize"),en(r,s,"maxDecibels"),en(r,s,"minDecibels"),en(r,s,"smoothingTimeConstant"),i(dx,()=>dx(r))||OL(r),r},IL=i=>i===null?null:i.hasOwnProperty("AudioBuffer")?i.AudioBuffer:null,fn=(i,t,e)=>{const s=t[e];s!==void 0&&s!==i[e].value&&(i[e].value=s)},NL=i=>{i.start=(t=>{let e=!1;return(s=0,r=0,l)=>{if(e)throw Hn();t.call(i,s,r,l),e=!0}})(i.start)},c0=i=>{i.start=(t=>(e=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(i,e,s,r)})(i.start)},u0=i=>{i.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(i,e)})(i.stop)},zL=(i,t,e,s,r,l,u,f,p,m,v)=>(y,w)=>{const T=y.createBufferSource();return In(T,w),fn(T,w,"playbackRate"),en(T,w,"buffer"),en(T,w,"loop"),en(T,w,"loopEnd"),en(T,w,"loopStart"),t(e,()=>e(y))||NL(T),t(s,()=>s(y))||p(T),t(r,()=>r(y))||m(T,y),t(l,()=>l(y))||c0(T),t(u,()=>u(y))||v(T,y),t(f,()=>f(y))||u0(T),i(y,T),T},PL=i=>i===null?null:i.hasOwnProperty("AudioContext")?i.AudioContext:i.hasOwnProperty("webkitAudioContext")?i.webkitAudioContext:null,BL=(i,t)=>(e,s,r)=>{const l=e.destination;if(l.channelCount!==s)try{l.channelCount=s}catch{}r&&l.channelCountMode!=="explicit"&&(l.channelCountMode="explicit"),l.maxChannelCount===0&&Object.defineProperty(l,"maxChannelCount",{value:s});const u=i(e,{channelCount:s,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:1});return t(u,"channelCount",f=>()=>f.call(u),f=>p=>{f.call(u,p);try{l.channelCount=p}catch(m){if(p>l.maxChannelCount)throw m}}),t(u,"channelCountMode",f=>()=>f.call(u),f=>p=>{f.call(u,p),l.channelCountMode=p}),t(u,"channelInterpretation",f=>()=>f.call(u),f=>p=>{f.call(u,p),l.channelInterpretation=p}),Object.defineProperty(u,"maxChannelCount",{get:()=>l.maxChannelCount}),u.connect(l),u},UL=i=>i===null?null:i.hasOwnProperty("AudioWorkletNode")?i.AudioWorkletNode:null,HL=i=>{const{port1:t}=new MessageChannel;try{t.postMessage(i)}finally{t.close()}},VL=(i,t,e,s,r)=>(l,u,f,p,m,v)=>{if(f!==null)try{const y=new f(l,p,v),w=new Map;let T=null;if(Object.defineProperties(y,{channelCount:{get:()=>v.channelCount,set:()=>{throw i()}},channelCountMode:{get:()=>"explicit",set:()=>{throw i()}},onprocessorerror:{get:()=>T,set:x=>{typeof T=="function"&&y.removeEventListener("processorerror",T),T=typeof x=="function"?x:null,typeof T=="function"&&y.addEventListener("processorerror",T)}}}),y.addEventListener=(x=>(...A)=>{if(A[0]==="processorerror"){const E=typeof A[1]=="function"?A[1]:typeof A[1]=="object"&&A[1]!==null&&typeof A[1].handleEvent=="function"?A[1].handleEvent:null;if(E!==null){const I=w.get(A[1]);I!==void 0?A[1]=I:(A[1]=B=>{B.type==="error"?(Object.defineProperties(B,{type:{value:"processorerror"}}),E(B)):E(new ErrorEvent(A[0],{...B}))},w.set(E,A[1]))}}return x.call(y,"error",A[1],A[2]),x.call(y,...A)})(y.addEventListener),y.removeEventListener=(x=>(...A)=>{if(A[0]==="processorerror"){const E=w.get(A[1]);E!==void 0&&(w.delete(A[1]),A[1]=E)}return x.call(y,"error",A[1],A[2]),x.call(y,A[0],A[1],A[2])})(y.removeEventListener),v.numberOfOutputs!==0){const x=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(x).connect(l.destination),r(y,()=>x.disconnect(),()=>x.connect(l.destination))}return y}catch(y){throw y.code===11?s():y}if(m===void 0)throw s();return HL(v),t(l,u,m,v)},F1=(i,t)=>i===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(i*t))))),qL=i=>new Promise((t,e)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:l})=>{s.close(),r.close(),t(l)},s.onmessageerror=({data:l})=>{s.close(),r.close(),e(l)},r.postMessage(i)}),jL=async(i,t)=>{const e=await qL(t);return new i(e)},GL=(i,t,e,s)=>{let r=Dg.get(i);r===void 0&&(r=new WeakMap,Dg.set(i,r));const l=jL(e,s);return r.set(t,l),l},ZL=(i,t,e,s,r,l,u,f,p,m,v,y,w)=>(T,x,A,E)=>{if(E.numberOfInputs===0&&E.numberOfOutputs===0)throw p();const I=Array.isArray(E.outputChannelCount)?E.outputChannelCount:Array.from(E.outputChannelCount);if(I.some(Ot=>Ot<1))throw p();if(I.length!==E.numberOfOutputs)throw t();if(E.channelCountMode!=="explicit")throw p();const B=E.channelCount*E.numberOfInputs,D=I.reduce((Ot,Zt)=>Ot+Zt,0),F=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length;if(B+F>6||D>6)throw p();const R=new MessageChannel,H=[],Z=[];for(let Ot=0;Ot<E.numberOfInputs;Ot+=1)H.push(u(T,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),Z.push(r(T,{channelCount:E.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:E.channelCount}));const q=[];if(A.parameterDescriptors!==void 0)for(const{defaultValue:Ot,maxValue:Zt,minValue:Ne,name:be}of A.parameterDescriptors){const oe=l(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:E.parameterData[be]!==void 0?E.parameterData[be]:Ot===void 0?0:Ot});Object.defineProperties(oe.offset,{defaultValue:{get:()=>Ot===void 0?0:Ot},maxValue:{get:()=>Zt===void 0?ai:Zt},minValue:{get:()=>Ne===void 0?Ei:Ne}}),q.push(oe)}const V=s(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,B+F)}),W=F1(x,T.sampleRate),X=f(T,W,B+F,Math.max(1,D)),tt=r(T,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),P=[];for(let Ot=0;Ot<E.numberOfOutputs;Ot+=1)P.push(s(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:I[Ot]}));for(let Ot=0;Ot<E.numberOfInputs;Ot+=1){H[Ot].connect(Z[Ot]);for(let Zt=0;Zt<E.channelCount;Zt+=1)Z[Ot].connect(V,Zt,Ot*E.channelCount+Zt)}const J=new W1(A.parameterDescriptors===void 0?[]:A.parameterDescriptors.map(({name:Ot},Zt)=>{const Ne=q[Zt];return Ne.connect(V,0,B+Zt),Ne.start(0),[Ot,Ne.offset]}));V.connect(X);let $=E.channelInterpretation,U=null;const Y=E.numberOfOutputs===0?[X]:P,et={get bufferSize(){return W},get channelCount(){return E.channelCount},set channelCount(Ot){throw e()},get channelCountMode(){return E.channelCountMode},set channelCountMode(Ot){throw e()},get channelInterpretation(){return $},set channelInterpretation(Ot){for(const Zt of H)Zt.channelInterpretation=Ot;$=Ot},get context(){return X.context},get inputs(){return H},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get onprocessorerror(){return U},set onprocessorerror(Ot){typeof U=="function"&&et.removeEventListener("processorerror",U),U=typeof Ot=="function"?Ot:null,typeof U=="function"&&et.addEventListener("processorerror",U)},get parameters(){return J},get port(){return R.port2},addEventListener(...Ot){return X.addEventListener(Ot[0],Ot[1],Ot[2])},connect:i.bind(null,Y),disconnect:m.bind(null,Y),dispatchEvent(...Ot){return X.dispatchEvent(Ot[0])},removeEventListener(...Ot){return X.removeEventListener(Ot[0],Ot[1],Ot[2])}},k=new Map;R.port1.addEventListener=(Ot=>(...Zt)=>{if(Zt[0]==="message"){const Ne=typeof Zt[1]=="function"?Zt[1]:typeof Zt[1]=="object"&&Zt[1]!==null&&typeof Zt[1].handleEvent=="function"?Zt[1].handleEvent:null;if(Ne!==null){const be=k.get(Zt[1]);be!==void 0?Zt[1]=be:(Zt[1]=oe=>{v(T.currentTime,T.sampleRate,()=>Ne(oe))},k.set(Ne,Zt[1]))}}return Ot.call(R.port1,Zt[0],Zt[1],Zt[2])})(R.port1.addEventListener),R.port1.removeEventListener=(Ot=>(...Zt)=>{if(Zt[0]==="message"){const Ne=k.get(Zt[1]);Ne!==void 0&&(k.delete(Zt[1]),Zt[1]=Ne)}return Ot.call(R.port1,Zt[0],Zt[1],Zt[2])})(R.port1.removeEventListener);let j=null;Object.defineProperty(R.port1,"onmessage",{get:()=>j,set:Ot=>{typeof j=="function"&&R.port1.removeEventListener("message",j),j=typeof Ot=="function"?Ot:null,typeof j=="function"&&(R.port1.addEventListener("message",j),R.port1.start())}}),A.prototype.port=R.port1;let O=null;GL(T,et,A,E).then(Ot=>O=Ot);const ot=zd(E.numberOfInputs,E.channelCount),dt=zd(E.numberOfOutputs,I),gt=A.parameterDescriptors===void 0?[]:A.parameterDescriptors.reduce((Ot,{name:Zt})=>({...Ot,[Zt]:new Float32Array(128)}),{});let mt=!0;const Mt=()=>{E.numberOfOutputs>0&&X.disconnect(tt);for(let Ot=0,Zt=0;Ot<E.numberOfOutputs;Ot+=1){const Ne=P[Ot];for(let be=0;be<I[Ot];be+=1)tt.disconnect(Ne,Zt+be,be);Zt+=I[Ot]}},Et=new Map;X.onaudioprocess=({inputBuffer:Ot,outputBuffer:Zt})=>{if(O!==null){const Ne=y(et);for(let be=0;be<W;be+=128){for(let oe=0;oe<E.numberOfInputs;oe+=1)for(let Te=0;Te<E.channelCount;Te+=1)Nd(Ot,ot[oe],Te,Te,be);A.parameterDescriptors!==void 0&&A.parameterDescriptors.forEach(({name:oe},Te)=>{Nd(Ot,gt,oe,B+Te,be)});for(let oe=0;oe<E.numberOfInputs;oe+=1)for(let Te=0;Te<I[oe];Te+=1)dt[oe][Te].byteLength===0&&(dt[oe][Te]=new Float32Array(128));try{const oe=ot.map((nn,Qn)=>{if(Ne[Qn].size>0)return Et.set(Qn,W/128),nn;const sn=Et.get(Qn);return sn===void 0?[]:(nn.every(ma=>ma.every(As=>As===0))&&(sn===1?Et.delete(Qn):Et.set(Qn,sn-1)),nn)});mt=v(T.currentTime+be/T.sampleRate,T.sampleRate,()=>O.process(oe,dt,gt));for(let nn=0,Qn=0;nn<E.numberOfOutputs;nn+=1){for(let Ji=0;Ji<I[nn];Ji+=1)Y1(Zt,dt[nn],Ji,Qn+Ji,be);Qn+=I[nn]}}catch(oe){mt=!1,et.dispatchEvent(new ErrorEvent("processorerror",{colno:oe.colno,filename:oe.filename,lineno:oe.lineno,message:oe.message}))}if(!mt){for(let oe=0;oe<E.numberOfInputs;oe+=1){H[oe].disconnect(Z[oe]);for(let Te=0;Te<E.channelCount;Te+=1)Z[be].disconnect(V,Te,oe*E.channelCount+Te)}if(A.parameterDescriptors!==void 0){const oe=A.parameterDescriptors.length;for(let Te=0;Te<oe;Te+=1){const nn=q[Te];nn.disconnect(V,0,B+Te),nn.stop()}}V.disconnect(X),X.onaudioprocess=null,ne?Mt():Xe();break}}}};let ne=!1;const Se=u(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),We=()=>X.connect(Se).connect(T.destination),Xe=()=>{X.disconnect(Se),Se.disconnect()},Nn=()=>{if(mt){Xe(),E.numberOfOutputs>0&&X.connect(tt);for(let Ot=0,Zt=0;Ot<E.numberOfOutputs;Ot+=1){const Ne=P[Ot];for(let be=0;be<I[Ot];be+=1)tt.connect(Ne,Zt+be,be);Zt+=I[Ot]}}ne=!0},hi=()=>{mt&&(We(),Mt()),ne=!1};return We(),w(et,Nn,hi)},Q1=(i,t)=>{const e=i.createBiquadFilter();return In(e,t),fn(e,t,"Q"),fn(e,t,"detune"),fn(e,t,"frequency"),fn(e,t,"gain"),en(e,t,"type"),e},WL=(i,t)=>(e,s)=>{const r=e.createChannelMerger(s.numberOfInputs);return i!==null&&i.name==="webkitAudioContext"&&t(e,r),In(r,s),r},YL=i=>{const t=i.numberOfOutputs;Object.defineProperty(i,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Hn()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw Hn()}}),Object.defineProperty(i,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw Hn()}})},Sh=(i,t)=>{const e=i.createChannelSplitter(t.numberOfOutputs);return In(e,t),YL(e),e},XL=(i,t,e,s,r)=>(l,u)=>{if(l.createConstantSource===void 0)return e(l,u);const f=l.createConstantSource();return In(f,u),fn(f,u,"offset"),t(s,()=>s(l))||c0(f),t(r,()=>r(l))||u0(f),i(l,f),f},Oc=(i,t)=>(i.connect=t.connect.bind(t),i.disconnect=t.disconnect.bind(t),i),FL=(i,t,e,s)=>(r,{offset:l,...u})=>{const f=r.createBuffer(1,2,44100),p=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),m=e(r,{...u,gain:l}),v=f.getChannelData(0);v[0]=1,v[1]=1,p.buffer=f,p.loop=!0;const y={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(x){m.channelCount=x},get channelCountMode(){return m.channelCountMode},set channelCountMode(x){m.channelCountMode=x},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(x){m.channelInterpretation=x},get context(){return m.context},get inputs(){return[]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get offset(){return m.gain},get onended(){return p.onended},set onended(x){p.onended=x},addEventListener(...x){return p.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return p.dispatchEvent(x[0])},removeEventListener(...x){return p.removeEventListener(x[0],x[1],x[2])},start(x=0){p.start.call(p,x)},stop(x=0){p.stop.call(p,x)}},w=()=>p.connect(m),T=()=>p.disconnect(m);return i(r,p),s(Oc(y,m),w,T)},QL=(i,t)=>(e,s)=>{const r=e.createConvolver();if(In(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),en(r,s,"buffer"),s.channelCount>2||(t(r,"channelCount",l=>()=>l.call(r),l=>u=>{if(u>2)throw i();return l.call(r,u)}),s.channelCountMode==="max"))throw i();return t(r,"channelCountMode",l=>()=>l.call(r),l=>u=>{if(u==="max")throw i();return l.call(r,u)}),r},K1=(i,t)=>{const e=i.createDelay(t.maxDelayTime);return In(e,t),fn(e,t,"delayTime"),e},KL=i=>(t,e)=>{const s=t.createDynamicsCompressor();if(In(s,e),e.channelCount>2||e.channelCountMode==="max")throw i();return fn(s,e,"attack"),fn(s,e,"knee"),fn(s,e,"ratio"),fn(s,e,"release"),fn(s,e,"threshold"),s},Di=(i,t)=>{const e=i.createGain();return In(e,t),fn(e,t,"gain"),e},JL=i=>(t,e,s)=>{if(t.createIIRFilter===void 0)return i(t,e,s);const r=t.createIIRFilter(s.feedforward,s.feedback);return In(r,s),r};function $L(i,t){const e=t[0]*t[0]+t[1]*t[1];return[(i[0]*t[0]+i[1]*t[1])/e,(i[1]*t[0]-i[0]*t[1])/e]}function tM(i,t){return[i[0]*t[0]-i[1]*t[1],i[0]*t[1]+i[1]*t[0]]}function px(i,t){let e=[0,0];for(let s=i.length-1;s>=0;s-=1)e=tM(e,t),e[0]+=i[s];return e}const eM=(i,t,e,s)=>(r,l,{channelCount:u,channelCountMode:f,channelInterpretation:p,feedback:m,feedforward:v})=>{const y=F1(l,r.sampleRate),w=m instanceof Float64Array?m:new Float64Array(m),T=v instanceof Float64Array?v:new Float64Array(v),x=w.length,A=T.length,E=Math.min(x,A);if(x===0||x>20)throw s();if(w[0]===0)throw t();if(A===0||A>20)throw s();if(T[0]===0)throw t();if(w[0]!==1){for(let q=0;q<A;q+=1)T[q]/=w[0];for(let q=1;q<x;q+=1)w[q]/=w[0]}const I=e(r,y,u,u);I.channelCount=u,I.channelCountMode=f,I.channelInterpretation=p;const B=32,D=[],F=[],R=[];for(let q=0;q<u;q+=1){D.push(0);const V=new Float32Array(B),W=new Float32Array(B);V.fill(0),W.fill(0),F.push(V),R.push(W)}I.onaudioprocess=q=>{const V=q.inputBuffer,W=q.outputBuffer,X=V.numberOfChannels;for(let tt=0;tt<X;tt+=1){const P=V.getChannelData(tt),J=W.getChannelData(tt);D[tt]=X1(w,x,T,A,E,F[tt],R[tt],D[tt],B,P,J)}};const H=r.sampleRate/2;return Oc({get bufferSize(){return y},get channelCount(){return I.channelCount},set channelCount(q){I.channelCount=q},get channelCountMode(){return I.channelCountMode},set channelCountMode(q){I.channelCountMode=q},get channelInterpretation(){return I.channelInterpretation},set channelInterpretation(q){I.channelInterpretation=q},get context(){return I.context},get inputs(){return[I]},get numberOfInputs(){return I.numberOfInputs},get numberOfOutputs(){return I.numberOfOutputs},addEventListener(...q){return I.addEventListener(q[0],q[1],q[2])},dispatchEvent(...q){return I.dispatchEvent(q[0])},getFrequencyResponse(q,V,W){if(q.length!==V.length||V.length!==W.length)throw i();const X=q.length;for(let tt=0;tt<X;tt+=1){const P=-Math.PI*(q[tt]/H),J=[Math.cos(P),Math.sin(P)],$=px(T,J),U=px(w,J),Y=$L($,U);V[tt]=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),W[tt]=Math.atan2(Y[1],Y[0])}},removeEventListener(...q){return I.removeEventListener(q[0],q[1],q[2])}},I)},nM=(i,t)=>i.createMediaElementSource(t.mediaElement),iM=(i,t)=>{const e=i.createMediaStreamDestination();return In(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e},sM=(i,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((l,u)=>l.id<u.id?-1:l.id>u.id?1:0);const s=e.slice(0,1),r=i.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:t}),r},rM=(i,t)=>(e,{mediaStreamTrack:s})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(s);const r=new MediaStream([s]),l=e.createMediaStreamSource(r);if(s.kind!=="audio")throw i();if(t(e))throw new TypeError;return l},oM=i=>i===null?null:i.hasOwnProperty("OfflineAudioContext")?i.OfflineAudioContext:i.hasOwnProperty("webkitOfflineAudioContext")?i.webkitOfflineAudioContext:null,aM=(i,t,e,s,r,l)=>(u,f)=>{const p=u.createOscillator();return In(p,f),fn(p,f,"detune"),fn(p,f,"frequency"),f.periodicWave!==void 0?p.setPeriodicWave(f.periodicWave):en(p,f,"type"),t(e,()=>e(u))||c0(p),t(s,()=>s(u))||l(p,u),t(r,()=>r(u))||u0(p),i(u,p),p},lM=i=>(t,e)=>{const s=t.createPanner();return s.orientationX===void 0?i(t,e):(In(s,e),fn(s,e,"orientationX"),fn(s,e,"orientationY"),fn(s,e,"orientationZ"),fn(s,e,"positionX"),fn(s,e,"positionY"),fn(s,e,"positionZ"),en(s,e,"coneInnerAngle"),en(s,e,"coneOuterAngle"),en(s,e,"coneOuterGain"),en(s,e,"distanceModel"),en(s,e,"maxDistance"),en(s,e,"panningModel"),en(s,e,"refDistance"),en(s,e,"rolloffFactor"),s)},cM=(i,t,e,s,r,l,u,f,p,m)=>(v,{coneInnerAngle:y,coneOuterAngle:w,coneOuterGain:T,distanceModel:x,maxDistance:A,orientationX:E,orientationY:I,orientationZ:B,panningModel:D,positionX:F,positionY:R,positionZ:H,refDistance:Z,rolloffFactor:q,...V})=>{const W=v.createPanner();if(V.channelCount>2||V.channelCountMode==="max")throw u();In(W,V);const X={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},tt=e(v,{...X,channelInterpretation:"speakers",numberOfInputs:6}),P=s(v,{...V,gain:1}),J=s(v,{...X,gain:1}),$=s(v,{...X,gain:0}),U=s(v,{...X,gain:0}),Y=s(v,{...X,gain:0}),et=s(v,{...X,gain:0}),k=s(v,{...X,gain:0}),j=r(v,256,6,1),O=l(v,{...X,curve:new Float32Array([1,1]),oversample:"none"});let G=[E,I,B],ot=[F,R,H];const dt=new Float32Array(1);j.onaudioprocess=({inputBuffer:Et})=>{const ne=[p(Et,dt,0),p(Et,dt,1),p(Et,dt,2)];ne.some((We,Xe)=>We!==G[Xe])&&(W.setOrientation(...ne),G=ne);const Se=[p(Et,dt,3),p(Et,dt,4),p(Et,dt,5)];Se.some((We,Xe)=>We!==ot[Xe])&&(W.setPosition(...Se),ot=Se)},Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(et.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"defaultValue",{get:()=>0});const gt={get bufferSize(){},get channelCount(){return W.channelCount},set channelCount(Et){if(Et>2)throw u();P.channelCount=Et,W.channelCount=Et},get channelCountMode(){return W.channelCountMode},set channelCountMode(Et){if(Et==="max")throw u();P.channelCountMode=Et,W.channelCountMode=Et},get channelInterpretation(){return W.channelInterpretation},set channelInterpretation(Et){P.channelInterpretation=Et,W.channelInterpretation=Et},get coneInnerAngle(){return W.coneInnerAngle},set coneInnerAngle(Et){W.coneInnerAngle=Et},get coneOuterAngle(){return W.coneOuterAngle},set coneOuterAngle(Et){W.coneOuterAngle=Et},get coneOuterGain(){return W.coneOuterGain},set coneOuterGain(Et){if(Et<0||Et>1)throw t();W.coneOuterGain=Et},get context(){return W.context},get distanceModel(){return W.distanceModel},set distanceModel(Et){W.distanceModel=Et},get inputs(){return[P]},get maxDistance(){return W.maxDistance},set maxDistance(Et){if(Et<0)throw new RangeError;W.maxDistance=Et},get numberOfInputs(){return W.numberOfInputs},get numberOfOutputs(){return W.numberOfOutputs},get orientationX(){return J.gain},get orientationY(){return $.gain},get orientationZ(){return U.gain},get panningModel(){return W.panningModel},set panningModel(Et){W.panningModel=Et},get positionX(){return Y.gain},get positionY(){return et.gain},get positionZ(){return k.gain},get refDistance(){return W.refDistance},set refDistance(Et){if(Et<0)throw new RangeError;W.refDistance=Et},get rolloffFactor(){return W.rolloffFactor},set rolloffFactor(Et){if(Et<0)throw new RangeError;W.rolloffFactor=Et},addEventListener(...Et){return P.addEventListener(Et[0],Et[1],Et[2])},dispatchEvent(...Et){return P.dispatchEvent(Et[0])},removeEventListener(...Et){return P.removeEventListener(Et[0],Et[1],Et[2])}};y!==gt.coneInnerAngle&&(gt.coneInnerAngle=y),w!==gt.coneOuterAngle&&(gt.coneOuterAngle=w),T!==gt.coneOuterGain&&(gt.coneOuterGain=T),x!==gt.distanceModel&&(gt.distanceModel=x),A!==gt.maxDistance&&(gt.maxDistance=A),E!==gt.orientationX.value&&(gt.orientationX.value=E),I!==gt.orientationY.value&&(gt.orientationY.value=I),B!==gt.orientationZ.value&&(gt.orientationZ.value=B),D!==gt.panningModel&&(gt.panningModel=D),F!==gt.positionX.value&&(gt.positionX.value=F),R!==gt.positionY.value&&(gt.positionY.value=R),H!==gt.positionZ.value&&(gt.positionZ.value=H),Z!==gt.refDistance&&(gt.refDistance=Z),q!==gt.rolloffFactor&&(gt.rolloffFactor=q),(G[0]!==1||G[1]!==0||G[2]!==0)&&W.setOrientation(...G),(ot[0]!==0||ot[1]!==0||ot[2]!==0)&&W.setPosition(...ot);const mt=()=>{P.connect(W),i(P,O,0,0),O.connect(J).connect(tt,0,0),O.connect($).connect(tt,0,1),O.connect(U).connect(tt,0,2),O.connect(Y).connect(tt,0,3),O.connect(et).connect(tt,0,4),O.connect(k).connect(tt,0,5),tt.connect(j).connect(v.destination)},Mt=()=>{P.disconnect(W),f(P,O,0,0),O.disconnect(J),J.disconnect(tt),O.disconnect($),$.disconnect(tt),O.disconnect(U),U.disconnect(tt),O.disconnect(Y),Y.disconnect(tt),O.disconnect(et),et.disconnect(tt),O.disconnect(k),k.disconnect(tt),tt.disconnect(j),j.disconnect(v.destination)};return m(Oc(gt,W),mt,Mt)},uM=i=>(t,{disableNormalization:e,imag:s,real:r})=>{const l=s instanceof Float32Array?s:new Float32Array(s),u=r instanceof Float32Array?r:new Float32Array(r),f=t.createPeriodicWave(u,l,{disableNormalization:e});if(Array.from(s).length<2)throw i();return f},Th=(i,t,e,s)=>i.createScriptProcessor(t,e,s),hM=(i,t)=>(e,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw t();if(e.createStereoPanner===void 0)return i(e,s);const l=e.createStereoPanner();return In(l,s),fn(l,s,"pan"),Object.defineProperty(l,"channelCountMode",{get:()=>r,set:u=>{if(u!==r)throw t()}}),l},fM=(i,t,e,s,r,l)=>{const f=new Float32Array([1,1]),p=Math.PI/2,m={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},v={...m,oversample:"none"},y=(x,A,E,I)=>{const B=new Float32Array(16385),D=new Float32Array(16385);for(let V=0;V<16385;V+=1){const W=V/16384*p;B[V]=Math.cos(W),D[V]=Math.sin(W)}const F=e(x,{...m,gain:0}),R=s(x,{...v,curve:B}),H=s(x,{...v,curve:f}),Z=e(x,{...m,gain:0}),q=s(x,{...v,curve:D});return{connectGraph(){A.connect(F),A.connect(H.inputs===void 0?H:H.inputs[0]),A.connect(Z),H.connect(E),E.connect(R.inputs===void 0?R:R.inputs[0]),E.connect(q.inputs===void 0?q:q.inputs[0]),R.connect(F.gain),q.connect(Z.gain),F.connect(I,0,0),Z.connect(I,0,1)},disconnectGraph(){A.disconnect(F),A.disconnect(H.inputs===void 0?H:H.inputs[0]),A.disconnect(Z),H.disconnect(E),E.disconnect(R.inputs===void 0?R:R.inputs[0]),E.disconnect(q.inputs===void 0?q:q.inputs[0]),R.disconnect(F.gain),q.disconnect(Z.gain),F.disconnect(I,0,0),Z.disconnect(I,0,1)}}},w=(x,A,E,I)=>{const B=new Float32Array(16385),D=new Float32Array(16385),F=new Float32Array(16385),R=new Float32Array(16385),H=Math.floor(16385/2);for(let Y=0;Y<16385;Y+=1)if(Y>H){const et=(Y-H)/(16384-H)*p;B[Y]=Math.cos(et),D[Y]=Math.sin(et),F[Y]=0,R[Y]=1}else{const et=Y/(16384-H)*p;B[Y]=1,D[Y]=0,F[Y]=Math.cos(et),R[Y]=Math.sin(et)}const Z=t(x,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),q=e(x,{...m,gain:0}),V=s(x,{...v,curve:B}),W=e(x,{...m,gain:0}),X=s(x,{...v,curve:D}),tt=s(x,{...v,curve:f}),P=e(x,{...m,gain:0}),J=s(x,{...v,curve:F}),$=e(x,{...m,gain:0}),U=s(x,{...v,curve:R});return{connectGraph(){A.connect(Z),A.connect(tt.inputs===void 0?tt:tt.inputs[0]),Z.connect(q,0),Z.connect(W,0),Z.connect(P,1),Z.connect($,1),tt.connect(E),E.connect(V.inputs===void 0?V:V.inputs[0]),E.connect(X.inputs===void 0?X:X.inputs[0]),E.connect(J.inputs===void 0?J:J.inputs[0]),E.connect(U.inputs===void 0?U:U.inputs[0]),V.connect(q.gain),X.connect(W.gain),J.connect(P.gain),U.connect($.gain),q.connect(I,0,0),P.connect(I,0,0),W.connect(I,0,1),$.connect(I,0,1)},disconnectGraph(){A.disconnect(Z),A.disconnect(tt.inputs===void 0?tt:tt.inputs[0]),Z.disconnect(q,0),Z.disconnect(W,0),Z.disconnect(P,1),Z.disconnect($,1),tt.disconnect(E),E.disconnect(V.inputs===void 0?V:V.inputs[0]),E.disconnect(X.inputs===void 0?X:X.inputs[0]),E.disconnect(J.inputs===void 0?J:J.inputs[0]),E.disconnect(U.inputs===void 0?U:U.inputs[0]),V.disconnect(q.gain),X.disconnect(W.gain),J.disconnect(P.gain),U.disconnect($.gain),q.disconnect(I,0,0),P.disconnect(I,0,0),W.disconnect(I,0,1),$.disconnect(I,0,1)}}},T=(x,A,E,I,B)=>{if(A===1)return y(x,E,I,B);if(A===2)return w(x,E,I,B);throw r()};return(x,{channelCount:A,channelCountMode:E,pan:I,...B})=>{if(E==="max")throw r();const D=i(x,{...B,channelCount:1,channelCountMode:E,numberOfInputs:2}),F=e(x,{...B,channelCount:A,channelCountMode:E,gain:1}),R=e(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:I});let{connectGraph:H,disconnectGraph:Z}=T(x,A,F,R,D);Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"maxValue",{get:()=>1}),Object.defineProperty(R.gain,"minValue",{get:()=>-1});const q={get bufferSize(){},get channelCount(){return F.channelCount},set channelCount(tt){F.channelCount!==tt&&(V&&Z(),{connectGraph:H,disconnectGraph:Z}=T(x,tt,F,R,D),V&&H()),F.channelCount=tt},get channelCountMode(){return F.channelCountMode},set channelCountMode(tt){if(tt==="clamped-max"||tt==="max")throw r();F.channelCountMode=tt},get channelInterpretation(){return F.channelInterpretation},set channelInterpretation(tt){F.channelInterpretation=tt},get context(){return F.context},get inputs(){return[F]},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get pan(){return R.gain},addEventListener(...tt){return F.addEventListener(tt[0],tt[1],tt[2])},dispatchEvent(...tt){return F.dispatchEvent(tt[0])},removeEventListener(...tt){return F.removeEventListener(tt[0],tt[1],tt[2])}};let V=!1;const W=()=>{H(),V=!0},X=()=>{Z(),V=!1};return l(Oc(q,D),W,X)}},dM=(i,t,e,s,r,l,u)=>(f,p)=>{const m=f.createWaveShaper();if(l!==null&&l.name==="webkitAudioContext"&&f.createGain().gain.automationRate===void 0)return e(f,p);In(m,p);const v=p.curve===null||p.curve instanceof Float32Array?p.curve:new Float32Array(p.curve);if(v!==null&&v.length<2)throw t();en(m,{curve:v},"curve"),en(m,p,"oversample");let y=null,w=!1;return u(m,"curve",A=>()=>A.call(m),A=>E=>(A.call(m,E),w&&(s(E)&&y===null?y=i(f,m):!s(E)&&y!==null&&(y(),y=null)),E)),r(m,()=>{w=!0,s(m.curve)&&(y=i(f,m))},()=>{w=!1,y!==null&&(y(),y=null)})},pM=(i,t,e,s,r)=>(l,{curve:u,oversample:f,...p})=>{const m=l.createWaveShaper(),v=l.createWaveShaper();In(m,p),In(v,p);const y=e(l,{...p,gain:1}),w=e(l,{...p,gain:-1}),T=e(l,{...p,gain:1}),x=e(l,{...p,gain:-1});let A=null,E=!1,I=null;const B={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(R){y.channelCount=R,w.channelCount=R,m.channelCount=R,T.channelCount=R,v.channelCount=R,x.channelCount=R},get channelCountMode(){return m.channelCountMode},set channelCountMode(R){y.channelCountMode=R,w.channelCountMode=R,m.channelCountMode=R,T.channelCountMode=R,v.channelCountMode=R,x.channelCountMode=R},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(R){y.channelInterpretation=R,w.channelInterpretation=R,m.channelInterpretation=R,T.channelInterpretation=R,v.channelInterpretation=R,x.channelInterpretation=R},get context(){return m.context},get curve(){return I},set curve(R){if(R!==null&&R.length<2)throw t();if(R===null)m.curve=R,v.curve=R;else{const H=R.length,Z=new Float32Array(H+2-H%2),q=new Float32Array(H+2-H%2);Z[0]=R[0],q[0]=-R[H-1];const V=Math.ceil((H+1)/2),W=(H+1)/2-1;for(let X=1;X<V;X+=1){const tt=X/V*W,P=Math.floor(tt),J=Math.ceil(tt);Z[X]=P===J?R[P]:(1-(tt-P))*R[P]+(1-(J-tt))*R[J],q[X]=P===J?-R[H-1-P]:-((1-(tt-P))*R[H-1-P])-(1-(J-tt))*R[H-1-J]}Z[V]=H%2===1?R[V-1]:(R[V-2]+R[V-1])/2,m.curve=Z,v.curve=q}I=R,E&&(s(I)&&A===null?A=i(l,y):A!==null&&(A(),A=null))},get inputs(){return[y]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get oversample(){return m.oversample},set oversample(R){m.oversample=R,v.oversample=R},addEventListener(...R){return y.addEventListener(R[0],R[1],R[2])},dispatchEvent(...R){return y.dispatchEvent(R[0])},removeEventListener(...R){return y.removeEventListener(R[0],R[1],R[2])}};u!==null&&(B.curve=u instanceof Float32Array?u:new Float32Array(u)),f!==B.oversample&&(B.oversample=f);const D=()=>{y.connect(m).connect(T),y.connect(w).connect(v).connect(x).connect(T),E=!0,s(I)&&(A=i(l,y))},F=()=>{y.disconnect(m),m.disconnect(T),y.disconnect(w),w.disconnect(v),v.disconnect(x),x.disconnect(T),E=!1,A!==null&&(A(),A=null)};return r(Oc(B,T),D,F)},ui=()=>new DOMException("","NotSupportedError"),mM={numberOfChannels:1},_M=(i,t,e,s,r)=>class extends i{constructor(u,f,p){let m;if(typeof u=="number"&&f!==void 0&&p!==void 0)m={length:f,numberOfChannels:u,sampleRate:p};else if(typeof u=="object")m=u;else throw new Error("The given parameters are not valid.");const{length:v,numberOfChannels:y,sampleRate:w}={...mM,...m},T=s(y,v,w);t(sh,()=>sh(T))||T.addEventListener("statechange",(()=>{let x=0;const A=E=>{this._state==="running"&&(x>0?(T.removeEventListener("statechange",A),E.stopImmediatePropagation(),this._waitForThePromiseToSettle(E)):x+=1)};return A})()),super(T,y),this._length=v,this._nativeOfflineAudioContext=T,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,q1(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},gM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},yM=(i,t,e,s,r,l,u)=>class extends i{constructor(p,m){const v=r(p),y={...gM,...m},w=e(v,y),T=l(v),x=T?s():null,A=p.sampleRate/2;super(p,!1,w,x),this._detune=t(this,T,w.detune,153600,-153600),this._frequency=t(this,T,w.frequency,A,-A),this._nativeOscillatorNode=w,this._onended=null,this._oscillatorNodeRenderer=x,this._oscillatorNodeRenderer!==null&&y.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(p){const m=typeof p=="function"?u(this,p):null;this._nativeOscillatorNode.onended=m;const v=this._nativeOscillatorNode.onended;this._onended=v!==null&&v===m?p:v}get type(){return this._nativeOscillatorNode.type}set type(p){this._nativeOscillatorNode.type=p,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(p){this._nativeOscillatorNode.setPeriodicWave(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=p)}start(p=0){if(this._nativeOscillatorNode.start(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=p),this.context.state!=="closed"){Ac(this);const m=()=>{this._nativeOscillatorNode.removeEventListener("ended",m),ao(this)&&bh(this)};this._nativeOscillatorNode.addEventListener("ended",m)}}stop(p=0){this._nativeOscillatorNode.stop(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=p)}},vM=(i,t,e,s,r)=>()=>{const l=new WeakMap;let u=null,f=null,p=null;const m=async(v,y)=>{let w=e(v);const T=ni(w,y);if(!T){const x={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,detune:w.detune.value,frequency:w.frequency.value,periodicWave:u===null?void 0:u,type:w.type};w=t(y,x),f!==null&&w.start(f),p!==null&&w.stop(p)}return l.set(y,w),T?(await i(y,v.detune,w.detune),await i(y,v.frequency,w.frequency)):(await s(y,v.detune,w.detune),await s(y,v.frequency,w.frequency)),await r(v,y,w),w};return{set periodicWave(v){u=v},set start(v){f=v},set stop(v){p=v},render(v,y){const w=l.get(y);return w!==void 0?Promise.resolve(w):m(v,y)}}},bM={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},wM=(i,t,e,s,r,l,u)=>class extends i{constructor(p,m){const v=r(p),y={...bM,...m},w=e(v,y),T=l(v),x=T?s():null;super(p,!1,w,x),this._nativePannerNode=w,this._orientationX=t(this,T,w.orientationX,ai,Ei),this._orientationY=t(this,T,w.orientationY,ai,Ei),this._orientationZ=t(this,T,w.orientationZ,ai,Ei),this._positionX=t(this,T,w.positionX,ai,Ei),this._positionY=t(this,T,w.positionY,ai,Ei),this._positionZ=t(this,T,w.positionZ,ai,Ei),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(p){this._nativePannerNode.coneInnerAngle=p}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(p){this._nativePannerNode.coneOuterAngle=p}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(p){this._nativePannerNode.coneOuterGain=p}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(p){this._nativePannerNode.distanceModel=p}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(p){this._nativePannerNode.maxDistance=p}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(p){this._nativePannerNode.panningModel=p}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(p){this._nativePannerNode.refDistance=p}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(p){this._nativePannerNode.rolloffFactor=p}},xM=(i,t,e,s,r,l,u,f,p,m)=>()=>{const v=new WeakMap;let y=null;const w=async(T,x)=>{let A=null,E=l(T);const I={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation},B={...I,coneInnerAngle:E.coneInnerAngle,coneOuterAngle:E.coneOuterAngle,coneOuterGain:E.coneOuterGain,distanceModel:E.distanceModel,maxDistance:E.maxDistance,panningModel:E.panningModel,refDistance:E.refDistance,rolloffFactor:E.rolloffFactor},D=ni(E,x);if("bufferSize"in E)A=s(x,{...I,gain:1});else if(!D){const F={...B,orientationX:E.orientationX.value,orientationY:E.orientationY.value,orientationZ:E.orientationZ.value,positionX:E.positionX.value,positionY:E.positionY.value,positionZ:E.positionZ.value};E=r(x,F)}if(v.set(x,A===null?E:A),A!==null){if(y===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const X=new u(6,T.context.length,x.sampleRate),tt=t(X,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});tt.connect(X.destination),y=(async()=>{const P=await Promise.all([T.orientationX,T.orientationY,T.orientationZ,T.positionX,T.positionY,T.positionZ].map(async(J,$)=>{const U=e(X,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:$===0?1:0});return await f(X,J,U.offset),U}));for(let J=0;J<6;J+=1)P[J].connect(tt,0,J),P[J].start(0);return m(X)})()}const F=await y,R=s(x,{...I,gain:1});await p(T,x,R);const H=[];for(let X=0;X<F.numberOfChannels;X+=1)H.push(F.getChannelData(X));let Z=[H[0][0],H[1][0],H[2][0]],q=[H[3][0],H[4][0],H[5][0]],V=s(x,{...I,gain:1}),W=r(x,{...B,orientationX:Z[0],orientationY:Z[1],orientationZ:Z[2],positionX:q[0],positionY:q[1],positionZ:q[2]});R.connect(V).connect(W.inputs[0]),W.connect(A);for(let X=128;X<F.length;X+=128){const tt=[H[0][X],H[1][X],H[2][X]],P=[H[3][X],H[4][X],H[5][X]];if(tt.some((J,$)=>J!==Z[$])||P.some((J,$)=>J!==q[$])){Z=tt,q=P;const J=X/x.sampleRate;V.gain.setValueAtTime(0,J),V=s(x,{...I,gain:0}),W=r(x,{...B,orientationX:Z[0],orientationY:Z[1],orientationZ:Z[2],positionX:q[0],positionY:q[1],positionZ:q[2]}),V.gain.setValueAtTime(1,J),R.connect(V).connect(W.inputs[0]),W.connect(A)}}return A}return D?(await i(x,T.orientationX,E.orientationX),await i(x,T.orientationY,E.orientationY),await i(x,T.orientationZ,E.orientationZ),await i(x,T.positionX,E.positionX),await i(x,T.positionY,E.positionY),await i(x,T.positionZ,E.positionZ)):(await f(x,T.orientationX,E.orientationX),await f(x,T.orientationY,E.orientationY),await f(x,T.orientationZ,E.orientationZ),await f(x,T.positionX,E.positionX),await f(x,T.positionY,E.positionY),await f(x,T.positionZ,E.positionZ)),Dc(E)?await p(T,x,E.inputs[0]):await p(T,x,E),E};return{render(T,x){const A=v.get(x);return A!==void 0?Promise.resolve(A):w(T,x)}}},SM={disableNormalization:!1},TM=(i,t,e,s)=>class J1{constructor(l,u){const f=t(l),p=s({...SM,...u}),m=i(f,p);return e.add(m),m}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===J1.prototype||e.has(l)}},AM=(i,t)=>(e,s,r)=>(i(s).replay(r),t(s,e,r)),EM=(i,t,e)=>async(s,r,l)=>{const u=i(s);await Promise.all(u.activeInputs.map((f,p)=>Array.from(f).map(async([m,v])=>{const w=await t(m).render(m,r),T=s.context.destination;!e(m)&&(s!==T||!e(s))&&w.connect(l,v,p)})).reduce((f,p)=>[...f,...p],[]))},CM=(i,t,e)=>async(s,r,l)=>{const u=t(s);await Promise.all(Array.from(u.activeInputs).map(async([f,p])=>{const v=await i(f).render(f,r);e(f)||v.connect(l,p)}))},LM=(i,t,e,s)=>r=>i(sh,()=>sh(r))?Promise.resolve(i(s,s)).then(l=>{if(!l){const u=e(r,512,0,1);r.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>r.currentTime,u.connect(r.destination)}return r.startRendering()}):new Promise(l=>{const u=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=f=>{u.disconnect(),l(f.renderedBuffer)},u.connect(r.destination),r.startRendering()}),MM=i=>(t,e)=>{i.set(t,e)},kM=i=>(t,e)=>i.set(t,e),DM=(i,t,e,s,r,l,u,f)=>(p,m)=>e(p).render(p,m).then(()=>Promise.all(Array.from(s(m)).map(v=>e(v).render(v,m)))).then(()=>r(m)).then(v=>(typeof v.copyFromChannel!="function"?(u(v),o0(v)):t(l,()=>l(v))||f(v),i.add(v),v)),OM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},RM=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=r(f),v={...OM,...p},y=e(m,v),w=l(m),T=w?s():null;super(f,!1,y,T),this._pan=t(this,w,y.pan)}get pan(){return this._pan}},IM=(i,t,e,s,r)=>()=>{const l=new WeakMap,u=async(f,p)=>{let m=e(f);const v=ni(m,p);if(!v){const y={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value};m=t(p,y)}return l.set(p,m),v?await i(p,f.pan,m.pan):await s(p,f.pan,m.pan),Dc(m)?await r(f,p,m.inputs[0]):await r(f,p,m),m};return{render(f,p){const m=l.get(p);return m!==void 0?Promise.resolve(m):u(f,p)}}},NM=i=>()=>{if(i===null)return!1;try{new i({length:1,sampleRate:44100})}catch{return!1}return!0},zM=(i,t)=>async()=>{if(i===null)return!0;if(t===null)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),r=URL.createObjectURL(e);let l=!1,u=!1;try{await s.audioWorklet.addModule(r);const f=new i(s,"a",{numberOfOutputs:0}),p=s.createOscillator();f.port.onmessage=()=>l=!0,f.onprocessorerror=()=>u=!0,p.connect(f),p.start(0),await s.startRendering(),await new Promise(m=>setTimeout(m))}catch{}finally{URL.revokeObjectURL(r)}return l&&!u},PM=(i,t)=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100),s=i(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{e.oncomplete=()=>{s.disconnect(),r(e.currentTime!==0)},e.startRendering()})},BM=()=>new DOMException("","UnknownError"),UM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},HM=(i,t,e,s,r,l,u)=>class extends i{constructor(p,m){const v=r(p),y={...UM,...m},w=e(v,y),x=l(v)?s():null;super(p,!0,w,x),this._isCurveNullified=!1,this._nativeWaveShaperNode=w,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(p){if(p===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(p.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=p}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(p){this._nativeWaveShaperNode.oversample=p}},VM=(i,t,e)=>()=>{const s=new WeakMap,r=async(l,u)=>{let f=t(l);if(!ni(f,u)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,curve:f.curve,oversample:f.oversample};f=i(u,m)}return s.set(u,f),Dc(f)?await e(l,u,f.inputs[0]):await e(l,u,f),f};return{render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):r(l,u)}}},qM=()=>typeof window>"u"?null:window,jM=(i,t)=>e=>{e.copyFromChannel=(s,r,l=0)=>{const u=i(l),f=i(r);if(f>=e.numberOfChannels)throw t();const p=e.length,m=e.getChannelData(f),v=s.length;for(let y=u<0?-u:0;y+u<p&&y<v;y+=1)s[y]=m[y+u]},e.copyToChannel=(s,r,l=0)=>{const u=i(l),f=i(r);if(f>=e.numberOfChannels)throw t();const p=e.length,m=e.getChannelData(f),v=s.length;for(let y=u<0?-u:0;y+u<p&&y<v;y+=1)m[y+u]=s[y]}},GM=i=>t=>{t.copyFromChannel=(e=>(s,r,l=0)=>{const u=i(l),f=i(r);if(u<t.length)return e.call(t,s,f,u)})(t.copyFromChannel),t.copyToChannel=(e=>(s,r,l=0)=>{const u=i(l),f=i(r);if(u<t.length)return e.call(t,s,f,u)})(t.copyToChannel)},ZM=i=>(t,e)=>{const s=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=s),i(t,"buffer",r=>()=>{const l=r.call(t);return l===s?null:l},r=>l=>r.call(t,l===null?s:l))},WM=(i,t)=>(e,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw i()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw i()}});const r=e.createBufferSource();t(s,()=>{const f=s.numberOfInputs;for(let p=0;p<f;p+=1)r.connect(s,0,p)},()=>r.disconnect(s))},$1=(i,t,e)=>i.copyFromChannel===void 0?i.getChannelData(e)[0]:(i.copyFromChannel(t,e),t[0]),tS=i=>{if(i===null)return!1;const t=i.length;return t%2!==0?i[Math.floor(t/2)]!==0:i[t/2-1]+i[t/2]!==0},Ah=(i,t,e,s)=>{let r=i;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:l,set:u}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(i,t,{get:e(l),set:s(u)})},YM=i=>({...i,outputChannelCount:i.outputChannelCount!==void 0?i.outputChannelCount:i.numberOfInputs===1&&i.numberOfOutputs===1?[i.channelCount]:Array.from({length:i.numberOfOutputs},()=>1)}),XM=i=>({...i,channelCount:i.numberOfOutputs}),FM=i=>{const{imag:t,real:e}=i;return t===void 0?e===void 0?{...i,imag:[0,0],real:[0,0]}:{...i,imag:Array.from(e,()=>0),real:e}:e===void 0?{...i,imag:t,real:Array.from(t,()=>0)}:{...i,imag:t,real:e}},eS=(i,t,e)=>{try{i.setValueAtTime(t,e)}catch(s){if(s.code!==9)throw s;eS(i,t,e+1e-7)}},QM=i=>{const t=i.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},KM=i=>{const t=i.createBufferSource(),e=i.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},JM=i=>{const t=i.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},h0=i=>{const t=i.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},nS=i=>{const t=i.createBuffer(1,1,44100),e=i.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},f0=i=>{const t=i.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},$M=i=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(i)}finally{t.close(),e.close()}},tk=i=>{i.start=(t=>(e=0,s=0,r)=>{const l=i.buffer,u=l===null?s:Math.min(l.duration,s);l!==null&&u>l.duration-.5/i.context.sampleRate?t.call(i,e,0,0):t.call(i,e,u,r)})(i.start)},iS=(i,t)=>{const e=t.createGain();i.connect(e);const s=(r=>()=>{r.call(i,e),i.removeEventListener("ended",s)})(i.disconnect);i.addEventListener("ended",s),Oc(i,e),i.stop=(r=>{let l=!1;return(u=0)=>{if(l)try{r.call(i,u)}catch{e.gain.setValueAtTime(0,u)}else r.call(i,u),l=!0}})(i.stop)},Rc=(i,t)=>e=>{const s={value:i};return Object.defineProperties(e,{currentTarget:s,target:s}),typeof t=="function"?t.call(i,e):t.handleEvent.call(i,e)},ek=wE(ml),nk=CE(ml),ik=UC($d),sS=new WeakMap,sk=iL(sS),Gs=mC(new Map,new WeakMap),yr=qM(),rS=RL(Gs,xr),d0=nL(li),Fn=EM(li,d0,hl),rk=OE(rS,Je,Fn),Ye=oL(Jd),co=oM(yr),He=SL(co),oS=new WeakMap,aS=FC(Rc),Eh=PL(yr),p0=vL(Eh),m0=bL(yr),lS=wL(yr),rh=UL(yr),gn=iC(xE(N1),EE(ek,nk,Od,ik,Rd,li,sk,vh,Je,ml,ao,hl,bd),Gs,pL(Mg,Rd,li,Je,ih,ao),xr,tp,ui,NC(Od,Mg,li,Je,ih,Ye,ao,He),qC(oS,li,qs),aS,Ye,p0,m0,lS,He,rh),ok=DE(gn,rk,xr,rS,Ye,He),_0=new WeakSet,mx=IL(yr),cS=LC(new Uint32Array(1)),g0=jM(cS,xr),y0=GM(cS),uS=IE(_0,Gs,ui,mx,co,NM(mx),g0,y0),ep=LE(Di),hS=CM(d0,wh,hl),Sr=xC(hS),Ic=zL(ep,Gs,QM,KM,JM,h0,nS,f0,tk,ZM(Ah),iS),Tr=AM(sL(wh),hS),ak=PE(Sr,Ic,Je,Tr,Fn),Zs=sC(SE(z1),oS,r0,rC,mE,_E,gE,yE,vE,Eg,R1,Eh,eS),lk=zE(gn,ak,Zs,Hn,Ic,Ye,He,Rc),ck=WE(gn,YE,xr,Hn,BL(Di,Ah),Ye,He,Fn),uk=pC(Sr,Q1,Je,Tr,Fn),_l=kM(sS),hk=dC(gn,Zs,uk,tp,Q1,Ye,He,_l),da=DL(ml,m0),fk=WM(Hn,da),pa=WL(Eh,fk),dk=yC(pa,Je,Fn),pk=gC(gn,dk,pa,Ye,He),mk=wC(Sh,Je,Fn),_k=bC(gn,mk,Sh,Ye,He,XM),gk=FL(ep,Ic,Di,da),Nc=XL(ep,Gs,gk,h0,f0),yk=CC(Sr,Nc,Je,Tr,Fn),vk=EC(gn,Zs,yk,Nc,Ye,He,Rc),fS=QL(ui,Ah),bk=DC(fS,Je,Fn),wk=kC(gn,bk,fS,Ye,He,_l),xk=BC(Sr,K1,Je,Tr,Fn),Sk=PC(gn,Zs,xk,K1,Ye,He,_l),dS=KL(ui),Tk=WC(Sr,dS,Je,Tr,Fn),Ak=ZC(gn,Zs,Tk,dS,ui,Ye,He,_l),Ek=tL(Sr,Di,Je,Tr,Fn),Ck=$C(gn,Zs,Ek,Di,Ye,He),Lk=eM(tp,Hn,Th,ui),np=LM(Gs,Di,Th,PM(Di,co)),Mk=dL(Ic,Je,co,Fn,np),kk=JL(Lk),Dk=hL(gn,kk,Mk,Ye,He,_l),Ok=XE(Zs,pa,Nc,Th,ui,$1,He,Ah),pS=new WeakMap,Rk=kL(ck,Ok,aS,He,pS,Rc),mS=aM(ep,Gs,h0,nS,f0,iS),Ik=vM(Sr,mS,Je,Tr,Fn),Nk=yM(gn,Zs,mS,Ik,Ye,He,Rc),_S=TC(Ic),zk=pM(_S,Hn,Di,tS,da),ip=dM(_S,Hn,zk,tS,da,Eh,Ah),Pk=cM(Od,Hn,pa,Di,Th,ip,ui,Rd,$1,da),gS=lM(Pk),Bk=xM(Sr,pa,Nc,Di,gS,Je,co,Tr,Fn,np),Uk=wM(gn,Zs,gS,Bk,Ye,He,_l),Hk=uM(xr),Vk=TM(Hk,Ye,new WeakSet,FM),qk=fM(pa,Sh,Di,ip,ui,da),yS=hM(qk,ui),jk=IM(Sr,yS,Je,Tr,Fn),Gk=RM(gn,Zs,yS,jk,Ye,He),Zk=VM(ip,Je,Fn),Wk=HM(gn,Hn,ip,Zk,Ye,He,_l),vS=TL(yr),v0=QC(yr),bS=new WeakMap,Yk=aL(bS,co),Xk=vS?AE(Gs,ui,XC(yr),v0,KC(bE),Ye,Yk,He,rh,new WeakMap,new WeakMap,zM(rh,co),yr):void 0,Fk=xL(p0,He),Qk=IC(_0,Gs,RC,YC,new WeakSet,Ye,Fk,kd,sh,g0,y0),wS=hC(Xk,ok,uS,lk,hk,pk,_k,vk,wk,Qk,Sk,Ak,Ck,Dk,Rk,Nk,Uk,Vk,Gk,Wk),Kk=AL(gn,nM,Ye,He),Jk=CL(gn,iM,Ye,He),$k=LL(gn,sM,Ye,He),tD=rM(Hn,He),eD=ML(gn,tD,Ye),nD=ZE(wS,Hn,ui,BM,Kk,Jk,$k,eD,Eh),b0=lL(pS),iD=ME(b0),xS=SC(xr),sD=HC(b0),SS=jC(xr),TS=new WeakMap,rD=eL(TS,qs),oD=ZL(xS,xr,Hn,pa,Sh,Nc,Di,Th,ui,SS,v0,rD,da),aD=VL(Hn,oD,Di,ui,da),lD=uC(Sr,xS,Ic,pa,Sh,Nc,Di,sD,SS,v0,Je,rh,co,Tr,Fn,np),cD=rL(bS),uD=MM(TS),_x=vS?aC(iD,gn,Zs,lD,aD,li,cD,Ye,He,rh,YM,uD,$M,Rc):void 0,hD=OC(ui,co),fD=DM(_0,Gs,d0,b0,np,kd,g0,y0),dD=_M(wS,Gs,Hn,hD,fD),pD=mL(Jd,p0),mD=_L(s0,m0),_D=gL(r0,lS),gD=yL(Jd,He);function Ss(i){return i===void 0}function _e(i){return i!==void 0}function yD(i){return typeof i=="function"}function vr(i){return typeof i=="number"}function ll(i){return Object.prototype.toString.call(i)==="[object Object]"&&i.constructor===Object}function AS(i){return typeof i=="boolean"}function Vs(i){return Array.isArray(i)}function lo(i){return typeof i=="string"}function od(i){return lo(i)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(i)}function $t(i,t){if(!i)throw new Error(t)}function Qi(i,t,e=1/0){if(!(t<=i&&i<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${i}`)}function ES(i){!i.isOffline&&i.state!=="running"&&w0('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let CS=!1,gx=!1;function yx(i){CS=i}function vD(i){Ss(i)&&CS&&!gx&&(gx=!0,w0("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let LS=console;function bD(...i){LS.log(...i)}function w0(...i){LS.warn(...i)}function wD(i){return new nD(i)}function xD(i,t,e){return new dD(i,t,e)}const Yi=typeof self=="object"?self:null,SD=Yi&&(Yi.hasOwnProperty("AudioContext")||Yi.hasOwnProperty("webkitAudioContext"));function TD(i,t,e){return $t(_e(_x),"AudioWorkletNode only works in a secure context (https or localhost)"),new(i instanceof Yi?.BaseAudioContext?Yi?.AudioWorkletNode:_x)(i,t,e)}function Ws(i,t,e,s){var r=arguments.length,l=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,t,e,s);else for(var f=i.length-1;f>=0;f--)(u=i[f])&&(l=(r<3?u(l):r>3?u(t,e,l):u(t,e))||l);return r>3&&l&&Object.defineProperty(t,e,l),l}function _n(i,t,e,s){function r(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function f(v){try{m(s.next(v))}catch(y){u(y)}}function p(v){try{m(s.throw(v))}catch(y){u(y)}}function m(v){v.done?l(v.value):r(v.value).then(f,p)}m((s=s.apply(i,t||[])).next())})}class AD{constructor(t,e,s,r){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),s=new Worker(e);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((e=this._worker)===null||e===void 0||e.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function fl(i){return _D(i)}function sa(i){return mD(i)}function wd(i){return gD(i)}function _c(i){return pD(i)}function ED(i){return i instanceof uS}function CD(i,t){return i==="value"||fl(t)||sa(t)||ED(t)}function gr(i,...t){if(!t.length)return i;const e=t.shift();if(ll(i)&&ll(e))for(const s in e)CD(s,e[s])?i[s]=e[s]:ll(e[s])?(i[s]||Object.assign(i,{[s]:{}}),gr(i[s],e[s])):Object.assign(i,{[s]:e[s]});return gr(i,...t)}function LD(i,t){return i.length===t.length&&i.every((e,s)=>t[s]===e)}function zt(i,t,e=[],s){const r={},l=Array.from(t);if(ll(l[0])&&s&&!Reflect.has(l[0],s)&&(Object.keys(l[0]).some(f=>Reflect.has(i,f))||(gr(r,{[s]:l[0]}),e.splice(e.indexOf(s),1),l.shift())),l.length===1&&ll(l[0]))gr(r,l[0]);else for(let u=0;u<e.length;u++)_e(l[u])&&(r[e[u]]=l[u]);return gr(i,r)}function MD(i){return i.constructor.getDefaults()}function cl(i,t){return Ss(i)?t:i}function bs(i,t){return t.forEach(e=>{Reflect.has(i,e)&&delete i[e]}),i}class uo{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Yi&&this.toString()===Yi.TONE_DEBUG_CLASS)&&bD(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}uo.version=O1;const x0=1e-6;function Ec(i,t){return i>t+x0}function Ig(i,t){return Ec(i,t)||Bs(i,t)}function Pd(i,t){return i+x0<t}function Bs(i,t){return Math.abs(i-t)<x0}function gl(i,t,e){return Math.max(Math.min(i,e),t)}class Ts extends uo{constructor(){super(),this.name="Timeline",this._timeline=[];const t=zt(Ts.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if($t(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];$t(Ig(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){const e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){const s=this._search(t,e);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const s=this._search(t,e);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Bs(this._timeline[e].time,t)){for(let s=e;s>=0&&Bs(this._timeline[s].time,t);s--)e=s;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&Ig(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let l=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;s<l;){let u=Math.floor(s+(l-s)/2);const f=this._timeline[u],p=this._timeline[u+1];if(Bs(f[e],t)){for(let m=u;m<this._timeline.length;m++){const v=this._timeline[m];if(Bs(v[e],t))u=m;else break}return u}else{if(Pd(f[e],t)&&Ec(p[e],t))return u;Ec(f[e],t)?l=u:s=u+1}}return-1}_iterate(t,e=0,s=this._timeline.length-1){this._timeline.slice(e,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const s=this._search(t);return s!==-1&&this._iterate(e,0,s),this}forEachAfter(t,e){const s=this._search(t);return this._iterate(e,s+1),this}forEachBetween(t,e,s){let r=this._search(t),l=this._search(e);return r!==-1&&l!==-1?(this._timeline[r].time!==t&&(r+=1),this._timeline[l].time===e&&(l-=1),this._iterate(s,r,l)):r===-1&&this._iterate(s,0,l),this}forEachFrom(t,e){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(e,s+1),this}forEachAtTime(t,e){const s=this._search(t);if(s!==-1&&Bs(this._timeline[s].time,t)){let r=s;for(let l=s;l>=0&&Bs(this._timeline[l].time,t);l--)r=l;this._iterate(l=>{e(l)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const MS=[];function sp(i){MS.push(i)}function kD(i){MS.forEach(t=>t(i))}const kS=[];function rp(i){kS.push(i)}function DD(i){kS.forEach(t=>t(i))}class Ch extends uo{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(r=>{Ss(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}),this}once(t,e){const s=(...r)=>{e(...r),this.off(t,s)};return this.on(t,s),this}off(t,e){return t.split(/\W+/).forEach(r=>{if(Ss(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Ss(e))this._events[r]=[];else{const l=this._events[r];for(let u=l.length-1;u>=0;u--)l[u]===e&&l.splice(u,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let r=0,l=s.length;r<l;r++)s[r].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const s=Object.getOwnPropertyDescriptor(Ch.prototype,e);Object.defineProperty(t.prototype,e,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class DS extends Ch{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Lh extends DS{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ts,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=zt(Lh.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=wD({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new AD(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((e=arguments[0])===null||e===void 0)&&e.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(kD(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,s){return this._context.createBuffer(t,e,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,s){return this._context.createPeriodicWave(t,e,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return $t(_c(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return $t(_c(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return $t(_c(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){$t(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){$t(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){$t(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){$t(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return TD(this.rawContext,t,e)}addAudioWorkletModule(t){return _n(this,void 0,void 0,function*(){$t(_e(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return _n(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return _c(this._context)?this._context.resume():Promise.resolve()}close(){return _n(this,void 0,void 0,function*(){_c(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&DD(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),s=e.getChannelData(0);for(let l=0;l<s.length;l++)s[l]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();this._timeouts.forEachBefore(t,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(t,e){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const s=++this._timeoutIds,r=()=>{const l=this.now();this._timeouts.add({callback:()=>{t(),r()},id:s,time:l+e})};return r(),s}}class OD extends DS{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return _n(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function ge(i,t){Vs(t)?t.forEach(e=>ge(i,e)):Object.defineProperty(i,t,{enumerable:!0,writable:!1})}function S0(i,t){Vs(t)?t.forEach(e=>S0(i,e)):Object.defineProperty(i,t,{writable:!0})}const xe=()=>{};class Ze extends uo{constructor(){super(),this.name="ToneAudioBuffer",this.onload=xe;const t=zt(Ze.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,lo(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:xe,onload:xe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Li().sampleRate}set(t){return t instanceof Ze?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return _n(this,void 0,void 0,function*(){const e=Ze.load(t).then(s=>{this.set(s),this.onload(this)});Ze.downloads.push(e);try{yield e}finally{const s=Ze.downloads.indexOf(e);Ze.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Vs(t)&&t[0].length>0,s=e?t.length:1,r=e?t[0].length:t.length,l=Li(),u=l.createBuffer(s,r,l.sampleRate),f=!e&&s===1?[t]:t;for(let p=0;p<s;p++)u.copyToChannel(f[p],p);return this._buffer=u,this}toMono(t){if(vr(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const l=this.toArray(r);for(let u=0;u<l.length;u++)e[u]+=l[u]}e=e.map(r=>r/s),this.fromArray(e)}return this}toArray(t){if(vr(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const e=[];for(let s=0;s<this.numberOfChannels;s++)e[s]=this.getChannelData(s);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){$t(this.loaded,"Buffer is not loaded");const s=Math.floor(t*this.sampleRate),r=Math.floor(e*this.sampleRate);$t(s<r,"The start time must be less than the end time");const l=r-s,u=Li().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let f=0;f<this.numberOfChannels;f++)u.copyToChannel(this.getChannelData(f).subarray(s,r),f);return new Ze(u)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new Ze().fromArray(t)}static fromUrl(t){return _n(this,void 0,void 0,function*(){return yield new Ze().load(t)})}static load(t){return _n(this,void 0,void 0,function*(){const e=Ze.baseUrl===""||Ze.baseUrl.endsWith("/")?Ze.baseUrl:Ze.baseUrl+"/",s=yield fetch(e+t);if(!s.ok)throw new Error(`could not load url: ${t}`);const r=yield s.arrayBuffer();return yield Li().decodeAudioData(r)})}static supportsType(t){const e=t.split("."),s=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return _n(this,void 0,void 0,function*(){for(yield Promise.resolve();Ze.downloads.length;)yield Ze.downloads[0]})}}Ze.baseUrl="";Ze.downloads=[];class op extends Lh{constructor(){super({clockSource:"offline",context:wd(arguments[0])?arguments[0]:xD(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:wd(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=wd(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return _n(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const s=Math.floor(this.sampleRate/128);t&&e%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return _n(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Ze(e)})}close(){return Promise.resolve()}}const OS=new OD;let sl=OS;function Li(){return sl===OS&&SD&&RD(new Lh),sl}function RD(i,t=!1){t&&sl.dispose(),_c(i)?sl=new Lh(i):wd(i)?sl=new op(i):sl=i}function ad(){return sl.resume()}if(Yi&&!Yi.TONE_SILENCE_LOGGING){const t=` * Tone.js v${O1} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function ID(i){return Math.pow(10,i/20)}function ND(i){return 20*(Math.log(i)/Math.LN10)}function RS(i){return Math.pow(2,i/12)}let ap=440;function zD(){return ap}function PD(i){ap=i}function Ng(i){return Math.round(IS(i))}function IS(i){return 69+12*Math.log2(i/ap)}function BD(i){return ap*Math.pow(2,(i-69)/12)}class T0 extends uo{constructor(t,e,s){super(),this.defaultUnits="s",this._val=e,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const s=parseInt(t,10),r=e==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,s)=>{let r=0;return t&&t!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r+=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof T0&&this.fromType(this._val),Ss(this._val))return this._noArg();if(lo(this._val)&&Ss(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(ll(this._val)){let t=0;for(const e in this._val)if(_e(this._val[e])){const s=this._val[e],r=new this.constructor(this.context,e).valueOf()*s;t+=r}return t}if(_e(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return lo(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class ws extends T0{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new ws(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const s=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),f=Math.round(r/s)*s-r;return r+f*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let l=1;l<9;l++){const u=Math.pow(2,l);e.push(u+"n."),e.push(u+"n"),e.push(u+"t")}e.push("0");let s=e[0],r=new ws(this.context,e[0]).toSeconds();return e.forEach(l=>{const u=new ws(this.context,l).toSeconds();Math.abs(u-t)<Math.abs(r-t)&&(s=l,r=u)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const s=Math.floor(e/this._getTimeSignature());let r=e%1*4;e=Math.floor(e)%this._getTimeSignature();const l=r.toString();return l.length>3&&(r=parseFloat(parseFloat(l).toFixed(3))),[s,e,r].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Ng(this.toFrequency())}_now(){return this.context.now()}}function UD(i,t){return new ws(Li(),i,t)}class xs extends ws{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return zD()}static set A4(t){PD(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:xs.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const r=HD[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?r:xs.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,s){let r=1;return t&&t!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r*=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(t){return new xs(this.context,this.valueOf()*RS(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return Ng(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/xs.A4);let s=Math.round(12*e)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),VD[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return BD(t)}static ftom(t){return Ng(t)}}const HD={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},VD=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Qu extends ws{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Vn extends uo{constructor(){super();const t=zt(Vn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Li()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return vD(t),new ws(this.context,t).toSeconds()}toFrequency(t){return new xs(this.context,t).toFrequency()}toTicks(t){return new Qu(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(s=>{Ss(t[s])&&delete e[s]}),e}get(){const t=MD(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const s=this[e];_e(s)&&_e(s.value)&&_e(s.setValueAtTime)?t[e]=s.value:s instanceof Vn?t[e]=s._getPartialProperties(t[e]):Vs(s)||vr(s)||lo(s)||AS(s)?t[e]=s:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&_e(this[e])&&(this[e]&&_e(this[e].value)&&_e(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Vn?this[e].set(t[e]):this[e]=t[e])}),this}}class lp extends Ts{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,s){return Qi(e,0),this.add(Object.assign({},s,{state:t,time:e})),this}getLastState(t,e){const s=this._search(e);for(let r=s;r>=0;r--){const l=this._timeline[r];if(l.state===t)return l}}getNextState(t,e){const s=this._search(e);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const l=this._timeline[r];if(l.state===t)return l}}}class ve extends Vn{constructor(){const t=zt(ve.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,$t(_e(t.param)&&(fl(t.param)||t.param instanceof ve),"param must be an AudioParam");!fl(t.param);)t.param=t.param._param;this._swappable=_e(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Ts(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,_e(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Vn.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return _e(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return _e(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return _e(this.maxValue)&&_e(this.minValue)&&Qi(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?ID(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?ND(t):t}setValueAtTime(t,e){const s=this.toSeconds(e),r=this._fromType(t);return $t(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),s=this._events.getAfter(e),r=this._events.get(e);let l=this._initialValue;if(r===null)l=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const u=this._events.getBefore(r.time);let f;u===null?f=this._initialValue:f=u.value,r.type==="setTargetAtTime"&&(l=this._exponentialApproach(r.time,f,r.value,r.constant,e))}else if(s===null)l=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=r.value;if(r.type==="setTargetAtTime"){const f=this._events.getBefore(r.time);f===null?u=this._initialValue:u=f.value}s.type==="linearRampToValueAtTime"?l=this._linearInterpolate(r.time,u,s.time,s.value,e):l=this._exponentialInterpolate(r.time,u,s.time,s.value,e)}else l=r.value;return this._toType(l)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const s=this._fromType(t),r=this.toSeconds(e);return $t(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(t,e){let s=this._fromType(t);s=Bs(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(e);return $t(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(e)),this}linearRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(e)),this}targetRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,e),this}exponentialApproachValueAtTime(t,e,s){e=this.toSeconds(e),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+s*.9),this.linearRampToValueAtTime(t,e+s),this}setTargetAtTime(t,e,s){const r=this._fromType(t);$t(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const l=this.toSeconds(e);return this._assertRange(r),$t(isFinite(r)&&isFinite(l),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:s,time:l,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,l,s),this._param.setTargetAtTime(r,l,s),this}setValueCurveAtTime(t,e,s,r=1){s=this.toSeconds(s),e=this.toSeconds(e);const l=this._fromType(t[0])*r;this.setValueAtTime(this._toType(l),e);const u=s/(t.length-1);for(let f=1;f<t.length;f++){const p=this._fromType(t[f])*r;this.linearRampToValueAtTime(this._toType(p),e+f*u)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return $t(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),s=this._fromType(this.getValueAtTime(e));$t(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+s);const r=this._events.get(e),l=this._events.getAfter(e);return r&&Bs(r.time,e)?l?(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):l&&(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time),l.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),e):l.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),e)),this._events.add({time:e,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,e),this}rampTo(t,e=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,s):this.linearRampTo(t,e,s),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const s=this._events.get(e);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),l=r?r.time:e+2,u=(l-e)/10;for(let f=e;f<l;f+=u)t.linearRampToValueAtTime(this.getValueAtTime(f),f)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?t.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?t.setTargetAtTime(r.value,r.time,r.constant):t[r.type](r.value,r.time)}),this}setParam(t){$t(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,s,r,l){return s+(e-s)*Math.exp(-(l-t)/r)}_linearInterpolate(t,e,s,r,l){return e+(r-e)*((l-t)/(s-t))}_exponentialInterpolate(t,e,s,r,l){return e*Math.pow(r/e,(l-t)/(s-t))}}class Bt extends Vn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return _e(this.input)?fl(this.input)||this.input instanceof ve?1:this.input.numberOfInputs:0}get numberOfOutputs(){return _e(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return _e(t)&&(t instanceof Bt||sa(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();$t(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,s=0){return js(this,t,e,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return w0("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,s=0){return NS(this,t,e,s),this}chain(...t){return ra(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),_e(this.input)&&(this.input instanceof Bt?this.input.dispose():sa(this.input)&&this.input.disconnect()),_e(this.output)&&(this.output instanceof Bt?this.output.dispose():sa(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ra(...i){const t=i.shift();i.reduce((e,s)=>(e instanceof Bt?e.connect(s):sa(e)&&js(e,s),s),t)}function js(i,t,e=0,s=0){for($t(_e(i),"Cannot connect from undefined node"),$t(_e(t),"Cannot connect to undefined node"),(t instanceof Bt||sa(t))&&$t(t.numberOfInputs>0,"Cannot connect to node with no inputs"),$t(i.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Bt||t instanceof ve;)_e(t.input)&&(t=t.input);for(;i instanceof Bt;)_e(i.output)&&(i=i.output);fl(t)?i.connect(t,e):i.connect(t,e,s)}function NS(i,t,e=0,s=0){if(_e(t))for(;t instanceof Bt;)t=t.input;for(;!sa(i);)_e(i.output)&&(i=i.output);fl(t)?i.disconnect(t,e):sa(t)?i.disconnect(t,e,s):i.disconnect()}class ae extends Bt{constructor(){const t=zt(ae.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new ve({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),ge(this,"gain")}static getDefaults(){return Object.assign(Bt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Cc extends Bt{constructor(t){super(t),this.onended=xe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ae({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const s=this.toSeconds(e);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Bt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:xe})}_startGain(t,e=1){$t(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+s):this._gainNode.gain.exponentialApproachValueAtTime(e,t,s)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){$t(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==xe&&(this.onended(this),this.onended=xe,!this.context.isOffline)){const t=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),$t(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=xe,this}}class A0 extends Cc{constructor(){const t=zt(A0.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),js(this._source,this._gainNode),this.offset=new ve({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Cc.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Me extends Bt{constructor(){const t=zt(Me.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new A0({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Bt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,s=0){return cp(this,t,e,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,s){return this._param.exponentialRampTo(t,e,s),this}linearRampTo(t,e,s){return this._param.linearRampTo(t,e,s),this}targetRampTo(t,e,s){return this._param.targetRampTo(t,e,s),this}exponentialApproachValueAtTime(t,e,s){return this._param.exponentialApproachValueAtTime(t,e,s),this}setTargetAtTime(t,e,s){return this._param.setTargetAtTime(t,e,s),this}setValueCurveAtTime(t,e,s,r){return this._param.setValueCurveAtTime(t,e,s,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,s){return this._param.rampTo(t,e,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function cp(i,t,e,s){(t instanceof ve||fl(t)||t instanceof Me&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Me&&(t.overridden=!0)),js(i,t,e,s)}class E0 extends ve{constructor(){const t=zt(E0.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new Ts(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ve.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,s){e=this.toSeconds(e),this.setRampPoint(e);const r=this._fromType(t),l=this._events.get(e),u=Math.round(Math.max(1/s,1));for(let f=0;f<=u;f++){const p=s*f+e,m=this._exponentialApproach(l.time,l.value,r,s,p);this.linearRampToValueAtTime(this._toType(m),p)}return this}setValueAtTime(t,e){const s=this.toSeconds(e);super.setValueAtTime(t,e);const r=this._events.get(s),l=this._events.previousEvent(r),u=this._getTicksUntilEvent(l,s);return r.ticks=Math.max(u,0),this}linearRampToValueAtTime(t,e){const s=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const r=this._events.get(s),l=this._events.previousEvent(r),u=this._getTicksUntilEvent(l,s);return r.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const s=this._fromType(t),r=this._events.get(e),l=Math.round(Math.max((e-r.time)*10,1)),u=(e-r.time)/l;for(let f=0;f<=l;f++){const p=u*f+r.time,m=this._exponentialInterpolate(r.time,r.value,e,s,p);this.linearRampToValueAtTime(this._toType(m),p)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ss(t.ticks)){const u=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(u,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let r=this._fromType(this.getValueAtTime(e));const l=this._events.get(e);return l&&l.time===e&&l.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(s+r)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),s=this._events.get(e);return Math.max(this._getTicksUntilEvent(s,e),0)}getDurationOfTicks(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-s}getTimeOfTick(t){const e=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&s&&s.type==="linearRampToValueAtTime"&&e.value!==s.value){const r=this._fromType(this.getValueAtTime(e.time)),u=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-e.time),f=Math.sqrt(Math.pow(r,2)-2*u*(e.ticks-t)),p=(-r+f)/u,m=(-r-f)/u;return(p>0?p:m)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const s=this.toSeconds(e),r=this.toSeconds(t),l=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-l}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class C0 extends Me{constructor(){const t=zt(C0.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new E0({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Me.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class L0 extends Vn{constructor(){const t=zt(L0.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new lp,this._tickOffset=new Ts,this._ticksAtTime=new Ts,this._secondsAtTime=new Ts,this.frequency=new C0({context:this.context,units:t.units,value:t.frequency}),ge(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Vn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const s=this.toSeconds(t);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),_e(e)&&this.setTicksAtTime(e,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(t){const e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){const s=this._state.get(e);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),s=this._state.getLastState("stopped",e),r=this._ticksAtTime.get(e),l={state:"paused",time:e};this._state.add(l);let u=r||s,f=r?r.ticks:0,p=null;return this._state.forEachBetween(u.time,e+this.sampleTime,m=>{let v=u.time;const y=this._tickOffset.get(m.time);y&&y.time>=u.time&&(f=y.ticks,v=y.time),u.state==="started"&&m.state!=="started"&&(f+=this.frequency.getTicksAtTime(m.time)-this.frequency.getTicksAtTime(v),m.time!==l.time&&(p={state:m.state,time:m.time,ticks:f})),u=m}),this._state.remove(l),p&&this._ticksAtTime.add(p),f}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);const r=this._secondsAtTime.get(t);let l=r||e,u=r?r.seconds:0,f=null;return this._state.forEachBetween(l.time,t+this.sampleTime,p=>{let m=l.time;const v=this._tickOffset.get(p.time);v&&v.time>=l.time&&(u=v.seconds,m=v.time),l.state==="started"&&p.state!=="started"&&(u+=p.time-m,p.time!==s.time&&(f={state:p.state,time:p.time,seconds:u})),l=p}),this._state.remove(s),f&&this._secondsAtTime.add(f),u}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const s=this._tickOffset.get(e),r=this._state.get(e),l=Math.max(s.time,r.time),u=this.frequency.getTicksAtTime(l)+t-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(t,e,s){let r=this._state.get(t);this._state.forEachBetween(t,e,u=>{r&&r.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(r.time,t),u.time-this.sampleTime,s),r=u});let l=null;if(r&&r.state==="started"){const u=Math.max(r.time,t),f=this.frequency.getTicksAtTime(u),p=this.frequency.getTicksAtTime(r.time),m=f-p;let v=Math.ceil(m)-m;v=Bs(v,1)?0:v;let y=this.frequency.getTimeOfTick(f+v);for(;y<e;){try{s(y,Math.round(this.getTicksAtTime(y)))}catch(w){l=w;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(l)throw l;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class up extends Vn{constructor(){const t=zt(up.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=xe,this._lastUpdate=0,this._state=new lp("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new L0({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ge(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Vn.getDefaults(),{callback:xe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){ES(this.context);const s=this.toSeconds(t);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+t,s)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(t,e,(s,r)=>{this.callback(s,r)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ch.mixin(up);class oh extends Bt{constructor(){const t=zt(oh.getDefaults(),arguments,["delayTime","maxDelay"]);super(t),this.name="Delay";const e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new ve({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),ge(this,"delayTime")}static getDefaults(){return Object.assign(Bt.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class zc extends Bt{constructor(){const t=zt(zc.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new ae({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,ge(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Bt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class M0 extends Bt{constructor(){const t=zt(M0.getDefaults(),arguments);super(t),this.name="Destination",this.input=new zc({context:this.context}),this.output=new ae({context:this.context}),this.volume=this.input.volume,ra(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Bt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),ra(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}sp(i=>{i.destination=new M0({context:i})});rp(i=>{i.destination.dispose()});class qD extends Bt{constructor(){super(...arguments),this.name="Listener",this.positionX=new ve({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ve({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ve({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ve({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ve({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ve({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ve({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ve({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ve({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Bt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}sp(i=>{i.listener=new qD({context:i})});rp(i=>{i.listener.dispose()});class k0 extends uo{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=zt(k0.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const s=t.urls[e];this.add(e,s,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:xe,onload:xe,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return $t(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,s=xe,r=xe){return lo(e)?(this.baseUrl&&e.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new Ze(this.baseUrl+e,s,r))):this._buffers.set(t.toString(),new Ze(e,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class ps extends Qu{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class jD extends Vn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ts,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,e=>{t-e.time<=this.expiration&&e.callback(),this._events.remove(e)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}sp(i=>{i.draw=new jD({context:i})});rp(i=>{i.draw.dispose()});class GD extends uo{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){$t(_e(t.time),"Events must have a time property"),$t(_e(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new ZD(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){const e=[];this._root.search(t.time,e);for(const s of e)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let s,r=null;if(e>0)if(t.left.right===null)s=t.left,s.right=t.right,r=s;else{for(s=t.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=t.left,s.right=t.right)}else if(t.right.left===null)s=t.right,s.left=t.left,r=s;else{for(s=t.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=t.left,s.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}t.dispose()}_rotateLeft(t){const e=t.parent,s=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rotateRight(t){const e=t.parent,s=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const e=[];if(this._root.search(t,e),e.length>0){let s=e[0];for(let r=1;r<e.length;r++)e[r].low>s.low&&(s=e[r]);return s.event}}return null}forEach(t){if(this._root!==null){const e=[];this._root.traverse(s=>e.push(s)),e.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,e){if(this._root!==null){const s=[];this._root.search(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}forEachFrom(t,e){if(this._root!==null){const s=[];this._root.searchAfter(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class ZD{constructor(t,e,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class WD extends uo{constructor(t){super(),this.name="TimelineValue",this._timeline=new Ts({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class br extends Bt{constructor(){super(zt(br.getDefaults(),arguments,["context"]))}connect(t,e=0,s=0){return cp(this,t,e,s),this}}class Pc extends br{constructor(){const t=zt(Pc.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Vs(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):yD(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Me.getDefaults(),{length:1024})}setMap(t,e=1024){const s=new Float32Array(e);for(let r=0,l=e;r<l;r++){const u=r/(l-1)*2-1;s[r]=t(u,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(s=>s.includes(t));$t(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class hp extends br{constructor(){const t=zt(hp.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new Pc({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(br.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class oa{constructor(t,e){this.id=oa._eventId++,this._remainderTime=0;const s=Object.assign(oa.getDefaults(),e);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:xe,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}oa._eventId=0;class D0 extends oa{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(D0.getDefaults(),e);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},oa.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return Pd(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ps(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){Pd(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ps(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);Ec(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class fp extends Vn{constructor(){const t=zt(fp.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new WD(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ts,this._repeatedEvents=new GD,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new up({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),ge(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Vn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){const s=e%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;t+=new ps(this.context,this._swingTicks*2/3).toSeconds()*r}yx(!0),this._timeline.forEachAtTime(e,s=>s.invoke(t)),yx(!1)}schedule(t,e){const s=new oa(this,{callback:t,time:new Qu(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,e,s,r=1/0){const l=new D0(this,{callback:t,duration:new ws(this.context,r).toTicks(),interval:new ws(this.context,e).toTicks(),time:new Qu(this.context,s).toTicks()});return this._addEvent(l,this._repeatedEvents)}scheduleOnce(t,e){const s=new oa(this,{callback:t,once:!0,time:new Qu(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(e,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new ps(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){this.context.resume();let s;return _e(e)&&(s=this.toTicks(e)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Vs(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new ws(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new ws(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new ps(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new ps(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),s=this._clock.frequency.timeToTicks(t,e);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(e),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,e),l=e+r;this.emit("stop",l),this._clock.setTicksAtTime(t,l),this.emit("start",l,this._clock.getSecondsAtTime(l))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const e=this.now(),s=this.getTicksAtTime(e),r=t-s%t;return this._clock.nextTickTime(r,e)}}syncSignal(t,e){const s=this.now();let r=this.bpm,l=1/(60/r.getValueAtTime(s)/this.PPQ),u=[];if(t.units==="time"){const p=.015625/l,m=new ae(p),v=new hp(-1),y=new ae(p);r.chain(m,v,y),r=y,l=1/l,u=[m,v,y]}e||(t.getValueAtTime(s)!==0?e=t.getValueAtTime(s)/l:e=0);const f=new ae(e);return r.connect(f),f.connect(t._param),u.push(f),this._syncedSignals.push({initial:t.value,nodes:u,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const s=this._syncedSignals[e];s.signal===t&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),S0(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ch.mixin(fp);sp(i=>{i.transport=new fp({context:i})});rp(i=>{i.transport.dispose()});class qn extends Bt{constructor(t){super(t),this.input=void 0,this._state=new lp("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=xe,this._syncedStop=xe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new zc({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,ge(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Bt.getDefaults(),{mute:!1,onstop:xe,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,s){let r=Ss(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")$t(Ec(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const l=this._state.get(r);l&&(l.offset=this.toSeconds(cl(e,0)),l.duration=s?this.toSeconds(s):void 0);const u=this.context.transport.schedule(f=>{this._start(f,e,s)},r);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else ES(this.context),this._start(r,e,s);return this}stop(t){let e=Ss(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||_e(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{const s=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(s)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,s){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(Ec(e,0)){const s=this._state.get(e);if(s&&s.state==="started"&&s.time!==e){const r=e-this.toSeconds(s.time);let l;s.duration&&(l=this.toSeconds(s.duration)-r),this._start(t,this.toSeconds(s.offset)+r,l)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=xe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Mh extends Cc{constructor(){const t=zt(Mh.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,js(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ve({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Ze(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Cc.getDefaults(),{url:new Ze,loop:!1,loopEnd:0,loopStart:0,onload:xe,onerror:xe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,s,r=1){$t(this.buffer.loaded,"buffer is either not set or not loaded");const l=this.toSeconds(t);this._startGain(l,r),this.loop?e=cl(e,this.loopStart):e=cl(e,0);let u=Math.max(this.toSeconds(e),0);if(this.loop){const f=this.toSeconds(this.loopEnd)||this.buffer.duration,p=this.toSeconds(this.loopStart),m=f-p;Ig(u,f)&&(u=(u-p)%m+p),Bs(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Pd(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(l,u)),_e(s)){let f=this.toSeconds(s);f=Math.max(f,0),this.stop(l+f)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class aa extends qn{constructor(){const t=zt(aa.getDefaults(),arguments,["type"]);super(t),this.name="Noise",this._source=null,this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(qn.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if($t(t in vx,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,this.state==="started")){const e=this.now();this._stop(e),this._start(e)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=vx[this._type];this._source=new Mh({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const cc=44100*5,ig=2,$r={brown:null,pink:null,white:null},vx={get brown(){if(!$r.brown){const i=[];for(let t=0;t<ig;t++){const e=new Float32Array(cc);i[t]=e;let s=0;for(let r=0;r<cc;r++){const l=Math.random()*2-1;e[r]=(s+.02*l)/1.02,s=e[r],e[r]*=3.5}}$r.brown=new Ze().fromArray(i)}return $r.brown},get pink(){if(!$r.pink){const i=[];for(let t=0;t<ig;t++){const e=new Float32Array(cc);i[t]=e;let s,r,l,u,f,p,m;s=r=l=u=f=p=m=0;for(let v=0;v<cc;v++){const y=Math.random()*2-1;s=.99886*s+y*.0555179,r=.99332*r+y*.0750759,l=.969*l+y*.153852,u=.8665*u+y*.3104856,f=.55*f+y*.5329522,p=-.7616*p-y*.016898,e[v]=s+r+l+u+f+p+m+y*.5362,e[v]*=.11,m=y*.115926}}$r.pink=new Ze().fromArray(i)}return $r.pink},get white(){if(!$r.white){const i=[];for(let t=0;t<ig;t++){const e=new Float32Array(cc);i[t]=e;for(let s=0;s<cc;s++)e[s]=Math.random()*2-1}$r.white=new Ze().fromArray(i)}return $r.white}};function yl(i,t){return _n(this,void 0,void 0,function*(){const e=t/i.context.sampleRate,s=new op(1,e,i.context.sampleRate);return new i.constructor(Object.assign(i.get(),{frequency:2/e,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class O0 extends Cc{constructor(){const t=zt(O0.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],js(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new ve({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new ve({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),ge(this,["frequency","detune"])}static getDefaults(){return Object.assign(Cc.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class dn extends qn{constructor(){const t=zt(dn.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new Me({context:this.context,units:"frequency",value:t.frequency}),ge(this,"frequency"),this.detune=new Me({context:this.context,units:"cents",value:t.detune}),ge(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(qn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),s=new O0({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return dn._periodicWaveCache.find(e=>e.phase===this._phase&&LD(e.partials,this._partials));{const t=dn._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const s=this._getCachedPeriodicWave();if(_e(s)){const{partials:r,wave:l}=s;this._wave=l,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,l]=this._getRealImaginary(t,this._phase),u=this.context.createPeriodicWave(r,l);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),dn._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),dn._periodicWaveCache.length>100&&dn._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Qi(t,0);let e=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(e=s[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{const r=new Float32Array(t);this._partials.forEach((l,u)=>r[u]=l),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(t,e){let r=2048;const l=new Float32Array(r),u=new Float32Array(r);let f=1;if(t==="custom"){if(f=this._partials.length+1,this._partialCount=this._partials.length,r=f,this._partials.length===0)return[l,u]}else{const p=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);p?(f=parseInt(p[2],10)+1,this._partialCount=parseInt(p[2],10),t=p[1],f=Math.max(f,2),r=f):this._partialCount=0,this._partials=[]}for(let p=1;p<r;++p){const m=2/(p*Math.PI);let v;switch(t){case"sine":v=p<=f?1:0,this._partials[p-1]=v;break;case"square":v=p&1?2*m:0,this._partials[p-1]=v;break;case"sawtooth":v=m*(p&1?1:-1),this._partials[p-1]=v;break;case"triangle":p&1?v=2*(m*m)*(p-1>>1&1?-1:1):v=0,this._partials[p-1]=v;break;case"custom":v=this._partials[p-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}v!==0?(l[p]=-v*Math.sin(e*p),u[p]=v*Math.cos(e*p)):(l[p]=0,u[p]=0)}return[l,u]}_inverseFFT(t,e,s){let r=0;const l=t.length;for(let u=0;u<l;u++)r+=t[u]*Math.cos(u*s)+e[u]*Math.sin(u*s);return r}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,l=32;for(let u=0;u<l;u++)s=Math.max(this._inverseFFT(t,e,u/l*r),s);return gl(-this._inverseFFT(t,e,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return _n(this,arguments,void 0,function*(t=1024){return yl(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}dn._periodicWaveCache=[];class R0 extends br{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Pc({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class wr extends Me{constructor(){const t=zt(wr.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ae({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Me.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class dp extends qn{constructor(){const t=zt(dp.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new R0({context:this.context}),this._modulationNode=new ae({context:this.context}),this._carrier=new dn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new dn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new wr({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ge(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(dn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return _n(this,arguments,void 0,function*(t=1024){return yl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class pp extends qn{constructor(){const t=zt(pp.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new ae({context:this.context,gain:0}),this._carrier=new dn({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Me({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new dn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new wr({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new wr({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ge(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(dn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return _n(this,arguments,void 0,function*(t=1024){return yl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class kh extends qn{constructor(){const t=zt(kh.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new ae({context:this.context,gain:0}),this._thresh=new Pc({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new Me({context:this.context,units:"audioRange",value:t.width}),this._triangle=new dn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ge(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(qn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return _n(this,arguments,void 0,function*(t=1024){return yl(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class mp extends qn{constructor(){const t=zt(mp.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new Me({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Me({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,ge(this,["frequency","detune"])}static getDefaults(){return Object.assign(dn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,s=t/(this._oscillators.length-1);this._forEach((r,l)=>r.detune.value=e+s*l)}}get count(){return this._oscillators.length}set count(t){if(Qi(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const s=new dn({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):xe});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[e]=s}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,s)=>e.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return _n(this,arguments,void 0,function*(t=1024){return yl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class _p extends qn{constructor(){const t=zt(_p.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new wr({context:this.context,value:2}),this._pulse=new kh({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new dn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ge(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(qn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return _n(this,arguments,void 0,function*(t=1024){return yl(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const bx={am:dp,fat:mp,fm:pp,oscillator:dn,pulse:kh,pwm:_p};class la extends qn{constructor(){const t=zt(la.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new Me({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Me({context:this.context,units:"cents",value:t.detune}),ge(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(dn.getDefaults(),pp.getDefaults(),dp.getDefaults(),mp.getDefaults(),kh.getDefaults(),_p.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=bx[t],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof bx[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&vr(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&vr(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&lo(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return _n(this,arguments,void 0,function*(t=1024){return yl(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class I0 extends Me{constructor(){super(zt(I0.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new ae({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ra(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Me.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class gp extends br{constructor(){const t=zt(gp.getDefaults(),arguments,["min","max"]);super(t),this.name="Scale",this._mult=this.input=new wr({context:this.context,value:t.max-t.min}),this._add=this.output=new I0({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(br.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class N0 extends br{constructor(){super(zt(N0.getDefaults(),arguments)),this.name="Zero",this._gain=new ae({context:this.context}),this.output=this._gain,this.input=void 0,js(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),NS(this.context.getConstant(0),this._gain),this}}class ah extends Bt{constructor(){const t=zt(ah.getDefaults(),arguments,["frequency","min","max"]);super(t),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=ve.prototype._fromType,this._toType=ve.prototype._toType,this._is=ve.prototype._is,this._clampValue=ve.prototype._clampValue,this._oscillator=new dn(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new ae({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Me({context:this.context,units:"audioRange",value:0}),this._zeros=new N0({context:this.context}),this._a2g=new R0({context:this.context}),this._scaler=this.output=new gp({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),ge(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(dn.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,s=this.max;this._units=t,this.min=e,this.max=s}get state(){return this._oscillator.state}connect(t,e,s){return(t instanceof ve||t instanceof Me)&&(this.convert=t.convert,this.units=t.units),cp(this,t,e,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function zS(i,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(l){Qi(l,i,t),e.set(this,l)}})}}function ho(i,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(l){Qi(this.toSeconds(l),i,t),e.set(this,l)}})}}class ca extends qn{constructor(){const t=zt(ca.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new Ze({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(qn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:xe,onerror:xe,playbackRate:1,reverse:!1})}load(t){return _n(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=xe){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,s){return super.start(t,e,s),this}_start(t,e,s){this._loop?e=cl(e,this._loopStart):e=cl(e,0);const r=this.toSeconds(e),l=s;s=cl(s,Math.max(this._buffer.duration-r,0));let u=this.toSeconds(s);u=u/this._playbackRate,t=this.toSeconds(t);const f=new Mh({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(f),this._loop&&Ss(l)?f.start(t,r):f.start(t,r,u-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(e))}restart(t,e,s){return super.restart(t,e,s),this}_restart(t,e,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(t),this._start(t,e,s)}seek(t,e){const s=this.toSeconds(e);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(t);this._stop(s),this._start(s,r)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Qi(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Qi(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),s=this._state.getNextState("stopped",e);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Ws([ho(0)],ca.prototype,"fadeIn",void 0);Ws([ho(0)],ca.prototype,"fadeOut",void 0);class YD extends br{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Pc({context:this.context,mapping:t=>Math.abs(t)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ki extends Bt{constructor(){const t=zt(Ki.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new Me({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Bt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(lo(t))return t;{let s;for(s in ld)if(ld[s][e]===t)return s;return t}}_setCurve(t,e,s){if(lo(s)&&Reflect.has(ld,s)){const r=ld[s];ll(r)?t!=="_decayCurve"&&(this[t]=r[e]):this[t]=r}else if(Vs(s)&&t!=="_decayCurve")this[t]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let r=this.toSeconds(this.attack);const l=this.toSeconds(this.decay),u=this.getValueAtTime(t);if(u>0){const f=1/r;r=(1-u)/f}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,r,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,r,t);else{this._sig.cancelAndHoldAtTime(t);let f=this._attackCurve;for(let p=1;p<f.length;p++)if(f[p-1]<=u&&u<=f[p]){f=this._attackCurve.slice(p),f[0]=u;break}this._sig.setValueCurveAtTime(f,t,r,e)}if(l&&this.sustain<1){const f=e*this.sustain,p=t+r;this.log("decay",p),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(f,l+p):this._sig.exponentialApproachValueAtTime(f,p,l)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,t):($t(Vs(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,s=1){return e=this.toSeconds(e),this.triggerAttack(e,s),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,s=0){return cp(this,t,e,s),this}asArray(){return _n(this,arguments,void 0,function*(t=1024){const e=t/this.context.sampleRate,s=new op(1,e,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),l=r+this.toSeconds(this.release),u=l*.1,f=l+u,p=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/f,decay:e*this.toSeconds(this.decay)/f,release:e*this.toSeconds(this.release)/f,context:s}));return p._sig.toDestination(),p.triggerAttackRelease(e*(r+u)/f,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Ws([ho(0)],Ki.prototype,"attack",void 0);Ws([ho(0)],Ki.prototype,"decay",void 0);Ws([zS(0,1)],Ki.prototype,"sustain",void 0);Ws([ho(0)],Ki.prototype,"release",void 0);const ld=(()=>{let t,e;const s=[];for(t=0;t<128;t++)s[t]=Math.sin(t/127*(Math.PI/2));const r=[],l=6.4;for(t=0;t<127;t++){e=t/127;const w=Math.sin(e*(Math.PI*2)*l-Math.PI/2)+1;r[t]=w/10+e*.83}r[127]=1;const u=[],f=5;for(t=0;t<128;t++)u[t]=Math.ceil(t/127*f)/f;const p=[];for(t=0;t<128;t++)e=t/127,p[t]=.5*(1-Math.cos(Math.PI*e));const m=[];for(t=0;t<128;t++){e=t/127;const w=Math.pow(e,3)*4+.2,T=Math.cos(w*Math.PI*2*e);m[t]=Math.abs(T*(1-e))}function v(w){const T=new Array(w.length);for(let x=0;x<w.length;x++)T[x]=1-w[x];return T}function y(w){return w.slice(0).reverse()}return{bounce:{In:v(m),Out:m},cosine:{In:s,Out:y(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:v(r)},sine:{In:p,Out:v(p)},step:{In:u,Out:v(u)}}})();class ua extends Bt{constructor(){const t=zt(ua.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new zc({context:this.context,volume:t.volume}),this.volume=this._volume.volume,ge(this,"volume")}static getDefaults(){return Object.assign(Bt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const s=this["_original_"+t]=this[t];this[t]=(...r)=>{const l=r[e],u=this.context.transport.schedule(f=>{r[e]=f,s.apply(this,r)},l);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,s,r){const l=this.toSeconds(s),u=this.toSeconds(e);return this.triggerAttack(t,l,r),this.triggerRelease(l+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Mi extends ua{constructor(){const t=zt(Mi.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(ua.getDefaults(),{detune:0,onsilence:xe,portamento:0})}triggerAttack(t,e,s=1){this.log("triggerAttack",t,e,s);const r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,s),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const s=this.toSeconds(e),r=t instanceof xs?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const l=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,l,s)}else this.frequency.setValueAtTime(r,s);return this}}Ws([ho(0)],Mi.prototype,"portamento",void 0);class yp extends Ki{constructor(){super(zt(yp.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ae({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Xi extends Mi{constructor(){const t=zt(Xi.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new la(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new yp(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),ge(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Mi.getDefaults(),{envelope:Object.assign(bs(Ki.getDefaults(),Object.keys(Bt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(bs(la.getDefaults(),[...Object.keys(qn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class lh extends Mi{constructor(){const t=zt(lh.getDefaults(),arguments);super(t),this.name="ModulationSynth",this._carrier=new Xi({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Xi({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Me({context:this.context,units:"frequency"}),this.detune=new Me({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new wr({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new ae({context:this.context,gain:0}),ge(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Mi.getDefaults(),{harmonicity:3,oscillator:Object.assign(bs(la.getDefaults(),[...Object.keys(qn.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(bs(Ki.getDefaults(),Object.keys(Bt.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(bs(la.getDefaults(),[...Object.keys(qn.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(bs(Ki.getDefaults(),Object.keys(Bt.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class el extends lh{constructor(){super(zt(el.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new R0({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Bd extends Bt{constructor(){const t=zt(Bd.getDefaults(),arguments,["frequency","type"]);super(t),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new ve({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new ve({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new ve({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new ve({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(Bt.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){$t(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let u=0;u<t;u++){const p=Math.pow(u/t,2)*19980+20;e[u]=p}const s=new Float32Array(t),r=new Float32Array(t),l=this.context.createBiquadFilter();return l.type=this.type,l.Q.value=this.Q.value,l.frequency.value=this.frequency.value,l.gain.value=this.gain.value,l.getFrequencyResponse(e,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ud extends Bt{constructor(){const t=zt(Ud.getDefaults(),arguments,["frequency","type","rolloff"]);super(t),this.name="Filter",this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this._filters=[],this._filters=[],this.Q=new Me({context:this.context,units:"positive",value:t.Q}),this.frequency=new Me({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Me({context:this.context,units:"cents",value:t.detune}),this.gain=new Me({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,ge(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){$t(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._type=t,this._filters.forEach(s=>s.type=t)}get rolloff(){return this._rolloff}set rolloff(t){const e=vr(t)?t:parseInt(t,10),s=[-12,-24,-48,-96];let r=s.indexOf(e);$t(r!==-1,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach(l=>l.disconnect()),this._filters=new Array(r);for(let l=0;l<r;l++){const u=new Bd({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[l]=u}this._internalChannels=this._filters,ra(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new Bd({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(t).map(()=>1);return this._filters.forEach(()=>{e.getFrequencyResponse(t).forEach((l,u)=>s[u]*=l)}),e.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(t=>{t.dispose()}),S0(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Hd extends Ki{constructor(){const t=zt(Hd.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="FrequencyEnvelope",this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new hp({context:this.context,value:t.exponent}),this._scale=this.output=new gp({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Ki.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);Qi(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class rl extends Mi{constructor(){const t=zt(rl.getDefaults(),arguments);super(t),this.name="MonoSynth",this.oscillator=new la(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Ud(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new Hd(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new yp(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),ge(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Mi.getDefaults(),{envelope:Object.assign(bs(Ki.getDefaults(),Object.keys(Bt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(bs(Ud.getDefaults(),Object.keys(Bt.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(bs(Hd.getDefaults(),Object.keys(Bt.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(bs(la.getDefaults(),Object.keys(qn.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,e=1){if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Ku extends Mi{constructor(){const t=zt(Ku.getDefaults(),arguments);super(t),this.name="DuoSynth",this.voice0=new rl(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new rl(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new wr({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new ah({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new ae({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Me({context:this.context,units:"frequency",value:440}),this.detune=new Me({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),ge(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return gr(Mi.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:gr(bs(rl.getDefaults(),Object.keys(Mi.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:gr(bs(rl.getDefaults(),Object.keys(Mi.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Ju extends lh{constructor(){const t=zt(Ju.getDefaults(),arguments);super(t),this.name="FMSynth",this.modulationIndex=new wr({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(lh.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class Dh extends Xi{constructor(){const t=zt(Dh.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,ge(this,["oscillator","envelope"])}static getDefaults(){return gr(Mi.getDefaults(),Xi.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const s=this.toSeconds(e),r=this.toFrequency(t instanceof xs?t.toFrequency():t),l=r*this.octaves;return this.oscillator.frequency.setValueAtTime(l,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Ws([zS(0)],Dh.prototype,"octaves",void 0);Ws([ho(0)],Dh.prototype,"pitchDecay",void 0);const z0=new Set;function P0(i){z0.add(i)}function PS(i,t){const e=`registerProcessor("${i}", ${t})`;z0.add(e)}function XD(){return Array.from(z0).join(`
`)}class FD extends Bt{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=xe;const e=URL.createObjectURL(new Blob([XD()],{type:"text/javascript"})),s=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(s,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const QD=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;P0(QD);const KD=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;P0(KD);const JD=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;P0(JD);const BS="feedback-comb-filter",$D=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;PS(BS,$D);class B0 extends FD{constructor(){const t=zt(B0.getDefaults(),arguments,["delayTime","resonance"]);super(t),this.name="FeedbackCombFilter",this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this.delayTime=new ve({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new ve({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),ge(this,["resonance","delayTime"])}_audioWorkletName(){return BS}static getDefaults(){return Object.assign(Bt.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){ra(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const s=t.parameters.get("feedback");this.resonance.setParam(s)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class U0 extends Bt{constructor(){const t=zt(U0.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OnePoleFilter",this._frequency=t.frequency,this._type=t.type,this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(Bt.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),s=1/(2*Math.PI*e);if(this._type==="lowpass"){const r=1/(s*this.context.sampleRate),l=r-1;this._filter=this.context.createIIRFilter([r,0],[1,l])}else{const r=1/(s*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,r])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(t),t.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let l=0;l<t;l++){const f=Math.pow(l/t,2)*19980+20;e[l]=f}const s=new Float32Array(t),r=new Float32Array(t);return this._filter.getFrequencyResponse(e,s,r),s}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class H0 extends Bt{constructor(){const t=zt(H0.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(t),this.name="LowpassCombFilter",this._combFilter=this.output=new B0({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new U0({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(Bt.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class V0 extends ua{constructor(){const t=zt(V0.getDefaults(),arguments);super(t),this.name="PluckSynth",this._noise=new aa({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new H0({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return gr(ua.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,e){const s=this.toFrequency(t);e=this.toSeconds(e);const r=1/s;return this._lfcf.delayTime.setValueAtTime(r,e),this._noise.start(e),this._noise.stop(e+r*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class vp extends ua{constructor(){const t=zt(vp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const e={};Object.keys(t.urls).forEach(s=>{const r=parseInt(s,10);if($t(od(s)||vr(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),od(s)){const l=new xs(this.context,s).toMidi();e[l]=t.urls[s]}else vr(r)&&isFinite(r)&&(e[r]=t.urls[r])}),this._buffers=new k0({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(ua.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:xe,onerror:xe,release:.1,urls:{}})}_findClosest(t){let s=0;for(;s<96;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,s=1){return this.log("triggerAttack",t,e,s),Array.isArray(t)||(t=[t]),t.forEach(r=>{const l=IS(new xs(this.context,r).toFrequency()),u=Math.round(l),f=l-u,p=this._findClosest(u),m=u-p,v=this._buffers.get(m),y=RS(p+f),w=new Mh({url:v,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);w.start(e,0,v.duration/y,s),Vs(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(w),w.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const T=this._activeSources.get(u),x=T.indexOf(w);x!==-1&&T.splice(x,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(s=>{const r=new xs(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const l=this._activeSources.get(r);e=this.toSeconds(e),l.forEach(u=>{u.stop(e)}),this._activeSources.set(r,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,s,r=1){const l=this.toSeconds(s);return this.triggerAttack(t,l,r),Vs(e)?($t(Vs(t),"notes must be an array when duration is array"),t.forEach((u,f)=>{const p=e[Math.min(f,e.length-1)];this.triggerRelease(u,l+this.toSeconds(p))})):this.triggerRelease(t,l+this.toSeconds(e)),this}add(t,e,s){if($t(od(t)||isFinite(t),`note must be a pitch or midi: ${t}`),od(t)){const r=new xs(this.context,t).toMidi();this._buffers.add(r,e,s)}else this._buffers.add(t,e,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}Ws([ho(0)],vp.prototype,"attack",void 0);Ws([ho(0)],vp.prototype,"release",void 0);class q0 extends Vn{constructor(){const t=zt(q0.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new lp("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Vn.getDefaults(),{callback:xe,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,e=>{let s;if(e.state==="started"){e.id!==-1&&this.context.transport.clear(e.id);const r=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||vr(this._loop)&&this._loop>1){s=1/0,vr(this._loop)&&(s=this._loop*this._getLoopDuration());const l=this._state.getAfter(r);l!==null&&(s=Math.min(s,l.time-r)),s!==1/0&&(s=new ps(this.context,s));const u=new ps(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),u,new ps(this.context,r),s)}else e.id=this.context.transport.schedule(this._tick.bind(this),new ps(this.context,r))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return this._state.getValueAtTime(e)==="stopped"&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if(this._state.getValueAtTime(e)==="started"){this._state.setStateAtTime("stopped",e,{id:-1});const s=this._state.getBefore(e);let r=e;s!==null&&(r=s.time),this._rescheduleEvents(r)}return this}cancel(t){t=cl(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,s=>{this.context.transport.clear(s.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&this._state.getValueAtTime(e)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;AS(this.humanize)||(s=this.toSeconds(this.humanize)),t+=(Math.random()*2-1)*s}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new ps(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new ps(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(e!==null&&e.state==="started"){const s=this._getLoopDuration();return(t-e.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class ha extends Vn{constructor(){const t=zt(ha.getDefaults(),arguments,["callback","interval"]);super(t),this.name="Loop",this._event=new q0({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability,humanize:t.humanize}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(Vn.getDefaults(),{interval:"4n",callback:xe,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(t){t===1/0?this._event.loop=!0:this._event.loop=t}dispose(){return super.dispose(),this._event.dispose(),this}}function*tO(i){let t=0;for(;t<i;)t=gl(t,0,i-1),yield t,t++}function*eO(i){let t=i-1;for(;t>=0;)t=gl(t,0,i-1),yield t,t--}function*Gu(i,t){for(;;)yield*t(i)}function*wx(i,t){let e=t?0:i-1;for(;;)e=gl(e,0,i-1),yield e,t?(e++,e>=i-1&&(t=!1)):(e--,e<=0&&(t=!0))}function*nO(i){let t=0,e=0;for(;t<i;)t=gl(t,0,i-1),yield t,e++,t+=e%2?2:-1}function*iO(i){let t=i-1,e=0;for(;t>=0;)t=gl(t,0,i-1),yield t,e++,t+=e%2?-2:1}function*sO(i){for(;;)yield Math.floor(Math.random()*i)}function*rO(i){const t=[];for(let e=0;e<i;e++)t.push(e);for(;t.length>0;){const e=t.splice(Math.floor(t.length*Math.random()),1);yield gl(e[0],0,i-1)}}function*oO(i){let t=Math.floor(Math.random()*i);for(;;)t===0?t++:t===i-1||Math.random()<.5?t--:t++,yield t}function*xx(i,t="up",e=0){switch($t(i>=1,"The number of values must be at least one"),t){case"up":yield*Gu(i,tO);case"down":yield*Gu(i,eO);case"upDown":yield*wx(i,!0);case"downUp":yield*wx(i,!1);case"alternateUp":yield*Gu(i,nO);case"alternateDown":yield*Gu(i,iO);case"random":yield*sO(i);case"randomOnce":yield*Gu(i,rO);case"randomWalk":yield*oO(i)}}class Zi extends ha{constructor(){const t=zt(Zi.getDefaults(),arguments,["callback","values","pattern"]);super(t),this.name="Pattern",this.callback=t.callback,this._values=t.values,this._pattern=xx(t.values.length,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(ha.getDefaults(),{pattern:"up",values:[],callback:xe})}_tick(t){const e=this._pattern.next();this._index=e.value,this._value=this._values[e.value],this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=xx(this._values.length,this._type)}}class bp extends Bt{constructor(){const t=zt(bp.getDefaults(),arguments,["fade"]);super(t),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new YD({context:this.context}),this.a=new ae({context:this.context,gain:0}),this.b=new ae({context:this.context,gain:0}),this.output=new ae({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Me({context:this.context,units:"normalRange",value:t.fade}),ge(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",js(this._split,this.a.gain,0),js(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Bt.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Vd extends Bt{constructor(t){super(t),this.name="Effect",this._dryWet=new bp({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new ae({context:this.context}),this.effectReturn=new ae({context:this.context}),this.input=new ae({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],ge(this,"wet")}static getDefaults(){return Object.assign(Bt.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class j0 extends Bt{constructor(){const t=zt(j0.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new ve({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",ge(this,"pan")}static getDefaults(){return Object.assign(Bt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const aO="bit-crusher",lO=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;PS(aO,lO);class wp extends Bt{constructor(){const t=zt(wp.getDefaults(),arguments,["channels"]);super(t),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Bt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Bc extends Bt{constructor(){const t=zt(Bc.getDefaults(),arguments,["channels"]);super(t),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(Bt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Sx extends Bt{constructor(t){super(t),this.name="StereoEffect",this.input=new ae({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new bp({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new wp({context:this.context,channels:2}),this._merge=new Bc({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),ge(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),ra(...t),js(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),ra(...t),js(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(Bt.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Tx extends Sx{constructor(t){super(t),this.feedback=new Me({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new ae({context:this.context}),this._feedbackR=new ae({context:this.context}),this._feedbackSplit=new wp({context:this.context,channels:2}),this._feedbackMerge=new Bc({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),ge(this,["feedback"])}static getDefaults(){return Object.assign(Sx.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class $u extends Tx{constructor(){const t=zt($u.getDefaults(),arguments,["frequency","delayTime","depth"]);super(t),this.name="Chorus",this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new ah({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new ah({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new oh({context:this.context}),this._delayNodeR=new oh({context:this.context}),this.frequency=this._lfoL.frequency,ge(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(Tx.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return this._delayTime*1e3}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Ax extends Vd{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new ae({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,ge(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Vd.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class th extends Ax{constructor(){const t=zt(th.getDefaults(),arguments,["delayTime","feedback"]);super(t),this.name="FeedbackDelay",this._delayNode=new oh({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),ge(this,"delayTime")}static getDefaults(){return Object.assign(Ax.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class fr extends Vd{constructor(){const t=zt(fr.getDefaults(),arguments,["decay"]);super(t),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=this.toSeconds(t.decay);Qi(e,.001),this._decay=e;const s=this.toSeconds(t.preDelay);Qi(s,0),this._preDelay=s,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Vd.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){t=this.toSeconds(t),Qi(t,.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){t=this.toSeconds(t),Qi(t,0),this._preDelay=t,this.generate()}generate(){return _n(this,void 0,void 0,function*(){const t=this.ready,e=new op(2,this._decay+this._preDelay,this.context.sampleRate),s=new aa({context:e}),r=new aa({context:e}),l=new Bc({context:e});s.connect(l,0,0),r.connect(l,0,1);const u=new ae({context:e}).toDestination();l.connect(u),s.start(0),r.start(0),u.gain.setValueAtTime(0,0),u.gain.setValueAtTime(1,this._preDelay),u.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const f=e.render();return this.ready=f.then(xe),yield t,this._convolver.buffer=(yield f).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class En extends Bt{constructor(){const t=zt(En.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new ae({context:this.context}),En._allSolos.has(this.context)||En._allSolos.set(this.context,new Set),En._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Bt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),En._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){En._soloed.has(this.context)||En._soloed.set(this.context,new Set),En._soloed.get(this.context).add(this)}_removeSolo(){En._soloed.has(this.context)&&En._soloed.get(this.context).delete(this)}_isSoloed(){return En._soloed.has(this.context)&&En._soloed.get(this.context).has(this)}_noSolos(){return!En._soloed.has(this.context)||En._soloed.has(this.context)&&En._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),En._allSolos.get(this.context).delete(this),this._removeSolo(),this}}En._allSolos=new Map;En._soloed=new Map;class G0 extends Bt{constructor(){const t=zt(G0.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new j0({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new zc({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,ge(this,["pan","volume"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class bc extends Bt{constructor(){const t=zt(bc.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new En({solo:t.solo,context:this.context}),this._panVol=this.output=new G0({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ge(this,["pan","volume"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return bc.buses.has(t)||bc.buses.set(t,new ae({context:this.context})),bc.buses.get(t)}send(t,e=0){const s=this._getBus(t),r=new ae({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(s),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}bc.buses=new Map;function sg(){return Li().now()}Li().transport;function io(){return Li().transport}const fs=Li().destination;Li().destination;Li().listener;Li().draw;Li();const Z0=[{id:"fm-synth",name:"FM Synth",defaultNote:"C4",create:()=>new Ju().toDestination()},{id:"am-synth",name:"AM Synth",defaultNote:"G4",create:()=>new el().toDestination()},{id:"bass",name:"Bass",defaultNote:"C2",create:()=>new rl({oscillator:{type:"sawtooth"},envelope:{attack:.1,decay:.3,sustain:.3,release:.8}}).toDestination()},{id:"lead",name:"Lead",defaultNote:"C5",create:()=>new Xi({oscillator:{type:"square"},envelope:{attack:.05,decay:.2,sustain:.2,release:.4}}).toDestination()},{id:"drum",name:"Drum Hit",defaultNote:"C3",create:()=>new Dh().toDestination()},{id:"beat_loop",name:"Beat Loop",defaultNote:"C4",create:()=>{const i=new ca("https://tonejs.github.io/audio/drum-samples/loops/blueyellow.mp3").toDestination();return i.loop=!0,i.sync().start(0),i}},{id:"organ_loop",name:"Organ Loop",defaultNote:"C4",create:()=>{const i=new ca("https://tonejs.github.io/audio/drum-samples/loops/organ-echo-chords.mp3").toDestination();return i.loop=!0,i.sync().start(0),i}},{id:"combo_synth",name:"Combo Synth",defaultNote:"C4",create:()=>{const i=new Ju().toDestination(),t=new el().toDestination(),e=new ha(r=>{i.triggerAttackRelease("D2","8n",r)},"4n").start(0),s=new ha(r=>{t.triggerAttackRelease("A2","8n",r)},"4n").start("8n");return[e,s]}},{id:"noise",name:"Noise",defaultNote:"D6",create:()=>{const i=new aa({type:"pink",volume:-15,fadeIn:.5,fadeOut:.5}).toDestination();return i.sync().start(0),i}},{id:"arp",name:"Arpeggiator",defaultNote:"C4",create:()=>{const i=new Bc,t=new fr({wet:.3});i.chain(t,fs);const e=new Xi({oscillator:{type:"custom",partials:[1,.5,.3,.25,.2,.15,.1]},envelope:{attack:.005,decay:.3,sustain:.2,release:1},portamento:.01,volume:-20}).connect(i,0,0),s=new Xi({oscillator:{type:"custom",partials:[1,.5,.3,.25,.2,.15,.1]},envelope:{attack:.005,decay:.3,sustain:.2,release:1},portamento:.01,volume:-20}).connect(i,0,1),r=new Zi((u,f)=>{e.triggerAttackRelease(f,"8n",u)},["G2","D3","E2","A3"],"upDown"),l=new Zi((u,f)=>{s.triggerAttackRelease(f,"8n",u)},["G2","D3","E2","A3"],"upDown");return r.interval="4n",l.interval="4n",l.playbackRate=.985,r.start(0),l.start(0),[r,l]}},{id:"generative",name:"Self-Playing Generative",defaultNote:"C4",create:()=>{const i=new fr({wet:.9}),t=new th("8n",.8),e=["C3","E3","G3","B3","D4","F#4","A4"];let s=0,r=0;const l=new Xi({oscillator:{type:"triangle"},envelope:{attack:.01,decay:.3,sustain:.5,release:1},volume:-10,onsilence:()=>{s=(s+1)%e.length,s%4===0&&(r=Math.random()>.5?1:-1);let u=e[s];const f=parseInt(u.match(/\d+/)?.[0]||"3");u=(u.match(/[A-G]#?/)?.[0]||"C")+(f+r);const m=["8n","4n","16n"],v=m[Math.floor(Math.random()*m.length)];l.triggerAttackRelease(u,v),console.log(`Next note: ${u}, duration: ${v}`)}}).chain(i,t,fs);return l.triggerAttackRelease(e[0],"4n"),l}},{id:"dual_voices",name:"Dual Generative Voices",defaultNote:"C4",create:()=>{const i=new fr({wet:.99}),t=new th("8n",.6),e=["C4","D4","E4","G4","A4"],s=["E3","G3","B3","D4"];let r=0,l=0;const u=new Xi({oscillator:{type:"sine"},envelope:{attack:.04,decay:.2,sustain:.15,release:1},volume:-15,onsilence:()=>{l=(l+1)%s.length,f.triggerAttackRelease(s[l],"8n")}}).chain(t,fs),f=new Ju({harmonicity:3,modulationIndex:10,envelope:{attack:.01,decay:.5,sustain:.1,release:.5},volume:-3,onsilence:()=>{r=(r+1)%e.length,u.triggerAttackRelease(e[r],"4n")}}).chain(i,fs);return u.triggerAttackRelease(e[0],"4n"),[u,f]}},{id:"pattern_accent",name:"Pattern + Accent Hybrid",defaultNote:"C4",create:()=>{const i=new fr({wet:.8}),t=new th("8n",.5),e=new V0({attackNoise:1,dampening:4e3,resonance:.9,volume:-10}).chain(i,t,fs),s=new Zi((p,m)=>{e.triggerAttackRelease(m,"8n",p)},["C3","E3","G3","B3"],"upDown");s.interval="8n",s.start(0);const r=["C3","D3","E3","G3","A3","E3"];let l=0;const u=new fr({wet:.99}),f=new Xi({oscillator:{type:"custom",partials:[1,.5,1,1]},envelope:{attack:.01,decay:.3,sustain:.3,release:1.5},volume:-24,portamento:.05,onsilence:()=>{const p=["2n","4n","8n","16n"],m=p[Math.floor(Math.random()*p.length)],v=UD(m).toMilliseconds();setTimeout(()=>{l=Math.floor(Math.random()*r.length),f.triggerAttackRelease(r[l],"16n")},v)}}).chain(t,u,fs);return[s,f]}},{id:"tintinnabular",name:"Tintinnabular (Prt Style)",defaultNote:"C4",create:()=>{const i=new fr({wet:.6,decay:4}),t=new $u({frequency:1.5,delayTime:3.5,depth:.7,wet:.3}).start(),e=new Ku({vibratoAmount:.2,vibratoRate:3,harmonicity:1.5,voice0:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},voice1:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},volume:-18}).chain(t,i,fs),s=new el({harmonicity:2,oscillator:{type:"sine"},envelope:{attack:.3,decay:.2,sustain:.8,release:2.5},modulation:{type:"sine"},modulationEnvelope:{attack:.5,decay:.3,sustain:.7,release:2},volume:-16}).chain(t,i,fs),r=new Zi((u,f)=>{e.triggerAttackRelease(f,"4n",u)},["C3","E3","G3"],"up");r.interval="2n";const l=new Zi((u,f)=>{s.triggerAttackRelease(f,"2n",u)},["C4","D4","E4","F4","E4","D4"],"upDown");return l.interval="1n",r.start(0),l.start(0),[r,l]}},{id:"tintinnabular_harmony",name:"Tintinnabular Harmony (Thirds & Sixths)",defaultNote:"C4",create:()=>{const i=new fr({wet:.6,decay:4}),t=new $u({frequency:1.5,delayTime:3.5,depth:.7,wet:.3}).start(),e=new Ku({vibratoAmount:.2,vibratoRate:3,harmonicity:1.5,voice0:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},voice1:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},volume:-20}).chain(t,i,fs),s=new el({harmonicity:2,oscillator:{type:"sine"},envelope:{attack:.3,decay:.2,sustain:.8,release:2.5},modulation:{type:"sine"},modulationEnvelope:{attack:.5,decay:.3,sustain:.7,release:2},volume:-18}).chain(t,i,fs),r=new Zi((u,f)=>{e.triggerAttackRelease(f,"4n",u)},["E4","G4","B4"],"up");r.interval="2n";const l=new Zi((u,f)=>{s.triggerAttackRelease(f,"2n",u)},["A5","B5","C6","D6","C6","B5"],"upDown");return l.interval="1n",r.start("8n"),l.start("4n"),[r,l]}},{id:"tintinnabular_dissonance",name:"Tintinnabular Dissonance (Tension)",defaultNote:"C4",create:()=>{const i=new fr({wet:.3,decay:2}),t=new $u({frequency:.5,delayTime:2,depth:.4,wet:.2}).start(),e=new Ku({vibratoAmount:.3,vibratoRate:4.5,harmonicity:1.2,voice0:{oscillator:{type:"sine"},envelope:{attack:.15,decay:.4,sustain:.7,release:1.8}},voice1:{oscillator:{type:"sine"},envelope:{attack:.15,decay:.4,sustain:.7,release:1.8}},volume:-19}).chain(t,i,fs),s=new el({harmonicity:1.8,oscillator:{type:"sine"},envelope:{attack:.25,decay:.3,sustain:.7,release:2},modulation:{type:"sine"},modulationEnvelope:{attack:.4,decay:.4,sustain:.6,release:1.8},volume:-17}).chain(t,i,fs),r=new Zi((u,f)=>{e.triggerAttackRelease(f,"4n",u)},["Db4","F4","Ab4"],"up");r.interval="2n";const l=new Zi((u,f)=>{s.triggerAttackRelease(f,"2n",u)},["B5","C#6","F5","B5","F5","C#6"],"upDown");return l.interval="1n",r.start("16n"),l.start("8n."),[r,l]}}];function cO(i){return Z0.find(t=>t.id===i)}const uO=({show:i,shapeId:t,position:e,onSoundSelect:s,onClose:r,selectedsoundId:l})=>{const u=f=>{s(f),r()};return i?Tt.jsxs("div",{style:{position:"absolute",left:e.x,top:e.y,backgroundColor:"white",border:"2px solid #333",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"200px",padding:"8px 0",fontFamily:"Arial, sans-serif"},children:[Tt.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #ddd",fontWeight:"bold",fontSize:"14px",color:"#333",backgroundColor:"#f8f8f8"},children:["Select Sound for ",t]}),Tt.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",overflowX:"hidden"},children:Z0.map(f=>Tt.jsxs("button",{onClick:()=>u(f.id),style:{width:"100%",padding:"10px 12px",border:"none",backgroundColor:"white",textAlign:"left",cursor:"pointer",fontSize:"14px",color:"#333",transition:"background-color 0.2s",display:"block",position:"relative"},onMouseOver:p=>{p.target.style.backgroundColor="#e3f2fd",p.target.style.color="#1976d2"},onMouseOut:p=>{p.target.style.backgroundColor="white",p.target.style.color="#333"},children:[f.name,l===f.id&&Tt.jsx("span",{style:{position:"absolute",right:"12px",color:"#10b981",fontWeight:"bold",fontSize:"16px"},children:""})]},f.id))}),Tt.jsx("div",{style:{borderTop:"1px solid #ddd",padding:"8px"},children:Tt.jsx("button",{onClick:r,style:{width:"100%",padding:"8px",border:"1px solid #ccc",backgroundColor:"#f0f0f0",color:"#666",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},onMouseOver:f=>f.target.style.backgroundColor="#e0e0e0",onMouseOut:f=>f.target.style.backgroundColor="#f0f0f0",children:"Cancel"})})]}):null};class Us{static instance;activeSounds=[];soundMap=new Map;static getInstance(){return Us.instance||(Us.instance=new Us),Us.instance}async playSingle(t,e){await ad();const s=8e3,r=this.createSound(t);this.activeSounds.push(r),this.triggerSound(r,e),setTimeout(()=>{this.destroySound(r);const l=this.activeSounds.indexOf(r);l>-1&&this.activeSounds.splice(l,1)},s)}async playMultiple(t){await ad(),this.stopAll();const e=t.map(({soundId:r,note:l})=>{const u=this.createSound(r);return this.activeSounds.push(u),{sound:u,note:l}}),s=sg()+.1;e.forEach(({sound:r,note:l})=>{this.triggerSound(r,l,s)})}async playMultipleWithVolume(t){await ad();const e=new Set(t.map(r=>r.soundId)),s=[];for(const r of this.soundMap.keys())e.has(r)||s.push(r);s.forEach(r=>this.stopSound(r));for(const{soundId:r,note:l,volume:u}of t)if(this.soundMap.has(r)){const f=this.soundMap.get(r);this.setSoundGain(f,u)}else{const f=this.createSound(r);this.soundMap.set(r,f),this.activeSounds.push(f),this.setSoundGain(f,u,0);const p=sg()+.1;this.triggerSound(f,l,p)}}setSoundGain(t,e,s=.1){(Array.isArray(t)?t:[t]).forEach(l=>{if("volume"in l){const u=e<=0?-1/0:20*Math.log10(e);s>0?l.volume.rampTo(u,s):l.volume.value=u}})}async startSound(t,e="C4"){if(this.soundMap.has(t))return;await ad();const s=this.createSound(t);this.soundMap.set(t,s),this.activeSounds.push(s),this.triggerSound(s,e)}stopSound(t){const e=this.soundMap.get(t);e&&(this.setSoundGain(e,0,.1),setTimeout(()=>{this.destroySound(e),this.soundMap.delete(t);const s=this.activeSounds.indexOf(e);s>-1&&this.activeSounds.splice(s,1)},150))}isSoundPlaying(t){return this.soundMap.has(t)}stopAll(){this.activeSounds.forEach(t=>{this.destroySound(t)}),this.activeSounds=[],this.soundMap.clear()}createSound(t){const e=cO(t);return e?e.create():new Xi().toDestination()}triggerSound(t,e,s){const r=Array.isArray(t)?t:[t],l=s||sg();r.forEach(u=>{u instanceof ha||u instanceof Zi||u instanceof ca||u instanceof aa||this.isSynthInstrument(u)&&u.triggerAttackRelease(e,"8n",l)})}destroySound(t){(Array.isArray(t)?t:[t]).forEach(s=>{try{s instanceof ha||s instanceof Zi||s instanceof ca||s instanceof aa?s.stop():this.isSynthInstrument(s)&&(s.triggerRelease(),"onsilence"in s&&(s.onsilence=()=>{})),s.dispose()}catch(r){console.warn("Error disposing sound:",r)}})}isSynthInstrument(t){return"triggerAttackRelease"in t}initializeTransport(t=120){const e=io();e.bpm.value=t,e.loop=!1}}class ds{static instance=null;updateInterval=null;isInitialized=!1;onBpmChangeCallback=null;currentState={startTime:null,bpm:120,isPlaying:!1,pausedPosition:0};constructor(){}static getInstance(){return ds.instance||(ds.instance=new ds),ds.instance}async initialize(t=120){if(this.isInitialized){console.log("TimingSync already initialized");return}console.log("Initializing TimingSync with timestamp-based sync"),this.currentState.bpm=t,this.isInitialized=!0;const e=io();e.bpm.value=t,this.startSyncLoop(),console.log("TimingSync ready!")}syncFromRemote(t){if(!this.isInitialized)return;const e=io(),s=this.currentState.bpm;if(this.currentState={...t},Math.abs(s-t.bpm)>.1&&this.onBpmChangeCallback&&this.onBpmChangeCallback(Math.round(t.bpm)),e.bpm.value=t.bpm,t.isPlaying&&t.startTime){const l=(Date.now()-t.startTime)/1e3;e.seconds=l,e.state!=="started"&&(console.log("[TimingSync] Starting Transport"),e.start())}else e.state==="started"&&(console.log("[TimingSync] Pausing Transport"),e.pause())}syncToTransport(){if(!this.isInitialized||!this.currentState.isPlaying||!this.currentState.startTime)return;const t=io(),s=(Date.now()-this.currentState.startTime)/1e3,r=t.seconds,l=Math.abs(r-s);l>.05&&(console.log(`[TimingSync] Correcting drift: ${(l*1e3).toFixed(1)}ms`),t.seconds=s)}startSyncLoop(){const t=()=>{this.syncToTransport();const e=250,s=50,r=e+(Math.random()*s*2-s);this.updateInterval=window.setTimeout(t,r)};t()}setBPM(t){if(!this.isInitialized)return console.warn("TimingSync not initialized"),this.currentState;this.currentState.bpm=t;const e=io();return e.bpm.value=t,console.log("Updated BPM:",t),{...this.currentState}}start(){if(!this.isInitialized)return console.warn("TimingSync not initialized"),this.currentState;const t=io();return t.seconds=0,this.currentState.startTime=Date.now(),this.currentState.isPlaying=!0,this.currentState.pausedPosition=0,t.start(),console.log("Started playback from 0 at:",this.currentState.startTime),{...this.currentState}}resume(){if(!this.isInitialized)return console.warn("TimingSync not initialized"),this.currentState;if(this.currentState.isPlaying)return console.log("Already playing"),{...this.currentState};const t=io(),e=this.currentState.pausedPosition;return t.seconds=e,this.currentState.startTime=Date.now()-e*1e3,this.currentState.isPlaying=!0,t.start(),console.log("Resumed playback from",e.toFixed(2),"s"),{...this.currentState}}pause(){return this.isInitialized?(this.currentState.startTime&&(this.currentState.pausedPosition=(Date.now()-this.currentState.startTime)/1e3),this.currentState.isPlaying=!1,this.currentState.startTime=null,io().pause(),console.log("Paused at",this.currentState.pausedPosition.toFixed(2),"s"),{...this.currentState}):(console.warn("TimingSync not initialized"),this.currentState)}reset(){if(!this.isInitialized)return console.warn("TimingSync not initialized"),this.currentState;const t=io();return t.seconds=0,this.currentState.pausedPosition=0,this.currentState.isPlaying&&(this.currentState.startTime=Date.now()),console.log("Reset position to 0"),{...this.currentState}}getState(){return{...this.currentState}}onBpmChange(t){this.onBpmChangeCallback=t}destroy(){this.updateInterval!==null&&(clearTimeout(this.updateInterval),this.updateInterval=null),this.isInitialized=!1,this.onBpmChangeCallback=null}}const hO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",fO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let dO=un.icon({iconUrl:hO,shadowUrl:fO,iconSize:[25,41],iconAnchor:[12,41]});un.Marker.prototype.options.icon=dO;const pO=({connectedUsers:i,currentUserId:t,updateUserPosition:e,syncedShapes:s,addShape:r,updateShapeSound:l,updateShapeCoordinates:u,deleteShape:f,clearAllShapes:p,locationMode:m,transportState:v,updateTransportState:y})=>{const w=It.useRef(null),T=It.useRef(null),[x]=It.useState([42.308606,-83.747036]),A=It.useRef(null),[E,I]=It.useState([]),B=It.useRef(new Map),D=It.useRef(new Map),[F,R]=It.useState({show:!1,position:{x:0,y:0},shapeId:null,soundId:null}),[H,Z]=It.useState(!1),[q,V]=It.useState(!1),[W,X]=It.useState(new Set);let{point:tt}=Jo;const P=It.useRef(new Map),J=It.useRef(!1),[$,U]=It.useState(!1),Y=It.useRef(""),et=It.useRef(new Map),k=It.useRef(new Map),j=It.useRef(new Set),O=It.useRef(new Set),[G,ot]=It.useState(!1),[dt,gt]=It.useState(null),mt=It.useRef(0),Mt=500,Et=It.useRef(r),ne=It.useRef(f),Se=It.useRef(s);It.useEffect(()=>{Et.current=r,ne.current=f,Se.current=s},[r,f,s]),It.useEffect(()=>{if(!$||G)return;(async()=>{try{const Ct=ds.getInstance();console.log("Initializing TimingSync with timestamp-based sync..."),await Ct.initialize(120),ot(!0),console.log("TimingSync ready!"),await Us.getInstance().initializeTransport(120),v&&(Ct.syncFromRemote(v),Xe(v.bpm),console.log("Synced to existing transport state:",v)),Ct.onBpmChange(Lt=>{console.log("BPM changed remotely to:",Lt),Xe(Lt)})}catch(Ct){console.error("Failed to initialize TimingSync:",Ct),gt("Failed to initialize timing sync")}})()},[$,G,v]),It.useEffect(()=>{if(!$||!G||!v)return;ds.getInstance().syncFromRemote(v),Xe(v.bpm)},[v,$,G]);const[We,Xe]=It.useState(120),[Nn,hi]=It.useState(!1),[Ot,Zt]=It.useState(!1),Ne=(St,Ct)=>{B.current.set(St,Ct)},be=St=>{B.current.delete(St),I(Ct=>Ct.filter(Gt=>Gt!==St))},oe=St=>{for(const[Ct,Gt]of B.current.entries())if(Gt.id===St)return Ct;return null};It.useEffect(()=>{if(!w.current||T.current)return;const St=un.map(w.current,{maxZoom:23}).setView(x,13);un.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:23,maxNativeZoom:19}).addTo(St),un.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:23,maxNativeZoom:19}).addTo(St);const Ct=new un.FeatureGroup;St.addLayer(Ct);const Gt=new un.Control.Draw({draw:{polyline:!1,marker:!1},edit:{featureGroup:Ct}});return St.addControl(Gt),un.control.scale().addTo(St),T.current=St,A.current=Ct,St.on(un.Draw.Event.CREATED,function(Lt){const Rt=Lt.layer,Nt=Lt.layerType;if(Nt==="marker")return;Ct.addLayer(Rt);const qt=Ji(Rt,Nt),Wt=As(Nt,qt),Qt=Et.current(Nt,qt,null);et.current.set(Qt,Rt),k.current.set(Rt,Qt),j.current.add(Qt),O.current.add(Qt);const we={id:un.stamp(Rt),type:Nt,coordinates:qt,soundId:null};(Wt instanceof Jo.Circle||Wt instanceof Jo.Polygon)&&(Ne(Wt,we),I(Dt=>[...Dt,Wt])),Wt!==null&&(Rt.on("click",function(Dt){if(!T.current)return;const fi=St.mouseEventToContainerPoint(Dt.originalEvent),vn=Se.current.find(De=>De.id===Qt)?.soundId||null;R({show:!0,position:{x:fi.x,y:fi.y},shapeId:Qt,soundId:vn})}),console.log("Shape created and synced:",Qt,Nt))}),St.on(un.Draw.Event.DELETED,function(Lt){var Rt=Lt.layers;Rt.eachLayer(function(Nt){const qt=k.current.get(Nt);qt&&(ne.current(qt),et.current.delete(qt),k.current.delete(Nt),j.current.delete(qt),O.current.delete(qt),console.log("Shape deleted and synced:",qt));const Wt=un.stamp(Nt),Qt=oe(Wt);Qt&&be(Qt)})}),St.on("click",function(Lt){Lt.originalEvent.target.closest(".leaflet-interactive")||R(Rt=>({...Rt,show:!1}))}),()=>{T.current&&(T.current.remove(),T.current=null)}},[]);const Te=(St,Ct,Gt)=>{const Lt=Ct?"#3b82f6":"#10b981",Rt=Ct?"#fbbf24":"white",Nt=Ct&&Gt==="gps",qt=`
            <div style="position: relative;">
                <div style="
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    background-color: ${Lt};
                    border: 3px solid ${Rt};
                    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                    color: white;
                    font-size: 14px;
                ">
                    ${St.substring(0,1).toUpperCase()}
                </div>
                ${Nt?`
                <div style="
                    position: absolute;
                    top: -4px;
                    right: -4px;
                    width: 14px;
                    height: 14px;
                    background-color: #22c55e;
                    border-radius: 50%;
                    border: 2px solid white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 8px;
                ">
                    
                </div>
                `:""}
                <div style="
                    position: absolute;
                    top: 35px;
                    left: 50%;
                    transform: translateX(-50%);
                    background-color: rgba(0, 0, 0, 0.75);
                    color: white;
                    padding: 2px 6px;
                    border-radius: 3px;
                    font-size: 11px;
                    white-space: nowrap;
                    pointer-events: none;
                ">
                    ${St}${Ct?" (you)":""}${Nt?" ":""}
                </div>
            </div>
        `;return un.divIcon({html:qt,className:"user-marker-icon",iconSize:[30,30],iconAnchor:[15,15]})};It.useEffect(()=>{if(!T.current)return;const St=T.current,Ct=P.current,Gt=new Set;i.forEach(Lt=>{Gt.add(Lt.id);const Rt=Lt.id===t,Nt=Lt.name||"Anonymous",qt=Rt&&m==="manual";let Wt=Ct.get(Lt.id);if(Wt)Rt&&J.current||(Lt.position&&Wt.setLatLng([Lt.position.lat,Lt.position.lng]),Wt.setIcon(Te(Nt,Rt,m)),Rt&&(qt&&!Wt.dragging?.enabled()?Wt.dragging?.enable():!qt&&Wt.dragging?.enabled()&&Wt.dragging?.disable()));else{const Qt=Lt.position?[Lt.position.lat,Lt.position.lng]:[x[0],x[1]];Wt=un.marker(Qt,{icon:Te(Nt,Rt,m),draggable:qt}).addTo(St),Rt&&(Wt.on("dragstart",()=>{J.current=!0}),Wt.on("dragend",we=>{J.current=!1;const Dt=we.target.getLatLng();e(Dt.lat,Dt.lng)}),!Lt.position&&m==="manual"&&e(Qt[0],Qt[1])),Ct.set(Lt.id,Wt)}});for(const[Lt,Rt]of Ct.entries())Gt.has(Lt)||(St.removeLayer(Rt),Ct.delete(Lt))},[i,t,e,x,m]),It.useEffect(()=>{if(!T.current||!A.current)return;const St=T.current,Ct=A.current,Gt=new Set;s.forEach(Lt=>{if(Gt.add(Lt.id),O.current.has(Lt.id)&&(O.current.delete(Lt.id),console.log("Local shape confirmed by Automerge:",Lt.id)),j.current.has(Lt.id))return;let Rt=null;const Nt=Lt.coordinates;switch(Lt.type){case"circle":Rt=un.circle(Nt.center,{radius:Nt.radius});break;case"rectangle":Rt=un.rectangle(Nt);break;case"polygon":Rt=un.polygon(Nt);break;case"circlemarker":Rt=un.circleMarker(Nt.center,{radius:Nt.radius});break;default:console.log("Unknown shape type:",Lt.type);break}if(Rt){Ct.addLayer(Rt),et.current.set(Lt.id,Rt),k.current.set(Rt,Lt.id),j.current.add(Lt.id);const qt=As(Lt.type,Nt);if(qt instanceof Jo.Circle||qt instanceof Jo.Polygon){const Qt={id:un.stamp(Rt),type:Lt.type,coordinates:Nt,soundId:Lt.soundId};Ne(qt,Qt),I(we=>[...we,qt])}const Wt=Lt.id;Rt.on("click",function(Qt){if(!T.current)return;const we=St.mouseEventToContainerPoint(Qt.originalEvent),fi=Se.current.find(ts=>ts.id===Wt)?.soundId||null;R({show:!0,position:{x:we.x,y:we.y},shapeId:Wt,soundId:fi})}),console.log("Synced shape from another user:",Lt.id,Lt.type)}});for(const[Lt,Rt]of et.current.entries())if(!Gt.has(Lt)&&!O.current.has(Lt)){Ct.removeLayer(Rt),et.current.delete(Lt),k.current.delete(Rt),j.current.delete(Lt);const Nt=un.stamp(Rt),qt=oe(Nt);qt&&be(qt),console.log("Removed shape (deleted by another user):",Lt)}},[s]);const nn=()=>{const St=i.find(qt=>qt.id===t);if(!St?.position)return null;const{lat:Ct,lng:Gt}=St.position,Lt=x[0],Rt=x[1],Nt=$i(Ct,Gt,Lt,Rt);return tt(Nt.x,Nt.y)},Qn=(()=>{const St=i.find(Ct=>Ct.id===t);return St?.position?`${St.position.lat},${St.position.lng}`:null})();It.useEffect(()=>{const St=Date.now();if(St-mt.current<Mt){console.log("throttled...");return}if(mt.current=St,!$||!v?.isPlaying){Y.current!==""&&(Us.getInstance().stopAll(),Y.current="");return}if(E.length===0||!Qn)return;const Ct=nn();if(!Ct)return;let Gt=new Jo.PlanarSet;E.forEach(Qt=>{Gt.add(Qt)});const Lt=Gt.hit(Ct),Rt=300,Nt=wl({threshold:Rt}),qt=[];Lt.forEach(Qt=>{const we=B.current.get(Qt);if(we){let Dt;for(const[vn,De]of et.current.entries())if(un.stamp(De)===we.id){Dt=vn;break}const ts=s.find(vn=>vn.id===Dt)?.soundId;ts&&qt.push({soundId:ts,note:"C4",volume:1})}}),Nt&&Nt.length>0&&Nt.forEach(({shape:Qt,dist:we})=>{if(Lt.includes(Qt))return;const Dt=B.current.get(Qt);if(Dt){let fi;for(const[De,bn]of et.current.entries())if(un.stamp(bn)===Dt.id){fi=De;break}const vn=s.find(De=>De.id===fi)?.soundId;if(vn){const De=Math.max(0,1-we/Rt);qt.push({soundId:vn,note:"C4",volume:De})}}});const Wt=qt.map(Qt=>Qt.soundId).sort().join(",");if(Wt!==Y.current){Y.current=Wt;const Qt=Us.getInstance();qt.length>0?(console.log("Updating sounds with volumes:",qt),Qt.playMultipleWithVolume(qt)):(console.log("Stopping all sounds"),Qt.stopAll())}else qt.length>0&&Us.getInstance().playMultipleWithVolume(qt)},[$,v?.isPlaying,Qn,E,x,tt,s]);const Ji=function(St,Ct){switch(Ct){case"marker":const Gt=St.getLatLng();return[Gt.lat,Gt.lng];case"circle":const Lt=St.getLatLng();return{center:[Lt.lat,Lt.lng],radius:St.getRadius()};case"rectangle":case"polygon":return St.getLatLngs()[0].map(Nt=>[Nt.lat,Nt.lng]);case"circlemarker":const Rt=St.getLatLng();return{center:[Rt.lat,Rt.lng],radius:St.getRadius()};default:return null}},sn=()=>{A.current&&(A.current.clearLayers(),I([]),B.current.clear(),D.current.clear(),et.current.clear(),k.current.clear(),j.current.clear(),O.current.clear(),R(St=>({...St,show:!1})),p())},ma=()=>{let St=null;if(T.current){const Wt=T.current.getCenter(),Qt=T.current.getZoom();St={center:[Wt.lat,Wt.lng],zoom:Qt}}const Gt={shapes:Se.current.map(Wt=>({id:Wt.id,type:Wt.type,coordinates:Wt.coordinates,soundId:Wt.soundId})),mapView:St},Lt=JSON.stringify(Gt,null,2),Rt=new Blob([Lt],{type:"application/json"}),Nt=URL.createObjectURL(Rt),qt=document.createElement("a");qt.href=Nt,qt.download="arrangement.json",document.body.appendChild(qt),qt.click(),document.body.removeChild(qt),URL.revokeObjectURL(Nt)},As=(St,Ct)=>{const Gt=x[0],Lt=x[1];let{point:Rt,circle:Nt,Polygon:qt}=Jo;switch(St){case"marker":{const Wt=$i(Ct[0],Ct[1],Gt,Lt);return Rt(Wt.x,Wt.y)}case"circle":{const Wt=$i(Ct.center[0],Ct.center[1],Gt,Lt);return Nt(Rt(Wt.x,Wt.y),Ct.radius)}case"rectangle":{const Wt=[];Ct.forEach(we=>{const Dt=$i(we[0],we[1],Gt,Lt);Wt.push(Rt(Dt.x,Dt.y))});const Qt=new qt;return Qt.addFace(Wt),Qt}case"polygon":{const Wt=[];Ct.forEach(we=>{const Dt=$i(we[0],we[1],Gt,Lt);Wt.push(Rt(Dt.x,Dt.y))});const Qt=new qt;return Qt.addFace(Wt),Qt}case"circlemarker":{const Wt=$i(Ct.center[0],Ct.center[1],Gt,Lt);return Nt(Rt(Wt.x,Wt.y),Ct.radius)}default:throw new Error(`Unknown shape type: ${St}`)}},$i=(St,Ct,Gt,Lt)=>{const Nt=(St-Gt)*Math.PI/180,Wt=(Ct-Lt)*Math.PI/180*Math.cos(Gt*Math.PI/180)*6371e3,Qt=Nt*6371e3;return{x:Wt,y:Qt}},Er=St=>{if(!St){console.log("no marker selected");return}if(E.length===0)return console.log("No shapes to check collisions"),[];let Ct=new Jo.PlanarSet;E.forEach(Lt=>{Ct.add(Lt)});const Gt=Ct.hit(St);return Gt.length>0?Gt:null},wl=({threshold:St})=>{if(E.length===0)return console.log("No shapes to check collisions"),[];const Ct=nn();if(!Ct)return console.log("No user position available"),[];const Gt=Er(Ct),Lt=E.filter(Nt=>!Gt?.includes(Nt)),Rt=[];return Lt.forEach(Nt=>{const qt=Ct.distanceTo(Nt)[0];St==null?Rt.push({shape:Nt,dist:qt}):qt<=St&&Rt.push({shape:Nt,dist:qt})}),Rt.sort((Nt,qt)=>Nt.dist-qt.dist),Rt},_a=St=>{const Ct=St.target.files?.[0];if(!Ct)return;const Gt=new FileReader;Gt.onload=Lt=>{try{const Rt=JSON.parse(Lt.target?.result);if(Rt&&Array.isArray(Rt.shapes)){if(sn(),Rt.shapes.forEach(Nt=>{Nt.type!=="marker"&&Et.current(Nt.type,Nt.coordinates,Nt.soundId)}),Rt.mapView&&T.current){const{center:Nt,zoom:qt}=Rt.mapView;Array.isArray(Nt)&&Nt.length===2&&typeof Nt[0]=="number"&&typeof Nt[1]=="number"&&typeof qt=="number"&&T.current.setView([Nt[0],Nt[1]],qt)}console.log("Imported",Rt.shapes.length,"shapes to Automerge")}else Array.isArray(Rt)&&(console.log("Importing old format (no sound data)"),sn(),Rt.forEach(Nt=>{Nt.type&&Nt.coordinates&&Et.current(Nt.type,Nt.coordinates,null)}))}catch(Rt){console.log(Rt),alert("Invalid JSON file")}},Gt.readAsText(Ct),St.target.value=""},xl=St=>{const Ct=F.shapeId;Ct&&(l(Ct,St),console.log(`Synced sound "${St}" to shape ${Ct}`)),R(Gt=>({...Gt,soundId:St}))},Uc=()=>{R({show:!1,position:{x:0,y:0},shapeId:null,soundId:null})},Ys=()=>{U(!0)},yn=()=>{U(!1),Y.current="",Us.getInstance().stopAll()},Ri=()=>{Z(!H)},jn=async St=>{const Ct=Us.getInstance();W.has(St)?(console.log(`Stopping debug instrument: ${St}`),Ct.stopSound(St),X(Gt=>{const Lt=new Set(Gt);return Lt.delete(St),Lt})):(console.log(`Starting debug instrument: ${St}`),await Ct.startSound(St,"C4"),X(Gt=>new Set(Gt).add(St)))},Cr=()=>{Z(!1)},Hc=()=>{Zt(!1)},Vc=()=>{hi(!1)},Lr=()=>{if(!G)return;const Ct=ds.getInstance().start();y(Ct),console.log("Transport started from 0, syncing to Automerge")},Mr=()=>{if(!G)return;const Ct=ds.getInstance().resume();y(Ct),console.log("Transport resumed, syncing to Automerge")},kr=()=>{if(!G)return;const Ct=ds.getInstance().pause();y(Ct),console.log("Transport paused, syncing to Automerge")},Es=()=>{if(!G)return;const Ct=ds.getInstance().reset();y(Ct),console.log("Transport reset to 0, syncing to Automerge")},po=St=>{if(!G)return;const Gt=ds.getInstance().setBPM(St);y(Gt),Xe(St),console.log("BPM changed, syncing to Automerge")};return Tt.jsxs("div",{style:{height:"100vh",width:"100vw",position:"relative"},children:[Tt.jsx("div",{ref:w,style:{height:"100%",width:"100%"}}),Tt.jsx("button",{onClick:()=>Zt(!Ot),style:{position:"absolute",top:"600px",left:"10px",backgroundColor:"#8b5cf6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:Ot?" Hide Zones":" Zone Management"}),Ot&&Tt.jsxs(Tt.Fragment,{children:[Tt.jsx("div",{onClick:Hc,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Tt.jsxs("div",{style:{position:"absolute",top:"540px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1001,minWidth:"200px"},children:[Tt.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"12px",color:"#374151"},children:"Zone Management"}),Tt.jsx("button",{onClick:ma,style:{width:"100%",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",marginBottom:"8px",fontWeight:"500"},children:" Export Arrangement"}),Tt.jsxs("label",{htmlFor:"importArrangement",style:{display:"block",width:"100%",backgroundColor:"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",marginBottom:"8px",textAlign:"center",fontWeight:"500",boxSizing:"border-box"},children:[" Import Arrangement",Tt.jsx("input",{id:"importArrangement",type:"file",accept:"application/json",style:{display:"none"},onChange:_a})]}),Tt.jsx("button",{onClick:sn,style:{width:"100%",backgroundColor:"#ef4444",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",fontWeight:"500"},children:" Clear Arrangement"})]})]}),Tt.jsx("button",{onClick:()=>V(!q),style:{position:"absolute",bottom:"10px",right:"10px",backgroundColor:q?"#6b7280":"#8b5cf6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:q?"hide experimental":"experimental"}),q&&Tt.jsxs(Tt.Fragment,{children:[Tt.jsx("button",{onClick:Ri,style:{position:"absolute",bottom:"100px",right:"10px",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"sound bank"}),Tt.jsx("button",{onClick:()=>wl({threshold:100}),style:{position:"absolute",bottom:"55px",right:"10px",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"get nearest (debug)"}),Tt.jsx("button",{onClick:yn,style:{position:"absolute",bottom:"145px",right:"10px",backgroundColor:"#f63b3bff",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"stop all audio"})]}),H&&Tt.jsxs(Tt.Fragment,{children:[Tt.jsx("div",{onClick:Cr,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Tt.jsxs("div",{style:{position:"absolute",bottom:"145px",right:"10px",backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",zIndex:1001,maxHeight:"300px",overflowY:"auto",minWidth:"200px"},children:[Tt.jsx("div",{style:{padding:"8px",borderBottom:"1px solid #e5e5e5",fontWeight:"bold",color:"#111"},children:"Select sounds"}),Z0.map(St=>{const Ct=W.has(St.id);return Tt.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[Tt.jsxs("div",{style:{flex:1},children:[Tt.jsx("div",{style:{fontWeight:"500",color:"#111"},children:St.name}),Tt.jsxs("div",{style:{fontSize:"12px",color:"#1f34b8ff"},children:["ID: ",St.id]})]}),Tt.jsx("button",{onClick:()=>jn(St.id),style:{padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",backgroundColor:Ct?"#ef4444":"#10b981",color:"white",transition:"all 0.2s",minWidth:"60px"},onMouseEnter:Gt=>{Gt.currentTarget.style.backgroundColor=Ct?"#dc2626":"#059669"},onMouseLeave:Gt=>{Gt.currentTarget.style.backgroundColor=Ct?"#ef4444":"#10b981"},children:Ct?" Stop":" Play"})]},St.id)})]})]}),Tt.jsx("button",{onClick:$?()=>hi(!Nn):Ys,style:{position:"absolute",top:"325px",left:"10px",backgroundColor:$?"#3b82f6":"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:$?Nn?" Hide Transport":" Transport Controls":"Enable Audio"}),Tt.jsx("button",{onClick:yn,disabled:!$,style:{position:"absolute",top:"360px",left:"10px",backgroundColor:$?"#f63b3bff":"#6b7280",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:$?"pointer":"not-allowed",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",opacity:$?1:.6},children:"Disable Audio"}),Nn&&Tt.jsxs(Tt.Fragment,{children:[Tt.jsx("div",{onClick:Vc,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Tt.jsxs("div",{style:{position:"absolute",top:"400px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1001,minWidth:"200px"},children:[Tt.jsxs("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"8px",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[" Transport Controls",G?Tt.jsx("span",{style:{fontSize:"10px",backgroundColor:"#10b981",color:"white",padding:"2px 6px",borderRadius:"3px",fontWeight:"normal"},children:"Synced"}):dt?Tt.jsx("span",{style:{fontSize:"10px",backgroundColor:"#ef4444",color:"white",padding:"2px 6px",borderRadius:"3px",fontWeight:"normal"},children:"Error"}):Tt.jsx("span",{style:{fontSize:"10px",backgroundColor:"#f59e0b",color:"white",padding:"2px 6px",borderRadius:"3px",fontWeight:"normal"},children:"Connecting..."})]}),dt&&Tt.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginBottom:"8px",padding:"4px",backgroundColor:"#fee2e2",borderRadius:"3px"},children:dt}),Tt.jsx("button",{onClick:Lr,disabled:!G||v?.isPlaying,style:{width:"100%",backgroundColor:!G||v?.isPlaying?"#6b7280":"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:!G||v?.isPlaying?"not-allowed":"pointer",marginBottom:"8px",fontWeight:"500",opacity:!G||v?.isPlaying?.6:1},children:" Start"}),Tt.jsx("button",{onClick:Mr,disabled:!G||v?.isPlaying||!(v?.pausedPosition&&v.pausedPosition>0),style:{width:"100%",backgroundColor:!G||v?.isPlaying||!(v?.pausedPosition&&v.pausedPosition>0)?"#6b7280":"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:!G||v?.isPlaying||!(v?.pausedPosition&&v.pausedPosition>0)?"not-allowed":"pointer",marginBottom:"8px",fontWeight:"500",opacity:!G||v?.isPlaying||!(v?.pausedPosition&&v.pausedPosition>0)?.6:1},children:" Resume"}),Tt.jsx("button",{onClick:kr,disabled:!G||!v?.isPlaying,style:{width:"100%",backgroundColor:!G||!v?.isPlaying?"#6b7280":"#f59e0b",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:!G||!v?.isPlaying?"not-allowed":"pointer",marginBottom:"8px",fontWeight:"500",opacity:!G||!v?.isPlaying?.6:1},children:" Pause"}),Tt.jsx("button",{onClick:Es,disabled:!G||!v?.isPlaying&&!(v?.pausedPosition&&v.pausedPosition>0),style:{width:"100%",backgroundColor:!G||!v?.isPlaying&&!(v?.pausedPosition&&v.pausedPosition>0)?"#6b7280":"#ef4444",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:!G||!v?.isPlaying&&!(v?.pausedPosition&&v.pausedPosition>0)?"not-allowed":"pointer",marginBottom:"8px",fontWeight:"500",opacity:!G||!v?.isPlaying&&!(v?.pausedPosition&&v.pausedPosition>0)?.6:1},children:" Reset"}),Tt.jsxs("div",{style:{marginTop:"12px"},children:[Tt.jsxs("label",{style:{fontSize:"11px",fontWeight:"bold",color:"#374151",display:"block",marginBottom:"4px"},children:["BPM: ",We]}),Tt.jsx("input",{type:"range",min:"60",max:"180",value:We,onChange:St=>po(parseInt(St.target.value)),disabled:!G,style:{width:"100%",cursor:G?"pointer":"not-allowed",opacity:G?1:.6}})]})]})]}),Tt.jsx(uO,{show:F.show,shapeId:F.shapeId,position:F.position,onSoundSelect:xl,onClose:Uc,selectedsoundId:F.soundId})]})},xp=Symbol.for("_am_meta"),ch=Symbol.for("_am_trace"),uh=Symbol.for("_am_objectId"),W0=Symbol.for("_am_isProxy"),US=Symbol.for("_am_clearCache"),mO=Symbol.for("_am_uint"),_O=Symbol.for("_am_int"),gO=Symbol.for("_am_f64"),HS=Symbol.for("_am_counter"),VS=Symbol.for("_am_immutableString");class zg{constructor(t){this.value=t||0,Reflect.defineProperty(this,HS,{value:!0})}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}increment(t){throw new Error("Counters should not be incremented outside of a change callback")}decrement(t){throw new Error("Counters should not be decremented outside of a change callback")}}class yO extends zg{constructor(t,e,s,r,l){super(t),this.context=e,this.path=s,this.objectId=r,this.key=l}increment(t){return t=typeof t=="number"?t:1,this.context.increment(this.objectId,this.key,t),this.value+=t,this.value}decrement(t){return this.increment(typeof t=="number"?-t:-1)}}function vO(i,t,e,s,r){return new yO(i,t,e,s,r)}var qS;class jS{constructor(t){this[qS]=!0,this.val=t}toString(){return this.val}toJSON(){return this.val}}qS=VS;const bO=BigInt("9223372036854775807");function ro(i){if(typeof i=="string"&&/^[0-9]+$/.test(i)&&(i=parseInt(i,10)),typeof i!="number")return i;if(i<0||isNaN(i)||i===1/0||i===-1/0)throw new RangeError("A list index must be positive, but you passed "+i);return i}function Gi(i,t){const{context:e,objectId:s,path:r}=i,l=e.getWithType(s,t);if(l===null)return;const u=l[0],f=l[1];switch(u){case void 0:return;case"map":return Oh(e,f,[...r,t]);case"list":return Tp(e,f,[...r,t]);case"text":return e.text(f);case"str":return new jS(f);case"uint":return f;case"int":return f;case"f64":return f;case"boolean":return f;case"null":return null;case"bytes":return f;case"timestamp":return f;case"counter":return vO(f,e,r,s,t);default:throw RangeError(`datatype ${u} unimplemented`)}}function qd(i,t,e){const s=typeof i;switch(s){case"object":if(i==null)return[null,"null"];if(i[mO])return[i.value,"uint"];if(i[_O])return[i.value,"int"];if(i[gO])return[i.value,"f64"];if(i[HS])return[i.value,"counter"];if(i instanceof Date)return[i.getTime(),"timestamp"];if(GS(i))return[i.toString(),"str"];if(i instanceof Uint8Array)return[i,"bytes"];if(i instanceof Array)return[i,"list"];if(Object.prototype.toString.call(i)==="[object Object]")return[i,"map"];throw Sp(i,e)?new RangeError("Cannot create a reference to an existing document object"):new RangeError(`Cannot assign unknown object: ${i}`);case"boolean":return[i,"boolean"];case"bigint":return i>bO?[i,"uint"]:[i,"int"];case"number":return Number.isInteger(i)?[i,"int"]:[i,"f64"];case"string":return[i,"text"];case"undefined":throw new RangeError([`Cannot assign undefined value at ${Ex(t)}, `,"because `undefined` is not a valid JSON data type. ","You might consider setting the property's value to `null`, ","or using `delete` to remove it altogether."].join(""));default:throw new RangeError([`Cannot assign ${s} value at ${Ex(t)}. `,"All JSON primitive datatypes (object, array, string, number, boolean, null) ",`are supported in an Automerge document; ${s} values are not. `].join(""))}}function Sp(i,t){var e,s;return i instanceof Date?!1:!!(i&&((s=(e=i[xp])===null||e===void 0?void 0:e.handle)===null||s===void 0?void 0:s.__wbg_ptr)===t.__wbg_ptr)}const wO={get(i,t){const{context:e,objectId:s,cache:r}=i;return t===Symbol.toStringTag?i[Symbol.toStringTag]:t===uh?s:t===W0?!0:t===ch?i.trace:t===xp?{handle:e}:(r[t]||(r[t]=Gi(i,t)),r[t])},set(i,t,e){const{context:s,objectId:r,path:l}=i;if(i.cache={},Sp(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===ch)return i.trace=e,!0;if(t===US)return!0;const[u,f]=qd(e,[...l,t],s);switch(f){case"list":{const p=s.putObject(r,t,[]),m=Tp(s,p,[...l,t]);for(let v=0;v<u.length;v++)m[v]=u[v];break}case"text":{s.putObject(r,t,u);break}case"map":{const p=s.putObject(r,t,{}),m=Oh(s,p,[...l,t]);for(const v in u)m[v]=u[v];break}default:s.put(r,t,u,f)}return!0},deleteProperty(i,t){const{context:e,objectId:s}=i;return i.cache={},e.delete(s,t),!0},has(i,t){return this.get(i,t)!==void 0},getOwnPropertyDescriptor(i,t){const e=this.get(i,t);if(typeof e<"u")return{configurable:!0,enumerable:!0,value:e}},ownKeys(i){const{context:t,objectId:e}=i,s=t.keys(e);return[...new Set(s)]}},xO={get(i,t){const{context:e,objectId:s}=i;return t=ro(t),t===Symbol.hasInstance?r=>Array.isArray(r):t===Symbol.toStringTag?i[Symbol.toStringTag]:t===uh?s:t===W0?!0:t===ch?i.trace:t===xp?{handle:e}:t==="length"?e.length(s):typeof t=="number"?Gi(i,t):TO(i)[t]},set(i,t,e){const{context:s,objectId:r,path:l}=i;if(t=ro(t),Sp(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===US)return!0;if(t===ch)return i.trace=e,!0;if(typeof t=="string")throw new RangeError("list index must be a number");const[u,f]=qd(e,[...l,t],s);switch(f){case"list":{let p;t>=s.length(r)?p=s.insertObject(r,t,[]):p=s.putObject(r,t,[]),Tp(s,p,[...l,t]).splice(0,0,...u);break}case"text":{t>=s.length(r)?s.insertObject(r,t,u):s.putObject(r,t,u);break}case"map":{let p;t>=s.length(r)?p=s.insertObject(r,t,{}):p=s.putObject(r,t,{});const m=Oh(s,p,[...l,t]);for(const v in u)m[v]=u[v];break}default:t>=s.length(r)?s.insert(r,t,u,f):s.put(r,t,u,f)}return!0},deleteProperty(i,t){const{context:e,objectId:s}=i;t=ro(t);const r=e.get(s,t);if(r!=null&&r[0]=="counter")throw new TypeError("Unsupported operation: deleting a counter from a list");return e.delete(s,t),!0},has(i,t){const{context:e,objectId:s}=i;return t=ro(t),typeof t=="number"?t<e.length(s):t==="length"},getOwnPropertyDescriptor(i,t){const{context:e,objectId:s}=i;return t==="length"?{writable:!0,value:e.length(s)}:t===uh?{configurable:!1,enumerable:!1,value:s}:(t=ro(t),{configurable:!0,enumerable:!0,value:Gi(i,t)})},getPrototypeOf(i){return Object.getPrototypeOf(i)},ownKeys(){const i=[];return i.push("length"),i}};function Oh(i,t,e){const s={context:i,objectId:t,path:e||[],cache:{}},r={};return Object.assign(r,s),new Proxy(r,wO)}function Tp(i,t,e){const s={context:i,objectId:t,path:e||[],cache:{}},r=[];return Object.assign(r,s),new Proxy(r,xO)}function SO(i){return Oh(i,"_root",[])}function TO(i){const{context:t,objectId:e,path:s}=i;return{at(l){return Gi(i,l)},deleteAt(l,u){return typeof u=="number"?t.splice(e,l,u):t.delete(e,l),this},fill(l,u,f){const[p,m]=qd(l,[...s,u],t),v=t.length(e);u=ro(u||0),f=ro(f||v);for(let y=u;y<Math.min(f,v);y++)m==="list"||m==="map"||m==="text"?t.putObject(e,y,p):t.put(e,y,p,m);return this},indexOf(l,u=0){const f=t.length(e);for(let p=u;p<f;p++){const m=t.getWithType(e,p);if(!m)continue;const[v,y]=m;if(!["map","list","text"].includes(v)){if(y===l)return p;continue}if(v==="text"&&typeof l=="string"&&l===Gi(i,p)||l[uh]===y)return p}return-1},insertAt(l,...u){return this.splice(l,0,...u),this},pop(){const l=t.length(e);if(l==0)return;const u=Gi(i,l-1);return t.delete(e,l-1),u},push(...l){const u=t.length(e);return this.splice(u,0,...l),t.length(e)},shift(){if(t.length(e)==0)return;const l=Gi(i,0);return t.delete(e,0),l},splice(l,u,...f){l=ro(l),typeof u!="number"&&(u=t.length(e)-l),u=ro(u);for(const v of f)if(Sp(v,t))throw new RangeError("Cannot create a reference to an existing document object");const p=[];for(let v=0;v<u;v++){const y=Gi(i,l);y!==void 0&&p.push(y),t.delete(e,l)}const m=f.map((v,y)=>{try{return qd(v,[...s],t)}catch(w){throw w instanceof RangeError?new RangeError(`${w.message} (at index ${y} in the input)`):w}});for(const[v,y]of m){switch(y){case"list":{const w=t.insertObject(e,l,[]);Tp(t,w,[...s,l]).splice(0,0,...v);break}case"text":{t.insertObject(e,l,v);break}case"map":{const w=t.insertObject(e,l,{}),T=Oh(t,w,[...s,l]);for(const x in v)T[x]=v[x];break}default:t.insert(e,l,v,y)}l+=1}return p},unshift(...l){return this.splice(0,0,...l),t.length(e)},entries(){let l=0;return{next:()=>{const f=Gi(i,l);return f===void 0?{value:void 0,done:!0}:{value:[l++,f],done:!1}},[Symbol.iterator](){return this}}},keys(){let l=0;const u=t.length(e);return{next:()=>l<u?{value:l++,done:!1}:{value:void 0,done:!0},[Symbol.iterator](){return this}}},values(){let l=0;return{next:()=>{const f=Gi(i,l++);return f===void 0?{value:void 0,done:!0}:{value:f,done:!1}},[Symbol.iterator](){return this}}},toArray(){const l=[];let u;do u=Gi(i,l.length),u!==void 0&&l.push(u);while(u!==void 0);return l},map(l){return this.toArray().map(l)},toString(){return this.toArray().toString()},toLocaleString(){return this.toArray().toLocaleString()},forEach(l){return this.toArray().forEach(l)},concat(l){return this.toArray().concat(l)},every(l){return this.toArray().every(l)},filter(l){return this.toArray().filter(l)},find(l){let u=0;for(const f of this){if(l(f,u))return f;u+=1}},findIndex(l){let u=0;for(const f of this){if(l(f,u))return u;u+=1}return-1},includes(l){return this.find(u=>u===l)!==void 0},join(l){return this.toArray().join(l)},reduce(l,u){return this.toArray().reduce(l,u)},reduceRight(l,u){return this.toArray().reduceRight(l,u)},lastIndexOf(l,u=1/0){return this.toArray().lastIndexOf(l,u)},slice(l,u){return this.toArray().slice(l,u)},some(l){let u=0;for(const f of this){if(l(f,u))return!0;u+=1}return!1},[Symbol.iterator]:function*(){let l=0,u=Gi(i,l);for(;u!==void 0;)yield u,l+=1,u=Gi(i,l)}}}function Ex(i){const t=i.map(e=>{if(typeof e=="number")return e.toString();if(typeof e=="string")return e.replace(/~/g,"~0").replace(/\//g,"~1")});return i.length===0?"":"/"+t.join("/")}function GS(i){return typeof i=="object"&&i!==null&&Object.prototype.hasOwnProperty.call(i,VS)}typeof FinalizationRegistry>"u"||new FinalizationRegistry(i=>ZS.__wbg_automerge_free(i>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(i=>ZS.__wbg_syncstate_free(i>>>0,1));let AO=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});AO.decode();const rg=new TextEncoder;"encodeInto"in rg||(rg.encodeInto=function(i,t){const e=rg.encode(i);return t.set(e),{read:i.length,written:e.length}});let ZS,EO=[];function CO(i){for(const t in i)ci[t]=i[t];for(const t of EO)t()}const ci={create(i){throw new RangeError("Automerge.use() not called")},load(i,t){throw new RangeError("Automerge.use() not called (load)")},encodeChange(i){throw new RangeError("Automerge.use() not called (encodeChange)")},decodeChange(i){throw new RangeError("Automerge.use() not called (decodeChange)")},initSyncState(){throw new RangeError("Automerge.use() not called (initSyncState)")},encodeSyncMessage(i){throw new RangeError("Automerge.use() not called (encodeSyncMessage)")},decodeSyncMessage(i){throw new RangeError("Automerge.use() not called (decodeSyncMessage)")},encodeSyncState(i){throw new RangeError("Automerge.use() not called (encodeSyncState)")},decodeSyncState(i){throw new RangeError("Automerge.use() not called (decodeSyncState)")},exportSyncState(i){throw new RangeError("Automerge.use() not called (exportSyncState)")},importSyncState(i){throw new RangeError("Automerge.use() not called (importSyncState)")},readBundle(i){throw new RangeError("Automerge.use() not called (readBundle)")},wasmReleaseInfo(){throw new RangeError("Automerge.use() not called (wasmReleaseInfo)")}},LO="b4408e7cbf82439f4666b539f190a7626c4e91b4";function Rn(i,t=!0){if(typeof i!="object")throw new RangeError("must be the document root");const e=Reflect.get(i,xp);if(e===void 0||e==null||t&&MO(i)!=="_root")throw new RangeError("must be the document root");return e}function WS(i){return Reflect.get(i,ch)}function MO(i){return typeof i!="object"||i===null?null:Reflect.get(i,uh)}function Ap(i){return!!Reflect.get(i,W0)}var kO=function(i,t){var e={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&t.indexOf(s)<0&&(e[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(e[s[r]]=i[s[r]]);return e};function Y0(i){return typeof i=="object"?i:{actor:i}}function ys(i){const t=Y0(i),e=!!t.freeze,s=t.patchCallback,r=t.actor,l=ci.create({actor:r});return l.enableFreeze(!!t.freeze),QS(l),l.materialize("/",void 0,{handle:l,heads:void 0,freeze:e,patchCallback:s})}function DO(i,t){const e=Rn(i),s=e.handle;return e.handle.materialize("/",t,Object.assign(Object.assign({},e),{handle:s,heads:t}))}function jd(i,t){const e=Rn(i),s=e.heads,r=Y0(t),l=e.handle.fork(r.actor,s);l.updateDiffCursor();const{heads:u}=e,f=kO(e,["heads"]);return f.patchCallback=r.patchCallback,l.applyPatches(i,Object.assign(Object.assign({},f),{handle:l}))}function Cx(i,t){return hh(ys(t),"from",{},e=>Object.assign(e,i)).newDoc}function OO(i,t,e){if(typeof t=="function")return hh(i,"change",{},t).newDoc;if(typeof e=="function")return typeof t=="string"&&(t={message:t}),hh(i,"change",t,e).newDoc;throw RangeError("Invalid args for change")}function RO(i,t,e,s){if(typeof e=="function")return hh(i,"changeAt",{},e,t);if(typeof s=="function")return typeof e=="string"&&(e={message:e}),hh(i,"changeAt",e,s,t);throw RangeError("Invalid args for changeAt")}function Rh(i,t,e,s){if(e==null)return i;const r=Rn(i),l=Object.assign(Object.assign({},r),{heads:void 0}),{value:u,patches:f}=r.handle.applyAndReturnPatches(i,l);if(f.length>0){s?.(f,{before:i,after:u,source:t});const p=Rn(u);p.mostRecentPatch={before:Rn(i).heads,after:p.handle.getHeads(),patches:f}}return r.heads=e,u}function hh(i,t,e,s,r){if(typeof s!="function")throw new RangeError("invalid change function");const l=Rn(i);if(i===void 0||l===void 0)throw new RangeError("must be the document root");if(l.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Ap(i))throw new RangeError("Calls to Automerge.change cannot be nested");let u=l.handle.getHeads();r&&NO(r,u)&&(r=void 0),r&&(l.handle.isolate(r),u=r),"time"in e||(e.time=Math.floor(Date.now()/1e3));try{l.heads=u;const f=SO(l.handle);if(s(f),l.handle.pendingOps()===0)return l.heads=void 0,r&&l.handle.integrate(),{newDoc:i,newHeads:null};{const p=l.handle.commit(e.message,e.time);return l.handle.integrate(),{newDoc:Rh(i,t,u,e.patchCallback||l.patchCallback),newHeads:p!=null?[p]:null}}}catch(f){throw l.heads=void 0,l.handle.rollback(),f}}function Lx(i,t){t===void 0&&(t={}),typeof t=="string"&&(t={message:t}),"time"in t||(t.time=Math.floor(Date.now()/1e3));const e=Rn(i);if(e.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Ap(i))throw new RangeError("Calls to Automerge.change cannot be nested");const s=e.handle.getHeads();return e.handle.emptyChange(t.message,t.time),Rh(i,"emptyChange",s)}function IO(i,t){const e=Y0(t);if(e.patchCallback)return X0(ys(e),i);const s=e.actor,r=e.patchCallback,l=e.unchecked||!1,u=e.allowMissingChanges||!1,f=e.convertImmutableStringsToText||!1,p=ci.load(i,{actor:s,unchecked:l,allowMissingDeps:u,convertImmutableStringsToText:f});return p.enableFreeze(!!e.freeze),QS(p),p.materialize("/",void 0,{handle:p,heads:void 0,patchCallback:r})}function X0(i,t,e){e||(e={});const s=Rn(i);if(s.heads)throw new RangeError("Attempting to change an out of date document - set at: "+WS(i));if(Ap(i))throw new RangeError("Calls to Automerge.change cannot be nested");const r=s.handle.getHeads();return s.handle.loadIncremental(t),Rh(i,"loadIncremental",r,e.patchCallback||s.patchCallback)}function YS(i){return Rn(i).handle.save()}function Mx(i,t){const e=Rn(i);if(e.heads)throw new RangeError("Attempting to change an out of date document - set at: "+WS(i));const s=e.handle.getHeads(),r=Rn(t),l=e.handle.getChangesAdded(r.handle);return e.handle.applyChanges(l),Rh(i,"merge",s,e.patchCallback)}function og(i,t,e){kx(t,"before heads"),kx(e,"after heads");const s=Rn(i);return s.mostRecentPatch&&Pg(s.mostRecentPatch.before,t)&&Pg(s.mostRecentPatch.after,e)?s.mostRecentPatch.patches:s.handle.diff(t,e)}function NO(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;return!0}function kx(i,t){if(!Array.isArray(i))throw new Error(`invalid ${t}: must be an array`)}function Pg(i,t){if(!Dx(i)||!Dx(t))return i===t;const e=Object.keys(i).sort(),s=Object.keys(t).sort();if(e.length!==s.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==s[r]||!Pg(i[e[r]],t[s[r]]))return!1;return!0}function XS(i){const t=ci.importSyncState(i),e=ci.encodeSyncState(t);return t.free(),e}function FS(i){const t=ci.decodeSyncState(i),e=ci.exportSyncState(t);return t.free(),e}function zO(i,t){const e=Rn(i),s=ci.importSyncState(t),r=e.handle.generateSyncMessage(s);return[ci.exportSyncState(s),r]}function PO(i,t,e,s){const r=ci.importSyncState(t);s||(s={});const l=Rn(i);if(l.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Ap(i))throw new RangeError("Calls to Automerge.change cannot be nested");const u=l.handle.getHeads();l.handle.receiveSyncMessage(r,e);const f=ci.exportSyncState(r);return[Rh(i,"receiveSyncMessage",u,s.patchCallback||l.patchCallback),f,null]}function BO(){return ci.exportSyncState(ci.initSyncState())}function UO(i){return ci.decodeSyncMessage(i)}function mr(i){const t=Rn(i);return t.heads||t.handle.getHeads()}function Dx(i){return typeof i=="object"&&i!==null}function HO(i,t){return Rn(i).handle.saveSince(t)}function QS(i){i.registerDatatype("counter",t=>new zg(t),t=>{if(t instanceof zg)return t.value}),i.registerDatatype("str",t=>new jS(t),t=>{if(GS(t))return t.val})}function VO(i){return Rn(i).handle.topoHistoryTraversal()}function qO(i,t){return Rn(i).handle.getDecodedChangeByHash(t)}function F0(i){var t,e,s,r,l,u;const p=Rn(i).handle.stats(),m=jO();return Object.assign(Object.assign({},p),{cargoPackageName:(e=(t=m.wasm)===null||t===void 0?void 0:t.cargoPackageName)!==null&&e!==void 0?e:"unknown",cargoPackageVersion:(r=(s=m.wasm)===null||s===void 0?void 0:s.cargoPackageVersion)!==null&&r!==void 0?r:"unknown",rustcVersion:(u=(l=m.wasm)===null||l===void 0?void 0:l.rustcVersion)!==null&&u!==void 0?u:"unknown"})}function jO(){let i=null;try{i=ci.wasmReleaseInfo()}catch{}return{js:{gitHead:LO},wasm:i}}var cd={exports:{}},ag,Ox;function GO(){if(Ox)return ag;Ox=1;var i=1e3,t=i*60,e=t*60,s=e*24,r=s*7,l=s*365.25;ag=function(v,y){y=y||{};var w=typeof v;if(w==="string"&&v.length>0)return u(v);if(w==="number"&&isFinite(v))return y.long?p(v):f(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function u(v){if(v=String(v),!(v.length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(y){var w=parseFloat(y[1]),T=(y[2]||"ms").toLowerCase();switch(T){case"years":case"year":case"yrs":case"yr":case"y":return w*l;case"weeks":case"week":case"w":return w*r;case"days":case"day":case"d":return w*s;case"hours":case"hour":case"hrs":case"hr":case"h":return w*e;case"minutes":case"minute":case"mins":case"min":case"m":return w*t;case"seconds":case"second":case"secs":case"sec":case"s":return w*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}function f(v){var y=Math.abs(v);return y>=s?Math.round(v/s)+"d":y>=e?Math.round(v/e)+"h":y>=t?Math.round(v/t)+"m":y>=i?Math.round(v/i)+"s":v+"ms"}function p(v){var y=Math.abs(v);return y>=s?m(v,y,s,"day"):y>=e?m(v,y,e,"hour"):y>=t?m(v,y,t,"minute"):y>=i?m(v,y,i,"second"):v+" ms"}function m(v,y,w,T){var x=y>=w*1.5;return Math.round(v/w)+" "+T+(x?"s":"")}return ag}var lg,Rx;function ZO(){if(Rx)return lg;Rx=1;function i(t){s.debug=s,s.default=s,s.coerce=m,s.disable=f,s.enable=l,s.enabled=p,s.humanize=GO(),s.destroy=v,Object.keys(t).forEach(y=>{s[y]=t[y]}),s.names=[],s.skips=[],s.formatters={};function e(y){let w=0;for(let T=0;T<y.length;T++)w=(w<<5)-w+y.charCodeAt(T),w|=0;return s.colors[Math.abs(w)%s.colors.length]}s.selectColor=e;function s(y){let w,T=null,x,A;function E(...I){if(!E.enabled)return;const B=E,D=Number(new Date),F=D-(w||D);B.diff=F,B.prev=w,B.curr=D,w=D,I[0]=s.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let R=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(Z,q)=>{if(Z==="%%")return"%";R++;const V=s.formatters[q];if(typeof V=="function"){const W=I[R];Z=V.call(B,W),I.splice(R,1),R--}return Z}),s.formatArgs.call(B,I),(B.log||s.log).apply(B,I)}return E.namespace=y,E.useColors=s.useColors(),E.color=s.selectColor(y),E.extend=r,E.destroy=s.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>T!==null?T:(x!==s.namespaces&&(x=s.namespaces,A=s.enabled(y)),A),set:I=>{T=I}}),typeof s.init=="function"&&s.init(E),E}function r(y,w){const T=s(this.namespace+(typeof w>"u"?":":w)+y);return T.log=this.log,T}function l(y){s.save(y),s.namespaces=y,s.names=[],s.skips=[];const w=(typeof y=="string"?y:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const T of w)T[0]==="-"?s.skips.push(T.slice(1)):s.names.push(T)}function u(y,w){let T=0,x=0,A=-1,E=0;for(;T<y.length;)if(x<w.length&&(w[x]===y[T]||w[x]==="*"))w[x]==="*"?(A=x,E=T,x++):(T++,x++);else if(A!==-1)x=A+1,E++,T=E;else return!1;for(;x<w.length&&w[x]==="*";)x++;return x===w.length}function f(){const y=[...s.names,...s.skips.map(w=>"-"+w)].join(",");return s.enable(""),y}function p(y){for(const w of s.skips)if(u(y,w))return!1;for(const w of s.names)if(u(y,w))return!0;return!1}function m(y){return y instanceof Error?y.stack||y.message:y}function v(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return lg=i,lg}var Ix;function WO(){return Ix||(Ix=1,(function(i,t){var e={};t.formatArgs=r,t.save=l,t.load=u,t.useColors=s,t.storage=f(),t.destroy=(()=>{let m=!1;return()=>{m||(m=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let m;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(m=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(m[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!this.useColors)return;const v="color: "+this.color;m.splice(1,0,v,"color: inherit");let y=0,w=0;m[0].replace(/%[a-zA-Z%]/g,T=>{T!=="%%"&&(y++,T==="%c"&&(w=y))}),m.splice(w,0,v)}t.log=console.debug||console.log||(()=>{});function l(m){try{m?t.storage.setItem("debug",m):t.storage.removeItem("debug")}catch{}}function u(){let m;try{m=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=e.DEBUG),m}function f(){try{return localStorage}catch{}}i.exports=ZO()(t);const{formatters:p}=i.exports;p.j=function(m){try{return JSON.stringify(m)}catch(v){return"[UnexpectedJSONParseError]: "+v.message}}})(cd,cd.exports)),cd.exports}var YO=WO();const fo=gh(YO);var cg={exports:{}},Nx;function XO(){return Nx||(Nx=1,(function(i){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(p,m,v){this.fn=p,this.context=m,this.once=v||!1}function l(p,m,v,y,w){if(typeof v!="function")throw new TypeError("The listener must be a function");var T=new r(v,y||p,w),x=e?e+m:m;return p._events[x]?p._events[x].fn?p._events[x]=[p._events[x],T]:p._events[x].push(T):(p._events[x]=T,p._eventsCount++),p}function u(p,m){--p._eventsCount===0?p._events=new s:delete p._events[m]}function f(){this._events=new s,this._eventsCount=0}f.prototype.eventNames=function(){var m=[],v,y;if(this._eventsCount===0)return m;for(y in v=this._events)t.call(v,y)&&m.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(v)):m},f.prototype.listeners=function(m){var v=e?e+m:m,y=this._events[v];if(!y)return[];if(y.fn)return[y.fn];for(var w=0,T=y.length,x=new Array(T);w<T;w++)x[w]=y[w].fn;return x},f.prototype.listenerCount=function(m){var v=e?e+m:m,y=this._events[v];return y?y.fn?1:y.length:0},f.prototype.emit=function(m,v,y,w,T,x){var A=e?e+m:m;if(!this._events[A])return!1;var E=this._events[A],I=arguments.length,B,D;if(E.fn){switch(E.once&&this.removeListener(m,E.fn,void 0,!0),I){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,v),!0;case 3:return E.fn.call(E.context,v,y),!0;case 4:return E.fn.call(E.context,v,y,w),!0;case 5:return E.fn.call(E.context,v,y,w,T),!0;case 6:return E.fn.call(E.context,v,y,w,T,x),!0}for(D=1,B=new Array(I-1);D<I;D++)B[D-1]=arguments[D];E.fn.apply(E.context,B)}else{var F=E.length,R;for(D=0;D<F;D++)switch(E[D].once&&this.removeListener(m,E[D].fn,void 0,!0),I){case 1:E[D].fn.call(E[D].context);break;case 2:E[D].fn.call(E[D].context,v);break;case 3:E[D].fn.call(E[D].context,v,y);break;case 4:E[D].fn.call(E[D].context,v,y,w);break;default:if(!B)for(R=1,B=new Array(I-1);R<I;R++)B[R-1]=arguments[R];E[D].fn.apply(E[D].context,B)}}return!0},f.prototype.on=function(m,v,y){return l(this,m,v,y,!1)},f.prototype.once=function(m,v,y){return l(this,m,v,y,!0)},f.prototype.removeListener=function(m,v,y,w){var T=e?e+m:m;if(!this._events[T])return this;if(!v)return u(this,T),this;var x=this._events[T];if(x.fn)x.fn===v&&(!w||x.once)&&(!y||x.context===y)&&u(this,T);else{for(var A=0,E=[],I=x.length;A<I;A++)(x[A].fn!==v||w&&!x[A].once||y&&x[A].context!==y)&&E.push(x[A]);E.length?this._events[T]=E.length===1?E[0]:E:u(this,T)}return this},f.prototype.removeAllListeners=function(m){var v;return m?(v=e?e+m:m,this._events[v]&&u(this,v)):(this._events=new s,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,i.exports=f})(cg)),cg.exports}var FO=XO();const vl=gh(FO);function QO(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function KO(){const i=QO();if(i.__xstate__)return i.__xstate__}const JO=i=>{if(typeof window>"u")return;const t=KO();t&&t.register(i)};class zx{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const KS=".",$O="",JS="",t3="#",e3="*",$S="xstate.init",n3="xstate.error",Bg="xstate.stop";function i3(i,t){return{type:`xstate.after.${i}.${t}`}}function Ug(i,t){return{type:`xstate.done.state.${i}`,output:t}}function s3(i,t){return{type:`xstate.done.actor.${i}`,output:t,actorId:i}}function tT(i,t){return{type:`xstate.error.actor.${i}`,error:t,actorId:i}}function eT(i){return{type:$S,input:i}}function ur(i){setTimeout(()=>{throw i})}const r3=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nT(i,t){const e=Px(i),s=Px(t);return typeof s=="string"?typeof e=="string"?s===e:!1:typeof e=="string"?e in s:Object.keys(e).every(r=>r in s?nT(e[r],s[r]):!1)}function Q0(i){if(sT(i))return i;const t=[];let e="";for(let s=0;s<i.length;s++){switch(i.charCodeAt(s)){case 92:e+=i[s+1],s++;continue;case 46:t.push(e),e="";continue}e+=i[s]}return t.push(e),t}function Px(i){if(B3(i))return i.value;if(typeof i!="string")return i;const t=Q0(i);return o3(t)}function o3(i){if(i.length===1)return i[0];const t={};let e=t;for(let s=0;s<i.length-1;s++)if(s===i.length-2)e[i[s]]=i[s+1];else{const r=e;e={},r[i[s]]=e}return t}function Bx(i,t){const e={},s=Object.keys(i);for(let r=0;r<s.length;r++){const l=s[r];e[l]=t(i[l],l,i,r)}return e}function iT(i){return sT(i)?i:[i]}function oo(i){return i===void 0?[]:iT(i)}function Hg(i,t,e,s){return typeof i=="function"?i({context:t,event:e,self:s}):i}function sT(i){return Array.isArray(i)}function a3(i){return i.type.startsWith("xstate.error.actor")}function gc(i){return iT(i).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function rT(i){if(!(i===void 0||i===$O))return oo(i)}function Vg(i,t,e){const s=typeof i=="object",r=s?i:void 0;return{next:(s?i.next:i)?.bind(r),error:(s?i.error:t)?.bind(r),complete:(s?i.complete:e)?.bind(r)}}function Ux(i,t){return`${t}.${i}`}function K0(i,t){const e=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!e)return i.implementations.actors[t];const[,s,r]=e,u=i.getStateNodeById(r).config.invoke;return(Array.isArray(u)?u[s]:u).src}function oT(i,t){if(t===i||t===e3)return!0;if(!t.endsWith(".*"))return!1;const e=t.split("."),s=i.split(".");for(let r=0;r<e.length;r++){const l=e[r],u=s[r];if(l==="*")return r===e.length-1;if(l!==u)return!1}return!0}function Hx(i,t){return`${i.sessionId}.${t}`}let l3=0;function c3(i,t){const e=new Map,s=new Map,r=new WeakMap,l=new Set,u={},{clock:f,logger:p}=t,m={schedule:(w,T,x,A,E=Math.random().toString(36).slice(2))=>{const I={source:w,target:T,event:x,delay:A,id:E,startedAt:Date.now()},B=Hx(w,E);y._snapshot._scheduledEvents[B]=I;const D=f.setTimeout(()=>{delete u[B],delete y._snapshot._scheduledEvents[B],y._relay(w,T,x)},A);u[B]=D},cancel:(w,T)=>{const x=Hx(w,T),A=u[x];delete u[x],delete y._snapshot._scheduledEvents[x],A!==void 0&&f.clearTimeout(A)},cancelAll:w=>{for(const T in y._snapshot._scheduledEvents){const x=y._snapshot._scheduledEvents[T];x.source===w&&m.cancel(w,x.id)}}},v=w=>{if(!l.size)return;const T={...w,rootId:i.sessionId};l.forEach(x=>x.next?.(T))},y={_snapshot:{_scheduledEvents:(t?.snapshot&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${l3++}`,_register:(w,T)=>(e.set(w,T),w),_unregister:w=>{e.delete(w.sessionId);const T=r.get(w);T!==void 0&&(s.delete(T),r.delete(w))},get:w=>s.get(w),getAll:()=>Object.fromEntries(s.entries()),_set:(w,T)=>{const x=s.get(w);if(x&&x!==T)throw new Error(`Actor with system ID '${w}' already exists.`);s.set(w,T),r.set(T,w)},inspect:w=>{const T=Vg(w);return l.add(T),{unsubscribe(){l.delete(T)}}},_sendInspectionEvent:v,_relay:(w,T,x)=>{y._sendInspectionEvent({type:"@xstate.event",sourceRef:w,actorRef:T,event:x}),T._send(x)},scheduler:m,getSnapshot:()=>({_scheduledEvents:{...y._snapshot._scheduledEvents}}),start:()=>{const w=y._snapshot._scheduledEvents;y._snapshot._scheduledEvents={};for(const T in w){const{source:x,target:A,event:E,delay:I,id:B}=w[T];m.schedule(x,A,E,I,B)}},_clock:f,_logger:p};return y}let ug=!1;const J0=1;let Ti=(function(i){return i[i.NotStarted=0]="NotStarted",i[i.Running=1]="Running",i[i.Stopped=2]="Stopped",i})({});const u3={clock:{setTimeout:(i,t)=>setTimeout(i,t),clearTimeout:i=>clearTimeout(i)},logger:console.log.bind(console),devTools:!1};class h3{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new zx(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Ti.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this.systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const s={...u3,...e},{clock:r,logger:l,parent:u,syncSnapshot:f,id:p,systemId:m,inspect:v}=s;this.system=u?u.system:c3(this,{clock:r,logger:l}),v&&!u&&this.system.inspect(Vg(v)),this.sessionId=this.system._bookId(),this.id=p??this.sessionId,this.logger=e?.logger??this.system._logger,this.clock=e?.clock??this.system._clock,this._parent=u,this._syncSnapshot=f,this.options=s,this.src=s.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:y=>{this._deferred.push(y)},system:this.system,stopChild:y=>{if(y._parent!==this)throw new Error(`Cannot stop child actor ${y.id} of ${this.id} because it is not a child`);y._stop()},emit:y=>{const w=this.eventListeners.get(y.type),T=this.eventListeners.get("*");if(!w&&!T)return;const x=[...w?w.values():[],...T?T.values():[]];for(const A of x)try{A(y)}catch(E){ur(E)}},actionExecutor:y=>{const w=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:y.type,params:y.params}}),!y.exec)return;const T=ug;try{ug=!0,y.exec(y.info,y.params)}finally{ug=T}};this._processingStatus===Ti.Running?w():this._deferred.push(w)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),m&&(this.systemId=m,this.system._set(m,this)),this._initState(e?.snapshot??e?.state),m&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(e){this._snapshot={status:"error",output:void 0,error:e}}}update(t,e){this._snapshot=t;let s;for(;s=this._deferred.shift();)try{s()}catch(r){this._deferred.length=0,this._snapshot={...t,status:"error",error:r}}switch(this._snapshot.status){case"active":for(const r of this.observers)try{r.next?.(t)}catch(l){ur(l)}break;case"done":for(const r of this.observers)try{r.next?.(t)}catch(l){ur(l)}this._stopProcedure(),this._complete(),this._doneEvent=s3(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,s){const r=Vg(t,e,s);if(this._processingStatus!==Ti.Stopped)this.observers.add(r);else switch(this._snapshot.status){case"done":try{r.complete?.()}catch(l){ur(l)}break;case"error":{const l=this._snapshot.error;if(!r.error)ur(l);else try{r.error(l)}catch(u){ur(u)}break}}return{unsubscribe:()=>{this.observers.delete(r)}}}on(t,e){let s=this.eventListeners.get(t);s||(s=new Set,this.eventListeners.set(t,s));const r=e.bind(void 0);return s.add(r),{unsubscribe:()=>{s.delete(r)}}}start(){if(this._processingStatus===Ti.Running)return this;this._syncSnapshot&&this.subscribe({next:s=>{s.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:s})},error:()=>{}}),this.system._register(this.sessionId,this),this.systemId&&this.system._set(this.systemId,this),this._processingStatus=Ti.Running;const t=eT(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(s){return this._snapshot={...this._snapshot,status:"error",error:s},this._error(s),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,s;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(r){s={err:r}}if(s){const{err:r}=s;this._snapshot={...this._snapshot,status:"error",error:r},this._error(r);return}this.update(e,t),t.type===Bg&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Ti.Stopped?this:(this.mailbox.clear(),this._processingStatus===Ti.NotStarted?(this._processingStatus=Ti.Stopped,this):(this.mailbox.enqueue({type:Bg}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const t of this.observers)try{t.complete?.()}catch(e){ur(e)}this.observers.clear(),this.eventListeners.clear()}_reportError(t){if(!this.observers.size){this._parent||ur(t),this.eventListeners.clear();return}let e=!1;for(const s of this.observers){const r=s.error;e||=!r;try{r?.(t)}catch(l){ur(l)}}this.observers.clear(),this.eventListeners.clear(),e&&ur(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,tT(this.id,t))}_stopProcedure(){return this._processingStatus!==Ti.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new zx(this._process.bind(this)),this._processingStatus=Ti.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==Ti.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:JO)(this)}toJSON(){return{xstate$$type:J0,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[r3](){return this}getSnapshot(){return this._snapshot}}function fh(i,...[t]){return new h3(i,t)}function f3(i,t,e,s,{sendId:r}){const l=typeof r=="function"?r(e,s):r;return[t,{sendId:l},void 0]}function d3(i,t){i.defer(()=>{i.system.scheduler.cancel(i.self,t.sendId)})}function $0(i){function t(e,s){}return t.type="xstate.cancel",t.sendId=i,t.resolve=f3,t.execute=d3,t}function p3(i,t,e,s,{id:r,systemId:l,src:u,input:f,syncSnapshot:p}){const m=typeof u=="string"?K0(t.machine,u):u,v=typeof r=="function"?r(e):r;let y,w;return m&&(w=typeof f=="function"?f({context:t.context,event:e.event,self:i.self}):f,y=fh(m,{id:v,src:u,parent:i.self,syncSnapshot:p,systemId:l,input:w})),[dl(t,{children:{...t.children,[v]:y}}),{id:r,systemId:l,actorRef:y,src:u,input:w},void 0]}function m3(i,{actorRef:t}){t&&i.defer(()=>{t._processingStatus!==Ti.Stopped&&t.start()})}function ty(...[i,{id:t,systemId:e,input:s,syncSnapshot:r=!1}={}]){function l(u,f){}return l.type="xstate.spawnChild",l.id=t,l.systemId=e,l.src=i,l.input=s,l.syncSnapshot=r,l.resolve=p3,l.execute=m3,l}function _3(i,t,e,s,{actorRef:r}){const l=typeof r=="function"?r(e,s):r,u=typeof l=="string"?t.children[l]:l;let f=t.children;return u&&(f={...f},delete f[u.id]),[dl(t,{children:f}),u,void 0]}function aT(i,t){const e=t.getSnapshot();if(e&&"children"in e)for(const s of Object.values(e.children))aT(i,s);i.system._unregister(t)}function g3(i,t){if(t){if(aT(i,t),t._processingStatus!==Ti.Running){i.stopChild(t);return}i.defer(()=>{i.stopChild(t)})}}function Ep(i){function t(e,s){}return t.type="xstate.stopChild",t.actorRef=i,t.resolve=_3,t.execute=g3,t}function Cp(i,t,e,s){const{machine:r}=s,l=typeof i=="function",u=l?i:r.implementations.guards[typeof i=="string"?i:i.type];if(!l&&!u)throw new Error(`Guard '${typeof i=="string"?i:i.type}' is not implemented.'.`);if(typeof u!="function")return Cp(u,t,e,s);const f={context:t,event:e},p=l||typeof i=="string"?void 0:"params"in i?typeof i.params=="function"?i.params({context:t,event:e}):i.params:void 0;return"check"in u?u.check(s,f,u):u(f,p)}function ey(i){return i.type==="atomic"||i.type==="final"}function Lc(i){return Object.values(i.states).filter(t=>t.type!=="history")}function Ih(i,t){const e=[];if(t===i)return e;let s=i.parent;for(;s&&s!==t;)e.push(s),s=s.parent;return e}function Gd(i){const t=new Set(i),e=cT(t);for(const s of t)if(s.type==="compound"&&(!e.get(s)||!e.get(s).length))Vx(s).forEach(r=>t.add(r));else if(s.type==="parallel"){for(const r of Lc(s))if(r.type!=="history"&&!t.has(r)){const l=Vx(r);for(const u of l)t.add(u)}}for(const s of t){let r=s.parent;for(;r;)t.add(r),r=r.parent}return t}function lT(i,t){const e=t.get(i);if(!e)return{};if(i.type==="compound"){const r=e[0];if(r){if(ey(r))return r.key}else return{}}const s={};for(const r of e)s[r.key]=lT(r,t);return s}function cT(i){const t=new Map;for(const e of i)t.has(e)||t.set(e,[]),e.parent&&(t.has(e.parent)||t.set(e.parent,[]),t.get(e.parent).push(e));return t}function uT(i,t){const e=Gd(t);return lT(i,cT(e))}function ny(i,t){return t.type==="compound"?Lc(t).some(e=>e.type==="final"&&i.has(e)):t.type==="parallel"?Lc(t).every(e=>ny(i,e)):t.type==="final"}const Lp=i=>i[0]===t3;function y3(i,t){return i.transitions.get(t)||[...i.transitions.keys()].filter(s=>oT(t,s)).sort((s,r)=>r.length-s.length).flatMap(s=>i.transitions.get(s))}function v3(i){const t=i.config.after;if(!t)return[];const e=r=>{const l=i3(r,i.id),u=l.type;return i.entry.push(ry(l,{id:u,delay:r})),i.exit.push($0(u)),u};return Object.keys(t).flatMap(r=>{const l=t[r],u=typeof l=="string"?{target:l}:l,f=Number.isNaN(+r)?r:+r,p=e(f);return oo(u).map(m=>({...m,event:p,delay:f}))}).map(r=>{const{delay:l}=r;return{...nl(i,r.event,r),delay:l}})}function nl(i,t,e){const s=rT(e.target),r=e.reenter??!1,l=x3(i,s),u={...e,actions:oo(e.actions),guard:e.guard,target:l,source:i,reenter:r,eventType:t,toJSON:()=>({...u,source:`#${i.id}`,target:l?l.map(f=>`#${f.id}`):void 0})};return u}function b3(i){const t=new Map;if(i.config.on)for(const e of Object.keys(i.config.on)){if(e===JS)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const s=i.config.on[e];t.set(e,gc(s).map(r=>nl(i,e,r)))}if(i.config.onDone){const e=`xstate.done.state.${i.id}`;t.set(e,gc(i.config.onDone).map(s=>nl(i,e,s)))}for(const e of i.invoke){if(e.onDone){const s=`xstate.done.actor.${e.id}`;t.set(s,gc(e.onDone).map(r=>nl(i,s,r)))}if(e.onError){const s=`xstate.error.actor.${e.id}`;t.set(s,gc(e.onError).map(r=>nl(i,s,r)))}if(e.onSnapshot){const s=`xstate.snapshot.${e.id}`;t.set(s,gc(e.onSnapshot).map(r=>nl(i,s,r)))}}for(const e of i.after){let s=t.get(e.eventType);s||(s=[],t.set(e.eventType,s)),s.push(e)}return t}function w3(i,t){const e=typeof t=="string"?i.states[t]:t?i.states[t.target]:void 0;if(!e&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${i.id}`);const s={source:i,actions:!t||typeof t=="string"?[]:oo(t.actions),eventType:null,reenter:!1,target:e?[e]:[],toJSON:()=>({...s,source:`#${i.id}`,target:e?[`#${e.id}`]:[]})};return s}function x3(i,t){if(t!==void 0)return t.map(e=>{if(typeof e!="string")return e;if(Lp(e))return i.machine.getStateNodeById(e);const s=e[0]===KS;if(s&&!i.parent)return Zd(i,e.slice(1));const r=s?i.key+e:e;if(i.parent)try{return Zd(i.parent,r)}catch(l){throw new Error(`Invalid transition definition for state node '${i.id}':
${l.message}`)}else throw new Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}function hT(i){const t=rT(i.config.target);return t?{target:t.map(e=>typeof e=="string"?Zd(i.parent,e):e)}:i.parent.initial}function ol(i){return i.type==="history"}function Vx(i){const t=fT(i);for(const e of t)for(const s of Ih(e,i))t.add(s);return t}function fT(i){const t=new Set;function e(s){if(!t.has(s)){if(t.add(s),s.type==="compound")e(s.initial.target[0]);else if(s.type==="parallel")for(const r of Lc(s))e(r)}}return e(i),t}function Mc(i,t){if(Lp(t))return i.machine.getStateNodeById(t);if(!i.states)throw new Error(`Unable to retrieve child state '${t}' from '${i.id}'; no child states exist.`);const e=i.states[t];if(!e)throw new Error(`Child state '${t}' does not exist on '${i.id}'`);return e}function Zd(i,t){if(typeof t=="string"&&Lp(t))try{return i.machine.getStateNodeById(t)}catch{}const e=Q0(t).slice();let s=i;for(;e.length;){const r=e.shift();if(!r.length)break;s=Mc(s,r)}return s}function Wd(i,t){if(typeof t=="string"){const r=i.states[t];if(!r)throw new Error(`State '${t}' does not exist on '${i.id}'`);return[i,r]}const e=Object.keys(t),s=e.map(r=>Mc(i,r)).filter(Boolean);return[i.machine.root,i].concat(s,e.reduce((r,l)=>{const u=Mc(i,l);if(!u)return r;const f=Wd(u,t[l]);return r.concat(f)},[]))}function S3(i,t,e,s){const l=Mc(i,t).next(e,s);return!l||!l.length?i.next(e,s):l}function T3(i,t,e,s){const r=Object.keys(t),l=Mc(i,r[0]),u=iy(l,t[r[0]],e,s);return!u||!u.length?i.next(e,s):u}function A3(i,t,e,s){const r=[];for(const l of Object.keys(t)){const u=t[l];if(!u)continue;const f=Mc(i,l),p=iy(f,u,e,s);p&&r.push(...p)}return r.length?r:i.next(e,s)}function iy(i,t,e,s){return typeof t=="string"?S3(i,t,e,s):Object.keys(t).length===1?T3(i,t,e,s):A3(i,t,e,s)}function E3(i){return Object.keys(i.states).map(t=>i.states[t]).filter(t=>t.type==="history")}function fa(i,t){let e=i;for(;e.parent&&e.parent!==t;)e=e.parent;return e.parent===t}function C3(i,t){const e=new Set(i),s=new Set(t);for(const r of e)if(s.has(r))return!0;for(const r of s)if(e.has(r))return!0;return!1}function dT(i,t,e){const s=new Set;for(const r of i){let l=!1;const u=new Set;for(const f of s)if(C3(qg([r],t,e),qg([f],t,e)))if(fa(r.source,f.source))u.add(f);else{l=!0;break}if(!l){for(const f of u)s.delete(f);s.add(r)}}return Array.from(s)}function L3(i){const[t,...e]=i;for(const s of Ih(t,void 0))if(e.every(r=>fa(r,s)))return s}function sy(i,t){if(!i.target)return[];const e=new Set;for(const s of i.target)if(ol(s))if(t[s.id])for(const r of t[s.id])e.add(r);else for(const r of sy(hT(s),t))e.add(r);else e.add(s);return[...e]}function pT(i,t){const e=sy(i,t);if(!e)return;if(!i.reenter&&e.every(r=>r===i.source||fa(r,i.source)))return i.source;const s=L3(e.concat(i.source));if(s)return s;if(!i.reenter)return i.source.machine.root}function qg(i,t,e){const s=new Set;for(const r of i)if(r.target?.length){const l=pT(r,e);r.reenter&&r.source===l&&s.add(l);for(const u of t)fa(u,l)&&s.add(u)}return[...s]}function M3(i,t){if(i.length!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0}function k3(i,t,e,s,r){return jg([{target:[...fT(i)],source:i,reenter:!0,actions:[],eventType:null,toJSON:null}],t,e,s,!0,r)}function jg(i,t,e,s,r,l){const u=[];if(!i.length)return[t,u];const f=e.actionExecutor;e.actionExecutor=p=>{u.push(p),f(p)};try{const p=new Set(t._nodes);let m=t.historyValue;const v=dT(i,p,m);let y=t;r||([y,m]=I3(y,s,e,v,p,m,l,e.actionExecutor)),y=kc(y,s,e,v.flatMap(T=>T.actions),l,void 0),y=O3(y,s,e,v,p,l,m,r);const w=[...p];y.status==="done"&&(y=kc(y,s,e,w.sort((T,x)=>x.order-T.order).flatMap(T=>T.exit),l,void 0));try{return m===t.historyValue&&M3(t._nodes,p)?[y,u]:[dl(y,{_nodes:w,historyValue:m}),u]}catch(T){throw T}}finally{e.actionExecutor=f}}function D3(i,t,e,s,r){if(s.output===void 0)return;const l=Ug(r.id,r.output!==void 0&&r.parent?Hg(r.output,i.context,t,e.self):void 0);return Hg(s.output,i.context,l,e.self)}function O3(i,t,e,s,r,l,u,f){let p=i;const m=new Set,v=new Set;R3(s,u,v,m),f&&v.add(i.machine.root);const y=new Set;for(const w of[...m].sort((T,x)=>T.order-x.order)){r.add(w);const T=[];T.push(...w.entry);for(const x of w.invoke)T.push(ty(x.src,{...x,syncSnapshot:!!x.onSnapshot}));if(v.has(w)){const x=w.initial.actions;T.push(...x)}if(p=kc(p,t,e,T,l,w.invoke.map(x=>x.id)),w.type==="final"){const x=w.parent;let A=x?.type==="parallel"?x:x?.parent,E=A||w;for(x?.type==="compound"&&l.push(Ug(x.id,w.output!==void 0?Hg(w.output,p.context,t,e.self):void 0));A?.type==="parallel"&&!y.has(A)&&ny(r,A);)y.add(A),l.push(Ug(A.id)),E=A,A=A.parent;if(A)continue;p=dl(p,{status:"done",output:D3(p,t,e,p.machine.root,E)})}}return p}function R3(i,t,e,s){for(const r of i){const l=pT(r,t);for(const f of r.target||[])!ol(f)&&(r.source!==f||r.source!==l||r.reenter)&&(s.add(f),e.add(f)),wc(f,t,e,s);const u=sy(r,t);for(const f of u){const p=Ih(f,l);l?.type==="parallel"&&p.push(l),mT(s,t,e,p,!r.source.parent&&r.reenter?void 0:l)}}}function wc(i,t,e,s){if(ol(i))if(t[i.id]){const r=t[i.id];for(const l of r)s.add(l),wc(l,t,e,s);for(const l of r)hg(l,i.parent,s,t,e)}else{const r=hT(i);for(const l of r.target)s.add(l),r===i.parent?.initial&&e.add(i.parent),wc(l,t,e,s);for(const l of r.target)hg(l,i.parent,s,t,e)}else if(i.type==="compound"){const[r]=i.initial.target;ol(r)||(s.add(r),e.add(r)),wc(r,t,e,s),hg(r,i,s,t,e)}else if(i.type==="parallel")for(const r of Lc(i).filter(l=>!ol(l)))[...s].some(l=>fa(l,r))||(ol(r)||(s.add(r),e.add(r)),wc(r,t,e,s))}function mT(i,t,e,s,r){for(const l of s)if((!r||fa(l,r))&&i.add(l),l.type==="parallel")for(const u of Lc(l).filter(f=>!ol(f)))[...i].some(f=>fa(f,u))||(i.add(u),wc(u,t,e,i))}function hg(i,t,e,s,r){mT(e,s,r,Ih(i,t))}function I3(i,t,e,s,r,l,u,f){let p=i;const m=qg(s,r,l);m.sort((y,w)=>w.order-y.order);let v;for(const y of m)for(const w of E3(y)){let T;w.history==="deep"?T=x=>ey(x)&&fa(x,y):T=x=>x.parent===y,v??={...l},v[w.id]=Array.from(r).filter(T)}for(const y of m)p=kc(p,t,e,[...y.exit,...y.invoke.map(w=>Ep(w.id))],u,void 0),r.delete(y);return[p,v||l]}function N3(i,t){return i.implementations.actions[t]}function _T(i,t,e,s,r,l){const{machine:u}=i;let f=i;for(const p of s){const m=typeof p=="function",v=m?p:N3(u,typeof p=="string"?p:p.type),y={context:f.context,event:t,self:e.self,system:e.system},w=m||typeof p=="string"?void 0:"params"in p?typeof p.params=="function"?p.params({context:f.context,event:t}):p.params:void 0;if(!v||!("resolve"in v)){e.actionExecutor({type:typeof p=="string"?p:typeof p=="object"?p.type:p.name||"(anonymous)",info:y,params:w,exec:v});continue}const T=v,[x,A,E]=T.resolve(e,f,y,w,v,r);f=x,"retryResolve"in T&&l?.push([T,A]),"execute"in T&&e.actionExecutor({type:T.type,info:y,params:A,exec:T.execute.bind(null,e,A)}),E&&(f=_T(f,t,e,E,r,l))}return f}function kc(i,t,e,s,r,l){const u=l?[]:void 0,f=_T(i,t,e,s,{internalQueue:r,deferredActorIds:l},u);return u?.forEach(([p,m])=>{p.retryResolve(e,f,m)}),f}function fg(i,t,e,s){let r=i;const l=[];function u(m,v,y){e.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:e.self,event:v,snapshot:m[0],_transitions:y}),l.push(m)}if(t.type===Bg)return r=dl(qx(r,t,e),{status:"stopped"}),u([r,[]],t,[]),{snapshot:r,microsteps:l};let f=t;if(f.type!==$S){const m=f,v=a3(m),y=jx(m,r);if(v&&!y.length)return r=dl(i,{status:"error",error:m.error}),u([r,[]],m,[]),{snapshot:r,microsteps:l};const w=jg(y,i,e,f,!1,s);r=w[0],u(w,m,y)}let p=!0;for(;r.status==="active";){let m=p?z3(r,f):[];const v=m.length?r:void 0;if(!m.length){if(!s.length)break;f=s.shift(),m=jx(f,r)}const y=jg(m,r,e,f,!1,s);r=y[0],p=r!==v,u(y,f,m)}return r.status!=="active"&&qx(r,f,e),{snapshot:r,microsteps:l}}function qx(i,t,e){return kc(i,t,e,Object.values(i.children).map(s=>Ep(s)),[],void 0)}function jx(i,t){return t.machine.getTransitionData(t,i)}function z3(i,t){const e=new Set,s=i._nodes.filter(ey);for(const r of s)t:for(const l of[r].concat(Ih(r,void 0)))if(l.always){for(const u of l.always)if(u.guard===void 0||Cp(u.guard,i.context,t,i)){e.add(u);break t}}return dT(Array.from(e),new Set(i._nodes),i.historyValue)}function P3(i,t){const e=Gd(Wd(i,t));return uT(i,[...e])}function B3(i){return!!i&&typeof i=="object"&&"machine"in i&&"value"in i}const U3=function(t){return nT(t,this.value)},H3=function(t){return this.tags.has(t)},V3=function(t){const e=this.machine.getTransitionData(this,t);return!!e?.length&&e.some(s=>s.target!==void 0||s.actions.length)},q3=function(){const{_nodes:t,tags:e,machine:s,getMeta:r,toJSON:l,can:u,hasTag:f,matches:p,...m}=this;return{...m,tags:Array.from(e)}},j3=function(){return this._nodes.reduce((t,e)=>(e.meta!==void 0&&(t[e.id]=e.meta),t),{})};function xd(i,t){return{status:i.status,output:i.output,error:i.error,machine:t,context:i.context,_nodes:i._nodes,value:uT(t.root,i._nodes),tags:new Set(i._nodes.flatMap(e=>e.tags)),children:i.children,historyValue:i.historyValue||{},matches:U3,hasTag:H3,can:V3,getMeta:j3,toJSON:q3}}function dl(i,t={}){return xd({...i,...t},i.machine)}function G3(i){if(typeof i!="object"||i===null)return{};const t={};for(const e in i){const s=i[e];Array.isArray(s)&&(t[e]=s.map(r=>({id:r.id})))}return t}function Z3(i,t){const{_nodes:e,tags:s,machine:r,children:l,context:u,can:f,hasTag:p,matches:m,getMeta:v,toJSON:y,...w}=i,T={};for(const A in l){const E=l[A];T[A]={snapshot:E.getPersistedSnapshot(t),src:E.src,systemId:E.systemId,syncSnapshot:E._syncSnapshot}}return{...w,context:gT(u),children:T,historyValue:G3(w.historyValue)}}function gT(i){let t;for(const e in i){const s=i[e];if(s&&typeof s=="object")if("sessionId"in s&&"send"in s&&"ref"in s)t??=Array.isArray(i)?i.slice():{...i},t[e]={xstate$$type:J0,id:s.id};else{const r=gT(s);r!==s&&(t??=Array.isArray(i)?i.slice():{...i},t[e]=r)}}return t??i}function W3(i,t,e,s,{event:r,id:l,delay:u},{internalQueue:f}){const p=t.machine.implementations.delays;if(typeof r=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${r}" }) instead`);const m=typeof r=="function"?r(e,s):r;let v;if(typeof u=="string"){const y=p&&p[u];v=typeof y=="function"?y(e,s):y}else v=typeof u=="function"?u(e,s):u;return typeof v!="number"&&f.push(m),[t,{event:m,id:l,delay:v},void 0]}function Y3(i,t){const{event:e,delay:s,id:r}=t;if(typeof s=="number"){i.defer(()=>{const l=i.self;i.system.scheduler.schedule(l,l,e,s,r)});return}}function ry(i,t){function e(s,r){}return e.type="xstate.raise",e.event=i,e.id=t?.id,e.delay=t?.delay,e.resolve=W3,e.execute=Y3,e}function X3(i,{machine:t,context:e},s,r){const l=(u,f)=>{if(typeof u=="string"){const p=K0(t,u);if(!p)throw new Error(`Actor logic '${u}' not implemented in machine '${t.id}'`);const m=fh(p,{id:f?.id,parent:i.self,syncSnapshot:f?.syncSnapshot,input:typeof f?.input=="function"?f.input({context:e,event:s,self:i.self}):f?.input,src:u,systemId:f?.systemId});return r[m.id]=m,m}else return fh(u,{id:f?.id,parent:i.self,syncSnapshot:f?.syncSnapshot,input:f?.input,src:u,systemId:f?.systemId})};return(u,f)=>{const p=l(u,f);return r[p.id]=p,i.defer(()=>{p._processingStatus!==Ti.Stopped&&p.start()}),p}}function F3(i,t,e,s,{assignment:r}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const l={},u={context:t.context,event:e.event,spawn:X3(i,t,e.event,l),self:i.self,system:i.system};let f={};if(typeof r=="function")f=r(u,s);else for(const m of Object.keys(r)){const v=r[m];f[m]=typeof v=="function"?v(u,s):v}const p=Object.assign({},t.context,f);return[dl(t,{context:p,children:Object.keys(l).length?{...t.children,...l}:t.children}),void 0,void 0]}function al(i){function t(e,s){}return t.type="xstate.assign",t.assignment=i,t.resolve=F3,t}const Gx=new WeakMap;function uc(i,t,e){let s=Gx.get(i);return s?t in s||(s[t]=e()):(s={[t]:e()},Gx.set(i,s)),s[t]}const Q3={},Zu=i=>typeof i=="string"?{type:i}:typeof i=="function"?"resolve"in i?{type:i.type}:{type:i.name}:i;class Yd{constructor(t,e){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=e._parent,this.key=e._key,this.machine=e._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(KS),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Bx(this.config.states,(s,r)=>new Yd(s,{_parent:this,_key:r,_machine:this.machine})):Q3,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=oo(this.config.entry).slice(),this.exit=oo(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=oo(t.tags).slice()}_initialize(){this.transitions=b3(this),this.config.always&&(this.always=gc(this.config.always).map(t=>nl(this,JS,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Zu),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Zu),eventType:null})}:void 0,history:this.history,states:Bx(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(Zu)})),entry:this.entry.map(Zu),exit:this.exit.map(Zu),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return uc(this,"invoke",()=>oo(this.config.invoke).map((t,e)=>{const{src:s,systemId:r}=t,l=t.id??Ux(this.id,e),u=typeof s=="string"?s:`xstate.invoke.${Ux(this.id,e)}`;return{...t,src:u,id:l,systemId:r,toJSON(){const{onDone:f,onError:p,...m}=t;return{...m,type:"xstate.invoke",src:u,id:l}}}}))}get on(){return uc(this,"on",()=>[...this.transitions].flatMap(([e,s])=>s.map(r=>[e,r])).reduce((e,[s,r])=>(e[s]=e[s]||[],e[s].push(r),e),{}))}get after(){return uc(this,"delayedTransitions",()=>v3(this))}get initial(){return uc(this,"initial",()=>w3(this,this.config.initial))}next(t,e){const s=e.type,r=[];let l;const u=uc(this,`candidates-${s}`,()=>y3(this,s));for(const f of u){const{guard:p}=f,m=t.context;let v=!1;try{v=!p||Cp(p,m,e,t)}catch(y){const w=typeof p=="string"?p:typeof p=="object"?p.type:void 0;throw new Error(`Unable to evaluate guard ${w?`'${w}' `:""}in transition for event '${s}' in state node '${this.id}':
${y.message}`)}if(v){r.push(...f.actions),l=f;break}}return l?[l]:void 0}get events(){return uc(this,"events",()=>{const{states:t}=this,e=new Set(this.ownEvents);if(t)for(const s of Object.keys(t)){const r=t[s];if(r.states)for(const l of r.events)e.add(`${l}`)}return Array.from(e)})}get ownEvents(){const t=Object.keys(Object.fromEntries(this.transitions)),e=new Set(t.filter(s=>this.transitions.get(s).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const K3="#";class oy{constructor(t,e){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:e?.actors??{},actions:e?.actions??{},delays:e?.delays??{},guards:e?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Yd(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:e,guards:s,actors:r,delays:l}=this.implementations;return new oy(this.config,{actions:{...e,...t.actions},guards:{...s,...t.guards},actors:{...r,...t.actors},delays:{...l,...t.delays}})}resolveState(t){const e=P3(this.root,t.value),s=Gd(Wd(this.root,e));return xd({_nodes:[...s],context:t.context||{},children:{},status:ny(s,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,e,s){return fg(t,e,s,[]).snapshot}microstep(t,e,s){return fg(t,e,s,[]).microsteps.map(([r])=>r)}getTransitionData(t,e){return iy(this.root,t.value,t,e)||[]}_getPreInitialState(t,e,s){const{context:r}=this.config,l=xd({context:typeof r!="function"&&r?r:{},_nodes:[this.root],children:{},status:"active"},this);return typeof r=="function"?kc(l,e,t,[al(({spawn:f,event:p,self:m})=>r({spawn:f,input:p.input,self:m}))],s,void 0):l}getInitialSnapshot(t,e){const s=eT(e),r=[],l=this._getPreInitialState(t,s,r),[u]=k3(this.root,l,t,s,r),{snapshot:f}=fg(u,s,t,r);return f}start(t){Object.values(t.children).forEach(e=>{e.getSnapshot().status==="active"&&e.start()})}getStateNodeById(t){const e=Q0(t),s=e.slice(1),r=Lp(e[0])?e[0].slice(K3.length):e[0],l=this.idMap.get(r);if(!l)throw new Error(`Child state node '#${r}' does not exist on machine '${this.id}'`);return Zd(l,s)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,e){return Z3(t,e)}restoreSnapshot(t,e){const s={},r=t.children;Object.keys(r).forEach(y=>{const w=r[y],T=w.snapshot,x=w.src,A=typeof x=="string"?K0(this,x):x;if(!A)return;const E=fh(A,{id:y,parent:e.self,syncSnapshot:w.syncSnapshot,snapshot:T,src:x,systemId:w.systemId});s[y]=E});function l(y,w){if(w instanceof Yd)return w;try{return y.machine.getStateNodeById(w.id)}catch{}}function u(y,w){if(!w||typeof w!="object")return{};const T={};for(const x in w){const A=w[x];for(const E of A){const I=l(y,E);I&&(T[x]??=[],T[x].push(I))}}return T}const f=u(this.root,t.historyValue),p=xd({...t,children:s,_nodes:Array.from(Gd(Wd(this.root,t.value))),historyValue:f},this),m=new Set;function v(y,w){if(!m.has(y)){m.add(y);for(const T in y){const x=y[T];if(x&&typeof x=="object"){if("xstate$$type"in x&&x.xstate$$type===J0){y[T]=w[x.id];continue}v(x,w)}}}}return v(p.context,s),p}}function J3(i,t,e,s,{event:r}){const l=typeof r=="function"?r(e,s):r;return[t,{event:l},void 0]}function $3(i,{event:t}){i.defer(()=>i.emit(t))}function yT(i){function t(e,s){}return t.type="xstate.emit",t.event=i,t.resolve=J3,t.execute=$3,t}let Gg=(function(i){return i.Parent="#_parent",i.Internal="#_internal",i})({});function t4(i,t,e,s,{to:r,event:l,id:u,delay:f},p){const m=t.machine.implementations.delays;if(typeof l=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${l}" }) instead`);const v=typeof l=="function"?l(e,s):l;let y;if(typeof f=="string"){const x=m&&m[f];y=typeof x=="function"?x(e,s):x}else y=typeof f=="function"?f(e,s):f;const w=typeof r=="function"?r(e,s):r;let T;if(typeof w=="string"){if(w===Gg.Parent?T=i.self._parent:w===Gg.Internal?T=i.self:w.startsWith("#_")?T=t.children[w.slice(2)]:T=p.deferredActorIds?.includes(w)?w:t.children[w],!T)throw new Error(`Unable to send event to actor '${w}' from machine '${t.machine.id}'.`)}else T=w||i.self;return[t,{to:T,targetId:typeof w=="string"?w:void 0,event:v,id:u,delay:y},void 0]}function e4(i,t,e){typeof e.to=="string"&&(e.to=t.children[e.to])}function n4(i,t){i.defer(()=>{const{to:e,event:s,delay:r,id:l}=t;if(typeof r=="number"){i.system.scheduler.schedule(i.self,e,s,r,l);return}i.system._relay(i.self,e,s.type===n3?tT(i.self.id,s.data):s)})}function ay(i,t,e){function s(r,l){}return s.type="xstate.sendTo",s.to=i,s.event=t,s.id=e?.id,s.delay=e?.delay,s.resolve=t4,s.retryResolve=e4,s.execute=n4,s}function i4(i,t){return ay(Gg.Parent,i,t)}function s4(i,t,e,s,{collect:r}){const l=[],u=function(p){l.push(p)};return u.assign=(...f)=>{l.push(al(...f))},u.cancel=(...f)=>{l.push($0(...f))},u.raise=(...f)=>{l.push(ry(...f))},u.sendTo=(...f)=>{l.push(ay(...f))},u.sendParent=(...f)=>{l.push(i4(...f))},u.spawnChild=(...f)=>{l.push(ty(...f))},u.stopChild=(...f)=>{l.push(Ep(...f))},u.emit=(...f)=>{l.push(yT(...f))},r({context:e.context,event:e.event,enqueue:u,check:f=>Cp(f,t.context,e.event,t),self:i.self,system:i.system},s),[t,void 0,l]}function r4(i){function t(e,s){}return t.type="xstate.enqueueActions",t.collect=i,t.resolve=s4,t}function o4(i,t,e,s,{value:r,label:l}){return[t,{value:typeof r=="function"?r(e,s):r,label:l},void 0]}function a4({logger:i},{value:t,label:e}){e?i(e,t):i(t)}function l4(i=({context:e,event:s})=>({context:e,event:s}),t){function e(s,r){}return e.type="xstate.log",e.value=i,e.label=t,e.resolve=o4,e.execute=a4,e}function c4(i,t){const e=oo(t);if(!e.some(r=>oT(i.type,r))){const r=e.length===1?`type matching "${e[0]}"`:`one of types matching "${e.join('", "')}"`;throw new Error(`Expected event ${JSON.stringify(i)} to have ${r}`)}}function u4(i,t){return new oy(i,t)}function vT({schemas:i,actors:t,actions:e,guards:s,delays:r}){return{assign:al,sendTo:ay,raise:ry,log:l4,cancel:$0,stopChild:Ep,enqueueActions:r4,emit:yT,spawnChild:ty,createStateConfig:l=>l,createAction:l=>l,createMachine:l=>u4({...l,schemas:i},{actors:t,actions:e,guards:s,delays:r}),extend:l=>vT({schemas:i,actors:t,actions:{...e,...l.actions},guards:{...s,...l.guards},delays:{...r,...l.delays}})}}const h4={timeout:1/0};function f4(i,t,e){const s={...h4,...e};return new Promise((r,l)=>{const{signal:u}=s;if(u?.aborted){l(u.reason);return}let f=!1;const p=s.timeout===1/0?void 0:setTimeout(()=>{m(),l(new Error(`Timeout of ${s.timeout} ms exceeded`))},s.timeout),m=()=>{clearTimeout(p),f=!0,w?.unsubscribe(),y&&u.removeEventListener("abort",y)};function v(T){t(T)&&(m(),r(T))}let y,w;v(i.getSnapshot()),!f&&(u&&(y=()=>{m(),l(u.reason)},u.addEventListener("abort",y)),w=i.subscribe({next:v,error:T=>{m(),l(T)},complete:()=>{m(),l(new Error("Actor terminated without satisfying predicate"))}}),f&&w.unsubscribe())})}let ud;const d4=new Uint8Array(16);function p4(){if(!ud&&(ud=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ud))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ud(d4)}const m4=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function bT(i){return typeof i=="string"&&m4.test(i)}const Xn=[];for(let i=0;i<256;++i)Xn.push((i+256).toString(16).slice(1));function _4(i,t=0){return Xn[i[t+0]]+Xn[i[t+1]]+Xn[i[t+2]]+Xn[i[t+3]]+"-"+Xn[i[t+4]]+Xn[i[t+5]]+"-"+Xn[i[t+6]]+Xn[i[t+7]]+"-"+Xn[i[t+8]]+Xn[i[t+9]]+"-"+Xn[i[t+10]]+Xn[i[t+11]]+Xn[i[t+12]]+Xn[i[t+13]]+Xn[i[t+14]]+Xn[i[t+15]]}function g4(i){if(!bT(i))throw TypeError("Invalid UUID");let t;const e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}const y4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zx={randomUUID:y4};function wT(i,t,e){if(Zx.randomUUID&&!t&&!i)return Zx.randomUUID();i=i||{};const s=i.random||(i.rng||p4)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=s[r];return t}return _4(s)}var Ps={},Ge={},ei={},dg={},Wu={},Wx;function v4(){return Wx||(Wx=1,Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.crypto=void 0,Wu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Wu}var Yx;function xT(){return Yx||(Yx=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.wrapXOFConstructorWithOpts=i.wrapConstructorWithOpts=i.wrapConstructor=i.Hash=i.nextTick=i.swap32IfBE=i.byteSwapIfBE=i.swap8IfBE=i.isLE=void 0,i.isBytes=e,i.anumber=s,i.abytes=r,i.ahash=l,i.aexists=u,i.aoutput=f,i.u8=p,i.u32=m,i.clean=v,i.createView=y,i.rotr=w,i.rotl=T,i.byteSwap=x,i.byteSwap32=A,i.bytesToHex=B,i.hexToBytes=R,i.asyncLoop=Z,i.utf8ToBytes=q,i.bytesToUtf8=V,i.toBytes=W,i.kdfInputToBytes=X,i.concatBytes=tt,i.checkOpts=P,i.createHasher=$,i.createOptHasher=U,i.createXOFer=Y,i.randomBytes=et;const t=v4();function e(k){return k instanceof Uint8Array||ArrayBuffer.isView(k)&&k.constructor.name==="Uint8Array"}function s(k){if(!Number.isSafeInteger(k)||k<0)throw new Error("positive integer expected, got "+k)}function r(k,...j){if(!e(k))throw new Error("Uint8Array expected");if(j.length>0&&!j.includes(k.length))throw new Error("Uint8Array expected of length "+j+", got length="+k.length)}function l(k){if(typeof k!="function"||typeof k.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");s(k.outputLen),s(k.blockLen)}function u(k,j=!0){if(k.destroyed)throw new Error("Hash instance has been destroyed");if(j&&k.finished)throw new Error("Hash#digest() has already been called")}function f(k,j){r(k);const O=j.outputLen;if(k.length<O)throw new Error("digestInto() expects output buffer of length at least "+O)}function p(k){return new Uint8Array(k.buffer,k.byteOffset,k.byteLength)}function m(k){return new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4))}function v(...k){for(let j=0;j<k.length;j++)k[j].fill(0)}function y(k){return new DataView(k.buffer,k.byteOffset,k.byteLength)}function w(k,j){return k<<32-j|k>>>j}function T(k,j){return k<<j|k>>>32-j>>>0}i.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function x(k){return k<<24&4278190080|k<<8&16711680|k>>>8&65280|k>>>24&255}i.swap8IfBE=i.isLE?k=>k:k=>x(k),i.byteSwapIfBE=i.swap8IfBE;function A(k){for(let j=0;j<k.length;j++)k[j]=x(k[j]);return k}i.swap32IfBE=i.isLE?k=>k:A;const E=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",I=Array.from({length:256},(k,j)=>j.toString(16).padStart(2,"0"));function B(k){if(r(k),E)return k.toHex();let j="";for(let O=0;O<k.length;O++)j+=I[k[O]];return j}const D={_0:48,_9:57,A:65,F:70,a:97,f:102};function F(k){if(k>=D._0&&k<=D._9)return k-D._0;if(k>=D.A&&k<=D.F)return k-(D.A-10);if(k>=D.a&&k<=D.f)return k-(D.a-10)}function R(k){if(typeof k!="string")throw new Error("hex string expected, got "+typeof k);if(E)return Uint8Array.fromHex(k);const j=k.length,O=j/2;if(j%2)throw new Error("hex string expected, got unpadded hex of length "+j);const G=new Uint8Array(O);for(let ot=0,dt=0;ot<O;ot++,dt+=2){const gt=F(k.charCodeAt(dt)),mt=F(k.charCodeAt(dt+1));if(gt===void 0||mt===void 0){const Mt=k[dt]+k[dt+1];throw new Error('hex string expected, got non-hex character "'+Mt+'" at index '+dt)}G[ot]=gt*16+mt}return G}const H=async()=>{};i.nextTick=H;async function Z(k,j,O){let G=Date.now();for(let ot=0;ot<k;ot++){O(ot);const dt=Date.now()-G;dt>=0&&dt<j||(await(0,i.nextTick)(),G+=dt)}}function q(k){if(typeof k!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(k))}function V(k){return new TextDecoder().decode(k)}function W(k){return typeof k=="string"&&(k=q(k)),r(k),k}function X(k){return typeof k=="string"&&(k=q(k)),r(k),k}function tt(...k){let j=0;for(let G=0;G<k.length;G++){const ot=k[G];r(ot),j+=ot.length}const O=new Uint8Array(j);for(let G=0,ot=0;G<k.length;G++){const dt=k[G];O.set(dt,ot),ot+=dt.length}return O}function P(k,j){if(j!==void 0&&{}.toString.call(j)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(k,j)}class J{}i.Hash=J;function $(k){const j=G=>k().update(W(G)).digest(),O=k();return j.outputLen=O.outputLen,j.blockLen=O.blockLen,j.create=()=>k(),j}function U(k){const j=(G,ot)=>k(ot).update(W(G)).digest(),O=k({});return j.outputLen=O.outputLen,j.blockLen=O.blockLen,j.create=G=>k(G),j}function Y(k){const j=(G,ot)=>k(ot).update(W(G)).digest(),O=k({});return j.outputLen=O.outputLen,j.blockLen=O.blockLen,j.create=G=>k(G),j}i.wrapConstructor=$,i.wrapConstructorWithOpts=U,i.wrapXOFConstructorWithOpts=Y;function et(k=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(k));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(k));throw new Error("crypto.getRandomValues must be defined")}})(dg)),dg}var Xx;function b4(){if(Xx)return ei;Xx=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.SHA512_IV=ei.SHA384_IV=ei.SHA224_IV=ei.SHA256_IV=ei.HashMD=void 0,ei.setBigUint64=t,ei.Chi=e,ei.Maj=s;const i=xT();function t(l,u,f,p){if(typeof l.setBigUint64=="function")return l.setBigUint64(u,f,p);const m=BigInt(32),v=BigInt(4294967295),y=Number(f>>m&v),w=Number(f&v),T=p?4:0,x=p?0:4;l.setUint32(u+T,y,p),l.setUint32(u+x,w,p)}function e(l,u,f){return l&u^~l&f}function s(l,u,f){return l&u^l&f^u&f}class r extends i.Hash{constructor(u,f,p,m){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=u,this.outputLen=f,this.padOffset=p,this.isLE=m,this.buffer=new Uint8Array(u),this.view=(0,i.createView)(this.buffer)}update(u){(0,i.aexists)(this),u=(0,i.toBytes)(u),(0,i.abytes)(u);const{view:f,buffer:p,blockLen:m}=this,v=u.length;for(let y=0;y<v;){const w=Math.min(m-this.pos,v-y);if(w===m){const T=(0,i.createView)(u);for(;m<=v-y;y+=m)this.process(T,y);continue}p.set(u.subarray(y,y+w),this.pos),this.pos+=w,y+=w,this.pos===m&&(this.process(f,0),this.pos=0)}return this.length+=u.length,this.roundClean(),this}digestInto(u){(0,i.aexists)(this),(0,i.aoutput)(u,this),this.finished=!0;const{buffer:f,view:p,blockLen:m,isLE:v}=this;let{pos:y}=this;f[y++]=128,(0,i.clean)(this.buffer.subarray(y)),this.padOffset>m-y&&(this.process(p,0),y=0);for(let E=y;E<m;E++)f[E]=0;t(p,m-8,BigInt(this.length*8),v),this.process(p,0);const w=(0,i.createView)(u),T=this.outputLen;if(T%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const x=T/4,A=this.get();if(x>A.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<x;E++)w.setUint32(4*E,A[E],v)}digest(){const{buffer:u,outputLen:f}=this;this.digestInto(u);const p=u.slice(0,f);return this.destroy(),p}_cloneInto(u){u||(u=new this.constructor),u.set(...this.get());const{blockLen:f,buffer:p,length:m,finished:v,destroyed:y,pos:w}=this;return u.destroyed=y,u.finished=v,u.length=m,u.pos=w,m%f&&u.buffer.set(p),u}clone(){return this._cloneInto()}}return ei.HashMD=r,ei.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ei.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),ei.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ei.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ei}var Jt={},Fx;function w4(){if(Fx)return Jt;Fx=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.toBig=Jt.shrSL=Jt.shrSH=Jt.rotrSL=Jt.rotrSH=Jt.rotrBL=Jt.rotrBH=Jt.rotr32L=Jt.rotr32H=Jt.rotlSL=Jt.rotlSH=Jt.rotlBL=Jt.rotlBH=Jt.add5L=Jt.add5H=Jt.add4L=Jt.add4H=Jt.add3L=Jt.add3H=void 0,Jt.add=I,Jt.fromBig=e,Jt.split=s;const i=BigInt(2**32-1),t=BigInt(32);function e(V,W=!1){return W?{h:Number(V&i),l:Number(V>>t&i)}:{h:Number(V>>t&i)|0,l:Number(V&i)|0}}function s(V,W=!1){const X=V.length;let tt=new Uint32Array(X),P=new Uint32Array(X);for(let J=0;J<X;J++){const{h:$,l:U}=e(V[J],W);[tt[J],P[J]]=[$,U]}return[tt,P]}const r=(V,W)=>BigInt(V>>>0)<<t|BigInt(W>>>0);Jt.toBig=r;const l=(V,W,X)=>V>>>X;Jt.shrSH=l;const u=(V,W,X)=>V<<32-X|W>>>X;Jt.shrSL=u;const f=(V,W,X)=>V>>>X|W<<32-X;Jt.rotrSH=f;const p=(V,W,X)=>V<<32-X|W>>>X;Jt.rotrSL=p;const m=(V,W,X)=>V<<64-X|W>>>X-32;Jt.rotrBH=m;const v=(V,W,X)=>V>>>X-32|W<<64-X;Jt.rotrBL=v;const y=(V,W)=>W;Jt.rotr32H=y;const w=(V,W)=>V;Jt.rotr32L=w;const T=(V,W,X)=>V<<X|W>>>32-X;Jt.rotlSH=T;const x=(V,W,X)=>W<<X|V>>>32-X;Jt.rotlSL=x;const A=(V,W,X)=>W<<X-32|V>>>64-X;Jt.rotlBH=A;const E=(V,W,X)=>V<<X-32|W>>>64-X;Jt.rotlBL=E;function I(V,W,X,tt){const P=(W>>>0)+(tt>>>0);return{h:V+X+(P/2**32|0)|0,l:P|0}}const B=(V,W,X)=>(V>>>0)+(W>>>0)+(X>>>0);Jt.add3L=B;const D=(V,W,X,tt)=>W+X+tt+(V/2**32|0)|0;Jt.add3H=D;const F=(V,W,X,tt)=>(V>>>0)+(W>>>0)+(X>>>0)+(tt>>>0);Jt.add4L=F;const R=(V,W,X,tt,P)=>W+X+tt+P+(V/2**32|0)|0;Jt.add4H=R;const H=(V,W,X,tt,P)=>(V>>>0)+(W>>>0)+(X>>>0)+(tt>>>0)+(P>>>0);Jt.add5L=H;const Z=(V,W,X,tt,P,J)=>W+X+tt+P+J+(V/2**32|0)|0;Jt.add5H=Z;const q={fromBig:e,split:s,toBig:r,shrSH:l,shrSL:u,rotrSH:f,rotrSL:p,rotrBH:m,rotrBL:v,rotr32H:y,rotr32L:w,rotlSH:T,rotlSL:x,rotlBH:A,rotlBL:E,add:I,add3L:B,add3H:D,add4L:F,add4H:R,add5H:Z,add5L:H};return Jt.default=q,Jt}var Qx;function x4(){if(Qx)return Ge;Qx=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.sha512_224=Ge.sha512_256=Ge.sha384=Ge.sha512=Ge.sha224=Ge.sha256=Ge.SHA512_256=Ge.SHA512_224=Ge.SHA384=Ge.SHA512=Ge.SHA224=Ge.SHA256=void 0;const i=b4(),t=w4(),e=xT(),s=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array(64);class l extends i.HashMD{constructor(D=32){super(64,D,8,!1),this.A=i.SHA256_IV[0]|0,this.B=i.SHA256_IV[1]|0,this.C=i.SHA256_IV[2]|0,this.D=i.SHA256_IV[3]|0,this.E=i.SHA256_IV[4]|0,this.F=i.SHA256_IV[5]|0,this.G=i.SHA256_IV[6]|0,this.H=i.SHA256_IV[7]|0}get(){const{A:D,B:F,C:R,D:H,E:Z,F:q,G:V,H:W}=this;return[D,F,R,H,Z,q,V,W]}set(D,F,R,H,Z,q,V,W){this.A=D|0,this.B=F|0,this.C=R|0,this.D=H|0,this.E=Z|0,this.F=q|0,this.G=V|0,this.H=W|0}process(D,F){for(let P=0;P<16;P++,F+=4)r[P]=D.getUint32(F,!1);for(let P=16;P<64;P++){const J=r[P-15],$=r[P-2],U=(0,e.rotr)(J,7)^(0,e.rotr)(J,18)^J>>>3,Y=(0,e.rotr)($,17)^(0,e.rotr)($,19)^$>>>10;r[P]=Y+r[P-7]+U+r[P-16]|0}let{A:R,B:H,C:Z,D:q,E:V,F:W,G:X,H:tt}=this;for(let P=0;P<64;P++){const J=(0,e.rotr)(V,6)^(0,e.rotr)(V,11)^(0,e.rotr)(V,25),$=tt+J+(0,i.Chi)(V,W,X)+s[P]+r[P]|0,Y=((0,e.rotr)(R,2)^(0,e.rotr)(R,13)^(0,e.rotr)(R,22))+(0,i.Maj)(R,H,Z)|0;tt=X,X=W,W=V,V=q+$|0,q=Z,Z=H,H=R,R=$+Y|0}R=R+this.A|0,H=H+this.B|0,Z=Z+this.C|0,q=q+this.D|0,V=V+this.E|0,W=W+this.F|0,X=X+this.G|0,tt=tt+this.H|0,this.set(R,H,Z,q,V,W,X,tt)}roundClean(){(0,e.clean)(r)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,e.clean)(this.buffer)}}Ge.SHA256=l;class u extends l{constructor(){super(28),this.A=i.SHA224_IV[0]|0,this.B=i.SHA224_IV[1]|0,this.C=i.SHA224_IV[2]|0,this.D=i.SHA224_IV[3]|0,this.E=i.SHA224_IV[4]|0,this.F=i.SHA224_IV[5]|0,this.G=i.SHA224_IV[6]|0,this.H=i.SHA224_IV[7]|0}}Ge.SHA224=u;const f=t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(B=>BigInt(B))),p=f[0],m=f[1],v=new Uint32Array(80),y=new Uint32Array(80);class w extends i.HashMD{constructor(D=64){super(128,D,16,!1),this.Ah=i.SHA512_IV[0]|0,this.Al=i.SHA512_IV[1]|0,this.Bh=i.SHA512_IV[2]|0,this.Bl=i.SHA512_IV[3]|0,this.Ch=i.SHA512_IV[4]|0,this.Cl=i.SHA512_IV[5]|0,this.Dh=i.SHA512_IV[6]|0,this.Dl=i.SHA512_IV[7]|0,this.Eh=i.SHA512_IV[8]|0,this.El=i.SHA512_IV[9]|0,this.Fh=i.SHA512_IV[10]|0,this.Fl=i.SHA512_IV[11]|0,this.Gh=i.SHA512_IV[12]|0,this.Gl=i.SHA512_IV[13]|0,this.Hh=i.SHA512_IV[14]|0,this.Hl=i.SHA512_IV[15]|0}get(){const{Ah:D,Al:F,Bh:R,Bl:H,Ch:Z,Cl:q,Dh:V,Dl:W,Eh:X,El:tt,Fh:P,Fl:J,Gh:$,Gl:U,Hh:Y,Hl:et}=this;return[D,F,R,H,Z,q,V,W,X,tt,P,J,$,U,Y,et]}set(D,F,R,H,Z,q,V,W,X,tt,P,J,$,U,Y,et){this.Ah=D|0,this.Al=F|0,this.Bh=R|0,this.Bl=H|0,this.Ch=Z|0,this.Cl=q|0,this.Dh=V|0,this.Dl=W|0,this.Eh=X|0,this.El=tt|0,this.Fh=P|0,this.Fl=J|0,this.Gh=$|0,this.Gl=U|0,this.Hh=Y|0,this.Hl=et|0}process(D,F){for(let O=0;O<16;O++,F+=4)v[O]=D.getUint32(F),y[O]=D.getUint32(F+=4);for(let O=16;O<80;O++){const G=v[O-15]|0,ot=y[O-15]|0,dt=t.rotrSH(G,ot,1)^t.rotrSH(G,ot,8)^t.shrSH(G,ot,7),gt=t.rotrSL(G,ot,1)^t.rotrSL(G,ot,8)^t.shrSL(G,ot,7),mt=v[O-2]|0,Mt=y[O-2]|0,Et=t.rotrSH(mt,Mt,19)^t.rotrBH(mt,Mt,61)^t.shrSH(mt,Mt,6),ne=t.rotrSL(mt,Mt,19)^t.rotrBL(mt,Mt,61)^t.shrSL(mt,Mt,6),Se=t.add4L(gt,ne,y[O-7],y[O-16]),We=t.add4H(Se,dt,Et,v[O-7],v[O-16]);v[O]=We|0,y[O]=Se|0}let{Ah:R,Al:H,Bh:Z,Bl:q,Ch:V,Cl:W,Dh:X,Dl:tt,Eh:P,El:J,Fh:$,Fl:U,Gh:Y,Gl:et,Hh:k,Hl:j}=this;for(let O=0;O<80;O++){const G=t.rotrSH(P,J,14)^t.rotrSH(P,J,18)^t.rotrBH(P,J,41),ot=t.rotrSL(P,J,14)^t.rotrSL(P,J,18)^t.rotrBL(P,J,41),dt=P&$^~P&Y,gt=J&U^~J&et,mt=t.add5L(j,ot,gt,m[O],y[O]),Mt=t.add5H(mt,k,G,dt,p[O],v[O]),Et=mt|0,ne=t.rotrSH(R,H,28)^t.rotrBH(R,H,34)^t.rotrBH(R,H,39),Se=t.rotrSL(R,H,28)^t.rotrBL(R,H,34)^t.rotrBL(R,H,39),We=R&Z^R&V^Z&V,Xe=H&q^H&W^q&W;k=Y|0,j=et|0,Y=$|0,et=U|0,$=P|0,U=J|0,{h:P,l:J}=t.add(X|0,tt|0,Mt|0,Et|0),X=V|0,tt=W|0,V=Z|0,W=q|0,Z=R|0,q=H|0;const Nn=t.add3L(Et,Se,Xe);R=t.add3H(Nn,Mt,ne,We),H=Nn|0}({h:R,l:H}=t.add(this.Ah|0,this.Al|0,R|0,H|0)),{h:Z,l:q}=t.add(this.Bh|0,this.Bl|0,Z|0,q|0),{h:V,l:W}=t.add(this.Ch|0,this.Cl|0,V|0,W|0),{h:X,l:tt}=t.add(this.Dh|0,this.Dl|0,X|0,tt|0),{h:P,l:J}=t.add(this.Eh|0,this.El|0,P|0,J|0),{h:$,l:U}=t.add(this.Fh|0,this.Fl|0,$|0,U|0),{h:Y,l:et}=t.add(this.Gh|0,this.Gl|0,Y|0,et|0),{h:k,l:j}=t.add(this.Hh|0,this.Hl|0,k|0,j|0),this.set(R,H,Z,q,V,W,X,tt,P,J,$,U,Y,et,k,j)}roundClean(){(0,e.clean)(v,y)}destroy(){(0,e.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Ge.SHA512=w;class T extends w{constructor(){super(48),this.Ah=i.SHA384_IV[0]|0,this.Al=i.SHA384_IV[1]|0,this.Bh=i.SHA384_IV[2]|0,this.Bl=i.SHA384_IV[3]|0,this.Ch=i.SHA384_IV[4]|0,this.Cl=i.SHA384_IV[5]|0,this.Dh=i.SHA384_IV[6]|0,this.Dl=i.SHA384_IV[7]|0,this.Eh=i.SHA384_IV[8]|0,this.El=i.SHA384_IV[9]|0,this.Fh=i.SHA384_IV[10]|0,this.Fl=i.SHA384_IV[11]|0,this.Gh=i.SHA384_IV[12]|0,this.Gl=i.SHA384_IV[13]|0,this.Hh=i.SHA384_IV[14]|0,this.Hl=i.SHA384_IV[15]|0}}Ge.SHA384=T;const x=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),A=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class E extends w{constructor(){super(28),this.Ah=x[0]|0,this.Al=x[1]|0,this.Bh=x[2]|0,this.Bl=x[3]|0,this.Ch=x[4]|0,this.Cl=x[5]|0,this.Dh=x[6]|0,this.Dl=x[7]|0,this.Eh=x[8]|0,this.El=x[9]|0,this.Fh=x[10]|0,this.Fl=x[11]|0,this.Gh=x[12]|0,this.Gl=x[13]|0,this.Hh=x[14]|0,this.Hl=x[15]|0}}Ge.SHA512_224=E;class I extends w{constructor(){super(32),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}return Ge.SHA512_256=I,Ge.sha256=(0,e.createHasher)(()=>new l),Ge.sha224=(0,e.createHasher)(()=>new u),Ge.sha512=(0,e.createHasher)(()=>new w),Ge.sha384=(0,e.createHasher)(()=>new T),Ge.sha512_256=(0,e.createHasher)(()=>new I),Ge.sha512_224=(0,e.createHasher)(()=>new E),Ge}var Kx;function S4(){if(Kx)return Ps;Kx=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.sha224=Ps.SHA224=Ps.sha256=Ps.SHA256=void 0;const i=x4();return Ps.SHA256=i.SHA256,Ps.sha256=i.sha256,Ps.SHA224=i.SHA224,Ps.sha224=i.sha224,Ps}var pg,Jx;function T4(){if(Jx)return pg;Jx=1;function i(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),s=0;s<e.length;s++)e[s]=255;for(var r=0;r<t.length;r++){var l=t.charAt(r),u=l.charCodeAt(0);if(e[u]!==255)throw new TypeError(l+" is ambiguous");e[u]=r}var f=t.length,p=t.charAt(0),m=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function y(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var A=0,E=0,I=0,B=x.length;I!==B&&x[I]===0;)I++,A++;for(var D=(B-I)*v+1>>>0,F=new Uint8Array(D);I!==B;){for(var R=x[I],H=0,Z=D-1;(R!==0||H<E)&&Z!==-1;Z--,H++)R+=256*F[Z]>>>0,F[Z]=R%f>>>0,R=R/f>>>0;if(R!==0)throw new Error("Non-zero carry");E=H,I++}for(var q=D-E;q!==D&&F[q]===0;)q++;for(var V=p.repeat(A);q<D;++q)V+=t.charAt(F[q]);return V}function w(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var A=0,E=0,I=0;x[A]===p;)E++,A++;for(var B=(x.length-A)*m+1>>>0,D=new Uint8Array(B);x[A];){var F=x.charCodeAt(A);if(F>255)return;var R=e[F];if(R===255)return;for(var H=0,Z=B-1;(R!==0||H<I)&&Z!==-1;Z--,H++)R+=f*D[Z]>>>0,D[Z]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");I=H,A++}for(var q=B-I;q!==B&&D[q]===0;)q++;for(var V=new Uint8Array(E+(B-q)),W=E;q!==B;)V[W++]=D[q++];return V}function T(x){var A=w(x);if(A)return A;throw new Error("Non-base"+f+" character")}return{encode:y,decodeUnsafe:w,decode:T}}return pg=i,pg}var mg,$x;function A4(){return $x||($x=1,mg=T4()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),mg}var _g,t1;function E4(){if(t1)return _g;t1=1;var i=A4();return _g=function(t){function e(u){var f=Uint8Array.from(u),p=t(f),m=f.length+4,v=new Uint8Array(m);return v.set(f,0),v.set(p.subarray(0,4),f.length),i.encode(v,m)}function s(u){var f=u.slice(0,-4),p=u.slice(-4),m=t(f);if(!(p[0]^m[0]|p[1]^m[1]|p[2]^m[2]|p[3]^m[3]))return f}function r(u){var f=i.decodeUnsafe(u);if(f)return s(f)}function l(u){var f=i.decode(u),p=s(f);if(!p)throw new Error("Invalid checksum");return p}return{encode:e,decode:l,decodeUnsafe:r}},_g}var gg,e1;function C4(){if(e1)return gg;e1=1;var{sha256:i}=S4(),t=E4();function e(s){return i(i(s))}return gg=t(e),gg}var L4=C4();const bl=gh(L4),M4=i=>{if(i.length%2!==0)throw new Error("Hex string must have an even length");const t=new Uint8Array(i.length/2);for(let e=0;e<i.length;e+=2)t[e>>1]=parseInt(i.slice(e,e+2),16);return t},ST=i=>Array.from(i,t=>t.toString(16).padStart(2,"0")).join(""),Xd="automerge:",Sc=i=>{const[t,e,...s]=i.split("#");if(s.length>0)throw new Error("Invalid URL: contains multiple heads sections");const r=new RegExp(`^${Xd}(\\w+)$`),[,l]=t.match(r)||[],u=l,f=CT(u);if(!f)throw new Error("Invalid document URL: "+i);if(e===void 0)return{binaryDocumentId:f,documentId:u};const p=e===""?[]:e.split("|"),m=p.map(v=>{try{return ST(bl.decode(v))}catch{throw new Error(`Invalid head in URL: ${v}`)}});return{binaryDocumentId:f,hexHeads:m,documentId:u,heads:p}},TT=i=>{if(i instanceof Uint8Array||typeof i=="string")return Xd+(i instanceof Uint8Array?dh(i):i);const{documentId:t,heads:e=void 0}=i;if(t===void 0)throw new Error("Invalid documentId: "+t);const s=t instanceof Uint8Array?dh(t):t;let r=`${Xd}${s}`;return e!==void 0&&(e.forEach(l=>{try{bl.decode(l)}catch{throw new Error(`Invalid head: ${l}`)}}),r+="#"+e.join("|")),r},AT=i=>{if(typeof i!="string"||!i||!i.startsWith(Xd))return!1;try{const{documentId:t,heads:e}=Sc(i);return!(!ET(t)||e&&!e.every(s=>{try{return bl.decode(s),!0}catch{return!1}}))}catch{return!1}},ET=i=>typeof i!="string"?!1:CT(i)!==void 0,k4=i=>typeof i=="string"&&bT(i),n1=()=>{const i=wT(null,new Uint8Array(16));return TT({documentId:i})},CT=i=>bl.decodeUnsafe(i),dh=i=>bl.encode(i),_r=i=>i.map(t=>bl.encode(M4(t))),Ja=i=>i.map(t=>ST(bl.decode(t))),hd=i=>{if(i instanceof Uint8Array)return dh(i);if(AT(i))return Sc(i).documentId;if(ET(i))return i;if(k4(i)){console.warn("Future versions will not support UUIDs as document IDs; use Automerge URLs instead.");const t=g4(i);return dh(t)}throw new Error(`Invalid AutomergeUrl: '${i}'`)};let Zg;try{Zg=new TextDecoder}catch{}let Ht,ul,yt=0;const D4=105,O4=57342,R4=57343,i1=57337,s1=6,hc={};let Yu=11281e4,to=1681e4,me={},hn,Fd,Qd=0,ph=0,On,ms,Cn=[],Wg=[],Ci,oi,Fu,r1={useRecords:!1,mapsAsObjects:!0},mh=!1,LT=2;try{new Function("")}catch{LT=1/0}class _h{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[e,s]of Object.entries(t.keyMap))this.mapKey.set(s,e)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let e=new Map;for(let[s,r]of Object.entries(t))e.set(this._keyMap.hasOwnProperty(s)?this._keyMap[s]:s,r);return e}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[s,r]of Object.entries(this._keyMap))this._mapKey.set(r,s)}let e={};return t.forEach((s,r)=>e[_s(this._mapKey.has(r)?this._mapKey.get(r):r)]=s),e}mapDecode(t,e){let s=this.decode(t);return this._keyMap&&s.constructor.name==="Array"?s.map(r=>this.decodeKeys(r)):s}decode(t,e){if(Ht)return OT(()=>(Qg(),this?this.decode(t,e):_h.prototype.decode.call(r1,t,e)));ul=e>-1?e:t.length,yt=0,ph=0,Fd=null,On=null,Ht=t;try{oi=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(s){throw Ht=null,t instanceof Uint8Array?s:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof _h){if(me=this,Ci=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return hn=this.structures,fd();(!hn||hn.length>0)&&(hn=[])}else me=r1,(!hn||hn.length>0)&&(hn=[]),Ci=null;return fd()}decodeMultiple(t,e){let s,r=0;try{let l=t.length;mh=!0;let u=this?this.decode(t,l):uy.decode(t,l);if(e){if(e(u)===!1)return;for(;yt<l;)if(r=yt,e(fd())===!1)return}else{for(s=[u];yt<l;)r=yt,s.push(fd());return s}}catch(l){throw l.lastPosition=r,l.values=s,l}finally{mh=!1,Qg()}}}function fd(){try{let i=ye();if(On){if(yt>=On.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}yt=On.postBundlePosition,On=null}if(yt==ul)hn=null,Ht=null,ms&&(ms=null);else if(yt>ul){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!mh)throw new Error("Data read, but end of buffer not reached");return i}catch(i){throw Qg(),(i instanceof RangeError||i.message.startsWith("Unexpected end of buffer"))&&(i.incomplete=!0),i}}function ye(){let i=Ht[yt++],t=i>>5;if(i=i&31,i>23)switch(i){case 24:i=Ht[yt++];break;case 25:if(t==7)return P4();i=oi.getUint16(yt),yt+=2;break;case 26:if(t==7){let e=oi.getFloat32(yt);if(me.useFloat32>2){let s=cy[(Ht[yt]&127)<<1|Ht[yt+1]>>7];return yt+=4,(s*e+(e>0?.5:-.5)>>0)/s}return yt+=4,e}i=oi.getUint32(yt),yt+=4;break;case 27:if(t==7){let e=oi.getFloat64(yt);return yt+=8,e}if(t>1){if(oi.getUint32(yt)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");i=oi.getUint32(yt+4)}else me.int64AsNumber?(i=oi.getUint32(yt)*4294967296,i+=oi.getUint32(yt+4)):i=oi.getBigUint64(yt);yt+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e=[],s,r=0;for(;(s=ye())!=hc;){if(r>=Yu)throw new Error(`Array length exceeds ${Yu}`);e[r++]=s}return t==4?e:t==3?e.join(""):Buffer.concat(e);case 5:let l;if(me.mapsAsObjects){let u={},f=0;if(me.keyMap)for(;(l=ye())!=hc;){if(f++>=to)throw new Error(`Property count exceeds ${to}`);u[_s(me.decodeKey(l))]=ye()}else for(;(l=ye())!=hc;){if(f++>=to)throw new Error(`Property count exceeds ${to}`);u[_s(l)]=ye()}return u}else{Fu&&(me.mapsAsObjects=!0,Fu=!1);let u=new Map;if(me.keyMap){let f=0;for(;(l=ye())!=hc;){if(f++>=to)throw new Error(`Map size exceeds ${to}`);u.set(me.decodeKey(l),ye())}}else{let f=0;for(;(l=ye())!=hc;){if(f++>=to)throw new Error(`Map size exceeds ${to}`);u.set(l,ye())}}return u}case 7:return hc;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+i)}switch(t){case 0:return i;case 1:return~i;case 2:return z4(i);case 3:if(ph>=yt)return Fd.slice(yt-Qd,(yt+=i)-Qd);if(ph==0&&ul<140&&i<32){let r=i<16?MT(i):N4(i);if(r!=null)return r}return I4(i);case 4:if(i>=Yu)throw new Error(`Array length exceeds ${Yu}`);let e=new Array(i);for(let r=0;r<i;r++)e[r]=ye();return e;case 5:if(i>=to)throw new Error(`Map size exceeds ${Yu}`);if(me.mapsAsObjects){let r={};if(me.keyMap)for(let l=0;l<i;l++)r[_s(me.decodeKey(ye()))]=ye();else for(let l=0;l<i;l++)r[_s(ye())]=ye();return r}else{Fu&&(me.mapsAsObjects=!0,Fu=!1);let r=new Map;if(me.keyMap)for(let l=0;l<i;l++)r.set(me.decodeKey(ye()),ye());else for(let l=0;l<i;l++)r.set(ye(),ye());return r}case 6:if(i>=i1){let r=hn[i&8191];if(r)return r.read||(r.read=Yg(r)),r.read();if(i<65536){if(i==R4){let l=xc(),u=ye(),f=ye();Fg(u,f);let p={};if(me.keyMap)for(let m=2;m<l;m++){let v=me.decodeKey(f[m-2]);p[_s(v)]=ye()}else for(let m=2;m<l;m++){let v=f[m-2];p[_s(v)]=ye()}return p}else if(i==O4){let l=xc(),u=ye();for(let f=2;f<l;f++)Fg(u++,ye());return ye()}else if(i==i1)return j4();if(me.getShared&&(ly(),r=hn[i&8191],r))return r.read||(r.read=Yg(r)),r.read()}}let s=Cn[i];if(s)return s.handlesRead?s(ye):s(ye());{let r=ye();for(let l=0;l<Wg.length;l++){let u=Wg[l](i,r);if(u!==void 0)return u}return new pl(r,i)}case 7:switch(i){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let r=(Ci||tl())[i];if(r!==void 0)return r;throw new Error("Unknown token "+i)}default:if(isNaN(i)){let r=new Error("Unexpected end of CBOR data");throw r.incomplete=!0,r}throw new Error("Unknown CBOR token "+i)}}const o1=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Yg(i){if(!i)throw new Error("Structure is required in record definition");function t(){let e=Ht[yt++];if(e=e&31,e>23)switch(e){case 24:e=Ht[yt++];break;case 25:e=oi.getUint16(yt),yt+=2;break;case 26:e=oi.getUint32(yt),yt+=4;break;default:throw new Error("Expected array header, but got "+Ht[yt-1])}let s=this.compiledReader;for(;s;){if(s.propertyCount===e)return s(ye);s=s.next}if(this.slowReads++>=LT){let l=this.length==e?this:this.slice(0,e);return s=me.keyMap?new Function("r","return {"+l.map(u=>me.decodeKey(u)).map(u=>o1.test(u)?_s(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"):new Function("r","return {"+l.map(u=>o1.test(u)?_s(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"),this.compiledReader&&(s.next=this.compiledReader),s.propertyCount=e,this.compiledReader=s,s(ye)}let r={};if(me.keyMap)for(let l=0;l<e;l++)r[_s(me.decodeKey(this[l]))]=ye();else for(let l=0;l<e;l++)r[_s(this[l])]=ye();return r}return i.slowReads=0,t}function _s(i){if(typeof i=="string")return i==="__proto__"?"__proto_":i;if(typeof i=="number"||typeof i=="boolean"||typeof i=="bigint")return i.toString();if(i==null)return i+"";throw new Error("Invalid property name type "+typeof i)}let I4=Xg;function Xg(i){let t;if(i<16&&(t=MT(i)))return t;if(i>64&&Zg)return Zg.decode(Ht.subarray(yt,yt+=i));const e=yt+i,s=[];for(t="";yt<e;){const r=Ht[yt++];if((r&128)===0)s.push(r);else if((r&224)===192){const l=Ht[yt++]&63;s.push((r&31)<<6|l)}else if((r&240)===224){const l=Ht[yt++]&63,u=Ht[yt++]&63;s.push((r&31)<<12|l<<6|u)}else if((r&248)===240){const l=Ht[yt++]&63,u=Ht[yt++]&63,f=Ht[yt++]&63;let p=(r&7)<<18|l<<12|u<<6|f;p>65535&&(p-=65536,s.push(p>>>10&1023|55296),p=56320|p&1023),s.push(p)}else s.push(r);s.length>=4096&&(t+=Un.apply(String,s),s.length=0)}return s.length>0&&(t+=Un.apply(String,s)),t}let Un=String.fromCharCode;function N4(i){let t=yt,e=new Array(i);for(let s=0;s<i;s++){const r=Ht[yt++];if((r&128)>0){yt=t;return}e[s]=r}return Un.apply(String,e)}function MT(i){if(i<4)if(i<2){if(i===0)return"";{let t=Ht[yt++];if((t&128)>1){yt-=1;return}return Un(t)}}else{let t=Ht[yt++],e=Ht[yt++];if((t&128)>0||(e&128)>0){yt-=2;return}if(i<3)return Un(t,e);let s=Ht[yt++];if((s&128)>0){yt-=3;return}return Un(t,e,s)}else{let t=Ht[yt++],e=Ht[yt++],s=Ht[yt++],r=Ht[yt++];if((t&128)>0||(e&128)>0||(s&128)>0||(r&128)>0){yt-=4;return}if(i<6){if(i===4)return Un(t,e,s,r);{let l=Ht[yt++];if((l&128)>0){yt-=5;return}return Un(t,e,s,r,l)}}else if(i<8){let l=Ht[yt++],u=Ht[yt++];if((l&128)>0||(u&128)>0){yt-=6;return}if(i<7)return Un(t,e,s,r,l,u);let f=Ht[yt++];if((f&128)>0){yt-=7;return}return Un(t,e,s,r,l,u,f)}else{let l=Ht[yt++],u=Ht[yt++],f=Ht[yt++],p=Ht[yt++];if((l&128)>0||(u&128)>0||(f&128)>0||(p&128)>0){yt-=8;return}if(i<10){if(i===8)return Un(t,e,s,r,l,u,f,p);{let m=Ht[yt++];if((m&128)>0){yt-=9;return}return Un(t,e,s,r,l,u,f,p,m)}}else if(i<12){let m=Ht[yt++],v=Ht[yt++];if((m&128)>0||(v&128)>0){yt-=10;return}if(i<11)return Un(t,e,s,r,l,u,f,p,m,v);let y=Ht[yt++];if((y&128)>0){yt-=11;return}return Un(t,e,s,r,l,u,f,p,m,v,y)}else{let m=Ht[yt++],v=Ht[yt++],y=Ht[yt++],w=Ht[yt++];if((m&128)>0||(v&128)>0||(y&128)>0||(w&128)>0){yt-=12;return}if(i<14){if(i===12)return Un(t,e,s,r,l,u,f,p,m,v,y,w);{let T=Ht[yt++];if((T&128)>0){yt-=13;return}return Un(t,e,s,r,l,u,f,p,m,v,y,w,T)}}else{let T=Ht[yt++],x=Ht[yt++];if((T&128)>0||(x&128)>0){yt-=14;return}if(i<15)return Un(t,e,s,r,l,u,f,p,m,v,y,w,T,x);let A=Ht[yt++];if((A&128)>0){yt-=15;return}return Un(t,e,s,r,l,u,f,p,m,v,y,w,T,x,A)}}}}}function z4(i){return me.copyBuffers?Uint8Array.prototype.slice.call(Ht,yt,yt+=i):Ht.subarray(yt,yt+=i)}let kT=new Float32Array(1),dd=new Uint8Array(kT.buffer,0,4);function P4(){let i=Ht[yt++],t=Ht[yt++],e=(i&127)>>2;if(e===31)return t||i&3?NaN:i&128?-1/0:1/0;if(e===0){let s=((i&3)<<8|t)/16777216;return i&128?-s:s}return dd[3]=i&128|(e>>1)+56,dd[2]=(i&7)<<5|t>>3,dd[1]=t<<5,dd[0]=0,kT[0]}new Array(4096);class pl{constructor(t,e){this.value=t,this.tag=e}}Cn[0]=i=>new Date(i);Cn[1]=i=>new Date(Math.round(i*1e3));Cn[2]=i=>{let t=BigInt(0);for(let e=0,s=i.byteLength;e<s;e++)t=BigInt(i[e])+(t<<BigInt(8));return t};Cn[3]=i=>BigInt(-1)-Cn[2](i);Cn[4]=i=>+(i[1]+"e"+i[0]);Cn[5]=i=>i[1]*Math.exp(i[0]*Math.log(2));const Fg=(i,t)=>{i=i-57344;let e=hn[i];e&&e.isShared&&((hn.restoreStructures||(hn.restoreStructures=[]))[i]=e),hn[i]=t,t.read=Yg(t)};Cn[D4]=i=>{let t=i.length,e=i[1];Fg(i[0],e);let s={};for(let r=2;r<t;r++){let l=e[r-2];s[_s(l)]=i[r]}return s};Cn[14]=i=>On?On[0].slice(On.position0,On.position0+=i):new pl(i,14);Cn[15]=i=>On?On[1].slice(On.position1,On.position1+=i):new pl(i,15);let B4={Error,RegExp};Cn[27]=i=>(B4[i[0]]||Error)(i[1],i[2]);const DT=i=>{if(Ht[yt++]!=132){let e=new Error("Packed values structure must be followed by a 4 element array");throw Ht.length<yt&&(e.incomplete=!0),e}let t=i();if(!t||!t.length){let e=new Error("Packed values structure must be followed by a 4 element array");throw e.incomplete=!0,e}return Ci=Ci?t.concat(Ci.slice(t.length)):t,Ci.prefixes=i(),Ci.suffixes=i(),i()};DT.handlesRead=!0;Cn[51]=DT;Cn[s1]=i=>{if(!Ci)if(me.getShared)ly();else return new pl(i,s1);if(typeof i=="number")return Ci[16+(i>=0?2*i:-2*i-1)];let t=new Error("No support for non-integer packed references yet");throw i===void 0&&(t.incomplete=!0),t};Cn[28]=i=>{ms||(ms=new Map,ms.id=0);let t=ms.id++,e=yt,s=Ht[yt],r;s>>5==4?r=[]:r={};let l={target:r};ms.set(t,l);let u=i();return l.used?(Object.getPrototypeOf(r)!==Object.getPrototypeOf(u)&&(yt=e,r=u,ms.set(t,{target:r}),u=i()),Object.assign(r,u)):(l.target=u,u)};Cn[28].handlesRead=!0;Cn[29]=i=>{let t=ms.get(i);return t.used=!0,t.target};Cn[258]=i=>new Set(i);(Cn[259]=i=>(me.mapsAsObjects&&(me.mapsAsObjects=!1,Fu=!0),i())).handlesRead=!0;function fc(i,t){return typeof i=="string"?i+t:i instanceof Array?i.concat(t):Object.assign({},i,t)}function tl(){if(!Ci)if(me.getShared)ly();else throw new Error("No packed values available");return Ci}const U4=1399353956;Wg.push((i,t)=>{if(i>=225&&i<=255)return fc(tl().prefixes[i-224],t);if(i>=28704&&i<=32767)return fc(tl().prefixes[i-28672],t);if(i>=1879052288&&i<=2147483647)return fc(tl().prefixes[i-1879048192],t);if(i>=216&&i<=223)return fc(t,tl().suffixes[i-216]);if(i>=27647&&i<=28671)return fc(t,tl().suffixes[i-27639]);if(i>=1811940352&&i<=1879048191)return fc(t,tl().suffixes[i-1811939328]);if(i==U4)return{packedValues:Ci,structures:hn.slice(0),version:t};if(i==55799)return t});const H4=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,a1=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],V4=[64,68,69,70,71,72,77,78,79,85,86];for(let i=0;i<a1.length;i++)q4(a1[i],V4[i]);function q4(i,t){let e="get"+i.name.slice(0,-5),s;typeof i=="function"?s=i.BYTES_PER_ELEMENT:i=null;for(let r=0;r<2;r++){if(!r&&s==1)continue;let l=s==2?1:s==4?2:s==8?3:0;Cn[r?t:t-4]=s==1||r==H4?u=>{if(!i)throw new Error("Could not find typed array for code "+t);return!me.copyBuffers&&(s===1||s===2&&!(u.byteOffset&1)||s===4&&!(u.byteOffset&3)||s===8&&!(u.byteOffset&7))?new i(u.buffer,u.byteOffset,u.byteLength>>l):new i(Uint8Array.prototype.slice.call(u,0).buffer)}:u=>{if(!i)throw new Error("Could not find typed array for code "+t);let f=new DataView(u.buffer,u.byteOffset,u.byteLength),p=u.length>>l,m=new i(p),v=f[e];for(let y=0;y<p;y++)m[y]=v.call(f,y<<l,r);return m}}}function j4(){let i=xc(),t=yt+ye();for(let s=2;s<i;s++){let r=xc();yt+=r}let e=yt;return yt=t,On=[Xg(xc()),Xg(xc())],On.position0=0,On.position1=0,On.postBundlePosition=yt,yt=e,ye()}function xc(){let i=Ht[yt++]&31;if(i>23)switch(i){case 24:i=Ht[yt++];break;case 25:i=oi.getUint16(yt),yt+=2;break;case 26:i=oi.getUint32(yt),yt+=4;break}return i}function ly(){if(me.getShared){let i=OT(()=>(Ht=null,me.getShared()))||{},t=i.structures||[];me.sharedVersion=i.version,Ci=me.sharedValues=i.packedValues,hn===!0?me.structures=hn=t:hn.splice.apply(hn,[0,t.length].concat(t))}}function OT(i){let t=ul,e=yt,s=Qd,r=ph,l=Fd,u=ms,f=On,p=new Uint8Array(Ht.slice(0,ul)),m=hn,v=me,y=mh,w=i();return ul=t,yt=e,Qd=s,ph=r,Fd=l,ms=u,On=f,Ht=p,mh=y,hn=m,me=v,oi=new DataView(Ht.buffer,Ht.byteOffset,Ht.byteLength),w}function Qg(){Ht=null,ms=null,hn=null}const cy=new Array(147);for(let i=0;i<256;i++)cy[i]=+("1e"+Math.floor(45.15-i*.30103));let uy=new _h({useRecords:!1});const RT=uy.decode;uy.decodeMultiple;let Sd;try{Sd=new TextEncoder}catch{}let Kg,IT;const Mp=typeof globalThis=="object"&&globalThis.Buffer,Nh=typeof Mp<"u",yg=Nh?Mp.allocUnsafeSlow:Uint8Array,l1=Nh?Mp:Uint8Array,c1=256,u1=Nh?4294967296:2144337920;let vg,lt,Ke,nt=0,ta,Dn=null;const G4=61440,Z4=/[\u0080-\uFFFF]/,ji=Symbol("record-id");class NT extends _h{constructor(t){super(t),this.offset=0;let e,s,r,l,u;t=t||{};let f=l1.prototype.utf8Write?function(P,J,$){return lt.utf8Write(P,J,$)}:Sd&&Sd.encodeInto?function(P,J){return Sd.encodeInto(P,lt.subarray(J)).written}:!1,p=this,m=t.structures||t.saveStructures,v=t.maxSharedStructures;if(v==null&&(v=m?128:0),v>8190)throw new Error("Maximum maxSharedStructure is 8190");let y=t.sequential;y&&(v=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let w,T,x=t.sharedValues,A;if(x){A=Object.create(null);for(let P=0,J=x.length;P<J;P++)A[x[P]]=P}let E=[],I=0,B=0;this.mapEncode=function(P,J){return this._keyMap&&!this._mapped&&P.constructor.name==="Array"&&(P=P.map($=>this.encodeKeys($))),this.encode(P,J)},this.encode=function(P,J){if(lt||(lt=new yg(8192),Ke=new DataView(lt.buffer,0,8192),nt=0),ta=lt.length-10,ta-nt<2048?(lt=new yg(lt.length),Ke=new DataView(lt.buffer,0,lt.length),ta=lt.length-10,nt=0):J===d1&&(nt=nt+7&2147483640),e=nt,p.useSelfDescribedHeader&&(Ke.setUint32(nt,3654940416),nt+=3),u=p.structuredClone?new Map:null,p.bundleStrings&&typeof P!="string"?(Dn=[],Dn.size=1/0):Dn=null,s=p.structures,s){if(s.uninitialized){let U=p.getShared()||{};p.structures=s=U.structures||[],p.sharedVersion=U.version;let Y=p.sharedValues=U.packedValues;if(Y){A={};for(let et=0,k=Y.length;et<k;et++)A[Y[et]]=et}}let $=s.length;if($>v&&!y&&($=v),!s.transitions){s.transitions=Object.create(null);for(let U=0;U<$;U++){let Y=s[U];if(!Y)continue;let et,k=s.transitions;for(let j=0,O=Y.length;j<O;j++){k[ji]===void 0&&(k[ji]=U);let G=Y[j];et=k[G],et||(et=k[G]=Object.create(null)),k=et}k[ji]=U|1048576}}y||(s.nextId=$)}if(r&&(r=!1),l=s||[],T=A,t.pack){let $=new Map;if($.values=[],$.encoder=p,$.maxValues=t.maxPrivatePackedValues||(A?16:1/0),$.objectMap=A||!1,$.samplingPackedValues=w,Td(P,$),$.values.length>0){lt[nt++]=216,lt[nt++]=51,dr(4);let U=$.values;D(U),dr(0),dr(0),T=Object.create(A||null);for(let Y=0,et=U.length;Y<et;Y++)T[U[Y]]=Y}}vg=J&wg;try{if(vg)return;if(D(P),Dn&&f1(e,D),p.offset=nt,u&&u.idsToInsert){nt+=u.idsToInsert.length*2,nt>ta&&R(nt),p.offset=nt;let $=X4(lt.subarray(e,nt),u.idsToInsert);return u=null,$}return J&d1?(lt.start=e,lt.end=nt,lt):lt.subarray(e,nt)}finally{if(s){if(B<10&&B++,s.length>v&&(s.length=v),I>1e4)s.transitions=null,B=0,I=0,E.length>0&&(E=[]);else if(E.length>0&&!y){for(let $=0,U=E.length;$<U;$++)E[$][ji]=void 0;E=[]}}if(r&&p.saveShared){p.structures.length>v&&(p.structures=p.structures.slice(0,v));let $=lt.subarray(e,nt);return p.updateSharedData()===!1?p.encode(P):$}J&F4&&(nt=e)}},this.findCommonStringsToPack=()=>(w=new Map,A||(A=Object.create(null)),P=>{let J=P&&P.threshold||4,$=this.pack?P.maxPrivatePackedValues||16:0;x||(x=this.sharedValues=[]);for(let[U,Y]of w)Y.count>J&&(A[U]=$++,x.push(U),r=!0);for(;this.saveShared&&this.updateSharedData()===!1;);w=null});const D=P=>{nt>ta&&(lt=R(nt));var J=typeof P,$;if(J==="string"){if(T){let k=T[P];if(k>=0){k<16?lt[nt++]=k+224:(lt[nt++]=198,k&1?D(15-k>>1):D(k-16>>1));return}else if(w&&!t.pack){let j=w.get(P);j?j.count++:w.set(P,{count:1})}}let U=P.length;if(Dn&&U>=4&&U<1024){if((Dn.size+=U)>G4){let j,O=(Dn[0]?Dn[0].length*3+Dn[1].length:0)+10;nt+O>ta&&(lt=R(nt+O)),lt[nt++]=217,lt[nt++]=223,lt[nt++]=249,lt[nt++]=Dn.position?132:130,lt[nt++]=26,j=nt-e,nt+=4,Dn.position&&f1(e,D),Dn=["",""],Dn.size=0,Dn.position=j}let k=Z4.test(P);Dn[k?0:1]+=P,lt[nt++]=k?206:207,D(U);return}let Y;U<32?Y=1:U<256?Y=2:U<65536?Y=3:Y=5;let et=U*3;if(nt+et>ta&&(lt=R(nt+et)),U<64||!f){let k,j,O,G=nt+Y;for(k=0;k<U;k++)j=P.charCodeAt(k),j<128?lt[G++]=j:j<2048?(lt[G++]=j>>6|192,lt[G++]=j&63|128):(j&64512)===55296&&((O=P.charCodeAt(k+1))&64512)===56320?(j=65536+((j&1023)<<10)+(O&1023),k++,lt[G++]=j>>18|240,lt[G++]=j>>12&63|128,lt[G++]=j>>6&63|128,lt[G++]=j&63|128):(lt[G++]=j>>12|224,lt[G++]=j>>6&63|128,lt[G++]=j&63|128);$=G-nt-Y}else $=f(P,nt+Y,et);$<24?lt[nt++]=96|$:$<256?(Y<2&&lt.copyWithin(nt+2,nt+1,nt+1+$),lt[nt++]=120,lt[nt++]=$):$<65536?(Y<3&&lt.copyWithin(nt+3,nt+2,nt+2+$),lt[nt++]=121,lt[nt++]=$>>8,lt[nt++]=$&255):(Y<5&&lt.copyWithin(nt+5,nt+3,nt+3+$),lt[nt++]=122,Ke.setUint32(nt,$),nt+=4),nt+=$}else if(J==="number")if(!this.alwaysUseFloat&&P>>>0===P)P<24?lt[nt++]=P:P<256?(lt[nt++]=24,lt[nt++]=P):P<65536?(lt[nt++]=25,lt[nt++]=P>>8,lt[nt++]=P&255):(lt[nt++]=26,Ke.setUint32(nt,P),nt+=4);else if(!this.alwaysUseFloat&&P>>0===P)P>=-24?lt[nt++]=31-P:P>=-256?(lt[nt++]=56,lt[nt++]=~P):P>=-65536?(lt[nt++]=57,Ke.setUint16(nt,~P),nt+=2):(lt[nt++]=58,Ke.setUint32(nt,~P),nt+=4);else{let U;if((U=this.useFloat32)>0&&P<4294967296&&P>=-2147483648){lt[nt++]=250,Ke.setFloat32(nt,P);let Y;if(U<4||(Y=P*cy[(lt[nt]&127)<<1|lt[nt+1]>>7])>>0===Y){nt+=4;return}else nt--}lt[nt++]=251,Ke.setFloat64(nt,P),nt+=8}else if(J==="object")if(!P)lt[nt++]=246;else{if(u){let Y=u.get(P);if(Y){if(lt[nt++]=216,lt[nt++]=29,lt[nt++]=25,!Y.references){let et=u.idsToInsert||(u.idsToInsert=[]);Y.references=[],et.push(Y)}Y.references.push(nt-e),nt+=2;return}else u.set(P,{offset:nt-e})}let U=P.constructor;if(U===Object)F(P);else if(U===Array){$=P.length,$<24?lt[nt++]=128|$:dr($);for(let Y=0;Y<$;Y++)D(P[Y])}else if(U===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(lt[nt++]=217,lt[nt++]=1,lt[nt++]=3),$=P.size,$<24?lt[nt++]=160|$:$<256?(lt[nt++]=184,lt[nt++]=$):$<65536?(lt[nt++]=185,lt[nt++]=$>>8,lt[nt++]=$&255):(lt[nt++]=186,Ke.setUint32(nt,$),nt+=4),p.keyMap)for(let[Y,et]of P)D(p.encodeKey(Y)),D(et);else for(let[Y,et]of P)D(Y),D(et);else{for(let Y=0,et=Kg.length;Y<et;Y++){let k=IT[Y];if(P instanceof k){let j=Kg[Y],O=j.tag;O==null&&(O=j.getTag&&j.getTag.call(this,P)),O<24?lt[nt++]=192|O:O<256?(lt[nt++]=216,lt[nt++]=O):O<65536?(lt[nt++]=217,lt[nt++]=O>>8,lt[nt++]=O&255):O>-1&&(lt[nt++]=218,Ke.setUint32(nt,O),nt+=4),j.encode.call(this,P,D,R);return}}if(P[Symbol.iterator]){if(vg){let Y=new Error("Iterable should be serialized as iterator");throw Y.iteratorNotHandled=!0,Y}lt[nt++]=159;for(let Y of P)D(Y);lt[nt++]=255;return}if(P[Symbol.asyncIterator]||bg(P)){let Y=new Error("Iterable/blob should be serialized as iterator");throw Y.iteratorNotHandled=!0,Y}if(this.useToJSON&&P.toJSON){const Y=P.toJSON();if(Y!==P)return D(Y)}F(P)}}else if(J==="boolean")lt[nt++]=P?245:244;else if(J==="bigint"){if(P<BigInt(1)<<BigInt(64)&&P>=0)lt[nt++]=27,Ke.setBigUint64(nt,P);else if(P>-(BigInt(1)<<BigInt(64))&&P<0)lt[nt++]=59,Ke.setBigUint64(nt,-P-BigInt(1));else if(this.largeBigIntToFloat)lt[nt++]=251,Ke.setFloat64(nt,Number(P));else{P>=BigInt(0)?lt[nt++]=194:(lt[nt++]=195,P=BigInt(-1)-P);let U=[];for(;P;)U.push(Number(P&BigInt(255))),P>>=BigInt(8);Jg(new Uint8Array(U.reverse()),R);return}nt+=8}else if(J==="undefined")lt[nt++]=247;else throw new Error("Unknown type: "+J)},F=this.useRecords===!1?this.variableMapSize?P=>{let J=Object.keys(P),$=Object.values(P),U=J.length;if(U<24?lt[nt++]=160|U:U<256?(lt[nt++]=184,lt[nt++]=U):U<65536?(lt[nt++]=185,lt[nt++]=U>>8,lt[nt++]=U&255):(lt[nt++]=186,Ke.setUint32(nt,U),nt+=4),p.keyMap)for(let Y=0;Y<U;Y++)D(p.encodeKey(J[Y])),D($[Y]);else for(let Y=0;Y<U;Y++)D(J[Y]),D($[Y])}:P=>{lt[nt++]=185;let J=nt-e;nt+=2;let $=0;if(p.keyMap)for(let U in P)(typeof P.hasOwnProperty!="function"||P.hasOwnProperty(U))&&(D(p.encodeKey(U)),D(P[U]),$++);else for(let U in P)(typeof P.hasOwnProperty!="function"||P.hasOwnProperty(U))&&(D(U),D(P[U]),$++);lt[J+++e]=$>>8,lt[J+e]=$&255}:(P,J)=>{let $,U=l.transitions||(l.transitions=Object.create(null)),Y=0,et=0,k,j;if(this.keyMap){j=Object.keys(P).map(G=>this.encodeKey(G)),et=j.length;for(let G=0;G<et;G++){let ot=j[G];$=U[ot],$||($=U[ot]=Object.create(null),Y++),U=$}}else for(let G in P)(typeof P.hasOwnProperty!="function"||P.hasOwnProperty(G))&&($=U[G],$||(U[ji]&1048576&&(k=U[ji]&65535),$=U[G]=Object.create(null),Y++),U=$,et++);let O=U[ji];if(O!==void 0)O&=65535,lt[nt++]=217,lt[nt++]=O>>8|224,lt[nt++]=O&255;else if(j||(j=U.__keys__||(U.__keys__=Object.keys(P))),k===void 0?(O=l.nextId++,O||(O=0,l.nextId=1),O>=c1&&(l.nextId=(O=v)+1)):O=k,l[O]=j,O<v){lt[nt++]=217,lt[nt++]=O>>8|224,lt[nt++]=O&255,U=l.transitions;for(let G=0;G<et;G++)(U[ji]===void 0||U[ji]&1048576)&&(U[ji]=O),U=U[j[G]];U[ji]=O|1048576,r=!0}else{if(U[ji]=O,Ke.setUint32(nt,3655335680),nt+=3,Y&&(I+=B*Y),E.length>=c1-v&&(E.shift()[ji]=void 0),E.push(U),dr(et+2),D(57344+O),D(j),J)return;for(let G in P)(typeof P.hasOwnProperty!="function"||P.hasOwnProperty(G))&&D(P[G]);return}if(et<24?lt[nt++]=128|et:dr(et),!J)for(let G in P)(typeof P.hasOwnProperty!="function"||P.hasOwnProperty(G))&&D(P[G])},R=P=>{let J;if(P>16777216){if(P-e>u1)throw new Error("Encoded buffer would be larger than maximum buffer size");J=Math.min(u1,Math.round(Math.max((P-e)*(P>67108864?1.25:2),4194304)/4096)*4096)}else J=(Math.max(P-e<<2,lt.length-1)>>12)+1<<12;let $=new yg(J);return Ke=new DataView($.buffer,0,J),lt.copy?lt.copy($,0,e,P):$.set(lt.slice(e,P)),nt-=e,e=0,ta=$.length-10,lt=$};let H=100,Z=1e3;this.encodeAsIterable=function(P,J){return X(P,J,q)},this.encodeAsAsyncIterable=function(P,J){return X(P,J,tt)};function*q(P,J,$){let U=P.constructor;if(U===Object){let Y=p.useRecords!==!1;Y?F(P,!0):h1(Object.keys(P).length,160);for(let et in P){let k=P[et];Y||D(et),k&&typeof k=="object"?J[et]?yield*q(k,J[et]):yield*V(k,J,et):D(k)}}else if(U===Array){let Y=P.length;dr(Y);for(let et=0;et<Y;et++){let k=P[et];k&&(typeof k=="object"||nt-e>H)?J.element?yield*q(k,J.element):yield*V(k,J,"element"):D(k)}}else if(P[Symbol.iterator]&&!P.buffer){lt[nt++]=159;for(let Y of P)Y&&(typeof Y=="object"||nt-e>H)?J.element?yield*q(Y,J.element):yield*V(Y,J,"element"):D(Y);lt[nt++]=255}else bg(P)?(h1(P.size,64),yield lt.subarray(e,nt),yield P,W()):P[Symbol.asyncIterator]?(lt[nt++]=159,yield lt.subarray(e,nt),yield P,W(),lt[nt++]=255):D(P);$&&nt>e?yield lt.subarray(e,nt):nt-e>H&&(yield lt.subarray(e,nt),W())}function*V(P,J,$){let U=nt-e;try{D(P),nt-e>H&&(yield lt.subarray(e,nt),W())}catch(Y){if(Y.iteratorNotHandled)J[$]={},nt=e+U,yield*q.call(this,P,J[$]);else throw Y}}function W(){H=Z,p.encode(null,wg)}function X(P,J,$){return J&&J.chunkThreshold?H=Z=J.chunkThreshold:H=100,P&&typeof P=="object"?(p.encode(null,wg),$(P,p.iterateProperties||(p.iterateProperties={}),!0)):[p.encode(P)]}async function*tt(P,J){for(let $ of q(P,J,!0)){let U=$.constructor;if(U===l1||U===Uint8Array)yield $;else if(bg($)){let Y=$.stream().getReader(),et;for(;!(et=await Y.read()).done;)yield et.value}else if($[Symbol.asyncIterator])for await(let Y of $)W(),Y?yield*tt(Y,J.async||(J.async={})):yield p.encode(Y);else yield $}}}useBuffer(t){lt=t,Ke=new DataView(lt.buffer,lt.byteOffset,lt.byteLength),nt=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let e=this.structures.slice(0),s=new zT(e,this.sharedValues,this.sharedVersion),r=this.saveShared(s,l=>(l&&l.version||0)==t);return r===!1?(s=this.getShared()||{},this.structures=s.structures||[],this.sharedValues=s.packedValues,this.sharedVersion=s.version,this.structures.nextId=this.structures.length):e.forEach((l,u)=>this.structures[u]=l),r}}function h1(i,t){i<24?lt[nt++]=t|i:i<256?(lt[nt++]=t|24,lt[nt++]=i):i<65536?(lt[nt++]=t|25,lt[nt++]=i>>8,lt[nt++]=i&255):(lt[nt++]=t|26,Ke.setUint32(nt,i),nt+=4)}class zT{constructor(t,e,s){this.structures=t,this.packedValues=e,this.version=s}}function dr(i){i<24?lt[nt++]=128|i:i<256?(lt[nt++]=152,lt[nt++]=i):i<65536?(lt[nt++]=153,lt[nt++]=i>>8,lt[nt++]=i&255):(lt[nt++]=154,Ke.setUint32(nt,i),nt+=4)}const W4=typeof Blob>"u"?function(){}:Blob;function bg(i){if(i instanceof W4)return!0;let t=i[Symbol.toStringTag];return t==="Blob"||t==="File"}function Td(i,t){switch(typeof i){case"string":if(i.length>3){if(t.objectMap[i]>-1||t.values.length>=t.maxValues)return;let s=t.get(i);if(s)++s.count==2&&t.values.push(i);else if(t.set(i,{count:1}),t.samplingPackedValues){let r=t.samplingPackedValues.get(i);r?r.count++:t.samplingPackedValues.set(i,{count:1})}}break;case"object":if(i)if(i instanceof Array)for(let s=0,r=i.length;s<r;s++)Td(i[s],t);else{let s=!t.encoder.useRecords;for(var e in i)i.hasOwnProperty(e)&&(s&&Td(e,t),Td(i[e],t))}break;case"function":console.log(i)}}const Y4=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;IT=[Date,Set,Error,RegExp,pl,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,zT];Kg=[{tag:1,encode(i,t){let e=i.getTime()/1e3;(this.useTimestamp32||i.getMilliseconds()===0)&&e>=0&&e<4294967296?(lt[nt++]=26,Ke.setUint32(nt,e),nt+=4):(lt[nt++]=251,Ke.setFloat64(nt,e),nt+=8)}},{tag:258,encode(i,t){let e=Array.from(i);t(e)}},{tag:27,encode(i,t){t([i.name,i.message])}},{tag:27,encode(i,t){t(["RegExp",i.source,i.flags])}},{getTag(i){return i.tag},encode(i,t){t(i.value)}},{encode(i,t,e){Jg(i,e)}},{getTag(i){if(i.constructor===Uint8Array&&(this.tagUint8Array||Nh&&this.tagUint8Array!==!1))return 64},encode(i,t,e){Jg(i,e)}},hr(68,1),hr(69,2),hr(70,4),hr(71,8),hr(72,1),hr(77,2),hr(78,4),hr(79,8),hr(85,4),hr(86,8),{encode(i,t){let e=i.packedValues||[],s=i.structures||[];if(e.values.length>0){lt[nt++]=216,lt[nt++]=51,dr(4);let r=e.values;t(r),dr(0),dr(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let l=0,u=r.length;l<u;l++)packedObjectMap[r[l]]=l}if(s){Ke.setUint32(nt,3655335424),nt+=3;let r=s.slice(0);r.unshift(57344),r.push(new pl(i.version,1399353956)),t(r)}else t(new pl(i.version,1399353956))}}];function hr(i,t){return!Y4&&t>1&&(i-=4),{tag:i,encode:function(s,r){let l=s.byteLength,u=s.byteOffset||0,f=s.buffer||s;r(Nh?Mp.from(f,u,l):new Uint8Array(f,u,l))}}}function Jg(i,t){let e=i.byteLength;e<24?lt[nt++]=64+e:e<256?(lt[nt++]=88,lt[nt++]=e):e<65536?(lt[nt++]=89,lt[nt++]=e>>8,lt[nt++]=e&255):(lt[nt++]=90,Ke.setUint32(nt,e),nt+=4),nt+e>=lt.length&&t(nt+e),lt.set(i.buffer?i:new Uint8Array(i),nt),nt+=e}function X4(i,t){let e,s=t.length*2,r=i.length-s;t.sort((l,u)=>l.offset>u.offset?1:-1);for(let l=0;l<t.length;l++){let u=t[l];u.id=l;for(let f of u.references)i[f++]=l>>8,i[f]=l&255}for(;e=t.pop();){let l=e.offset;i.copyWithin(l+s,l,r),s-=2;let u=l+s;i[u++]=216,i[u++]=28,r=l}return i}function f1(i,t){Ke.setUint32(Dn.position+i,nt-Dn.position-i+1);let e=Dn;Dn=null,t(e[0]),t(e[1])}let hy=new NT({useRecords:!1});hy.encode;hy.encodeAsIterable;hy.encodeAsAsyncIterable;const d1=512,F4=1024,wg=2048;function PT(i){return new NT({tagUint8Array:!1,useRecords:!1}).encode(i)}function Q4(i){return RT(i)}const K4=(i,t)=>i.length===t.length&&i.every((e,s)=>e===t[s]),fy=(i,t)=>K4(i,t),J4=async(i,t)=>{let e;const s=new Promise((r,l)=>{e=setTimeout(()=>l(new $4(`withTimeout: timed out after ${t}ms`)),t)});try{return await Promise.race([i,s])}finally{clearTimeout(e)}};class $4 extends Error{constructor(t){super(t),this.name="TimeoutError"}}class kp extends DOMException{constructor(t){super(t??"Operation aborted","AbortError")}}const t8=i=>i instanceof kp||(i instanceof Error||DOMException&&i instanceof DOMException)&&i.name==="AbortError";function p1(i,t){let e=!1;return new Promise((s,r)=>{t?.addEventListener("abort",()=>{e||r(new kp)},{once:!0}),i.then(l=>{s(l)}).catch(l=>{r(l)}).finally(()=>{e=!0})})}class Kd extends vl{documentId;#e;#t;#i;#n=ys();#s=6e4;#r={};#l=new Map;constructor(t,e={}){super(),this.documentId=t,"timeoutDelay"in e&&e.timeoutDelay&&(this.#s=e.timeoutDelay),"heads"in e&&(this.#i=e.heads);const s=ys();this.#e=fo(`automerge-repo:dochandle:${this.documentId.slice(0,5)}`);const r=this.#s,l=vT({actions:{onUpdate:al(({context:u,event:f})=>{const p=u.doc;c4(f,_1);const{callback:m}=f.payload;return{doc:m(p)}}),onDelete:al(()=>(this.emit("delete",{handle:this}),{doc:ys()})),onUnavailable:al(()=>({doc:ys()})),onUnload:al(()=>({doc:ys()}))}}).createMachine({initial:"idle",context:{documentId:t,doc:s},on:{UPDATE:{actions:"onUpdate"},UNLOAD:".unloaded",DELETE:".deleted"},states:{idle:{on:{BEGIN:"loading"}},loading:{on:{REQUEST:"requesting",DOC_READY:"ready"},after:{[r]:"unavailable"}},requesting:{on:{DOC_UNAVAILABLE:"unavailable",DOC_READY:"ready"},after:{[r]:"unavailable"}},unavailable:{entry:"onUnavailable",on:{DOC_READY:"ready"}},ready:{},unloaded:{entry:"onUnload",on:{RELOAD:"loading"}},deleted:{entry:"onDelete",type:"final"}}});this.#t=fh(l),this.#t.subscribe(u=>{const f=this.#n,p=u.context.doc;this.#e(` ${u.value} %o`,p),this.#d(f,p)}),this.#t.start(),this.begin()}get#a(){return this.#t?.getSnapshot().context.doc}get#o(){return this.#t?.getSnapshot().value}#h(t,e){const s=Array.isArray(t)?t:[t];return f4(this.#t,r=>s.some(l=>r.matches(l)),{timeout:this.#s*2,...e})}#c(t){let e=null;if(this.#t.send({type:_1,payload:{callback:s=>{try{return t(s)}catch(r){return e=r,s}}}}),e)throw e}#d(t,e){const s=mr(t),r=mr(e);if(!fy(_r(r),_r(s))){this.emit("heads-changed",{handle:this,doc:e});const u=og(e,s,r);u.length>0&&this.emit("change",{handle:this,doc:e,patches:u,patchInfo:{before:t,after:e,source:"change"}}),this.isReady()||this.#t.send({type:m1})}this.#n=e}get url(){return TT({documentId:this.documentId,heads:this.#i})}isReady=()=>this.inState(["ready"]);isUnloaded=()=>this.inState(["unloaded"]);isDeleted=()=>this.inState(["deleted"]);isUnavailable=()=>this.inState(["unavailable"]);inState=t=>t.some(e=>this.#t.getSnapshot().matches(e));get state(){return this.#t.getSnapshot().value}async whenReady(t=["ready"],e){try{await J4(this.#h(t,e),this.#s)}catch(s){throw t8(s)?new kp:(console.log(`error waiting for ${this.documentId} to be in one of states: ${t.join(", ")}`),s)}}doc(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#i?DO(this.#a,Ja(this.#i)):this.#a}docSync(){return console.warn("docSync is deprecated. Use doc() instead. This function will be removed as part of the 2.0 release."),this.doc()}heads(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#i?this.#i:_r(mr(this.#a))}begin(){this.#t.send({type:i8})}history(){if(this.isReady())return VO(this.#a).map(t=>_r([t]))}view(t){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling view().`);const e=JSON.stringify(t),s=this.#l.get(e);if(s)return s;const r=new Kd(this.documentId,{heads:t,timeoutDelay:this.#s});return r.update(()=>jd(this.#a)),r.doneLoading(),this.#l.set(e,r),r}diff(t,e){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling diff().`);const s=this.#a;if(!s)throw new Error("Document not available");if(t instanceof Kd){if(!t.isReady())throw new Error("Cannot diff against a handle that isn't ready");const u=t.heads();if(!u)throw new Error("Other document's heads not available");const f=Mx(jd(s),t.doc());return og(f,Ja(this.heads()),Ja(u))}const r=e?t:this.heads()||[],l=e||t;return og(s,Ja(r),Ja(l))}metadata(t){if(this.isReady())return t||(t=this.heads()[0]),qO(this.#a,Ja([t])[0])||void 0}update(t){this.#c(t)}doneLoading(){this.#t.send({type:m1})}setSyncInfo(t,e){this.#r[t]=e,this.emit("remote-heads",{storageId:t,heads:e.lastHeads,timestamp:e.lastSyncTimestamp})}getRemoteHeads(t){return this.#r[t]?.lastHeads}getSyncInfo(t){return this.#r[t]}change(t,e={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is in ${this.state} and not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);this.#c(s=>OO(s,e,t))}changeAt(t,e,s={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);let r;return this.#c(l=>{const u=RO(l,Ja(t),s,e);return r=u.newHeads?_r(u.newHeads):void 0,u.newDoc}),r}isReadOnly(){return!!this.#i}merge(t){if(!this.isReady()||!t.isReady())throw new Error("Both handles must be ready to merge");if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);const e=t.doc();this.update(s=>Mx(s,e))}unavailable(){this.#t.send({type:l8})}request(){this.#o==="loading"&&this.#t.send({type:s8})}unload(){this.#t.send({type:r8})}reload(){this.#t.send({type:o8})}delete(){this.#t.send({type:a8})}broadcast(t){this.emit("ephemeral-message-outbound",{handle:this,data:new Uint8Array(PT(t))})}metrics(){return F0(this.#a)}}const e8={REQUESTING:"requesting",READY:"ready",UNLOADED:"unloaded",DELETED:"deleted",UNAVAILABLE:"unavailable"},{REQUESTING:pd,READY:pr,UNLOADED:n8,DELETED:md,UNAVAILABLE:Wi}=e8,i8="BEGIN",s8="REQUEST",m1="DOC_READY",_1="UPDATE",r8="UNLOAD",o8="RELOAD",a8="DELETE",l8="DOC_UNAVAILABLE";class c8 extends vl{#e=new Map;#t=new Set;#i=new Map;#n=new Set;#s=new Map;#r=fo("automerge-repo:remote-heads-subscriptions");subscribeToRemotes(t){this.#r("subscribeToRemotes",t);const e=[];for(const s of t)this.#t.has(s)||(this.#t.add(s),e.push(s));e.length>0&&this.emit("change-remote-subs",{add:e,peers:Array.from(this.#n)})}unsubscribeFromRemotes(t){this.#r("subscribeToRemotes",t);const e=[];for(const s of t)this.#t.has(s)&&(this.#t.delete(s),this.#i.has(s)||e.push(s));e.length>0&&this.emit("change-remote-subs",{remove:e,peers:Array.from(this.#n)})}handleControlMessage(t){const e=[],s=[],r=[];if(this.#r("handleControlMessage",t),t.add)for(const l of t.add){let u=this.#i.get(l);(this.#t.has(l)||u)&&r.push(l),u||(u=new Set,this.#i.set(l,u),this.#t.has(l)||e.push(l)),u.add(t.senderId)}if(t.remove)for(const l of t.remove){const u=this.#i.get(l);u&&(u.delete(t.senderId),u.size==0&&!this.#t.has(l)&&s.push(l))}(e.length>0||s.length>0)&&this.emit("change-remote-subs",{peers:Array.from(this.#n),add:e,remove:s});for(const l of r){const u=this.#s.get(t.senderId);if(u)for(const f of u){const p=this.#e.get(f);if(!p)continue;const m=p.get(l);m&&this.emit("notify-remote-heads",{targetId:t.senderId,documentId:f,heads:m.lastHeads,timestamp:m.lastSyncTimestamp,storageId:l})}}}handleRemoteHeads(t){this.#r("handleRemoteHeads",t);const e=this.#a(t);for(const s of e)this.#t.has(s.storageId)&&this.emit("remote-heads-changed",s);for(const s of e)for(const r of this.#n)r!==t.senderId&&this.emit("notify-remote-heads",{targetId:r,documentId:s.documentId,heads:s.remoteHeads,timestamp:s.timestamp,storageId:s.storageId});for(const s of e){const r=this.#i.get(s.storageId);if(r)for(const l of r)this.#l(l,s.documentId)&&this.emit("notify-remote-heads",{targetId:l,documentId:s.documentId,heads:s.remoteHeads,timestamp:s.timestamp,storageId:s.storageId})}}handleImmediateRemoteHeadsChanged(t,e,s){this.#r("handleLocalHeadsChanged",t,e,s);const r=this.#e.get(t),l=Date.now();if(!r)this.#e.set(t,new Map([[e,{lastSyncTimestamp:l,lastHeads:s}]]));else{const f=r.get(e);(!f||f.lastSyncTimestamp<Date.now())&&r.set(e,{lastSyncTimestamp:Date.now(),lastHeads:s})}const u=this.#i.get(e);if(u)for(const f of u)this.#l(f,t)&&this.emit("notify-remote-heads",{targetId:f,documentId:t,heads:s,timestamp:l,storageId:e})}addGenerousPeer(t){this.#r("addGenerousPeer",t),this.#n.add(t),this.#t.size>0&&this.emit("change-remote-subs",{add:Array.from(this.#t),peers:[t]});for(const[e,s]of this.#e)for(const[r,{lastHeads:l,lastSyncTimestamp:u}]of s)this.emit("notify-remote-heads",{targetId:t,documentId:e,heads:l,timestamp:u,storageId:r})}removePeer(t){this.#r("removePeer",t);const e=[];this.#n.delete(t),this.#s.delete(t);for(const[s,r]of this.#i)r.has(t)&&(r.delete(t),r.size==0&&(e.push(s),this.#i.delete(s)));e.length>0&&this.emit("change-remote-subs",{remove:e,peers:Array.from(this.#n)})}subscribePeerToDoc(t,e){let s=this.#s.get(t);s||(s=new Set,this.#s.set(t,s)),s.add(e);const r=this.#e.get(e);if(r)for(const[l,u]of r){const f=this.#i.get(l);f&&f.has(t)&&this.emit("notify-remote-heads",{targetId:t,documentId:e,heads:u.lastHeads,timestamp:u.lastSyncTimestamp,storageId:l})}}#l(t,e){const s=this.#s.get(t);return s&&s.has(e)}#a(t){const e=[],{documentId:s,newHeads:r}=t;for(const[l,{heads:u,timestamp:f}]of Object.entries(r)){if(!this.#t.has(l)&&!this.#i.has(l))continue;let p=this.#e.get(s);p||(p=new Map,this.#e.set(s,p));const m=p.get(l);m&&m.lastSyncTimestamp>=f||(p.set(l,{lastSyncTimestamp:f,lastHeads:u}),e.push({documentId:s,storageId:l,remoteHeads:u,timestamp:f}))}return e}}const $g=(i,t)=>{let e=Date.now(),s,r;return function(...l){s=e+t-Date.now(),clearTimeout(r),r=setTimeout(()=>{i(...l),e=Date.now()},s)}},u8=i=>f8(i)||UT(i)||BT(i)||h8(i)||d8(i)||p8(i),h8=i=>i.type==="doc-unavailable",BT=i=>i.type==="request",f8=i=>i.type==="sync",UT=i=>i.type==="ephemeral",d8=i=>i.type==="remote-subscription-change",p8=i=>i.type==="remote-heads-changed",m8=i=>`${i.senderId}:${i.sessionId}`;class _8 extends vl{peerId;peerMetadata;#e;#t={};#i=0;#n=Math.random().toString(36).slice(2);#s={};adapters=[];constructor(t,e,s){super(),this.peerId=e,this.peerMetadata=s,this.#e=fo(`automerge-repo:network:${this.peerId}`),t.forEach(r=>this.addNetworkAdapter(r))}disconnect(){this.adapters.forEach(t=>t.disconnect())}reconnect(){this.adapters.forEach(t=>t.connect(this.peerId))}addNetworkAdapter(t){this.adapters.push(t),t.on("peer-candidate",({peerId:e,peerMetadata:s})=>{this.#e(`peer candidate: ${e} `),this.#t[e]||(this.#t[e]=t),this.emit("peer",{peerId:e,peerMetadata:s})}),t.on("peer-disconnected",({peerId:e})=>{this.#e(`peer disconnected: ${e} `),delete this.#t[e],this.emit("peer-disconnected",{peerId:e})}),t.on("message",e=>{if(!u8(e)){this.#e(`invalid message: ${JSON.stringify(e)}`);return}if(this.#e(`message from ${e.senderId}`),UT(e)){const s=m8(e);(this.#s[s]===void 0||e.count>this.#s[s])&&(this.#s[s]=e.count,this.emit("message",e));return}this.emit("message",e)}),t.on("close",()=>{this.#e("adapter closed"),Object.entries(this.#t).forEach(([e,s])=>{s===t&&delete this.#t[e]}),this.adapters=this.adapters.filter(e=>e!==t)}),this.peerMetadata.then(e=>{t.connect(this.peerId,e)}).catch(e=>{this.#e("error connecting to network",e)})}removeNetworkAdapter(t){this.adapters=this.adapters.filter(e=>e!==t),t.disconnect()}send(t){const e=this.#t[t.targetId];if(!e){this.#e(`Tried to send message but peer not found: ${t.targetId}`);return}const r=(l=>l.type==="ephemeral"?"count"in l?l:{...l,count:++this.#i,sessionId:this.#n,senderId:this.peerId}:{...l,senderId:this.peerId})(t);this.#e("sending message %o",r),e.send(r)}isReady=()=>this.adapters.every(t=>t.isReady());whenReady=async()=>Promise.all(this.adapters.map(t=>t.whenReady()))}function HT(i){let t=0;i.forEach(r=>{t+=r.length});const e=new Uint8Array(t);let s=0;return i.forEach(r=>{e.set(r,s),s+=r.length}),e}var Ad={exports:{}},g8=Ad.exports,g1;function y8(){return g1||(g1=1,(function(i){(function(t,e){var s={};e(s);var r=s.default;for(var l in s)r[l]=s[l];i.exports=r})(g8,function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(w,T,x,A,E){for(var I,B,D,F,R,H,Z,q,V,W,X,tt,P;E>=64;){for(I=T[0],B=T[1],D=T[2],F=T[3],R=T[4],H=T[5],Z=T[6],q=T[7],W=0;W<16;W++)X=A+W*4,w[W]=(x[X]&255)<<24|(x[X+1]&255)<<16|(x[X+2]&255)<<8|x[X+3]&255;for(W=16;W<64;W++)V=w[W-2],tt=(V>>>17|V<<15)^(V>>>19|V<<13)^V>>>10,V=w[W-15],P=(V>>>7|V<<25)^(V>>>18|V<<14)^V>>>3,w[W]=(tt+w[W-7]|0)+(P+w[W-16]|0);for(W=0;W<64;W++)tt=(((R>>>6|R<<26)^(R>>>11|R<<21)^(R>>>25|R<<7))+(R&H^~R&Z)|0)+(q+(e[W]+w[W]|0)|0)|0,P=((I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10))+(I&B^I&D^B&D)|0,q=Z,Z=H,H=R,R=F+tt|0,F=D,D=B,B=I,I=tt+P|0;T[0]+=I,T[1]+=B,T[2]+=D,T[3]+=F,T[4]+=R,T[5]+=H,T[6]+=Z,T[7]+=q,A+=64,E-=64}return A}var r=(function(){function w(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return w.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},w.prototype.clean=function(){for(var T=0;T<this.buffer.length;T++)this.buffer[T]=0;for(var T=0;T<this.temp.length;T++)this.temp[T]=0;this.reset()},w.prototype.update=function(T,x){if(x===void 0&&(x=T.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var A=0;if(this.bytesHashed+=x,this.bufferLength>0){for(;this.bufferLength<64&&x>0;)this.buffer[this.bufferLength++]=T[A++],x--;this.bufferLength===64&&(s(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(x>=64&&(A=s(this.temp,this.state,T,A,x),x%=64);x>0;)this.buffer[this.bufferLength++]=T[A++],x--;return this},w.prototype.finish=function(T){if(!this.finished){var x=this.bytesHashed,A=this.bufferLength,E=x/536870912|0,I=x<<3,B=x%64<56?64:128;this.buffer[A]=128;for(var D=A+1;D<B-8;D++)this.buffer[D]=0;this.buffer[B-8]=E>>>24&255,this.buffer[B-7]=E>>>16&255,this.buffer[B-6]=E>>>8&255,this.buffer[B-5]=E>>>0&255,this.buffer[B-4]=I>>>24&255,this.buffer[B-3]=I>>>16&255,this.buffer[B-2]=I>>>8&255,this.buffer[B-1]=I>>>0&255,s(this.temp,this.state,this.buffer,0,B),this.finished=!0}for(var D=0;D<8;D++)T[D*4+0]=this.state[D]>>>24&255,T[D*4+1]=this.state[D]>>>16&255,T[D*4+2]=this.state[D]>>>8&255,T[D*4+3]=this.state[D]>>>0&255;return this},w.prototype.digest=function(){var T=new Uint8Array(this.digestLength);return this.finish(T),T},w.prototype._saveState=function(T){for(var x=0;x<this.state.length;x++)T[x]=this.state[x]},w.prototype._restoreState=function(T,x){for(var A=0;A<this.state.length;A++)this.state[A]=T[A];this.bytesHashed=x,this.finished=!1,this.bufferLength=0},w})();t.Hash=r;var l=(function(){function w(T){this.inner=new r,this.outer=new r,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var x=new Uint8Array(this.blockSize);if(T.length>this.blockSize)new r().update(T).finish(x).clean();else for(var A=0;A<T.length;A++)x[A]=T[A];for(var A=0;A<x.length;A++)x[A]^=54;this.inner.update(x);for(var A=0;A<x.length;A++)x[A]^=106;this.outer.update(x),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var A=0;A<x.length;A++)x[A]=0}return w.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},w.prototype.clean=function(){for(var T=0;T<this.istate.length;T++)this.ostate[T]=this.istate[T]=0;this.inner.clean(),this.outer.clean()},w.prototype.update=function(T){return this.inner.update(T),this},w.prototype.finish=function(T){return this.outer.finished?this.outer.finish(T):(this.inner.finish(T),this.outer.update(T,this.digestLength).finish(T)),this},w.prototype.digest=function(){var T=new Uint8Array(this.digestLength);return this.finish(T),T},w})();t.HMAC=l;function u(w){var T=new r().update(w),x=T.digest();return T.clean(),x}t.hash=u,t.default=u;function f(w,T){var x=new l(w).update(T),A=x.digest();return x.clean(),A}t.hmac=f;function p(w,T,x,A){var E=A[0];if(E===0)throw new Error("hkdf: cannot expand more");T.reset(),E>1&&T.update(w),x&&T.update(x),T.update(A),T.finish(w),A[0]++}var m=new Uint8Array(t.digestLength);function v(w,T,x,A){T===void 0&&(T=m),A===void 0&&(A=32);for(var E=new Uint8Array([1]),I=f(T,w),B=new l(I),D=new Uint8Array(B.digestLength),F=D.length,R=new Uint8Array(A),H=0;H<A;H++)F===D.length&&(p(D,B,x,E),F=0),R[H]=D[F++];return B.clean(),D.fill(0),E.fill(0),R}t.hkdf=v;function y(w,T,x,A){for(var E=new l(w),I=E.digestLength,B=new Uint8Array(4),D=new Uint8Array(I),F=new Uint8Array(I),R=new Uint8Array(A),H=0;H*I<A;H++){var Z=H+1;B[0]=Z>>>24&255,B[1]=Z>>>16&255,B[2]=Z>>>8&255,B[3]=Z>>>0&255,E.reset(),E.update(T),E.update(B),E.finish(F);for(var q=0;q<I;q++)D[q]=F[q];for(var q=2;q<=x;q++){E.reset(),E.update(F).finish(F);for(var V=0;V<I;V++)D[V]^=F[V]}for(var q=0;q<I&&H*I+q<A;q++)R[H*I+q]=D[q]}for(var H=0;H<I;H++)D[H]=F[H]=0;for(var H=0;H<4;H++)B[H]=0;return E.clean(),R}t.pbkdf2=y})})(Ad)),Ad.exports}var v8=y8();function VT(i){const t=v8.hash(i);return w8(t)}function b8(i){const t=new TextEncoder,e=HT(i.map(s=>t.encode(s)));return VT(e)}function w8(i){return Array.from(i,t=>t.toString(16).padStart(2,"0")).join("")}class x8 extends vl{#e;#t=new Map;#i=new Map;#n=!1;#s=fo("automerge-repo:storage-subsystem");constructor(t){super(),this.#e=t}async id(){const t=await this.#e.load(["storage-adapter-id"]);let e;return t?e=new TextDecoder().decode(t):(e=wT(),await this.#e.save(["storage-adapter-id"],new TextEncoder().encode(e))),e}async load(t,e){const s=[t,e];return await this.#e.load(s)}async save(t,e,s){const r=[t,e];await this.#e.save(r,s)}async remove(t,e){const s=[t,e];await this.#e.remove(s)}async loadDocData(t){const e=await this.#e.loadRange([t,"snapshot"]),s=await this.#e.loadRange([t,"incremental"]),r=[],l=[];for(const u of e)u.data!==void 0&&(l.push({key:u.key,type:"snapshot",size:u.data.length}),r.push(u.data));for(const u of s)u.data!==void 0&&(l.push({key:u.key,type:"incremental",size:u.data.length}),r.push(u.data));return this.#i.set(t,l),r.length===0?null:HT(r)}async loadDoc(t){const e=await this.loadDocData(t);if(!e)return null;const s=performance.now(),r=X0(ys(),e),l=performance.now();return this.emit("document-loaded",{documentId:t,durationMillis:l-s,...F0(r)}),this.#t.set(t,mr(r)),r}async saveDoc(t,e){if(!this.#a(t,e))return;const s=this.#i.get(t)??[];this.#o(s)?await this.#l(t,e,s):await this.#r(t,e),this.#t.set(t,mr(e))}async removeDoc(t){await this.#e.removeRange([t,"snapshot"]),await this.#e.removeRange([t,"incremental"]),await this.#e.removeRange([t,"sync-state"])}async#r(t,e){const s=this.#t.get(t)??[],r=performance.now(),l=HO(e,s),u=performance.now();if(this.emit("doc-saved",{documentId:t,durationMillis:u-r,sinceHeads:s}),l&&l.length>0){const f=[t,"incremental",VT(l)];this.#s(`Saving incremental ${f} for document ${t}`),await this.#e.save(f,l),this.#i.has(t)||this.#i.set(t,[]),this.#i.get(t).push({key:f,type:"incremental",size:l.length}),this.#t.set(t,mr(e))}else return Promise.resolve()}async#l(t,e,s){this.#n=!0;const r=performance.now(),l=YS(e),u=performance.now();this.emit("doc-compacted",{documentId:t,durationMillis:u-r});const f=b8(mr(e)),p=[t,"snapshot",f],m=new Set(s.map(y=>y.key).filter(y=>y[2]!==f));this.#s(`Saving snapshot ${p} for document ${t}`),this.#s(`deleting old chunks ${Array.from(m)}`),await this.#e.save(p,l);for(const y of m)await this.#e.remove(y);const v=this.#i.get(t)?.filter(y=>!m.has(y.key))??[];v.push({key:p,type:"snapshot",size:l.length}),this.#i.set(t,v),this.#n=!1}async loadSyncState(t,e){const s=[t,"sync-state",e];try{const r=await this.#e.load(s);return r?FS(r):void 0}catch{this.#s(`Error loading sync state for ${t} from ${e}`);return}}async saveSyncState(t,e,s){const r=[t,"sync-state",e];await this.#e.save(r,XS(s))}#a(t,e){const s=this.#t.get(t);if(!s)return!0;const r=mr(e);return!fy(_r(r),_r(s))}#o(t){if(this.#n)return!1;let e=0,s=0;for(const r of t)r.type==="snapshot"?e+=r.size:s+=r.size;return e<1024||s>=e}}class qT extends vl{}class S8 extends qT{#e;syncDebounceRate=100;#t=[];#i={};#n={};#s={};#r=[];#l;#a=!1;#o;#h;constructor({handle:t,peerId:e,onLoadSyncState:s}){super(),this.#l=e,this.#o=t,this.#h=s??(()=>Promise.resolve(void 0));const r=t.documentId.slice(0,5);this.#e=fo(`automerge-repo:docsync:${r}`),t.on("change",$g(()=>this.#c(),this.syncDebounceRate)),t.on("ephemeral-message-outbound",l=>this.#d(l)),(async()=>this.#b())()}get peerStates(){return this.#n}get documentId(){return this.#o.documentId}async#c(){try{await this.#o.whenReady();const t=this.#o.doc();this.#t.forEach(e=>this.#y(e,t))}catch{console.log("sync with peers threw an exception")}}async#d({data:t}){this.#e("broadcastToPeers",this.#t),this.#t.forEach(e=>this.#_(e,t))}#_(t,e){this.#e(`sendEphemeralMessage ->${t}`);const s={type:"ephemeral",targetId:t,documentId:this.#o.documentId,data:e};this.emit("message",s)}#p(t,e){this.#u(t),t in this.#n||(this.#n[t]="unknown");const s=this.#s[t];if(s){e(s);return}let r=this.#i[t];r||(this.#h(t).then(l=>{this.#g(t,l??BO())}).catch(l=>{this.#e(`Error loading sync state for ${t}: ${l}`)}),r=this.#i[t]=[]),r.push(e)}#u(t){this.#t.includes(t)||(this.#t.push(t),this.emit("open-doc",{documentId:this.documentId,peerId:t}))}#g(t,e){const s=this.#i[t];if(s)for(const r of s)r(e);delete this.#i[t],this.#s[t]=e}#m(t,e){this.#s[t]=e,this.emit("sync-state",{peerId:t,syncState:e,documentId:this.#o.documentId})}#y(t,e){this.#e(`sendSyncMessage ->${t}`),this.#p(t,s=>{const r=performance.now(),[l,u]=zO(e,s),f=performance.now();if(this.emit("metrics",{type:"generate-sync-message",documentId:this.#o.documentId,durationMillis:f-r,forPeer:t}),this.#m(t,l),u){const p=mr(e).length===0;!this.#o.isReady()&&p&&l.sharedHeads.length===0&&!Object.values(this.#n).includes("has")&&this.#n[t]==="unknown"?this.emit("message",{type:"request",targetId:t,documentId:this.#o.documentId,data:u}):this.emit("message",{type:"sync",targetId:t,data:u,documentId:this.#o.documentId}),p||(this.#n[t]="has")}})}hasPeer(t){return this.#t.includes(t)}async beginSync(t){this.#o.whenReady([pr,pd,Wi]).then(()=>{this.#a=!0,this.#f()}).catch(s=>{console.log("caught whenready",s),this.#a=!0,this.#f()}),this.#t.some(s=>this.#n[s]=="has")&&await this.#o.whenReady(),t.forEach(s=>{this.#p(s,r=>{const l=FS(XS(r));this.#m(s,l),this.#o.whenReady([pr,pd,Wi]).then(()=>{const u=this.#o.isReady()?this.#o.doc():ys(),f=t.every(m=>this.#n[m]in["unavailable","wants"]);u===void 0&&f||this.#y(s,u??ys())}).catch(u=>{this.#e(`Error loading doc for ${s}: ${u}`)})})})}endSync(t){this.#e(`removing peer ${t}`),this.#t=this.#t.filter(e=>e!==t),delete this.#n[t],this.#f()}receiveMessage(t){switch(t.type){case"sync":case"request":this.receiveSyncMessage(t);break;case"ephemeral":this.receiveEphemeralMessage(t);break;case"doc-unavailable":this.#n[t.senderId]="unavailable",this.#f();break;default:throw new Error(`unknown message type: ${t}`)}}receiveEphemeralMessage(t){if(t.documentId!==this.#o.documentId)throw new Error("channelId doesn't match documentId");const{senderId:e,data:s}=t,r=RT(new Uint8Array(s));this.#o.emit("ephemeral-message",{handle:this.#o,senderId:e,message:r}),this.#t.forEach(l=>{l!==e&&this.emit("message",{...t,targetId:l})})}receiveSyncMessage(t){if(t.documentId!==this.#o.documentId)throw new Error("channelId doesn't match documentId");if(!this.#o.inState([pr,pd,Wi])){this.#r.push({message:t,received:new Date});return}this.#b(),this.#v(t)}#v(t){BT(t)&&(this.#n[t.senderId]="wants"),this.#f(),UO(t.data).heads.length>0&&(this.#n[t.senderId]="has"),this.#p(t.senderId,e=>{this.#o.update(s=>{const r=performance.now(),[l,u]=PO(s,e,t.data),f=performance.now();return this.emit("metrics",{type:"receive-sync-message",documentId:this.#o.documentId,durationMillis:f-r,fromPeer:t.senderId,...F0(s)}),this.#m(t.senderId,u),this.#y(t.senderId,s),l}),this.#f()})}#f(){this.#a&&this.#o.inState([pd,Wi])&&this.#t.every(t=>this.#n[t]==="unavailable"||this.#n[t]==="wants")&&(this.#t.filter(t=>this.#n[t]==="wants").forEach(t=>{this.#n[t]="unavailable";const e={type:"doc-unavailable",documentId:this.#o.documentId,targetId:t};this.emit("message",e)}),this.#o.unavailable())}#b(){for(const t of this.#r)this.#v(t.message);this.#r=[]}metrics(){return{peers:this.#t,size:this.#o.metrics()}}}const ea=fo("automerge-repo:collectionsync");class T8 extends qT{repo;#e=new Set;docSynchronizers={};#t={};#i;#n=new Map;constructor(t,e=[]){super(),this.repo=t,this.#i=e.map(s=>Sc(s).documentId)}#s(t){return this.docSynchronizers[t.documentId]||(this.docSynchronizers[t.documentId]=this.#r(t)),this.docSynchronizers[t.documentId]}#r(t){const e=new S8({handle:t,peerId:this.repo.networkSubsystem.peerId,onLoadSyncState:async s=>{if(!this.repo.storageSubsystem)return;const{storageId:r,isEphemeral:l}=this.repo.peerMetadataByPeerId[s]||{};if(!(!r||l))return this.repo.storageSubsystem.loadSyncState(t.documentId,r)}});return e.on("message",s=>this.emit("message",s)),e.on("open-doc",s=>this.emit("open-doc",s)),e.on("sync-state",s=>this.emit("sync-state",s)),e.on("metrics",s=>this.emit("metrics",s)),e}async#l(t){const e=Array.from(this.#e),s=[];for(const r of e)await this.#a(r,t)&&s.push(r);return s}async receiveMessage(t){ea(`onSyncMessage: ${t.senderId}, ${t.documentId}, ${"data"in t?t.data.byteLength+"bytes":""}`);const e=t.documentId;if(!e)throw new Error("received a message with an invalid documentId");if(this.#i.includes(e)){this.emit("metrics",{type:"doc-denied",documentId:e}),this.emit("message",{type:"doc-unavailable",documentId:e,targetId:t.senderId});return}if(t.type==="request"&&(this.#n.has(e)||this.#n.set(e,new Set),this.#n.get(e)?.add(t.senderId)),!await this.repo.shareConfig.access(t.senderId,e)){ea("access denied"),this.emit("message",{type:"doc-unavailable",documentId:e,targetId:t.senderId});return}this.#t[e]=!0;const r=await this.repo.find(e,{allowableStates:["ready","unavailable","requesting"]}),l=this.#s(r);l.receiveMessage(t);const u=await this.#l(e);l.beginSync(u.filter(f=>!l.hasPeer(f)))}addDocument(t){if(this.#t[t.documentId])return;this.#t[t.documentId]=!0;const e=this.#s(t);this.#l(t.documentId).then(s=>{e.beginSync(s)})}removeDocument(t){ea(`removing document ${t}`);const e=this.docSynchronizers[t];e!==void 0&&this.peers.forEach(s=>e.endSync(s)),delete this.docSynchronizers[t],delete this.#t[t]}addPeer(t){if(ea(`adding ${t} & synchronizing with them`),!this.#e.has(t)){this.#e.add(t);for(const e of Object.values(this.docSynchronizers)){const{documentId:s}=e;this.#a(t,s).then(r=>{r&&e.beginSync([t])})}}}removePeer(t){ea(`removing peer ${t}`),this.#e.delete(t);for(const e of this.#n.values())e.delete(t);for(const e of Object.values(this.docSynchronizers))e.endSync(t)}get peers(){return Array.from(this.#e)}async reevaluateDocumentShare(){const t=Array.from(this.#e),e=[];for(const s of Object.values(this.docSynchronizers)){const r=s.documentId;e.push((async()=>{for(const l of t){const u=await this.#a(l,r),f=s.hasPeer(l);ea(`reevaluateDocumentShare: ${l} for ${r}, shouldShare: ${u}, isAlreadySyncing: ${f}`),u&&!f?(ea(`reevaluateDocumentShare: starting sync with ${l} for ${r}`),s.beginSync([l])):!u&&f&&(ea(`reevaluateDocumentShare: stopping sync with ${l} for ${r}`),s.endSync(l))}})().catch(l=>{console.log(`error reevaluating document share for ${r}: ${l}`)}))}await Promise.allSettled(e)}metrics(){return Object.fromEntries(Object.entries(this.docSynchronizers).map(([t,e])=>[t,e.metrics()]))}async#a(t,e){const[s,r]=await Promise.all([this.repo.shareConfig.announce(t,e),this.repo.shareConfig.access(t,e)]),l=this.#n.get(e)?.has(t)??!1;return s||r&&l}}function A8(){return"peer-"+Math.random().toString(36).slice(4)}class E8 extends vl{#e;networkSubsystem;storageSubsystem;#t;#i;#n={};synchronizer;#s={announce:async()=>!0,access:async()=>!0};peerMetadataByPeerId={};#r=new c8;#l=!1;#a={};#o={};#h;constructor({storage:t,network:e=[],peerId:s=A8(),sharePolicy:r,shareConfig:l,isEphemeral:u=t===void 0,enableRemoteHeadsGossiping:f=!1,denylist:p=[],saveDebounceRate:m=100,idFactory:v}={}){if(super(),this.#l=f,this.#e=fo("automerge-repo:repo"),this.#h=v||null,r!=null&&l!=null)throw new Error("cannot provide both sharePolicy and shareConfig at once");r&&(this.#s={announce:r,access:async()=>!0}),l&&(this.#s=l),this.on("delete-document",({documentId:x})=>{this.synchronizer.removeDocument(x),y&&y.removeDoc(x).catch(A=>{this.#e("error deleting document",{documentId:x,err:A})})}),this.synchronizer=new T8(this,p),this.synchronizer.on("message",x=>{this.#e(`sending ${x.type} message to ${x.targetId}`),T.send(x)}),this.synchronizer.on("metrics",x=>this.emit("doc-metrics",x)),this.#l&&this.synchronizer.on("open-doc",({peerId:x,documentId:A})=>{this.#r.subscribePeerToDoc(x,A)});const y=t?new x8(t):void 0;y&&(y.on("document-loaded",x=>this.emit("doc-metrics",{type:"doc-loaded",...x})),y.on("doc-compacted",x=>this.emit("doc-metrics",{type:"doc-compacted",...x})),y.on("doc-saved",x=>this.emit("doc-metrics",{type:"doc-saved",...x}))),this.storageSubsystem=y,this.#t=m,this.storageSubsystem?this.#i=({handle:x,doc:A})=>{let E=this.#o[x.documentId];E||(E=$g(({doc:I,handle:B})=>{this.storageSubsystem.saveDoc(B.documentId,I)},this.#t),this.#o[x.documentId]=E),E({handle:x,doc:A})}:this.#i=()=>{};const w=(async()=>({storageId:await y?.id(),isEphemeral:u}))(),T=new _8(e,s,w);this.networkSubsystem=T,T.on("peer",async({peerId:x,peerMetadata:A})=>{this.#e("peer connected",{peerId:x}),A&&(this.peerMetadataByPeerId[x]={...A}),this.#s.announce(x).then(E=>{E&&this.#l&&this.#r.addGenerousPeer(x)}).catch(E=>{console.log("error in share policy",{err:E})}),this.synchronizer.addPeer(x)}),T.on("peer-disconnected",({peerId:x})=>{this.synchronizer.removePeer(x),this.#r.removePeer(x)}),T.on("message",async x=>{this.#d(x)}),this.synchronizer.on("sync-state",x=>{this.#p(x);const A=this.#n[x.documentId],{storageId:E}=this.peerMetadataByPeerId[x.peerId]||{};if(!E)return;const I=A.getSyncInfo(E)?.lastHeads;x.syncState.theirHeads&&(!I||!fy(I,_r(x.syncState.theirHeads)))&&x.syncState.theirHeads&&(A.setSyncInfo(E,{lastHeads:_r(x.syncState.theirHeads),lastSyncTimestamp:Date.now()}),E&&this.#l&&this.#r.handleImmediateRemoteHeadsChanged(x.documentId,E,_r(x.syncState.theirHeads)))}),this.#l&&(this.#r.on("notify-remote-heads",x=>{this.networkSubsystem.send({type:"remote-heads-changed",targetId:x.targetId,documentId:x.documentId,newHeads:{[x.storageId]:{heads:x.heads,timestamp:x.timestamp}}})}),this.#r.on("change-remote-subs",x=>{this.#e("change-remote-subs",x);for(const A of x.peers)this.networkSubsystem.send({type:"remote-subscription-change",targetId:A,add:x.add,remove:x.remove})}),this.#r.on("remote-heads-changed",({documentId:x,storageId:A,remoteHeads:E,timestamp:I})=>{this.#n[x].setSyncInfo(A,{lastHeads:E,lastSyncTimestamp:I})}))}#c(t){this.storageSubsystem&&(t.listeners("heads-changed").some(s=>s===this.#i)||t.on("heads-changed",this.#i)),this.synchronizer.addDocument(t)}#d(t){switch(t.type){case"remote-subscription-change":this.#l&&this.#r.handleControlMessage(t);break;case"remote-heads-changed":this.#l&&this.#r.handleRemoteHeads(t);break;case"sync":case"request":case"ephemeral":case"doc-unavailable":this.synchronizer.receiveMessage(t).catch(e=>{console.log("error receiving message",{err:e,message:t})})}}#_={};#p(t){if(!this.storageSubsystem)return;const{storageId:e,isEphemeral:s}=this.peerMetadataByPeerId[t.peerId]||{};if(!e||s)return;let r=this.#_[e];r||(r=this.#_[e]=$g(({documentId:l,syncState:u})=>{this.storageSubsystem.saveSyncState(l,e,u)},this.#t)),r(t)}#u({documentId:t}){if(this.#n[t])return this.#n[t];if(!t)throw new Error(`Invalid documentId ${t}`);const e=new Kd(t);return this.#n[t]=e,e}get handles(){return this.#n}get peers(){return this.synchronizer.peers}get peerId(){return this.networkSubsystem.peerId}get sharePolicy(){return this.#s.announce}set sharePolicy(t){this.#s.announce=t}get shareConfig(){return this.#s}set shareConfig(t){this.#s=t}getStorageIdOfPeer(t){return this.peerMetadataByPeerId[t]?.storageId}create(t){let e;t?e=Cx(t):e=Lx(ys());const{documentId:s}=Sc(n1()),r=this.#u({documentId:s});return this.#c(r),r.update(()=>e),r.doneLoading(),r}async create2(t){let e;t?e=Cx(t):e=Lx(ys());let{documentId:s}=Sc(n1());if(this.#h){const l=await this.#h(mr(e));s=dh(l)}const r=this.#u({documentId:s});return this.#c(r),r.update(()=>e),r.doneLoading(),r}clone(t){if(!t.isReady())throw new Error(`Cloned handle is not yet in ready state.
        (Try await handle.whenReady() first.)`);const e=t.doc(),s=this.create();return s.update(()=>jd(e)),s}findWithProgress(t,e={}){const{signal:s}=e,{documentId:r,heads:l}=AT(t)?Sc(t):{documentId:hd(t),heads:void 0};if(this.#n[r]){const y=this.#n[r];if(y.state===Wi)return{state:"unavailable",error:new Error(`Document ${t} is unavailable`),handle:y};if(y.state===md)return{state:"failed",error:new Error(`Document ${t} was deleted`),handle:y};if(y.state===pr)return{state:"ready",handle:l?y.view(l):y}}const u=this.#a[r];if(u){const y=this.#n[r];if(y&&(y.state===pr||y.state===Wi||y.state===md||y.state==="loading"))return u}const f=this.#u({documentId:r}),p={state:"loading",progress:0,handle:f},m={subscribers:new Set,currentProgress:void 0,notify:y=>{m.currentProgress=y,m.subscribers.forEach(w=>w(y)),this.#a[r]=y},peek:()=>m.currentProgress||p,subscribe:y=>(m.subscribers.add(y),()=>m.subscribers.delete(y))};m.notify(p),this.#g(t,r,f,m,s?p1(new Promise(()=>{}),s):new Promise(()=>{}));const v={...p,peek:m.peek,subscribe:m.subscribe};return this.#a[r]=v,v}async#g(t,e,s,r,l){try{r.notify({state:"loading",progress:25,handle:s});const u=await(this.storageSubsystem?this.storageSubsystem.loadDoc(s.documentId):Promise.resolve(null)),f=await Promise.race([u,l]);if(f?(s.update(()=>f),s.doneLoading(),r.notify({state:"loading",progress:50,handle:s})):(await Promise.race([this.networkSubsystem.whenReady(),l]),s.request(),r.notify({state:"loading",progress:75,handle:s})),this.#c(s),await Promise.race([s.whenReady([pr,Wi]),l]),s.state===Wi){const p={state:"unavailable",handle:s};r.notify(p);return}if(s.state===md)throw new Error(`Document ${t} was deleted`);r.notify({state:"ready",handle:s})}catch(u){r.notify({state:"failed",error:u instanceof Error||u instanceof DOMException?u:new Error(String(u)),handle:this.#u({documentId:e})})}}async find(t,e={}){const{allowableStates:s=["ready"],signal:r}=e;if(r?.aborted)throw new kp;const l=this.findWithProgress(t,{signal:r});if("subscribe"in l)return this.#c(l.handle),new Promise((u,f)=>{const p=l.subscribe(m=>{s.includes(m.handle.state)?(p(),u(m.handle)):m.state==="unavailable"?(p(),f(new Error(`Document ${t} is unavailable`))):m.state==="failed"&&(p(),f(m.error))})});if(l.handle.state===pr)return l.handle;if(await l.handle.whenReady([pr,Wi]),l.handle.state==="unavailable"&&!s.includes(Wi))throw new Error(`Document ${t} is unavailable`);return l.handle}async#m(t){if(this.#n[t])return this.#n[t];const e=this.#u({documentId:t}),s=await(this.storageSubsystem?this.storageSubsystem.loadDoc(e.documentId):Promise.resolve(null));return s?(e.update(()=>s),e.doneLoading()):(await this.networkSubsystem.whenReady(),e.request()),this.#c(e),e}async findClassic(t,e={}){const s=hd(t),{allowableStates:r,signal:l}=e;return p1((async()=>{const u=await this.#m(s);if(!r&&(await u.whenReady([pr,Wi]),u.state===Wi&&!l?.aborted))throw new Error(`Document ${t} is unavailable`);return u})(),l)}delete(t){const e=hd(t);this.#u({documentId:e}).delete(),delete this.#n[e],delete this.#a[e],delete this.#o[e],this.emit("delete-document",{documentId:e})}async export(t){const e=hd(t),r=this.#u({documentId:e}).doc();return YS(r)}import(t,e){const s=e?.docId;if(s!=null){const r=this.#u({documentId:s});return r.update(l=>X0(l,t)),this.#c(r),r}else{const r=IO(t),l=this.create();return l.update(()=>jd(r)),l}}subscribeToRemotes=t=>{this.#l?(this.#e("subscribeToRemotes",{remotes:t}),this.#r.subscribeToRemotes(t)):this.#e("WARN: subscribeToRemotes called but remote heads gossiping is not enabled")};storageId=async()=>{if(this.storageSubsystem)return this.storageSubsystem.id()};async flush(t){if(!this.storageSubsystem)return;const e=t?t.map(s=>this.#n[s]):Object.values(this.#n);await Promise.all(e.map(async s=>this.storageSubsystem.saveDoc(s.documentId,s.doc())))}async removeFromCache(t){if(!this.#n[t]){this.#e(`WARN: removeFromCache called but handle not found in handleCache for documentId: ${t}`);return}const e=this.#u({documentId:t});await e.whenReady([pr,n8,md,Wi]),e.doc()?(e.isReady()?e.unload():this.#e(`WARN: removeFromCache called but handle for documentId: ${t} in unexpected state: ${e.state}`),delete this.#n[t],delete this.#a[t],delete this.#o[t],this.synchronizer.removeDocument(t)):this.#e(`WARN: removeFromCache called but doc undefined for documentId: ${t}`)}shutdown(){return this.networkSubsystem.adapters.forEach(t=>{t.disconnect()}),this.flush()}metrics(){return{documents:this.synchronizer.metrics()}}shareConfigChanged(){this.synchronizer.reevaluateDocumentShare()}}class C8 extends vl{peerId;peerMetadata}const L8="/HereHear/build/feature/timelineSyncNTP/assets/automerge_wasm_bg-XDrN0Bqn.wasm",M8=async(i={},t)=>{let e;if(t.startsWith("data:")){const s=t.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(s,"base64");else if(typeof atob=="function"){const l=atob(s);r=new Uint8Array(l.length);for(let u=0;u<l.length;u++)r[u]=l.charCodeAt(u)}else throw new Error("Cannot decode base64-encoded data URL");e=await WebAssembly.instantiate(r,i)}else{const s=await fetch(t),r=s.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))e=await WebAssembly.instantiateStreaming(s,i);else{const l=await s.arrayBuffer();e=await WebAssembly.instantiate(l,i)}}return e.instance.exports};class gs{static __wrap(t){t=t>>>0;const e=Object.create(gs.prototype);return e.__wbg_ptr=t,y1.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,y1.unregister(this),t}free(){const t=this.__destroy_into_raw();pt.__wbg_automerge_free(t,0)}applyAndReturnPatches(t,e){const s=pt.automerge_applyAndReturnPatches(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}applyChanges(t){const e=pt.automerge_applyChanges(this.__wbg_ptr,t);if(e[1])throw At(e[0])}applyPatches(t,e){const s=pt.automerge_applyPatches(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}clone(t){var e=Ai(t)?0:Hs(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),s=Fi;const r=pt.automerge_clone(this.__wbg_ptr,e,s);if(r[2])throw At(r[1]);return gs.__wrap(r[0])}commit(t,e){var s=Ai(t)?0:Hs(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=Fi;return pt.automerge_commit(this.__wbg_ptr,s,r,!Ai(e),Ai(e)?0:e)}delete(t,e){const s=pt.automerge_delete(this.__wbg_ptr,t,e);if(s[1])throw At(s[0])}diff(t,e){const s=pt.automerge_diff(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}diffIncremental(){const t=pt.automerge_diffIncremental(this.__wbg_ptr);if(t[2])throw At(t[1]);return At(t[0])}diffPath(t,e,s,r){const l=pt.automerge_diffPath(this.__wbg_ptr,t,e,s,r);if(l[2])throw At(l[1]);return At(l[0])}dump(){pt.automerge_dump(this.__wbg_ptr)}emptyChange(t,e){var s=Ai(t)?0:Hs(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=Fi;return pt.automerge_emptyChange(this.__wbg_ptr,s,r,!Ai(e),Ai(e)?0:e)}enableFreeze(t){const e=pt.automerge_enableFreeze(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return e[0]!==0}fork(t,e){var s=Ai(t)?0:Hs(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=Fi;const l=pt.automerge_fork(this.__wbg_ptr,s,r,e);if(l[2])throw At(l[1]);return gs.__wrap(l[0])}generateSyncMessage(t){return il(t,ki),pt.automerge_generateSyncMessage(this.__wbg_ptr,t.__wbg_ptr)}get(t,e,s){const r=pt.automerge_get(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}getActorId(){let t,e;try{const s=pt.automerge_getActorId(this.__wbg_ptr);return t=s[0],e=s[1],vs(s[0],s[1])}finally{pt.__wbindgen_free(t,e,1)}}getAll(t,e,s){const r=pt.automerge_getAll(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}getBlock(t,e,s){const r=pt.automerge_getBlock(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}getChangeByHash(t){const e=pt.automerge_getChangeByHash(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getChangeMetaByHash(t){const e=pt.automerge_getChangeMetaByHash(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getChanges(t){const e=pt.automerge_getChanges(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getChangesAdded(t){return il(t,gs),pt.automerge_getChangesAdded(this.__wbg_ptr,t.__wbg_ptr)}getChangesMeta(t){const e=pt.automerge_getChangesMeta(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getCursor(t,e,s,r){let l,u;try{const m=pt.automerge_getCursor(this.__wbg_ptr,t,e,s,r);var f=m[0],p=m[1];if(m[3])throw f=0,p=0,At(m[2]);return l=f,u=p,vs(f,p)}finally{pt.__wbindgen_free(l,u,1)}}getCursorPosition(t,e,s){const r=pt.automerge_getCursorPosition(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return r[0]}getDecodedChangeByHash(t){const e=pt.automerge_getDecodedChangeByHash(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getHeads(){return pt.automerge_getHeads(this.__wbg_ptr)}getLastLocalChange(){return pt.automerge_getLastLocalChange(this.__wbg_ptr)}getMissingDeps(t){const e=pt.automerge_getMissingDeps(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getWithType(t,e,s){const r=pt.automerge_getWithType(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}hasOurChanges(t){return il(t,ki),pt.automerge_hasOurChanges(this.__wbg_ptr,t.__wbg_ptr)!==0}increment(t,e,s){const r=pt.automerge_increment(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}insert(t,e,s,r){const l=pt.automerge_insert(this.__wbg_ptr,t,e,s,r);if(l[1])throw At(l[0])}insertObject(t,e,s){let r,l;try{const p=pt.automerge_insertObject(this.__wbg_ptr,t,e,s);var u=p[0],f=p[1];if(p[3])throw u=0,f=0,At(p[2]);return r=u,l=f,vs(u,f)}finally{pt.__wbindgen_free(r,l,1)}}integrate(){pt.automerge_integrate(this.__wbg_ptr)}isolate(t){const e=pt.automerge_isolate(this.__wbg_ptr,t);if(e[1])throw At(e[0])}joinBlock(t,e){const s=pt.automerge_joinBlock(this.__wbg_ptr,t,e);if(s[1])throw At(s[0])}keys(t,e){const s=pt.automerge_keys(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}length(t,e){const s=pt.automerge_length(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return s[0]}loadIncremental(t){const e=pt.automerge_loadIncremental(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return e[0]}mark(t,e,s,r,l){const u=pt.automerge_mark(this.__wbg_ptr,t,e,s,r,l);if(u[1])throw At(u[0])}marks(t,e){const s=pt.automerge_marks(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}marksAt(t,e,s){const r=pt.automerge_marksAt(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}materialize(t,e,s){const r=pt.automerge_materialize(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}merge(t){il(t,gs);const e=pt.automerge_merge(this.__wbg_ptr,t.__wbg_ptr);if(e[2])throw At(e[1]);return At(e[0])}static new(t){var e=Ai(t)?0:Hs(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),s=Fi;const r=pt.automerge_new(e,s);if(r[2])throw At(r[1]);return gs.__wrap(r[0])}objInfo(t,e){const s=pt.automerge_objInfo(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}pendingOps(){return pt.automerge_pendingOps(this.__wbg_ptr)}push(t,e,s){const r=pt.automerge_push(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}pushObject(t,e){let s,r;try{const f=pt.automerge_pushObject(this.__wbg_ptr,t,e);var l=f[0],u=f[1];if(f[3])throw l=0,u=0,At(f[2]);return s=l,r=u,vs(l,u)}finally{pt.__wbindgen_free(s,r,1)}}put(t,e,s,r){const l=pt.automerge_put(this.__wbg_ptr,t,e,s,r);if(l[1])throw At(l[0])}putObject(t,e,s){const r=pt.automerge_putObject(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}receiveSyncMessage(t,e){il(t,ki);const s=pt.automerge_receiveSyncMessage(this.__wbg_ptr,t.__wbg_ptr,e);if(s[1])throw At(s[0])}registerDatatype(t,e,s){const r=pt.automerge_registerDatatype(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}resetDiffCursor(){pt.automerge_resetDiffCursor(this.__wbg_ptr)}rollback(){return pt.automerge_rollback(this.__wbg_ptr)}save(){return pt.automerge_save(this.__wbg_ptr)}saveAndVerify(){const t=pt.automerge_saveAndVerify(this.__wbg_ptr);if(t[2])throw At(t[1]);return At(t[0])}saveBundle(t){const e=pt.automerge_saveBundle(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}saveIncremental(){return pt.automerge_saveIncremental(this.__wbg_ptr)}saveNoCompress(){return pt.automerge_saveNoCompress(this.__wbg_ptr)}saveSince(t){const e=pt.automerge_saveSince(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}spans(t,e){const s=pt.automerge_spans(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}splice(t,e,s,r){const l=pt.automerge_splice(this.__wbg_ptr,t,e,s,r);if(l[1])throw At(l[0])}splitBlock(t,e,s){const r=pt.automerge_splitBlock(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}stats(){return pt.automerge_stats(this.__wbg_ptr)}text(t,e){let s,r;try{const f=pt.automerge_text(this.__wbg_ptr,t,e);var l=f[0],u=f[1];if(f[3])throw l=0,u=0,At(f[2]);return s=l,r=u,vs(l,u)}finally{pt.__wbindgen_free(s,r,1)}}toJS(t){const e=pt.automerge_toJS(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}topoHistoryTraversal(){return pt.automerge_topoHistoryTraversal(this.__wbg_ptr)}unmark(t,e,s){const r=pt.automerge_unmark(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}updateBlock(t,e,s){const r=pt.automerge_updateBlock(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}updateDiffCursor(){pt.automerge_updateDiffCursor(this.__wbg_ptr)}updateSpans(t,e,s){const r=pt.automerge_updateSpans(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}updateText(t,e){const s=pt.automerge_updateText(this.__wbg_ptr,t,e);if(s[1])throw At(s[0])}}Symbol.dispose&&(gs.prototype[Symbol.dispose]=gs.prototype.free);class ki{static __wrap(t){t=t>>>0;const e=Object.create(ki.prototype);return e.__wbg_ptr=t,v1.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,v1.unregister(this),t}free(){const t=this.__destroy_into_raw();pt.__wbg_syncstate_free(t,0)}clone(){const t=pt.syncstate_clone(this.__wbg_ptr);return ki.__wrap(t)}get lastSentHeads(){return pt.syncstate_lastSentHeads(this.__wbg_ptr)}set lastSentHeads(t){const e=pt.syncstate_set_lastSentHeads(this.__wbg_ptr,t);if(e[1])throw At(e[0])}set sentHashes(t){const e=pt.syncstate_set_sentHashes(this.__wbg_ptr,t);if(e[1])throw At(e[0])}get sharedHeads(){return pt.syncstate_sharedHeads(this.__wbg_ptr)}}Symbol.dispose&&(ki.prototype[Symbol.dispose]=ki.prototype.free);function k8(i){const t=pt.create(i);if(t[2])throw At(t[1]);return gs.__wrap(t[0])}function D8(i){const t=pt.decodeChange(i);if(t[2])throw At(t[1]);return At(t[0])}function O8(i){const t=pt.decodeSyncMessage(i);if(t[2])throw At(t[1]);return At(t[0])}function R8(i){const t=pt.decodeSyncState(i);if(t[2])throw At(t[1]);return ki.__wrap(t[0])}function I8(i){const t=pt.encodeChange(i);if(t[2])throw At(t[1]);return At(t[0])}function N8(i){const t=pt.encodeSyncMessage(i);if(t[2])throw At(t[1]);return At(t[0])}function z8(i){return il(i,ki),pt.encodeSyncState(i.__wbg_ptr)}function P8(i){return il(i,ki),pt.exportSyncState(i.__wbg_ptr)}function B8(i){const t=pt.importSyncState(i);if(t[2])throw At(t[1]);return ki.__wrap(t[0])}function U8(){const i=pt.initSyncState();return ki.__wrap(i)}function H8(i,t){const e=pt.load(i,t);if(e[2])throw At(e[1]);return gs.__wrap(e[0])}function V8(i){const t=pt.readBundle(i);if(t[2])throw At(t[1]);return At(t[0])}function q8(){return pt.wasmReleaseInfo()}function j8(i){return BigInt(i)}function G8(i,t){return Error(vs(i,t))}function Z8(i,t){const e=String(t),s=Hs(e,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=Fi;Oi().setInt32(i+4,r,!0),Oi().setInt32(i+0,s,!0)}function W8(i){const t=i,e=typeof t=="boolean"?t:void 0;return Ai(e)?16777215:e?1:0}function Y8(i,t){const e=t0(t),s=Hs(e,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=Fi;Oi().setInt32(i+4,r,!0),Oi().setInt32(i+0,s,!0)}function X8(i,t){return i>t}function F8(i){return typeof i=="bigint"}function Q8(i){return typeof i=="function"}function K8(i){return i===null}function J8(i){const t=i;return typeof t=="object"&&t!==null}function $8(i){return typeof i=="string"}function tR(i){return i===void 0}function eR(i,t){return i==t}function nR(i,t){return i<t}function iR(i){return-i}function sR(i,t){const e=t,s=typeof e=="number"?e:void 0;Oi().setFloat64(i+8,Ai(s)?0:s,!0),Oi().setInt32(i+0,!Ai(s),!0)}function rR(i,t){const e=t,s=typeof e=="string"?e:void 0;var r=Ai(s)?0:Hs(s,pt.__wbindgen_malloc,pt.__wbindgen_realloc),l=Fi;Oi().setInt32(i+4,l,!0),Oi().setInt32(i+0,r,!0)}function oR(i,t){throw new Error(vs(i,t))}function aR(){return Ar(function(i,t,e){return Reflect.apply(i,t,e)},arguments)}function lR(i,t){return Object.assign(i,t)}function cR(){return Ar(function(i,t){return i.call(t)},arguments)}function uR(){return Ar(function(i,t,e){return i.call(t,e)},arguments)}function hR(i,t){return i.concat(t)}function fR(i,t,e){return Object.defineProperty(i,t,e)}function dR(){return Ar(function(i,t){return Reflect.deleteProperty(i,t)},arguments)}function pR(i){return i.done}function mR(i){return Object.entries(i)}function _R(i,t){let e,s;try{e=i,s=t,console.error(vs(i,t))}finally{pt.__wbindgen_free(e,s,1)}}function gR(i,t){return Symbol.for(vs(i,t))}function yR(i){return Object.freeze(i)}function vR(i){return Array.from(i)}function bR(){return Ar(function(i,t){globalThis.crypto.getRandomValues(dy(i,t))},arguments)}function wR(i){return i.getTime()}function xR(i,t){return i[t>>>0]}function SR(){return Ar(function(i,t){return Reflect.get(i,t)},arguments)}function TR(i){let t;try{t=i instanceof ArrayBuffer}catch{t=!1}return t}function AR(i){let t;try{t=i instanceof Date}catch{t=!1}return t}function ER(i){let t;try{t=i instanceof Object}catch{t=!1}return t}function CR(i){let t;try{t=i instanceof Uint8Array}catch{t=!1}return t}function LR(i){return Array.isArray(i)}function MR(i){return Array.isArray(i)}function kR(){return Symbol.iterator}function DR(i){return Object.keys(i)}function OR(i){return i.length}function RR(i){return i.length}function IR(i){return i.length}function NR(i){console.log(i)}function zR(i,t){console.log(i,t)}function PR(i){return new Date(i)}function BR(){return new Object}function UR(){return new Array}function HR(i,t){return new Error(vs(i,t))}function VR(){return new Error}function qR(i,t){return new RangeError(vs(i,t))}function jR(i){return new Uint8Array(i)}function GR(i,t){return new Uint8Array(dy(i,t))}function ZR(){return Ar(function(i){return i.next()},arguments)}function WR(i){return i.next}function YR(){return Ar(function(i){return Reflect.ownKeys(i)},arguments)}function XR(i,t,e){Uint8Array.prototype.set.call(dy(i,t),e)}function FR(i,t){return i.push(t)}function QR(i,t,e){i[t]=e}function KR(){return Ar(function(i,t,e){return Reflect.set(i,t,e)},arguments)}function JR(i,t,e){i[t>>>0]=e}function $R(i,t,e){return i.slice(t>>>0,e>>>0)}function t6(i,t){const e=t.stack,s=Hs(e,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=Fi;Oi().setInt32(i+4,r,!0),Oi().setInt32(i+0,s,!0)}function e6(i,t){const e=JSON.stringify(t);var s=Ai(e)?0:Hs(e,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=Fi;Oi().setInt32(i+4,r,!0),Oi().setInt32(i+0,s,!0)}function n6(){return Ar(function(i,t){return i.toString(t)},arguments)}function i6(i,t,e){const s=t.toString(e),r=Hs(s,pt.__wbindgen_malloc,pt.__wbindgen_realloc),l=Fi;Oi().setInt32(i+4,l,!0),Oi().setInt32(i+0,r,!0)}function s6(i){return i.toString()}function r6(i,t){return i.unshift(t)}function o6(i){return i.value}function a6(i){return Object.values(i)}function l6(i){return i}function c6(i){return i}function u6(i,t){return vs(i,t)}function h6(i){return BigInt.asUintN(64,i)}function f6(){const i=pt.__wbindgen_externrefs,t=i.grow(4);i.set(0,void 0),i.set(t+0,void 0),i.set(t+1,null),i.set(t+2,!0),i.set(t+3,!1)}const y1=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>pt.__wbg_automerge_free(i>>>0,1)),v1=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>pt.__wbg_syncstate_free(i>>>0,1));function d6(i){const t=pt.__externref_table_alloc();return pt.__wbindgen_externrefs.set(t,i),t}function il(i,t){if(!(i instanceof t))throw new Error(`expected instance of ${t.name}`)}function t0(i){const t=typeof i;if(t=="number"||t=="boolean"||i==null)return`${i}`;if(t=="string")return`"${i}"`;if(t=="symbol"){const r=i.description;return r==null?"Symbol":`Symbol(${r})`}if(t=="function"){const r=i.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(i)){const r=i.length;let l="[";r>0&&(l+=t0(i[0]));for(let u=1;u<r;u++)l+=", "+t0(i[u]);return l+="]",l}const e=/\[object ([^\]]+)\]/.exec(toString.call(i));let s;if(e&&e.length>1)s=e[1];else return toString.call(i);if(s=="Object")try{return"Object("+JSON.stringify(i)+")"}catch{return"Object"}return i instanceof Error?`${i.name}: ${i.message}
${i.stack}`:s}function dy(i,t){return i=i>>>0,eh().subarray(i/1,i/1+t)}let dc=null;function Oi(){return(dc===null||dc.buffer.detached===!0||dc.buffer.detached===void 0&&dc.buffer!==pt.memory.buffer)&&(dc=new DataView(pt.memory.buffer)),dc}function vs(i,t){return i=i>>>0,m6(i,t)}let _d=null;function eh(){return(_d===null||_d.byteLength===0)&&(_d=new Uint8Array(pt.memory.buffer)),_d}function Ar(i,t){try{return i.apply(this,t)}catch(e){const s=d6(e);pt.__wbindgen_exn_store(s)}}function Ai(i){return i==null}function Hs(i,t,e){if(e===void 0){const f=nh.encode(i),p=t(f.length,1)>>>0;return eh().subarray(p,p+f.length).set(f),Fi=f.length,p}let s=i.length,r=t(s,1)>>>0;const l=eh();let u=0;for(;u<s;u++){const f=i.charCodeAt(u);if(f>127)break;l[r+u]=f}if(u!==s){u!==0&&(i=i.slice(u)),r=e(r,s,s=u+i.length*3,1)>>>0;const f=eh().subarray(r+u,r+s),p=nh.encodeInto(i,f);u+=p.written,r=e(r,s,u,1)>>>0}return Fi=u,r}function At(i){const t=pt.__wbindgen_externrefs.get(i);return pt.__externref_table_dealloc(i),t}let Ed=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Ed.decode();const p6=2146435072;let xg=0;function m6(i,t){return xg+=t,xg>=p6&&(Ed=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),Ed.decode(),xg=t),Ed.decode(eh().subarray(i,i+t))}const nh=new TextEncoder;"encodeInto"in nh||(nh.encodeInto=function(i,t){const e=nh.encode(i);return t.set(e),{read:i.length,written:e.length}});let Fi=0,pt;function _6(i){pt=i}URL=globalThis.URL;const xt=await M8({"./automerge_wasm_bg.js":{__wbg_new_8a6f238a6ece86ea:VR,__wbg_stack_0ed75d68575b0f3c:t6,__wbg_error_7534b8e9a36f1ab4:_R,__wbg_String_8f0eb39a4a4c2f66:Z8,__wbg_set_3f1d0b984ed272ed:QR,__wbg_getRandomValues_1c61fac11405ffdc:bR,__wbg_log_6b5ca2e6124b2808:NR,__wbg_log_b948c93e3e66d64f:zR,__wbg_get_9b94d73e6221f75c:xR,__wbg_length_35a7bace40f36eac:RR,__wbg_new_3eb36ae241fe6f44:UR,__wbg_BigInt_b7bbccdff258c9f2:j8,__wbg_next_418f80d8f5303233:WR,__wbg_next_3482f54c49e8af19:ZR,__wbg_done_57b39ecd9addfe81:pR,__wbg_value_0546255b415e96c1:o6,__wbg_iterator_6ff6560ca1568e55:kR,__wbg_get_b3ed3ad4be2bc8ac:SR,__wbg_call_389efe28435a9388:cR,__wbg_new_361308b2356cecd0:BR,__wbg_length_68dc7c5cf1b6d349:IR,__wbg_set_f43e577aea94465b:JR,__wbg_from_bddd64e7d5ff6941:vR,__wbg_isArray_d314bb98fcf08331:MR,__wbg_push_8ffdcb2063340ba5:FR,__wbg_unshift_a4a28a3b4a2e621b:r6,__wbg_instanceof_ArrayBuffer_c367199e2fa2aa04:TR,__wbg_toString_3cadee6e7c22b39e:n6,__wbg_toString_56d946daff83867b:i6,__wbg_new_72b49615380db768:HR,__wbg_call_4708e0c13bdc8e95:uR,__wbg_instanceof_Date_1b9f15b87f10aa4c:AR,__wbg_getTime_1e3cd1391c5c3995:wR,__wbg_new_245cd5c49157e602:PR,__wbg_instanceof_Object_1c6af87502b733ed:ER,__wbg_assign_6170c0d04d5c26f4:lR,__wbg_defineProperty_fc8692a66be8fe2d:fR,__wbg_entries_58c7934c745daac7:mR,__wbg_freeze_661d9047fd889cd0:yR,__wbg_keys_b50a709a76add04e:DR,__wbg_values_5da93bc719d272cf:a6,__wbg_new_911dabf69fa7eb20:qR,__wbg_apply_2e22c45cb4f12415:aR,__wbg_deleteProperty_8c8a05da881fea59:dR,__wbg_ownKeys_c7100fb5fa376c6f:YR,__wbg_set_6cb8631f80447a67:KR,__wbg_concat_f6e5ebc81f4917f1:hR,__wbg_slice_b0fa09b1e0041d42:$R,__wbg_for_c3adefd268cb6f1c:gR,__wbg_toString_b388ecd2d3c517c3:s6,__wbg_length_32ed9a279acd054c:OR,__wbg_prototypesetcall_bdcdcc5842e4d77d:XR,__wbg_new_dd2b680c8bf6ae29:jR,__wbg_instanceof_Uint8Array_9b9075935c74707c:CR,__wbg_new_from_slice_a3d2629dc1826784:GR,__wbg___wbindgen_string_get_72fb696202c56729:rR,__wbg___wbindgen_boolean_get_bbbb1c18aa2f5e25:W8,__wbg___wbindgen_number_get_8ff4255516ccad3e:sR,__wbg___wbindgen_is_undefined_9e4d92534c42d778:tR,__wbg___wbindgen_debug_string_0bc8482c6e3508ae:Y8,__wbg_isArray_a2cef7634fcb7c0d:LR,__wbg_Error_8c4e43fe74559d73:G8,__wbg_stringify_e4a940b133e6b7d8:e6,__wbg___wbindgen_is_null_ac34f5003991759a:K8,__wbg___wbindgen_is_object_5ae8e5880f2c1fbd:J8,__wbg___wbindgen_is_function_0095a73b8b156f76:Q8,__wbg___wbindgen_is_string_cd444516edc5b180:$8,__wbg___wbindgen_is_bigint_31b12575b56f32fc:F8,__wbg___wbindgen_neg_6b4d356dff49dcc6:iR,__wbg___wbindgen_lt_bb59cc3d23526e0d:nR,__wbg___wbindgen_gt_d7bb3629eac381f5:X8,__wbg___wbindgen_throw_be289d5034ed271b:oR,__wbg___wbindgen_jsval_loose_eq_9dd77d8cd6671811:eR,__wbindgen_init_externref_table:f6,__wbindgen_cast_0000000000000001:l6,__wbindgen_cast_0000000000000002:c6,__wbindgen_cast_0000000000000003:u6,__wbindgen_cast_0000000000000004:h6}},L8),g6=xt.memory,y6=xt.__wbg_syncstate_free,v6=xt.syncstate_sharedHeads,b6=xt.syncstate_lastSentHeads,w6=xt.syncstate_set_lastSentHeads,x6=xt.syncstate_set_sentHashes,S6=xt.syncstate_clone,T6=xt.__wbg_automerge_free,A6=xt.automerge_new,E6=xt.automerge_clone,C6=xt.automerge_fork,L6=xt.automerge_pendingOps,M6=xt.automerge_commit,k6=xt.automerge_merge,D6=xt.automerge_rollback,O6=xt.automerge_keys,R6=xt.automerge_text,I6=xt.automerge_spans,N6=xt.automerge_splice,z6=xt.automerge_updateText,P6=xt.automerge_updateSpans,B6=xt.automerge_push,U6=xt.automerge_pushObject,H6=xt.automerge_insert,V6=xt.automerge_splitBlock,q6=xt.automerge_joinBlock,j6=xt.automerge_updateBlock,G6=xt.automerge_getBlock,Z6=xt.automerge_insertObject,W6=xt.automerge_put,Y6=xt.automerge_putObject,X6=xt.automerge_increment,F6=xt.automerge_get,Q6=xt.automerge_getWithType,K6=xt.automerge_objInfo,J6=xt.automerge_getAll,$6=xt.automerge_enableFreeze,t5=xt.automerge_registerDatatype,e5=xt.automerge_applyPatches,n5=xt.automerge_applyAndReturnPatches,i5=xt.automerge_diffIncremental,s5=xt.automerge_updateDiffCursor,r5=xt.automerge_resetDiffCursor,o5=xt.automerge_diff,a5=xt.automerge_diffPath,l5=xt.automerge_isolate,c5=xt.automerge_integrate,u5=xt.automerge_length,h5=xt.automerge_delete,f5=xt.automerge_save,d5=xt.automerge_saveIncremental,p5=xt.automerge_saveSince,m5=xt.automerge_saveNoCompress,_5=xt.automerge_saveAndVerify,g5=xt.automerge_loadIncremental,y5=xt.automerge_applyChanges,v5=xt.automerge_getChanges,b5=xt.automerge_getChangesMeta,w5=xt.automerge_getChangeByHash,x5=xt.automerge_getChangeMetaByHash,S5=xt.automerge_getDecodedChangeByHash,T5=xt.automerge_getChangesAdded,A5=xt.automerge_getHeads,E5=xt.automerge_getActorId,C5=xt.automerge_getLastLocalChange,L5=xt.automerge_dump,M5=xt.automerge_getMissingDeps,k5=xt.automerge_receiveSyncMessage,D5=xt.automerge_generateSyncMessage,O5=xt.automerge_toJS,R5=xt.automerge_materialize,I5=xt.automerge_getCursor,N5=xt.automerge_getCursorPosition,z5=xt.automerge_emptyChange,P5=xt.automerge_mark,B5=xt.automerge_unmark,U5=xt.automerge_marks,H5=xt.automerge_marksAt,V5=xt.automerge_hasOurChanges,q5=xt.automerge_topoHistoryTraversal,j5=xt.automerge_stats,G5=xt.automerge_saveBundle,Z5=xt.create,W5=xt.load,Y5=xt.wasmReleaseInfo,X5=xt.encodeChange,F5=xt.decodeChange,Q5=xt.initSyncState,K5=xt.importSyncState,J5=xt.exportSyncState,$5=xt.encodeSyncMessage,tI=xt.decodeSyncMessage,eI=xt.encodeSyncState,nI=xt.decodeSyncState,iI=xt.readBundle,sI=xt.__wbindgen_malloc,rI=xt.__wbindgen_realloc,oI=xt.__wbindgen_exn_store,aI=xt.__externref_table_alloc,lI=xt.__wbindgen_externrefs,cI=xt.__wbindgen_free,uI=xt.__externref_table_dealloc,jT=xt.__wbindgen_start,hI=Object.freeze(Object.defineProperty({__proto__:null,__externref_table_alloc:aI,__externref_table_dealloc:uI,__wbg_automerge_free:T6,__wbg_syncstate_free:y6,__wbindgen_exn_store:oI,__wbindgen_externrefs:lI,__wbindgen_free:cI,__wbindgen_malloc:sI,__wbindgen_realloc:rI,__wbindgen_start:jT,automerge_applyAndReturnPatches:n5,automerge_applyChanges:y5,automerge_applyPatches:e5,automerge_clone:E6,automerge_commit:M6,automerge_delete:h5,automerge_diff:o5,automerge_diffIncremental:i5,automerge_diffPath:a5,automerge_dump:L5,automerge_emptyChange:z5,automerge_enableFreeze:$6,automerge_fork:C6,automerge_generateSyncMessage:D5,automerge_get:F6,automerge_getActorId:E5,automerge_getAll:J6,automerge_getBlock:G6,automerge_getChangeByHash:w5,automerge_getChangeMetaByHash:x5,automerge_getChanges:v5,automerge_getChangesAdded:T5,automerge_getChangesMeta:b5,automerge_getCursor:I5,automerge_getCursorPosition:N5,automerge_getDecodedChangeByHash:S5,automerge_getHeads:A5,automerge_getLastLocalChange:C5,automerge_getMissingDeps:M5,automerge_getWithType:Q6,automerge_hasOurChanges:V5,automerge_increment:X6,automerge_insert:H6,automerge_insertObject:Z6,automerge_integrate:c5,automerge_isolate:l5,automerge_joinBlock:q6,automerge_keys:O6,automerge_length:u5,automerge_loadIncremental:g5,automerge_mark:P5,automerge_marks:U5,automerge_marksAt:H5,automerge_materialize:R5,automerge_merge:k6,automerge_new:A6,automerge_objInfo:K6,automerge_pendingOps:L6,automerge_push:B6,automerge_pushObject:U6,automerge_put:W6,automerge_putObject:Y6,automerge_receiveSyncMessage:k5,automerge_registerDatatype:t5,automerge_resetDiffCursor:r5,automerge_rollback:D6,automerge_save:f5,automerge_saveAndVerify:_5,automerge_saveBundle:G5,automerge_saveIncremental:d5,automerge_saveNoCompress:m5,automerge_saveSince:p5,automerge_spans:I6,automerge_splice:N6,automerge_splitBlock:V6,automerge_stats:j5,automerge_text:R6,automerge_toJS:O5,automerge_topoHistoryTraversal:q5,automerge_unmark:B5,automerge_updateBlock:j6,automerge_updateDiffCursor:s5,automerge_updateSpans:P6,automerge_updateText:z6,create:Z5,decodeChange:F5,decodeSyncMessage:tI,decodeSyncState:nI,encodeChange:X5,encodeSyncMessage:$5,encodeSyncState:eI,exportSyncState:J5,importSyncState:K5,initSyncState:Q5,load:W5,memory:g6,readBundle:iI,syncstate_clone:S6,syncstate_lastSentHeads:b6,syncstate_set_lastSentHeads:w6,syncstate_set_sentHashes:x6,syncstate_sharedHeads:v6,wasmReleaseInfo:Y5},Symbol.toStringTag,{value:"Module"}));_6(hI);jT();const fI=Object.freeze(Object.defineProperty({__proto__:null,Automerge:gs,SyncState:ki,create:k8,decodeChange:D8,decodeSyncMessage:O8,decodeSyncState:R8,encodeChange:I8,encodeSyncMessage:N8,encodeSyncState:z8,exportSyncState:P8,importSyncState:B8,initSyncState:U8,load:H8,readBundle:V8,wasmReleaseInfo:q8},Symbol.toStringTag,{value:"Module"}));CO(fI);var yc=null;typeof WebSocket<"u"?yc=WebSocket:typeof MozWebSocket<"u"?yc=MozWebSocket:typeof global<"u"?yc=global.WebSocket||global.MozWebSocket:typeof window<"u"?yc=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(yc=self.WebSocket||self.MozWebSocket);const Sg=yc,dI=i=>i.type==="peer",pI=i=>i.type==="error",mI="1";function eo(i,t="Assertion failed"){if(i===!1||i===null||i===void 0){const e=new Error(_I(t));throw e.stack=gI(e.stack,"assert.ts"),e}}const _I=i=>i.split(`
`).map(t=>t.trim()).join(`
`),gI=(i="",t)=>i.split(`
`).filter(e=>!e.includes(t)).join(`
`),yI=i=>{const{buffer:t,byteOffset:e,byteLength:s}=i;return t.slice(e,e+s)};class vI extends C8{socket}class bI extends vI{url;retryInterval;#e=!1;#t;#i=new Promise(t=>{this.#t=t});isReady(){return this.#e}whenReady(){return this.#i}#n(){this.#e||(this.#e=!0,this.#t?.())}#s;#r=fo("automerge-repo:websocket:browser");remotePeerId;constructor(t,e=5e3){super(),this.url=t,this.retryInterval=e,this.#r=this.#r.extend(t)}connect(t,e){!this.socket||!this.peerId?(this.#r("connecting"),this.peerId=t,this.peerMetadata=e??{}):(this.#r("reconnecting"),eo(t===this.peerId),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError)),this.#s||(this.#s=setInterval(()=>{this.connect(t,e)},this.retryInterval)),this.socket=new Sg(this.url),this.socket.binaryType="arraybuffer",this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("error",this.onError),setTimeout(()=>this.#n(),1e3),this.join()}onOpen=()=>{this.#r("open"),clearInterval(this.#s),this.#s=void 0,this.join()};onClose=()=>{this.#r("close"),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.retryInterval>0&&!this.#s&&setTimeout(()=>(eo(this.peerId),this.connect(this.peerId,this.peerMetadata)),this.retryInterval)};onMessage=t=>{this.receiveMessage(t.data)};onError=t=>{if("error"in t&&t.error.code!=="ECONNREFUSED")throw t.error;this.#r("Connection failed, retrying...")};join(){eo(this.peerId),eo(this.socket),this.socket.readyState===Sg.OPEN&&this.send(wI(this.peerId,this.peerMetadata))}disconnect(){eo(this.peerId),eo(this.socket);const t=this.socket;t&&(t.removeEventListener("open",this.onOpen),t.removeEventListener("close",this.onClose),t.removeEventListener("message",this.onMessage),t.removeEventListener("error",this.onError),t.close()),clearInterval(this.#s),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.socket=void 0}send(t){if("data"in t&&t.data?.byteLength===0)throw new Error("Tried to send a zero-length message");if(eo(this.peerId),!this.socket){this.#r("Tried to send on a disconnected socket.");return}if(this.socket.readyState!==Sg.OPEN)throw new Error(`Websocket not ready (${this.socket.readyState})`);const e=PT(t);this.socket.send(yI(e))}peerCandidate(t,e){eo(this.socket),this.#n(),this.remotePeerId=t,this.emit("peer-candidate",{peerId:t,peerMetadata:e})}receiveMessage(t){let e;try{e=Q4(new Uint8Array(t))}catch(s){this.#r("error decoding message:",s);return}if(eo(this.socket),t.byteLength===0)throw new Error("received a zero-length message");if(dI(e)){const{peerMetadata:s}=e;this.#r(`peer: ${e.senderId}`),this.peerCandidate(e.senderId,s)}else pI(e)?this.#r(`error: ${e.message}`):this.emit("message",e)}}function wI(i,t){return{type:"join",senderId:i,peerMetadata:t,supportedProtocolVersions:[mI]}}fo("WebsocketServer");const GT=new E8({network:[new bI("wss://sync.automerge.org")]}),xI=()=>`user-${Math.random().toString(36).substring(2,11)}`,SI=()=>{let i=sessionStorage.getItem("automerge-user-id");return i||(i=xI(),sessionStorage.setItem("automerge-user-id",i)),i},TI=()=>{const[i,t]=It.useState(null),[e]=It.useState(()=>SI());It.useEffect(()=>{(async()=>{const B=new URLSearchParams(window.location.search).get("doc");if(B){const D=`automerge:${B}`;console.log("Joining existing document:",B),t(D)}else{console.log("Creating new document...");const D=GT.create();D.change(Z=>{Z.users={}});const F=D.url;t(F);const R=F.split(":")[1],H=`${window.location.pathname}?doc=${R}`;window.history.pushState({},"",H),console.log("Created new document:",R),console.log("Share this URL with others to collaborate!")}})()},[]);const[s,r]=BA(i);It.useEffect(()=>{if(!r)return;const E=()=>{r(D=>{D.users||(D.users={});const F=Date.now(),R=!document.hidden;if(D.users[e])D.users[e].lastSeen=F,R?D.users[e].hiddenSince!==void 0&&delete D.users[e].hiddenSince:D.users[e].hiddenSince===void 0&&(D.users[e].hiddenSince=F);else{const H={id:e,connectedAt:F,lastSeen:F};R||(H.hiddenSince=F),D.users[e]=H}})};E();const I=setInterval(E,5e3),B=()=>{E()};return document.addEventListener("visibilitychange",B),()=>{clearInterval(I),document.removeEventListener("visibilitychange",B)}},[r,e]);const l=It.useMemo(()=>{if(!s?.users)return[];const E=Date.now(),I=9e4,B=3e4;return Object.values(s.users).filter(D=>E-D.lastSeen<I).map(D=>{const F=D.hiddenSince===void 0||E-D.hiddenSince<B;return{...D,isActive:F}})},[s?.users]),u=It.useCallback(E=>{r&&r(I=>{I.users||(I.users={}),I.users[e]&&(I.users[e].name=E)})},[r,e]),f=It.useCallback((E,I)=>{r&&r(B=>{B.users||(B.users={}),B.users[e]&&(B.users[e].position={lat:E,lng:I})})},[r,e]),p=It.useMemo(()=>s?.shapes?Object.values(s.shapes):[],[s?.shapes]),m=It.useCallback((E,I,B=null)=>{const D=`shape-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;return r&&r(F=>{F.shapes||(F.shapes={}),F.shapes[D]={id:D,type:E,coordinates:I,soundId:B,createdBy:e,createdAt:Date.now()}}),D},[r,e]),v=It.useCallback((E,I)=>{r&&r(B=>{B.shapes&&B.shapes[E]&&(B.shapes[E].soundId=I)})},[r]),y=It.useCallback((E,I)=>{r&&r(B=>{B.shapes&&B.shapes[E]&&(B.shapes[E].coordinates=I)})},[r]),w=It.useCallback(E=>{r&&r(I=>{I.shapes&&I.shapes[E]&&delete I.shapes[E]})},[r]),T=It.useCallback(()=>{r&&r(E=>{E.shapes={}})},[r]),x=It.useCallback(E=>{r&&r(I=>{I.transport=E})},[r]),A=It.useCallback(()=>{r&&r(E=>{E.transport||(E.transport={startTime:null,bpm:120,isPlaying:!1,pausedPosition:0})})},[r]);return{doc:s,changeDoc:r,userId:e,connectedUsers:l,connectedUserCount:l.length,updateUserName:u,updateUserPosition:f,syncedShapes:p,addShape:m,updateShapeSound:v,updateShapeCoordinates:y,deleteShape:w,clearAllShapes:T,updateTransportState:x,initializeTransportIfNeeded:A,isReady:!!s}},gd={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},AI=(i=gd)=>{const[t,e]=It.useState({latitude:null,longitude:null,accuracy:null,error:null,isWatching:!1}),s=It.useRef(null),r=It.useRef(i);r.current=i;const l=It.useCallback(v=>{e({latitude:v.coords.latitude,longitude:v.coords.longitude,accuracy:v.coords.accuracy,error:null,isWatching:!0})},[]),u=It.useCallback(v=>{let y;switch(v.code){case v.PERMISSION_DENIED:y="Location permission denied. Please enable location access in your browser settings.";break;case v.POSITION_UNAVAILABLE:y="Location information unavailable. Please check your device settings.";break;case v.TIMEOUT:y="Location request timed out. Please try again.";break;default:y="An unknown error occurred while getting location."}e(w=>({...w,error:y,isWatching:!1}))},[]),f=It.useCallback(()=>{if(!navigator.geolocation){e(y=>({...y,error:"Geolocation is not supported by your browser.",isWatching:!1}));return}s.current!==null&&navigator.geolocation.clearWatch(s.current);const v=r.current;s.current=navigator.geolocation.watchPosition(l,u,{enableHighAccuracy:v.enableHighAccuracy??gd.enableHighAccuracy,timeout:v.timeout??gd.timeout,maximumAge:v.maximumAge??gd.maximumAge}),e(y=>({...y,isWatching:!0,error:null}))},[l,u]),p=It.useCallback(()=>{s.current!==null&&(navigator.geolocation.clearWatch(s.current),s.current=null),e(v=>({...v,isWatching:!1}))},[]);It.useEffect(()=>()=>{s.current!==null&&navigator.geolocation.clearWatch(s.current)},[]);const m=typeof navigator<"u"&&"geolocation"in navigator;return{...t,isSupported:m,startWatching:f,stopWatching:p}};window.type=!0;function EI(){const{connectedUserCount:i,connectedUsers:t,userId:e,updateUserName:s,updateUserPosition:r,syncedShapes:l,addShape:u,updateShapeSound:f,updateShapeCoordinates:p,deleteShape:m,clearAllShapes:v,updateTransportState:y,initializeTransportIfNeeded:w,doc:T,isReady:x}=TI(),[A,E]=It.useState(!1),[I,B]=It.useState(""),[D,F]=It.useState(()=>{const k=localStorage.getItem("gpsound-location-mode");return k==="gps"||k==="manual"?k:"manual"}),[R,H]=It.useState(!1),{latitude:Z,longitude:q,accuracy:V,error:W,isWatching:X,isSupported:tt,startWatching:P,stopWatching:J}=AI({enableHighAccuracy:!0,timeout:15e3,maximumAge:5e3});It.useEffect(()=>{D==="gps"&&Z!==null&&q!==null&&r(Z,q)},[D,Z,q,r]),It.useEffect(()=>{D==="gps"?P():J()},[D,P,J]),It.useEffect(()=>{localStorage.setItem("gpsound-location-mode",D)},[D]);const $=k=>{F(k)},Y=t.find(k=>k.id===e)?.name||"";I===""&&Y!==""&&B(Y);const et=k=>{const j=k.target.value;B(j),s(j)};return Tt.jsxs(Tt.Fragment,{children:[Tt.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",color:"#1f2937",minWidth:"200px",overflow:"hidden"},children:[Tt.jsx("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e5e7eb",borderRadius:"12px 12px 0 0"},children:Tt.jsx("input",{type:"text",placeholder:"Enter your name...",value:I,onChange:et,disabled:!x,style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",fontFamily:"inherit",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"},onFocus:k=>k.target.style.borderColor="#3b82f6",onBlur:k=>k.target.style.borderColor="#d1d5db"})}),Tt.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e5e7eb"},children:[Tt.jsxs("div",{onClick:()=>H(!R),style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",userSelect:"none"},children:[Tt.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[Tt.jsx("span",{style:{fontSize:"14px"},children:D==="gps"?"":""}),Tt.jsx("span",{style:{fontSize:"13px",fontWeight:500},children:D==="gps"?"GPS Location":"Manual Location"}),D==="gps"&&X&&Tt.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#22c55e",animation:"pulse 2s infinite"}})]}),Tt.jsx("span",{style:{fontSize:"12px",transition:"transform 0.2s",transform:R?"rotate(180deg)":"rotate(0deg)"},children:""})]}),R&&Tt.jsxs("div",{style:{marginTop:"10px"},children:[Tt.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[Tt.jsx("button",{onClick:()=>$("manual"),style:{flex:1,padding:"6px 10px",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:"pointer",backgroundColor:D==="manual"?"#3b82f6":"#e5e7eb",color:D==="manual"?"white":"#4b5563",transition:"all 0.2s"},children:" Manual"}),Tt.jsx("button",{onClick:()=>$("gps"),disabled:!tt,style:{flex:1,padding:"6px 10px",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:tt?"pointer":"not-allowed",backgroundColor:D==="gps"?"#3b82f6":"#e5e7eb",color:D==="gps"?"white":"#4b5563",opacity:tt?1:.5,transition:"all 0.2s"},children:" GPS"})]}),D==="gps"&&Tt.jsx("div",{style:{fontSize:"11px",color:"#6b7280",padding:"6px 8px",backgroundColor:"#f9fafb",borderRadius:"4px"},children:W?Tt.jsxs("div",{style:{color:"#ef4444"},children:[" ",W]}):X&&Z!==null?Tt.jsxs(Tt.Fragment,{children:[Tt.jsxs("div",{children:["Lat: ",Z.toFixed(6)]}),Tt.jsxs("div",{children:["Lng: ",q?.toFixed(6)]}),V&&Tt.jsxs("div",{style:{marginTop:"2px",color:"#9ca3af"},children:["Accuracy: ",V.toFixed(0),"m"]})]}):Tt.jsx("div",{children:"Acquiring location..."})}),Tt.jsx("div",{style:{fontSize:"10px",color:"#9ca3af",marginTop:"6px"},children:D==="manual"?"Drag your marker on the map to set position":"Your position updates automatically from GPS"}),!tt&&Tt.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginTop:"4px"},children:"GPS not supported in this browser"})]})]}),Tt.jsxs("div",{onClick:()=>E(!A),style:{padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none",transition:"background-color 0.2s",borderRadius:A?"0":"0 0 12px 12px"},onMouseEnter:k=>k.currentTarget.style.backgroundColor="#f3f4f6",onMouseLeave:k=>k.currentTarget.style.backgroundColor="transparent",children:[Tt.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:x?"#22c55e":"#94a3b8",animation:x?"pulse 2s infinite":"none"}}),Tt.jsx("span",{style:{fontWeight:500,flex:1},children:x?Tt.jsxs(Tt.Fragment,{children:[i," ",i===1?"user":"users"," connected"]}):"Connecting..."}),Tt.jsx("span",{style:{fontSize:"12px",transition:"transform 0.2s",transform:A?"rotate(180deg)":"rotate(0deg)"},children:""})]}),A&&x&&Tt.jsx("div",{style:{borderTop:"1px solid #e5e7eb",maxHeight:"300px",overflowY:"auto",borderRadius:"0 0 12px 12px"},children:t.map((k,j)=>{const O=k.id===e,G=j===t.length-1,ot=k.isActive!==!1;return Tt.jsxs("div",{style:{padding:"8px 12px",backgroundColor:O?"#eff6ff":"transparent",borderLeft:O?"3px solid #3b82f6":"3px solid transparent",borderRadius:G?"0 0 12px 12px":"0",opacity:ot?1:.7},children:[Tt.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[Tt.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:ot?"#22c55e":"#94a3b8",flexShrink:0}}),Tt.jsxs("div",{style:{fontWeight:O?600:400,color:"#1f2937",flex:1},children:[k.name||"Anonymous",O&&Tt.jsx("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#6b7280",fontWeight:400},children:"(you)"}),!ot&&Tt.jsx("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#9ca3af",fontWeight:400,fontStyle:"italic"},children:"away"})]})]}),Tt.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"2px",marginLeft:"12px"},children:[k.id.substring(0,12),"..."]})]},k.id)})})]}),Tt.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `}),Tt.jsx(pO,{connectedUsers:t,currentUserId:e,updateUserPosition:r,syncedShapes:l,addShape:u,updateShapeSound:f,updateShapeCoordinates:p,deleteShape:m,clearAllShapes:v,updateTransportState:y,initializeTransportIfNeeded:w,transportState:T?.transport,locationMode:D})]})}_A.createRoot(document.getElementById("root")).render(Tt.jsx(It.StrictMode,{children:Tt.jsx(b1.Provider,{value:GT,children:Tt.jsx(EI,{})})}));
//# sourceMappingURL=index-lwVzfpdS.js.map
